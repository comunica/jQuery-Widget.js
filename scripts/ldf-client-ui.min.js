/*! For license information please see ldf-client-ui.min.js.LICENSE.txt */
(()=>{var __webpack_modules__={1711:function(e,t,r){var i=r(2830);(function(){var e,t,r,n,o={}.hasOwnProperty;(n=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return"OPTGROUP"===e.nodeName.toUpperCase()?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,r,i,n,o,s;for(t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:this.escapeExpression(e.label),children:0,disabled:e.disabled}),s=[],i=0,n=(o=e.childNodes).length;i<n;i++)r=o[i],s.push(this.add_option(r,t,e.disabled));return s},e.prototype.add_option=function(e,t,r){if("OPTION"===e.nodeName.toUpperCase())return""!==e.text?(null!=t&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected,disabled:!0===r?r:e.disabled,group_array_index:t,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},e.prototype.escapeExpression=function(e){var t,r;return null==e||!1===e?"":/[\&\<\>\"\'\`]/.test(e)?(t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r=/&(?!\w+;)|[\<\>\"\'\`]/g,e.replace(r,(function(e){return t[e]||"&amp;"}))):e},e}()).select_to_array=function(e){var t,r,i,o,s;for(r=new n,i=0,o=(s=e.childNodes).length;i<o;i++)t=s[i],r.add_node(t);return r.parsed},t=function(){function e(t,r){this.form_field=t,this.options=null!=r?r:{},e.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return e.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options,this.create_option=this.options.create_option||!1,this.persistent_create_option=this.options.persistent_create_option||!1,this.skip_no_results=this.options.skip_no_results||!1},e.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||e.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||e.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||e.default_no_result_text,this.create_option_text=this.form_field.getAttribute("data-create_option_text")||this.options.create_option_text||e.default_create_option_text},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(e){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout((function(){return t.container_mousedown()}),50)}else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(e){var t=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout((function(){return t.blur_test()}),100)},e.prototype.results_option_build=function(e){var t,r,i,n,o;for(t="",i=0,n=(o=this.results_data).length;i<n;i++)(r=o[i]).group?t+=this.result_add_group(r):t+=this.result_add_option(r),(null!=e?e.first:void 0)&&(r.selected&&this.is_multiple?this.choice_build(r):r.selected&&!this.is_multiple&&this.single_set_selected_item(r));return t},e.prototype.result_add_option=function(e){var t,r;return e.search_match&&this.include_option_in_results(e)?(t=[],e.disabled||e.selected&&this.is_multiple||t.push("active-result"),!e.disabled||e.selected&&this.is_multiple||t.push("disabled-result"),e.selected&&t.push("result-selected"),null!=e.group_array_index&&t.push("group-option"),""!==e.classes&&t.push(e.classes),(r=document.createElement("li")).className=t.join(" "),r.style.cssText=e.style,r.setAttribute("data-option-array-index",e.array_index),r.innerHTML=e.search_text,this.outerHTML(r)):""},e.prototype.result_add_group=function(e){var t;return(e.search_match||e.group_match)&&e.active_options>0?((t=document.createElement("li")).className="group-result",t.innerHTML=e.search_text,this.outerHTML(t)):""},e.prototype.append_option=function(e){return this.select_append_option(e)},e.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing)return this.winnow_results()},e.prototype.reset_single_select_options=function(){var e,t,r,i,n;for(n=[],t=0,r=(i=this.results_data).length;t<r;t++)(e=i[t]).selected?n.push(e.selected=!1):n.push(void 0);return n},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(e){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.winnow_results=function(){var e,t,r,i,n,o,s,a,u,l,c,h,p,d,f;for(this.no_results_clear(),s=0,r=!1,t=(u=this.get_search_text()).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),o=this.search_contains?"":"^",n=new RegExp(o+t,"i"),h=new RegExp(t,"i"),e=new RegExp("^"+t+"$","i"),p=0,d=(f=this.results_data).length;p<d;p++)(i=f[p]).search_match=!1,a=null,this.include_option_in_results(i)&&(i.group&&(i.group_match=!1,i.active_options=0),null!=i.group_array_index&&this.results_data[i.group_array_index]&&(0===(a=this.results_data[i.group_array_index]).active_options&&a.search_match&&(s+=1),a.active_options+=1),i.group&&!this.group_search||(i.search_text=i.group?i.label:i.html,i.search_match=this.search_string_match(i.search_text,n),i.search_match&&!i.group&&(s+=1),r=e.test(i.html),i.search_match?(u.length&&(l=i.search_text.search(h),c=i.search_text.substr(0,l+u.length)+"</em>"+i.search_text.substr(l+u.length),i.search_text=c.substr(0,l)+"<em>"+c.substr(l)),null!=a&&(a.group_match=!0)):null!=i.group_array_index&&this.results_data[i.group_array_index].search_match&&(i.search_match=!0)));this.result_clear_highlight(),s<1&&u.length?(this.update_results_content(""),this.create_option&&this.skip_no_results||this.no_results(u)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight()),this.create_option&&(s<1||!r&&this.persistent_create_option)&&u.length&&(this.show_create_option(u),s<1&&this.result_do_highlight(this.search_results.find(".create-option")))},e.prototype.search_string_match=function(e,t){var r,i,n,o;if(t.test(e))return!0;if(this.enable_split_word_search&&(e.indexOf(" ")>=0||0===e.indexOf("["))&&(i=e.replace(/\[|\]/g,"").split(" ")).length)for(n=0,o=i.length;n<o;n++)if(r=i[n],t.test(r))return!0},e.prototype.choices_count=function(){var e,t,r;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,e=0,t=(r=this.form_field.options).length;e<t;e++)r[e].selected&&(this.selected_option_count+=1);return this.selected_option_count},e.prototype.choices_click=function(e){if(e.preventDefault(),!this.results_showing&&!this.is_disabled)return this.results_show()},e.prototype.keyup_checker=function(e){var t,r;switch(t=null!=(r=e.which)?r:e.keyCode,this.search_field_scale(),t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(e.preventDefault(),this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.clipboard_event_checker=function(e){var t=this;return setTimeout((function(){return t.results_search()}),50)},e.prototype.container_width=function(){return null!=this.options.width?this.options.width:this.form_field.offsetWidth+"px"},e.prototype.include_option_in_results=function(e){return!(this.is_multiple&&!this.display_selected_options&&e.selected||!this.display_disabled_options&&e.disabled||e.empty)},e.prototype.search_results_touchstart=function(e){return this.touch_started=!0,this.search_results_mouseover(e)},e.prototype.search_results_touchmove=function(e){return this.touch_started=!1,this.search_results_mouseout(e)},e.prototype.search_results_touchend=function(e){if(this.touch_started)return this.search_results_mouseup(e)},e.prototype.outerHTML=function(e){var t;return e.outerHTML?e.outerHTML:((t=document.createElement("div")).appendChild(e),t.innerHTML)},e.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:!(/iP(od|hone)/i.test(window.navigator.userAgent)||/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent))},e.default_multiple_text="Select Some Options",e.default_single_text="Select an Option",e.default_no_result_text="No results match",e.default_create_option_text="Add Option",e}(),(e=i).fn.extend({chosen:function(i){return t.browser_is_supported()?this.each((function(t){var n,o;o=(n=e(this)).data("chosen"),"destroy"===i&&o?o.destroy():o||n.data("chosen",new r(this,i))})):this}}),r=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,t),r.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},r.prototype.set_up_html=function(){var t,r;return(t=["chosen"]).push("chosen-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chosen-rtl"),r={class:t.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(r.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=e("<div />",r),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},r.prototype.register_observers=function(){var e=this;return this.container.bind("mousedown.chosen",(function(t){e.container_mousedown(t)})),this.container.bind("mouseup.chosen",(function(t){e.container_mouseup(t)})),this.container.bind("mouseenter.chosen",(function(t){e.mouse_enter(t)})),this.container.bind("mouseleave.chosen",(function(t){e.mouse_leave(t)})),this.search_results.bind("mouseup.chosen",(function(t){e.search_results_mouseup(t)})),this.search_results.bind("mouseover.chosen",(function(t){e.search_results_mouseover(t)})),this.search_results.bind("mouseout.chosen",(function(t){e.search_results_mouseout(t)})),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",(function(t){e.search_results_mousewheel(t)})),this.search_results.bind("touchstart.chosen",(function(t){e.search_results_touchstart(t)})),this.search_results.bind("touchmove.chosen",(function(t){e.search_results_touchmove(t)})),this.search_results.bind("touchend.chosen",(function(t){e.search_results_touchend(t)})),this.form_field_jq.bind("chosen:updated.chosen",(function(t){e.results_update_field(t)})),this.form_field_jq.bind("chosen:activate.chosen",(function(t){e.activate_field(t)})),this.form_field_jq.bind("chosen:open.chosen",(function(t){e.container_mousedown(t)})),this.form_field_jq.bind("chosen:close.chosen",(function(t){e.input_blur(t)})),this.search_field.bind("blur.chosen",(function(t){e.input_blur(t)})),this.search_field.bind("keyup.chosen",(function(t){e.keyup_checker(t)})),this.search_field.bind("keydown.chosen",(function(t){e.keydown_checker(t)})),this.search_field.bind("focus.chosen",(function(t){e.input_focus(t)})),this.search_field.bind("cut.chosen",(function(t){e.clipboard_event_checker(t)})),this.search_field.bind("paste.chosen",(function(t){e.clipboard_event_checker(t)})),this.is_multiple?this.search_choices.bind("click.chosen",(function(t){e.choices_click(t)})):this.container.bind("click.chosen",(function(e){e.preventDefault()}))},r.prototype.destroy=function(){return e(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},r.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},r.prototype.container_mousedown=function(t){if(!this.is_disabled&&(t&&"mousedown"===t.type&&!this.results_showing&&t.preventDefault(),null==t||!e(t.target).hasClass("search-choice-close")))return this.active_field?this.is_multiple||!t||e(t.target)[0]!==this.selected_item[0]&&!e(t.target).parents("a.chosen-single").length||(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field()},r.prototype.container_mouseup=function(e){if("ABBR"===e.target.nodeName&&!this.is_disabled)return this.results_reset(e)},r.prototype.search_results_mousewheel=function(e){var t;if(e.originalEvent&&(t=-e.originalEvent.wheelDelta||e.originalEvent.detail),null!=t)return e.preventDefault(),"DOMMouseScroll"===e.type&&(t*=40),this.search_results.scrollTop(t+this.search_results.scrollTop())},r.prototype.blur_test=function(e){if(!this.active_field&&this.container.hasClass("chosen-active"))return this.close_field()},r.prototype.close_field=function(){return e(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},r.prototype.activate_field=function(){return this.container.addClass("chosen-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},r.prototype.test_active_click=function(t){var r;return(r=e(t.target).closest(".chosen")).length&&this.container[0]===r[0]?this.active_field=!0:this.close_field()},r.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=n.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_item(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold&&!this.create_option?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},r.prototype.result_do_highlight=function(e){var t,r,i,n,o;if(e.length){if(this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),n=(i=parseInt(this.search_results.css("maxHeight"),10))+(o=this.search_results.scrollTop()),(t=(r=this.result_highlight.position().top+this.search_results.scrollTop())+this.result_highlight.outerHeight())>=n)return this.search_results.scrollTop(t-i>0?t-i:0);if(r<o)return this.search_results.scrollTop(r)}},r.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},r.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},r.prototype.update_results_content=function(e){return this.search_results.html(e)},r.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},r.prototype.set_tab_index=function(e){var t;if(this.form_field.tabIndex)return t=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=t},r.prototype.set_label_behavior=function(){var t=this;if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=e("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0)return this.form_field_label.bind("click.chosen",(function(e){return t.is_multiple?t.container_mousedown(e):t.activate_field()}))},r.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},r.prototype.search_results_mouseup=function(t){var r;if((r=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first()).length)return this.result_highlight=r,this.result_select(t),this.search_field.focus()},r.prototype.search_results_mouseover=function(t){var r;if(r=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first())return this.result_do_highlight(r)},r.prototype.search_results_mouseout=function(t){if(e(t.target).hasClass("active-result"))return this.result_clear_highlight()},r.prototype.choice_build=function(t){var r,i,n=this;r=e("<li />",{class:"search-choice"}).html("<span>"+t.html+"</span>");for(var o=t.classes.split(" "),s=0;s<o.length;s++)r.addClass(o[s]);return t.disabled?r.addClass("search-choice-disabled"):((i=e("<a />",{class:"search-choice-close","data-option-array-index":t.array_index})).bind("click.chosen",(function(e){return n.choice_destroy_link_click(e)})),r.append(i)),this.search_container.before(r)},r.prototype.choice_destroy_link_click=function(t){if(t.preventDefault(),t.stopPropagation(),!this.is_disabled)return this.choice_destroy(e(t.target))},r.prototype.choice_destroy=function(e){if(this.result_deselect(e[0].getAttribute("data-option-array-index")))return this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),e.parents("li").first().remove(),this.search_field_scale()},r.prototype.results_reset=function(){if(this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_item(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field)return this.results_hide()},r.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},r.prototype.result_select=function(e){var t,r;if(this.result_highlight)return(t=this.result_highlight).hasClass("create-option")?(this.select_create_option(this.search_field.val()),this.results_hide()):(this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?t.removeClass("active-result"):this.reset_single_select_options(),(r=this.results_data[t[0].getAttribute("data-option-array-index")]).selected=!0,this.form_field.options[r.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(r):this.single_set_selected_item(r),(e.metaKey||e.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[r.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale()))},r.prototype.single_set_selected_item=function(e){var t;(t=null==e?this.default_text:e.text)===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default"));var r=e?e.classes.split(" "):[],i=this.selected_item.find("span");i.removeAttr("class");for(var n=0;n<r.length;n++)i.addClass(r[n]);return i.text(t)},r.prototype.result_deselect=function(e){var t;return t=this.results_data[e],!this.form_field.options[t.options_index].disabled&&(t.selected=!1,this.form_field.options[t.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[t.options_index].value}),this.search_field_scale(),!0)},r.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},r.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html()},r.prototype.winnow_results_set_highlight=function(){var e,t;if(null!=(e=(t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result")).length?t.first():this.search_results.find(".active-result").first()))return this.result_do_highlight(e)},r.prototype.no_results=function(t){var r;return(r=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>')).find("span").first().html(t),this.search_results.append(r),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},r.prototype.show_create_option=function(t){var r;r=e('<li class="create-option active-result">'+this.create_option_text+": "+t+"</li>"),this.search_results.append(r)},r.prototype.create_option_clear=function(){return this.search_results.find(".create-option").remove()},r.prototype.select_create_option=function(t){return e.isFunction(this.create_option)?this.create_option.call(this,t):this.select_append_option({value:t,text:t})},r.prototype.select_append_option=function(t){var r;return r=e("<option />",t).attr("selected","selected"),this.form_field_jq.append(r),this.form_field_jq.trigger("chosen:updated"),this.form_field_jq.trigger("change"),this.search_field.trigger("focus")},r.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},r.prototype.keydown_arrow=function(){var e;return this.results_showing&&this.result_highlight?(e=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(e):void 0:this.results_showing&&this.create_option?this.result_do_highlight(this.search_results.find(".create-option")):this.results_show()},r.prototype.keyup_arrow=function(){var e;return this.results_showing||this.is_multiple?this.result_highlight?(e=this.result_highlight.prevAll("li.active-result")).length?this.result_do_highlight(e.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight()):void 0:this.results_show()},r.prototype.keydown_backstroke=function(){var e;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(e=this.search_container.siblings("li.search-choice").last()).length&&!e.hasClass("search-choice-disabled")?(this.pending_backstroke=e,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0},r.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},r.prototype.keydown_checker=function(e){var t,r;switch(t=null!=(r=e.which)?r:e.keyCode,this.search_field_scale(),8!==t&&this.pending_backstroke&&this.clear_backstroke(),t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:(this.results_showing&&!this.is_multiple||this.result_highlight&&this.result_highlight.hasClass("create-option"))&&this.result_select(e),this.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 32:this.result_highlight&&this.result_highlight.hasClass("create-option")&&this.result_select(e);break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:e.preventDefault(),this.keydown_arrow()}},r.prototype.search_field_scale=function(){var t,r,i,n,o,s,a,u;if(this.is_multiple){for(s=0,n="position:absolute; left: -1000px; top: -1000px; display:none;",a=0,u=(o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"]).length;a<u;a++)n+=(i=o[a])+":"+this.search_field.css(i)+";";return(t=e("<div />",{style:n})).text(this.search_field.val()),e("body").append(t),s=t.width()+25,t.remove(),s>(r=this.container.outerWidth())-10&&(s=r-10),this.search_field.css({width:s+"px"})}},r}(t)}).call(this)},7544:()=>{var e;(e=self).FastScrollerSource=function(){},e.FastScrollerSource.prototype={fetch:function(e){},render:function(e,t){}},e.FastScroller=function(e,t){e.length&&e[0]&&(e=e[0]),t.render||"function"!=typeof t||(t={render:t}),this.reset_(),this.scroller_=e,this.source_=t,this.requestInProgress_=!1,this.scroller_.addEventListener("scroll",this.onScroll_.bind(this)),window.addEventListener("resize",this.onResize_.bind(this)),this.scrollRunway_=document.createElement("div"),this.scrollRunway_.className="scrollRunway",this.scrollRunway_.textContent=" ",this.scrollRunwayEnd_=0,this.scrollRunway_.style.position="absolute",this.scrollRunway_.style.height="1px",this.scrollRunway_.style.width="1px",this.scrollRunway_.style.transition="transform 0.2s",this.scroller_.appendChild(this.scrollRunway_),this.onResize_()},e.FastScroller.prototype={reset_:function(){this.anchorItem={index:0,offset:0},this.firstAttachedItem_=0,this.lastAttachedItem_=0,this.anchorScrollTop=0,this.items_=[],this.loadedItems_=0,this.scrollRunwayEnd_=0},onResize_:function(){for(var e=0;e<this.items_.length;e++)this.items_[e].height=0;this.onScroll_()},onScroll_:function(){var e=this.scroller_.scrollTop-this.anchorScrollTop;0==this.scroller_.scrollTop?this.anchorItem={index:0,offset:0}:this.anchorItem=this.calculateAnchoredItem(this.anchorItem,e),this.anchorScrollTop=this.scroller_.scrollTop;var t=this.calculateAnchoredItem(this.anchorItem,this.scroller_.offsetHeight);e<0?this.fill(this.anchorItem.index-50,t.index+10):this.fill(this.anchorItem.index-10,t.index+50)},calculateAnchoredItem:function(e,t){if(0==t)return e;t+=e.offset;var r=e.index;if(t<0)for(;t<0&&r>0&&this.items_[r-1].height;)t+=this.items_[r-1].height,r--;else for(;t>0&&r<this.items_.length&&this.items_[r].height&&this.items_[r].height<t;)t-=this.items_[r].height,r++;return{index:r,offset:t}},fill:function(e,t){this.firstAttachedItem_=Math.max(0,e),this.lastAttachedItem_=t,this.attachContent()},attachContent:function(){var e,t=[],r=this.firstAttachedItem_,i=Math.min(this.lastAttachedItem_,this.items_.length);for(e=0;e<this.items_.length;e++)e!=r?this.items_[e].node&&(t.push(this.items_[e].node),this.items_[e].node=null):e=i-1;for(e=r;e<i;e++)if(!this.items_[e].node){var n=this.source_.render(this.items_[e].data,t.pop());n.length&&n[0]&&(n=n[0]),n.style.position="absolute",this.items_[e].top=-1,this.scroller_.appendChild(n),this.items_[e].node=n}for(;t.length;)this.scroller_.removeChild(t.pop());for(e=r;e<i;e++)this.items_[e].height||(this.items_[e].height=this.items_[e].node.offsetHeight);for(this.anchorScrollTop=0,e=0;e<this.anchorItem.index;e++)this.anchorScrollTop+=this.items_[e].height;this.anchorScrollTop+=this.anchorItem.offset;var o=this.anchorScrollTop-this.anchorItem.offset;for(e=this.anchorItem.index;e>r;)o-=this.items_[e-1].height,e--;for(;e<r;)o+=this.items_[e].height,e++;for(e=r;e<i;e++)o!==this.items_[e].top&&(this.items_[e].node.style.transform="translateY("+o+"px)",this.items_[e].top=o),o+=this.items_[e].height||this.tombstoneSize_;this.scrollRunwayEnd_=Math.max(this.scrollRunwayEnd_,o),this.scrollRunway_.style.transform="translate(0, "+this.scrollRunwayEnd_+"px)",this.scroller_.scrollTop=this.anchorScrollTop,this.maybeRequestContent()},maybeRequestContent:function(){if(!this.requestInProgress_){var e=this.lastAttachedItem_-this.loadedItems_;e<=0||(this.requestInProgress_=!0,this.items_[this.loadedItems_-1],this.source_.fetch&&this.source_.fetch(e).then(this.addContent.bind(this)))}},addContent:function(e){this.requestInProgress_=!1;for(var t=this.items_.length,r=0;r<e.length;r++)this.items_[this.loadedItems_++]={data:e[r],node:null,height:0,top:0};t<this.lastAttachedItem_&&this.attachContent()},removeAll:function(){for(var e=0;e<this.items_.length;e++)this.items_[e].node&&this.scroller_.removeChild(this.items_[e].node);this.reset_(),this.scroller_.scrollTop=0,this.onScroll_()}}},2830:function(e,t){var r,i,n;i="undefined"!=typeof window?window:this,n=function(i,n){var o=[],s=o.slice,a=o.concat,u=o.push,l=o.indexOf,c={},h=c.toString,p=c.hasOwnProperty,d="".trim,f={},g=i.document,m="2.1.0",v=function(e,t){return new v.fn.init(e,t)},y=/^-ms-/,_=/-([\da-z])/gi,E=function(e,t){return t.toUpperCase()};function x(e){var t=e.length,r=v.type(e);return"function"!==r&&!v.isWindow(e)&&(!(1!==e.nodeType||!t)||"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}v.fn=v.prototype={jquery:m,constructor:v,selector:"",length:0,toArray:function(){return s.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:s.call(this)},pushStack:function(e){var t=v.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return v.each(this,e,t)},map:function(e){return this.pushStack(v.map(this,(function(t,r){return e.call(t,r,t)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:u,sort:o.sort,splice:o.splice},v.extend=v.fn.extend=function(){var e,t,r,i,n,o,s=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||v.isFunction(s)||(s={}),a===u&&(s=this,a--);a<u;a++)if(null!=(e=arguments[a]))for(t in e)r=s[t],s!==(i=e[t])&&(l&&i&&(v.isPlainObject(i)||(n=v.isArray(i)))?(n?(n=!1,o=r&&v.isArray(r)?r:[]):o=r&&v.isPlainObject(r)?r:{},s[t]=v.extend(l,o,i)):void 0!==i&&(s[t]=i));return s},v.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===v.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return e-parseFloat(e)>=0},isPlainObject:function(e){if("object"!==v.type(e)||e.nodeType||v.isWindow(e))return!1;try{if(e.constructor&&!p.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[h.call(e)]||"object":typeof e},globalEval:function(e){var t,r=eval;(e=v.trim(e))&&(1===e.indexOf("use strict")?((t=g.createElement("script")).text=e,g.head.appendChild(t).parentNode.removeChild(t)):r(e))},camelCase:function(e){return e.replace(y,"ms-").replace(_,E)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i=0,n=e.length,o=x(e);if(r){if(o)for(;i<n&&!1!==t.apply(e[i],r);i++);else for(i in e)if(!1===t.apply(e[i],r))break}else if(o)for(;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":d.call(e)},makeArray:function(e,t){var r=t||[];return null!=e&&(x(Object(e))?v.merge(r,"string"==typeof e?[e]:e):u.call(r,e)),r},inArray:function(e,t,r){return null==t?-1:l.call(t,e,r)},merge:function(e,t){for(var r=+t.length,i=0,n=e.length;i<r;i++)e[n++]=t[i];return e.length=n,e},grep:function(e,t,r){for(var i=[],n=0,o=e.length,s=!r;n<o;n++)!t(e[n],n)!==s&&i.push(e[n]);return i},map:function(e,t,r){var i,n=0,o=e.length,s=[];if(x(e))for(;n<o;n++)null!=(i=t(e[n],n,r))&&s.push(i);else for(n in e)null!=(i=t(e[n],n,r))&&s.push(i);return a.apply([],s)},guid:1,proxy:function(e,t){var r,i,n;if("string"==typeof t&&(r=e[t],t=e,e=r),v.isFunction(e))return i=s.call(arguments,2),n=function(){return e.apply(t||this,i.concat(s.call(arguments)))},n.guid=e.guid=e.guid||v.guid++,n},now:Date.now,support:f}),v.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){c["[object "+t+"]"]=t.toLowerCase()}));var b=function(e){var t,r,i,n,o,s,a,u,l,c,h,p,d,f,g,m,v,y="sizzle"+-new Date,_=e.document,E=0,x=0,b=ie(),S=ie(),w=ie(),T=function(e,t){return e===t&&(l=!0),0},A="undefined",I=1<<31,L={}.hasOwnProperty,C=[],N=C.pop,R=C.push,P=C.push,O=C.slice,k=C.indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(this[t]===e)return t;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",D="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",U=M.replace("w","w#"),B="\\[[\\x20\\t\\r\\n\\f]*("+M+")"+D+"*(?:([*^$|!~]?=)"+D+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+U+")|)|)"+D+"*\\]",j=":("+M+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+B.replace(3,8)+")*)|.*)\\)|)",H=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),G=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),V=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),q=new RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),W=new RegExp(j),K=new RegExp("^"+U+"$"),z={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},$=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,Y=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,X=/[+~]/,Q=/'|\\/g,ee=new RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),te=function(e,t,r){var i="0x"+t-65536;return i!=i||r?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{P.apply(C=O.call(_.childNodes),_.childNodes),C[_.childNodes.length].nodeType}catch(e){P={apply:C.length?function(e,t){R.apply(e,O.call(t))}:function(e,t){for(var r=e.length,i=0;e[r++]=t[i++];);e.length=r-1}}}function re(e,t,n,o){var a,u,l,p,g,m,E,x,b,S;if((t?t.ownerDocument||t:_)!==h&&c(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(p=(t=t||h).nodeType)&&9!==p)return[];if(d&&!o){if(a=Y.exec(e))if(l=a[1]){if(9===p){if(!(u=t.getElementById(l))||!u.parentNode)return n;if(u.id===l)return n.push(u),n}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(l))&&v(t,u)&&u.id===l)return n.push(u),n}else{if(a[2])return P.apply(n,t.getElementsByTagName(e)),n;if((l=a[3])&&r.getElementsByClassName&&t.getElementsByClassName)return P.apply(n,t.getElementsByClassName(l)),n}if(r.qsa&&(!f||!f.test(e))){if(x=E=y,b=t,S=9===p&&e,1===p&&"object"!==t.nodeName.toLowerCase()){for(m=de(e),(E=t.getAttribute("id"))?x=E.replace(Q,"\\$&"):t.setAttribute("id",x),x="[id='"+x+"'] ",g=m.length;g--;)m[g]=x+fe(m[g]);b=X.test(e)&&he(t.parentNode)||t,S=m.join(",")}if(S)try{return P.apply(n,b.querySelectorAll(S)),n}catch(e){}finally{E||t.removeAttribute("id")}}}return function(e,t,n,o){var a,u,l,c,h,p=de(e);if(!o&&1===p.length){if((u=p[0]=p[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&r.getById&&9===t.nodeType&&d&&i.relative[u[1].type]){if(!(t=(i.find.ID(l.matches[0].replace(ee,te),t)||[])[0]))return n;e=e.slice(u.shift().value.length)}for(a=z.needsContext.test(e)?0:u.length;a--&&(l=u[a],!i.relative[c=l.type]);)if((h=i.find[c])&&(o=h(l.matches[0].replace(ee,te),X.test(u[0].type)&&he(t.parentNode)||t))){if(u.splice(a,1),!(e=o.length&&fe(u)))return P.apply(n,o),n;break}}return s(e,p)(o,t,!d,n,X.test(e)&&he(t.parentNode)||t),n}(e.replace(H,"$1"),t,n,o)}function ie(){var e=[];return function t(r,n){return e.push(r+" ")>i.cacheLength&&delete t[e.shift()],t[r+" "]=n}}function ne(e){return e[y]=!0,e}function oe(e){var t=h.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function se(e,t){for(var r=e.split("|"),n=e.length;n--;)i.attrHandle[r[n]]=t}function ae(e,t){var r=t&&e,i=r&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||I)-(~e.sourceIndex||I);if(i)return i;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function ue(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function le(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}function ce(e){return ne((function(t){return t=+t,ne((function(r,i){for(var n,o=e([],r.length,t),s=o.length;s--;)r[n=o[s]]&&(r[n]=!(i[n]=r[n]))}))}))}function he(e){return e&&typeof e.getElementsByTagName!==A&&e}for(t in r=re.support={},o=re.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},c=re.setDocument=function(e){var t,n=e?e.ownerDocument||e:_,s=n.defaultView;return n!==h&&9===n.nodeType&&n.documentElement?(h=n,p=n.documentElement,d=!o(n),s&&s!==s.top&&(s.addEventListener?s.addEventListener("unload",(function(){c()}),!1):s.attachEvent&&s.attachEvent("onunload",(function(){c()}))),r.attributes=oe((function(e){return e.className="i",!e.getAttribute("className")})),r.getElementsByTagName=oe((function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length})),r.getElementsByClassName=Z.test(n.getElementsByClassName)&&oe((function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length})),r.getById=oe((function(e){return p.appendChild(e).id=y,!n.getElementsByName||!n.getElementsByName(y).length})),r.getById?(i.find.ID=function(e,t){if(typeof t.getElementById!==A&&d){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}},i.filter.ID=function(e){var t=e.replace(ee,te);return function(e){return e.getAttribute("id")===t}}):(delete i.find.ID,i.filter.ID=function(e){var t=e.replace(ee,te);return function(e){var r=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return r&&r.value===t}}),i.find.TAG=r.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==A)return t.getElementsByTagName(e)}:function(e,t){var r,i=[],n=0,o=t.getElementsByTagName(e);if("*"===e){for(;r=o[n++];)1===r.nodeType&&i.push(r);return i}return o},i.find.CLASS=r.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!==A&&d)return t.getElementsByClassName(e)},g=[],f=[],(r.qsa=Z.test(n.querySelectorAll))&&(oe((function(e){e.innerHTML="<select t=''><option selected=''></option></select>",e.querySelectorAll("[t^='']").length&&f.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||f.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+F+")"),e.querySelectorAll(":checked").length||f.push(":checked")})),oe((function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&f.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),e.querySelectorAll(":enabled").length||f.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),f.push(",.*:")}))),(r.matchesSelector=Z.test(m=p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&oe((function(e){r.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),g.push("!=",j)})),f=f.length&&new RegExp(f.join("|")),g=g.length&&new RegExp(g.join("|")),t=Z.test(p.compareDocumentPosition),v=t||Z.test(p.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},T=t?function(e,t){if(e===t)return l=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!r.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===_&&v(_,e)?-1:t===n||t.ownerDocument===_&&v(_,t)?1:u?k.call(u,e)-k.call(u,t):0:4&i?-1:1)}:function(e,t){if(e===t)return l=!0,0;var r,i=0,o=e.parentNode,s=t.parentNode,a=[e],c=[t];if(!o||!s)return e===n?-1:t===n?1:o?-1:s?1:u?k.call(u,e)-k.call(u,t):0;if(o===s)return ae(e,t);for(r=e;r=r.parentNode;)a.unshift(r);for(r=t;r=r.parentNode;)c.unshift(r);for(;a[i]===c[i];)i++;return i?ae(a[i],c[i]):a[i]===_?-1:c[i]===_?1:0},n):h},re.matches=function(e,t){return re(e,null,null,t)},re.matchesSelector=function(e,t){if((e.ownerDocument||e)!==h&&c(e),t=t.replace(q,"='$1']"),r.matchesSelector&&d&&(!g||!g.test(t))&&(!f||!f.test(t)))try{var i=m.call(e,t);if(i||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return re(t,h,null,[e]).length>0},re.contains=function(e,t){return(e.ownerDocument||e)!==h&&c(e),v(e,t)},re.attr=function(e,t){(e.ownerDocument||e)!==h&&c(e);var n=i.attrHandle[t.toLowerCase()],o=n&&L.call(i.attrHandle,t.toLowerCase())?n(e,t,!d):void 0;return void 0!==o?o:r.attributes||!d?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},re.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},re.uniqueSort=function(e){var t,i=[],n=0,o=0;if(l=!r.detectDuplicates,u=!r.sortStable&&e.slice(0),e.sort(T),l){for(;t=e[o++];)t===e[o]&&(n=i.push(o));for(;n--;)e.splice(i[n],1)}return u=null,e},n=re.getText=function(e){var t,r="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=n(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)r+=n(t);return r},i=re.selectors={cacheLength:50,createPseudo:ne,match:z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ee,te),e[3]=(e[4]||e[5]||"").replace(ee,te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||re.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&re.error(e[0]),e},PSEUDO:function(e){var t,r=!e[5]&&e[2];return z.CHILD.test(e[0])?null:(e[3]&&void 0!==e[4]?e[2]=e[4]:r&&W.test(r)&&(t=de(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ee,te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=b[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+D+"|$)"))&&b(e,(function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")}))},ATTR:function(e,t,r){return function(i){var n=re.attr(i,e);return null==n?"!="===t:!t||(n+="","="===t?n===r:"!="===t?n!==r:"^="===t?r&&0===n.indexOf(r):"*="===t?r&&n.indexOf(r)>-1:"$="===t?r&&n.slice(-r.length)===r:"~="===t?(" "+n+" ").indexOf(r)>-1:"|="===t&&(n===r||n.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,r,i,n){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===n?function(e){return!!e.parentNode}:function(t,r,u){var l,c,h,p,d,f,g=o!==s?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),_=!u&&!a;if(m){if(o){for(;g;){for(h=t;h=h[g];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&_){for(d=(l=(c=m[y]||(m[y]={}))[e]||[])[0]===E&&l[1],p=l[0]===E&&l[2],h=d&&m.childNodes[d];h=++d&&h&&h[g]||(p=d=0)||f.pop();)if(1===h.nodeType&&++p&&h===t){c[e]=[E,d,p];break}}else if(_&&(l=(t[y]||(t[y]={}))[e])&&l[0]===E)p=l[1];else for(;(h=++d&&h&&h[g]||(p=d=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++p||(_&&((h[y]||(h[y]={}))[e]=[E,p]),h!==t)););return(p-=n)===i||p%i==0&&p/i>=0}}},PSEUDO:function(e,t){var r,n=i.pseudos[e]||i.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);return n[y]?n(t):n.length>1?(r=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ne((function(e,r){for(var i,o=n(e,t),s=o.length;s--;)e[i=k.call(e,o[s])]=!(r[i]=o[s])})):function(e){return n(e,0,r)}):n}},pseudos:{not:ne((function(e){var t=[],r=[],i=s(e.replace(H,"$1"));return i[y]?ne((function(e,t,r,n){for(var o,s=i(e,null,n,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))})):function(e,n,o){return t[0]=e,i(t,null,o,r),!r.pop()}})),has:ne((function(e){return function(t){return re(e,t).length>0}})),contains:ne((function(e){return function(t){return(t.textContent||t.innerText||n(t)).indexOf(e)>-1}})),lang:ne((function(e){return K.test(e||"")||re.error("unsupported lang: "+e),e=e.replace(ee,te).toLowerCase(),function(t){var r;do{if(r=d?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return $.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ce((function(){return[0]})),last:ce((function(e,t){return[t-1]})),eq:ce((function(e,t,r){return[r<0?r+t:r]})),even:ce((function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e})),odd:ce((function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e})),lt:ce((function(e,t,r){for(var i=r<0?r+t:r;--i>=0;)e.push(i);return e})),gt:ce((function(e,t,r){for(var i=r<0?r+t:r;++i<t;)e.push(i);return e}))}},i.pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=ue(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=le(t);function pe(){}function de(e,t){var r,n,o,s,a,u,l,c=S[e+" "];if(c)return t?0:c.slice(0);for(a=e,u=[],l=i.preFilter;a;){for(s in r&&!(n=G.exec(a))||(n&&(a=a.slice(n[0].length)||a),u.push(o=[])),r=!1,(n=V.exec(a))&&(r=n.shift(),o.push({value:r,type:n[0].replace(H," ")}),a=a.slice(r.length)),i.filter)!(n=z[s].exec(a))||l[s]&&!(n=l[s](n))||(r=n.shift(),o.push({value:r,type:s,matches:n}),a=a.slice(r.length));if(!r)break}return t?a.length:a?re.error(e):S(e,u).slice(0)}function fe(e){for(var t=0,r=e.length,i="";t<r;t++)i+=e[t].value;return i}function ge(e,t,r){var i=t.dir,n=r&&"parentNode"===i,o=x++;return t.first?function(t,r,o){for(;t=t[i];)if(1===t.nodeType||n)return e(t,r,o)}:function(t,r,s){var a,u,l=[E,o];if(s){for(;t=t[i];)if((1===t.nodeType||n)&&e(t,r,s))return!0}else for(;t=t[i];)if(1===t.nodeType||n){if((a=(u=t[y]||(t[y]={}))[i])&&a[0]===E&&a[1]===o)return l[2]=a[2];if(u[i]=l,l[2]=e(t,r,s))return!0}}}function me(e){return e.length>1?function(t,r,i){for(var n=e.length;n--;)if(!e[n](t,r,i))return!1;return!0}:e[0]}function ve(e,t,r,i,n){for(var o,s=[],a=0,u=e.length,l=null!=t;a<u;a++)(o=e[a])&&(r&&!r(o,i,n)||(s.push(o),l&&t.push(a)));return s}function ye(e,t,r,i,n,o){return i&&!i[y]&&(i=ye(i)),n&&!n[y]&&(n=ye(n,o)),ne((function(o,s,a,u){var l,c,h,p=[],d=[],f=s.length,g=o||function(e,t,r){for(var i=0,n=t.length;i<n;i++)re(e,t[i],r);return r}(t||"*",a.nodeType?[a]:a,[]),m=!e||!o&&t?g:ve(g,p,e,a,u),v=r?n||(o?e:f||i)?[]:s:m;if(r&&r(m,v,a,u),i)for(l=ve(v,d),i(l,[],a,u),c=l.length;c--;)(h=l[c])&&(v[d[c]]=!(m[d[c]]=h));if(o){if(n||e){if(n){for(l=[],c=v.length;c--;)(h=v[c])&&l.push(m[c]=h);n(null,v=[],l,u)}for(c=v.length;c--;)(h=v[c])&&(l=n?k.call(o,h):p[c])>-1&&(o[l]=!(s[l]=h))}}else v=ve(v===s?v.splice(f,v.length):v),n?n(null,s,v,u):P.apply(s,v)}))}function _e(e){for(var t,r,n,o=e.length,s=i.relative[e[0].type],u=s||i.relative[" "],l=s?1:0,c=ge((function(e){return e===t}),u,!0),h=ge((function(e){return k.call(t,e)>-1}),u,!0),p=[function(e,r,i){return!s&&(i||r!==a)||((t=r).nodeType?c(e,r,i):h(e,r,i))}];l<o;l++)if(r=i.relative[e[l].type])p=[ge(me(p),r)];else{if((r=i.filter[e[l].type].apply(null,e[l].matches))[y]){for(n=++l;n<o&&!i.relative[e[n].type];n++);return ye(l>1&&me(p),l>1&&fe(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(H,"$1"),r,l<n&&_e(e.slice(l,n)),n<o&&_e(e=e.slice(n)),n<o&&fe(e))}p.push(r)}return me(p)}return pe.prototype=i.filters=i.pseudos,i.setFilters=new pe,s=re.compile=function(e,t){var r,n=[],o=[],s=w[e+" "];if(!s){for(t||(t=de(e)),r=t.length;r--;)(s=_e(t[r]))[y]?n.push(s):o.push(s);s=w(e,function(e,t){var r=t.length>0,n=e.length>0,o=function(o,s,u,l,c){var p,d,f,g=0,m="0",v=o&&[],y=[],_=a,x=o||n&&i.find.TAG("*",c),b=E+=null==_?1:Math.random()||.1,S=x.length;for(c&&(a=s!==h&&s);m!==S&&null!=(p=x[m]);m++){if(n&&p){for(d=0;f=e[d++];)if(f(p,s,u)){l.push(p);break}c&&(E=b)}r&&((p=!f&&p)&&g--,o&&v.push(p))}if(g+=m,r&&m!==g){for(d=0;f=t[d++];)f(v,y,s,u);if(o){if(g>0)for(;m--;)v[m]||y[m]||(y[m]=N.call(l));y=ve(y)}P.apply(l,y),c&&!o&&y.length>0&&g+t.length>1&&re.uniqueSort(l)}return c&&(E=b,a=_),v};return r?ne(o):o}(o,n))}return s},r.sortStable=y.split("").sort(T).join("")===y,r.detectDuplicates=!!l,c(),r.sortDetached=oe((function(e){return 1&e.compareDocumentPosition(h.createElement("div"))})),oe((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||se("type|href|height|width",(function(e,t,r){if(!r)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),r.attributes&&oe((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||se("value",(function(e,t,r){if(!r&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),oe((function(e){return null==e.getAttribute("disabled")}))||se(F,(function(e,t,r){var i;if(!r)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null})),re}(i);v.find=b,v.expr=b.selectors,v.expr[":"]=v.expr.pseudos,v.unique=b.uniqueSort,v.text=b.getText,v.isXMLDoc=b.isXML,v.contains=b.contains;var S=v.expr.match.needsContext,w=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,T=/^.[^:#\[\.,]*$/;function A(e,t,r){if(v.isFunction(t))return v.grep(e,(function(e,i){return!!t.call(e,i,e)!==r}));if(t.nodeType)return v.grep(e,(function(e){return e===t!==r}));if("string"==typeof t){if(T.test(t))return v.filter(t,e,r);t=v.filter(t,e)}return v.grep(e,(function(e){return l.call(t,e)>=0!==r}))}v.filter=function(e,t,r){var i=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?v.find.matchesSelector(i,e)?[i]:[]:v.find.matches(e,v.grep(t,(function(e){return 1===e.nodeType})))},v.fn.extend({find:function(e){var t,r=this.length,i=[],n=this;if("string"!=typeof e)return this.pushStack(v(e).filter((function(){for(t=0;t<r;t++)if(v.contains(n[t],this))return!0})));for(t=0;t<r;t++)v.find(e,n[t],i);return(i=this.pushStack(r>1?v.unique(i):i)).selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(A(this,e||[],!1))},not:function(e){return this.pushStack(A(this,e||[],!0))},is:function(e){return!!A(this,"string"==typeof e&&S.test(e)?v(e):e||[],!1).length}});var I,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(v.fn.init=function(e,t){var r,i;if(!e)return this;if("string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:L.exec(e))||!r[1]&&t)return!t||t.jquery?(t||I).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof v?t[0]:t,v.merge(this,v.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:g,!0)),w.test(r[1])&&v.isPlainObject(t))for(r in t)v.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=g.getElementById(r[2]))&&i.parentNode&&(this.length=1,this[0]=i),this.context=g,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):v.isFunction(e)?void 0!==I.ready?I.ready(e):e(v):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),v.makeArray(e,this))}).prototype=v.fn,I=v(g);var C=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};function R(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}v.extend({dir:function(e,t,r){for(var i=[],n=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(n&&v(e).is(r))break;i.push(e)}return i},sibling:function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r}}),v.fn.extend({has:function(e){var t=v(e,this),r=t.length;return this.filter((function(){for(var e=0;e<r;e++)if(v.contains(this,t[e]))return!0}))},closest:function(e,t){for(var r,i=0,n=this.length,o=[],s=S.test(e)||"string"!=typeof e?v(e,t||this.context):0;i<n;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(s?s.index(r)>-1:1===r.nodeType&&v.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(o.length>1?v.unique(o):o)},index:function(e){return e?"string"==typeof e?l.call(v(e),this[0]):l.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(v.unique(v.merge(this.get(),v(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),v.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return v.dir(e,"parentNode")},parentsUntil:function(e,t,r){return v.dir(e,"parentNode",r)},next:function(e){return R(e,"nextSibling")},prev:function(e){return R(e,"previousSibling")},nextAll:function(e){return v.dir(e,"nextSibling")},prevAll:function(e){return v.dir(e,"previousSibling")},nextUntil:function(e,t,r){return v.dir(e,"nextSibling",r)},prevUntil:function(e,t,r){return v.dir(e,"previousSibling",r)},siblings:function(e){return v.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return v.sibling(e.firstChild)},contents:function(e){return e.contentDocument||v.merge([],e.childNodes)}},(function(e,t){v.fn[e]=function(r,i){var n=v.map(this,t,r);return"Until"!==e.slice(-5)&&(i=r),i&&"string"==typeof i&&(n=v.filter(i,n)),this.length>1&&(N[e]||v.unique(n),C.test(e)&&n.reverse()),this.pushStack(n)}}));var P,O=/\S+/g,k={};function F(){g.removeEventListener("DOMContentLoaded",F,!1),i.removeEventListener("load",F,!1),v.ready()}v.Callbacks=function(e){e="string"==typeof e?k[e]||function(e){var t=k[e]={};return v.each(e.match(O)||[],(function(e,r){t[r]=!0})),t}(e):v.extend({},e);var t,r,i,n,o,s,a=[],u=!e.once&&[],l=function(h){for(t=e.memory&&h,r=!0,s=n||0,n=0,o=a.length,i=!0;a&&s<o;s++)if(!1===a[s].apply(h[0],h[1])&&e.stopOnFalse){t=!1;break}i=!1,a&&(u?u.length&&l(u.shift()):t?a=[]:c.disable())},c={add:function(){if(a){var r=a.length;!function t(r){v.each(r,(function(r,i){var n=v.type(i);"function"===n?e.unique&&c.has(i)||a.push(i):i&&i.length&&"string"!==n&&t(i)}))}(arguments),i?o=a.length:t&&(n=r,l(t))}return this},remove:function(){return a&&v.each(arguments,(function(e,t){for(var r;(r=v.inArray(t,a,r))>-1;)a.splice(r,1),i&&(r<=o&&o--,r<=s&&s--)})),this},has:function(e){return e?v.inArray(e,a)>-1:!(!a||!a.length)},empty:function(){return a=[],o=0,this},disable:function(){return a=u=t=void 0,this},disabled:function(){return!a},lock:function(){return u=void 0,t||c.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!a||r&&!u||(t=[e,(t=t||[]).slice?t.slice():t],i?u.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},v.extend({Deferred:function(e){var t=[["resolve","done",v.Callbacks("once memory"),"resolved"],["reject","fail",v.Callbacks("once memory"),"rejected"],["notify","progress",v.Callbacks("memory")]],r="pending",i={state:function(){return r},always:function(){return n.done(arguments).fail(arguments),this},then:function(){var e=arguments;return v.Deferred((function(r){v.each(t,(function(t,o){var s=v.isFunction(e[t])&&e[t];n[o[1]]((function(){var e=s&&s.apply(this,arguments);e&&v.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[o[0]+"With"](this===i?r.promise():this,s?[e]:arguments)}))})),e=null})).promise()},promise:function(e){return null!=e?v.extend(e,i):i}},n={};return i.pipe=i.then,v.each(t,(function(e,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add((function(){r=a}),t[1^e][2].disable,t[2][2].lock),n[o[0]]=function(){return n[o[0]+"With"](this===n?i:this,arguments),this},n[o[0]+"With"]=s.fireWith})),i.promise(n),e&&e.call(n,n),n},when:function(e){var t,r,i,n=0,o=s.call(arguments),a=o.length,u=1!==a||e&&v.isFunction(e.promise)?a:0,l=1===u?e:v.Deferred(),c=function(e,r,i){return function(n){r[e]=this,i[e]=arguments.length>1?s.call(arguments):n,i===t?l.notifyWith(r,i):--u||l.resolveWith(r,i)}};if(a>1)for(t=new Array(a),r=new Array(a),i=new Array(a);n<a;n++)o[n]&&v.isFunction(o[n].promise)?o[n].promise().done(c(n,i,o)).fail(l.reject).progress(c(n,r,t)):--u;return u||l.resolveWith(i,o),l.promise()}}),v.fn.ready=function(e){return v.ready.promise().done(e),this},v.extend({isReady:!1,readyWait:1,holdReady:function(e){e?v.readyWait++:v.ready(!0)},ready:function(e){(!0===e?--v.readyWait:v.isReady)||(v.isReady=!0,!0!==e&&--v.readyWait>0||(P.resolveWith(g,[v]),v.fn.trigger&&v(g).trigger("ready").off("ready")))}}),v.ready.promise=function(e){return P||(P=v.Deferred(),"complete"===g.readyState?setTimeout(v.ready):(g.addEventListener("DOMContentLoaded",F,!1),i.addEventListener("load",F,!1))),P.promise(e)},v.ready.promise();var D=v.access=function(e,t,r,i,n,o,s){var a=0,u=e.length,l=null==r;if("object"===v.type(r))for(a in n=!0,r)v.access(e,t,a,r[a],!0,o,s);else if(void 0!==i&&(n=!0,v.isFunction(i)||(s=!0),l&&(s?(t.call(e,i),t=null):(l=t,t=function(e,t,r){return l.call(v(e),r)})),t))for(;a<u;a++)t(e[a],r,s?i:i.call(e[a],a,t(e[a],r)));return n?e:l?t.call(e):u?t(e[0],r):o};function M(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=v.expando+Math.random()}v.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},M.uid=1,M.accepts=v.acceptData,M.prototype={key:function(e){if(!M.accepts(e))return 0;var t={},r=e[this.expando];if(!r){r=M.uid++;try{t[this.expando]={value:r},Object.defineProperties(e,t)}catch(i){t[this.expando]=r,v.extend(e,t)}}return this.cache[r]||(this.cache[r]={}),r},set:function(e,t,r){var i,n=this.key(e),o=this.cache[n];if("string"==typeof t)o[t]=r;else if(v.isEmptyObject(o))v.extend(this.cache[n],t);else for(i in t)o[i]=t[i];return o},get:function(e,t){var r=this.cache[this.key(e)];return void 0===t?r:r[t]},access:function(e,t,r){var i;return void 0===t||t&&"string"==typeof t&&void 0===r?void 0!==(i=this.get(e,t))?i:this.get(e,v.camelCase(t)):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i,n,o=this.key(e),s=this.cache[o];if(void 0===t)this.cache[o]={};else{v.isArray(t)?i=t.concat(t.map(v.camelCase)):(n=v.camelCase(t),i=t in s?[t,n]:(i=n)in s?[i]:i.match(O)||[]),r=i.length;for(;r--;)delete s[i[r]]}},hasData:function(e){return!v.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var U=new M,B=new M,j=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,H=/([A-Z])/g;function G(e,t,r){var i;if(void 0===r&&1===e.nodeType)if(i="data-"+t.replace(H,"-$1").toLowerCase(),"string"==typeof(r=e.getAttribute(i))){try{r="true"===r||"false"!==r&&("null"===r?null:+r+""===r?+r:j.test(r)?v.parseJSON(r):r)}catch(e){}B.set(e,t,r)}else r=void 0;return r}v.extend({hasData:function(e){return B.hasData(e)||U.hasData(e)},data:function(e,t,r){return B.access(e,t,r)},removeData:function(e,t){B.remove(e,t)},_data:function(e,t,r){return U.access(e,t,r)},_removeData:function(e,t){U.remove(e,t)}}),v.fn.extend({data:function(e,t){var r,i,n,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(n=B.get(o),1===o.nodeType&&!U.get(o,"hasDataAttrs"))){for(r=s.length;r--;)0===(i=s[r].name).indexOf("data-")&&(i=v.camelCase(i.slice(5)),G(o,i,n[i]));U.set(o,"hasDataAttrs",!0)}return n}return"object"==typeof e?this.each((function(){B.set(this,e)})):D(this,(function(t){var r,i=v.camelCase(e);if(o&&void 0===t)return void 0!==(r=B.get(o,e))||void 0!==(r=B.get(o,i))||void 0!==(r=G(o,i,void 0))?r:void 0;this.each((function(){var r=B.get(this,i);B.set(this,i,t),-1!==e.indexOf("-")&&void 0!==r&&B.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){B.remove(this,e)}))}}),v.extend({queue:function(e,t,r){var i;if(e)return t=(t||"fx")+"queue",i=U.get(e,t),r&&(!i||v.isArray(r)?i=U.access(e,t,v.makeArray(r)):i.push(r)),i||[]},dequeue:function(e,t){t=t||"fx";var r=v.queue(e,t),i=r.length,n=r.shift(),o=v._queueHooks(e,t);"inprogress"===n&&(n=r.shift(),i--),n&&("fx"===t&&r.unshift("inprogress"),delete o.stop,n.call(e,(function(){v.dequeue(e,t)}),o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return U.get(e,r)||U.access(e,r,{empty:v.Callbacks("once memory").add((function(){U.remove(e,[t+"queue",r])}))})}}),v.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?v.queue(this[0],e):void 0===t?this:this.each((function(){var r=v.queue(this,e,t);v._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&v.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){v.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,n=v.Deferred(),o=this,s=this.length,a=function(){--i||n.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(r=U.get(o[s],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(a));return a(),n.promise(t)}});var V,q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,W=["Top","Right","Bottom","Left"],K=function(e,t){return e=t||e,"none"===v.css(e,"display")||!v.contains(e.ownerDocument,e)},z=/^(?:checkbox|radio)$/i;(V=g.createDocumentFragment().appendChild(g.createElement("div"))).innerHTML="<input type='radio' checked='checked' name='t'/>",f.checkClone=V.cloneNode(!0).cloneNode(!0).lastChild.checked,V.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!V.cloneNode(!0).lastChild.defaultValue;var $="undefined";f.focusinBubbles="onfocusin"in i;var J=/^key/,Z=/^(?:mouse|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,X=/^([^.]*)(?:\.(.+)|)$/;function Q(){return!0}function ee(){return!1}function te(){try{return g.activeElement}catch(e){}}v.event={global:{},add:function(e,t,r,i,n){var o,s,a,u,l,c,h,p,d,f,g,m=U.get(e);if(m)for(r.handler&&(r=(o=r).handler,n=o.selector),r.guid||(r.guid=v.guid++),(u=m.events)||(u=m.events={}),(s=m.handle)||(s=m.handle=function(t){return typeof v!==$&&v.event.triggered!==t.type?v.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(O)||[""]).length;l--;)d=g=(a=X.exec(t[l])||[])[1],f=(a[2]||"").split(".").sort(),d&&(h=v.event.special[d]||{},d=(n?h.delegateType:h.bindType)||d,h=v.event.special[d]||{},c=v.extend({type:d,origType:g,data:i,handler:r,guid:r.guid,selector:n,needsContext:n&&v.expr.match.needsContext.test(n),namespace:f.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,i,f,s)||e.addEventListener&&e.addEventListener(d,s,!1)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),n?p.splice(p.delegateCount++,0,c):p.push(c),v.event.global[d]=!0)},remove:function(e,t,r,i,n){var o,s,a,u,l,c,h,p,d,f,g,m=U.hasData(e)&&U.get(e);if(m&&(u=m.events)){for(l=(t=(t||"").match(O)||[""]).length;l--;)if(d=g=(a=X.exec(t[l])||[])[1],f=(a[2]||"").split(".").sort(),d){for(h=v.event.special[d]||{},p=u[d=(i?h.delegateType:h.bindType)||d]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;o--;)c=p[o],!n&&g!==c.origType||r&&r.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,h.remove&&h.remove.call(e,c));s&&!p.length&&(h.teardown&&!1!==h.teardown.call(e,f,m.handle)||v.removeEvent(e,d,m.handle),delete u[d])}else for(d in u)v.event.remove(e,d+t[l],r,i,!0);v.isEmptyObject(u)&&(delete m.handle,U.remove(e,"events"))}},trigger:function(e,t,r,n){var o,s,a,u,l,c,h,d=[r||g],f=p.call(e,"type")?e.type:e,m=p.call(e,"namespace")?e.namespace.split("."):[];if(s=a=r=r||g,3!==r.nodeType&&8!==r.nodeType&&!Y.test(f+v.event.triggered)&&(f.indexOf(".")>=0&&(m=f.split("."),f=m.shift(),m.sort()),l=f.indexOf(":")<0&&"on"+f,(e=e[v.expando]?e:new v.Event(f,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=m.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:v.makeArray(t,[e]),h=v.event.special[f]||{},n||!h.trigger||!1!==h.trigger.apply(r,t))){if(!n&&!h.noBubble&&!v.isWindow(r)){for(u=h.delegateType||f,Y.test(u+f)||(s=s.parentNode);s;s=s.parentNode)d.push(s),a=s;a===(r.ownerDocument||g)&&d.push(a.defaultView||a.parentWindow||i)}for(o=0;(s=d[o++])&&!e.isPropagationStopped();)e.type=o>1?u:h.bindType||f,(c=(U.get(s,"events")||{})[e.type]&&U.get(s,"handle"))&&c.apply(s,t),(c=l&&s[l])&&c.apply&&v.acceptData(s)&&(e.result=c.apply(s,t),!1===e.result&&e.preventDefault());return e.type=f,n||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(d.pop(),t)||!v.acceptData(r)||l&&v.isFunction(r[f])&&!v.isWindow(r)&&((a=r[l])&&(r[l]=null),v.event.triggered=f,r[f](),v.event.triggered=void 0,a&&(r[l]=a)),e.result}},dispatch:function(e){e=v.event.fix(e);var t,r,i,n,o,a=[],u=s.call(arguments),l=(U.get(this,"events")||{})[e.type]||[],c=v.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(a=v.event.handlers.call(this,e,l),t=0;(n=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=n.elem,r=0;(o=n.handlers[r++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(o.namespace)||(e.handleObj=o,e.data=o.data,void 0!==(i=((v.event.special[o.origType]||{}).handle||o.handler).apply(n.elem,u))&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,i,n,o,s=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!==this;u=u.parentNode||this)if(!0!==u.disabled||"click"!==e.type){for(i=[],r=0;r<a;r++)void 0===i[n=(o=t[r]).selector+" "]&&(i[n]=o.needsContext?v(n,this).index(u)>=0:v.find(n,this,null,[u]).length),i[n]&&i.push(o);i.length&&s.push({elem:u,handlers:i})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var r,i,n,o=t.button;return null==e.pageX&&null!=t.clientX&&(i=(r=e.target.ownerDocument||g).documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[v.expando])return e;var t,r,i,n=e.type,o=e,s=this.fixHooks[n];for(s||(this.fixHooks[n]=s=Z.test(n)?this.mouseHooks:J.test(n)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new v.Event(o),t=i.length;t--;)e[r=i[t]]=o[r];return e.target||(e.target=g),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==te()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===te()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&v.nodeName(this,"input"))return this.click(),!1},_default:function(e){return v.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,r,i){var n=v.extend(new v.Event,r,{type:e,isSimulated:!0,originalEvent:{}});i?v.event.trigger(n,null,t):v.event.dispatch.call(t,n),n.isDefaultPrevented()&&r.preventDefault()}},v.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r,!1)},v.Event=function(e,t){if(!(this instanceof v.Event))return new v.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.getPreventDefault&&e.getPreventDefault()?Q:ee):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||v.now(),this[v.expando]=!0},v.Event.prototype={isDefaultPrevented:ee,isPropagationStopped:ee,isImmediatePropagationStopped:ee,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Q,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Q,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Q,this.stopPropagation()}},v.each({mouseenter:"mouseover",mouseleave:"mouseout"},(function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=this,n=e.relatedTarget,o=e.handleObj;return n&&(n===i||v.contains(i,n))||(e.type=o.origType,r=o.handler.apply(this,arguments),e.type=t),r}}})),f.focusinBubbles||v.each({focus:"focusin",blur:"focusout"},(function(e,t){var r=function(e){v.event.simulate(t,e.target,v.event.fix(e),!0)};v.event.special[t]={setup:function(){var i=this.ownerDocument||this,n=U.access(i,t);n||i.addEventListener(e,r,!0),U.access(i,t,(n||0)+1)},teardown:function(){var i=this.ownerDocument||this,n=U.access(i,t)-1;n?U.access(i,t,n):(i.removeEventListener(e,r,!0),U.remove(i,t))}}})),v.fn.extend({on:function(e,t,r,i,n){var o,s;if("object"==typeof e){for(s in"string"!=typeof t&&(r=r||t,t=void 0),e)this.on(s,t,r,e[s],n);return this}if(null==r&&null==i?(i=t,r=t=void 0):null==i&&("string"==typeof t?(i=r,r=void 0):(i=r,r=t,t=void 0)),!1===i)i=ee;else if(!i)return this;return 1===n&&(o=i,i=function(e){return v().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=v.guid++)),this.each((function(){v.event.add(this,e,i,r,t)}))},one:function(e,t,r,i){return this.on(e,t,r,i,1)},off:function(e,t,r){var i,n;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,v(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(n in e)this.off(n,t,e[n]);return this}return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=ee),this.each((function(){v.event.remove(this,e,r,t)}))},trigger:function(e,t){return this.each((function(){v.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var r=this[0];if(r)return v.event.trigger(e,t,r,!0)}});var re=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ie=/<([\w:]+)/,ne=/<|&#?\w+;/,oe=/<(?:script|style|link)/i,se=/checked\s*(?:[^=]|=\s*.checked.)/i,ae=/^$|\/(?:java|ecma)script/i,ue=/^true\/(.*)/,le=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ce={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function he(e,t){return v.nodeName(e,"table")&&v.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function de(e){var t=ue.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function fe(e,t){for(var r=0,i=e.length;r<i;r++)U.set(e[r],"globalEval",!t||U.get(t[r],"globalEval"))}function ge(e,t){var r,i,n,o,s,a,u,l;if(1===t.nodeType){if(U.hasData(e)&&(o=U.access(e),s=U.set(t,o),l=o.events))for(n in delete s.handle,s.events={},l)for(r=0,i=l[n].length;r<i;r++)v.event.add(t,n,l[n][r]);B.hasData(e)&&(a=B.access(e),u=v.extend({},a),B.set(t,u))}}function me(e,t){var r=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&v.nodeName(e,t)?v.merge([e],r):r}ce.optgroup=ce.option,ce.tbody=ce.tfoot=ce.colgroup=ce.caption=ce.thead,ce.th=ce.td,v.extend({clone:function(e,t,r){var i,n,o,s,a,u,l,c=e.cloneNode(!0),h=v.contains(e.ownerDocument,e);if(!(f.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||v.isXMLDoc(e)))for(s=me(c),i=0,n=(o=me(e)).length;i<n;i++)a=o[i],void 0,"input"===(l=(u=s[i]).nodeName.toLowerCase())&&z.test(a.type)?u.checked=a.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=a.defaultValue);if(t)if(r)for(o=o||me(e),s=s||me(c),i=0,n=o.length;i<n;i++)ge(o[i],s[i]);else ge(e,c);return(s=me(c,"script")).length>0&&fe(s,!h&&me(e,"script")),c},buildFragment:function(e,t,r,i){for(var n,o,s,a,u,l,c=t.createDocumentFragment(),h=[],p=0,d=e.length;p<d;p++)if((n=e[p])||0===n)if("object"===v.type(n))v.merge(h,n.nodeType?[n]:n);else if(ne.test(n)){for(o=o||c.appendChild(t.createElement("div")),s=(ie.exec(n)||["",""])[1].toLowerCase(),a=ce[s]||ce._default,o.innerHTML=a[1]+n.replace(re,"<$1></$2>")+a[2],l=a[0];l--;)o=o.lastChild;v.merge(h,o.childNodes),(o=c.firstChild).textContent=""}else h.push(t.createTextNode(n));for(c.textContent="",p=0;n=h[p++];)if((!i||-1===v.inArray(n,i))&&(u=v.contains(n.ownerDocument,n),o=me(c.appendChild(n),"script"),u&&fe(o),r))for(l=0;n=o[l++];)ae.test(n.type||"")&&r.push(n);return c},cleanData:function(e){for(var t,r,i,n,o,s,a=v.event.special,u=0;void 0!==(r=e[u]);u++){if(v.acceptData(r)&&(o=r[U.expando])&&(t=U.cache[o])){if((i=Object.keys(t.events||{})).length)for(s=0;void 0!==(n=i[s]);s++)a[n]?v.event.remove(r,n):v.removeEvent(r,n,t.handle);U.cache[o]&&delete U.cache[o]}delete B.cache[r[B.expando]]}}}),v.fn.extend({text:function(e){return D(this,(function(e){return void 0===e?v.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return this.domManip(arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||he(this,e).appendChild(e)}))},prepend:function(){return this.domManip(arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=he(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return this.domManip(arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return this.domManip(arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},remove:function(e,t){for(var r,i=e?v.filter(e,this):this,n=0;null!=(r=i[n]);n++)t||1!==r.nodeType||v.cleanData(me(r)),r.parentNode&&(t&&v.contains(r.ownerDocument,r)&&fe(me(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(v.cleanData(me(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return v.clone(this,e,t)}))},html:function(e){return D(this,(function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!oe.test(e)&&!ce[(ie.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(re,"<$1></$2>");try{for(;r<i;r++)1===(t=this[r]||{}).nodeType&&(v.cleanData(me(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,(function(t){e=this.parentNode,v.cleanData(me(this)),e&&e.replaceChild(t,this)})),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=a.apply([],e);var r,i,n,o,s,u,l=0,c=this.length,h=this,p=c-1,d=e[0],g=v.isFunction(d);if(g||c>1&&"string"==typeof d&&!f.checkClone&&se.test(d))return this.each((function(r){var i=h.eq(r);g&&(e[0]=d.call(this,r,i.html())),i.domManip(e,t)}));if(c&&(i=(r=v.buildFragment(e,this[0].ownerDocument,!1,this)).firstChild,1===r.childNodes.length&&(r=i),i)){for(o=(n=v.map(me(r,"script"),pe)).length;l<c;l++)s=r,l!==p&&(s=v.clone(s,!0,!0),o&&v.merge(n,me(s,"script"))),t.call(this[l],s,l);if(o)for(u=n[n.length-1].ownerDocument,v.map(n,de),l=0;l<o;l++)s=n[l],ae.test(s.type||"")&&!U.access(s,"globalEval")&&v.contains(u,s)&&(s.src?v._evalUrl&&v._evalUrl(s.src):v.globalEval(s.textContent.replace(le,"")))}return this}}),v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){v.fn[e]=function(e){for(var r,i=[],n=v(e),o=n.length-1,s=0;s<=o;s++)r=s===o?this:this.clone(!0),v(n[s])[t](r),u.apply(i,r.get());return this.pushStack(i)}}));var ve,ye={};function _e(e,t){var r=v(t.createElement(e)).appendTo(t.body),n=i.getDefaultComputedStyle?i.getDefaultComputedStyle(r[0]).display:v.css(r[0],"display");return r.detach(),n}function Ee(e){var t=g,r=ye[e];return r||("none"!==(r=_e(e,t))&&r||((t=(ve=(ve||v("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),r=_e(e,t),ve.detach()),ye[e]=r),r}var xe=/^margin/,be=new RegExp("^("+q+")(?!px)[a-z%]+$","i"),Se=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};function we(e,t,r){var i,n,o,s,a=e.style;return(r=r||Se(e))&&(s=r.getPropertyValue(t)||r[t]),r&&(""!==s||v.contains(e.ownerDocument,e)||(s=v.style(e,t)),be.test(s)&&xe.test(t)&&(i=a.width,n=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=r.width,a.width=i,a.minWidth=n,a.maxWidth=o)),void 0!==s?s+"":s}function Te(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){var e,t,r=g.documentElement,n=g.createElement("div"),o=g.createElement("div");function s(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",r.appendChild(n);var s=i.getComputedStyle(o,null);e="1%"!==s.top,t="4px"===s.width,r.removeChild(n)}o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===o.style.backgroundClip,n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",n.appendChild(o),i.getComputedStyle&&v.extend(f,{pixelPosition:function(){return s(),e},boxSizingReliable:function(){return null==t&&s(),t},reliableMarginRight:function(){var e,t=o.appendChild(g.createElement("div"));return t.style.cssText=o.style.cssText="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",t.style.marginRight=t.style.width="0",o.style.width="1px",r.appendChild(n),e=!parseFloat(i.getComputedStyle(t,null).marginRight),r.removeChild(n),o.innerHTML="",e}})}(),v.swap=function(e,t,r,i){var n,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];for(o in n=r.apply(e,i||[]),t)e.style[o]=s[o];return n};var Ae=/^(none|table(?!-c[ea]).+)/,Ie=new RegExp("^("+q+")(.*)$","i"),Le=new RegExp("^([+-])=("+q+")","i"),Ce={position:"absolute",visibility:"hidden",display:"block"},Ne={letterSpacing:0,fontWeight:400},Re=["Webkit","O","Moz","ms"];function Pe(e,t){if(t in e)return t;for(var r=t[0].toUpperCase()+t.slice(1),i=t,n=Re.length;n--;)if((t=Re[n]+r)in e)return t;return i}function Oe(e,t,r){var i=Ie.exec(t);return i?Math.max(0,i[1]-(r||0))+(i[2]||"px"):t}function ke(e,t,r,i,n){for(var o=r===(i?"border":"content")?4:"width"===t?1:0,s=0;o<4;o+=2)"margin"===r&&(s+=v.css(e,r+W[o],!0,n)),i?("content"===r&&(s-=v.css(e,"padding"+W[o],!0,n)),"margin"!==r&&(s-=v.css(e,"border"+W[o]+"Width",!0,n))):(s+=v.css(e,"padding"+W[o],!0,n),"padding"!==r&&(s+=v.css(e,"border"+W[o]+"Width",!0,n)));return s}function Fe(e,t,r){var i=!0,n="width"===t?e.offsetWidth:e.offsetHeight,o=Se(e),s="border-box"===v.css(e,"boxSizing",!1,o);if(n<=0||null==n){if(((n=we(e,t,o))<0||null==n)&&(n=e.style[t]),be.test(n))return n;i=s&&(f.boxSizingReliable()||n===e.style[t]),n=parseFloat(n)||0}return n+ke(e,t,r||(s?"border":"content"),i,o)+"px"}function De(e,t){for(var r,i,n,o=[],s=0,a=e.length;s<a;s++)(i=e[s]).style&&(o[s]=U.get(i,"olddisplay"),r=i.style.display,t?(o[s]||"none"!==r||(i.style.display=""),""===i.style.display&&K(i)&&(o[s]=U.access(i,"olddisplay",Ee(i.nodeName)))):o[s]||(n=K(i),(r&&"none"!==r||!n)&&U.set(i,"olddisplay",n?r:v.css(i,"display"))));for(s=0;s<a;s++)(i=e[s]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[s]||"":"none"));return e}function Me(e,t,r,i,n){return new Me.prototype.init(e,t,r,i,n)}v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=we(e,"opacity");return""===r?"1":r}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,o,s,a=v.camelCase(t),u=e.style;if(t=v.cssProps[a]||(v.cssProps[a]=Pe(u,a)),s=v.cssHooks[t]||v.cssHooks[a],void 0===r)return s&&"get"in s&&void 0!==(n=s.get(e,!1,i))?n:u[t];"string"==(o=typeof r)&&(n=Le.exec(r))&&(r=(n[1]+1)*n[2]+parseFloat(v.css(e,t)),o="number"),null!=r&&r==r&&("number"!==o||v.cssNumber[a]||(r+="px"),f.clearCloneStyle||""!==r||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(r=s.set(e,r,i))||(u[t]="",u[t]=r))}},css:function(e,t,r,i){var n,o,s,a=v.camelCase(t);return t=v.cssProps[a]||(v.cssProps[a]=Pe(e.style,a)),(s=v.cssHooks[t]||v.cssHooks[a])&&"get"in s&&(n=s.get(e,!0,r)),void 0===n&&(n=we(e,t,i)),"normal"===n&&t in Ne&&(n=Ne[t]),""===r||r?(o=parseFloat(n),!0===r||v.isNumeric(o)?o||0:n):n}}),v.each(["height","width"],(function(e,t){v.cssHooks[t]={get:function(e,r,i){if(r)return 0===e.offsetWidth&&Ae.test(v.css(e,"display"))?v.swap(e,Ce,(function(){return Fe(e,t,i)})):Fe(e,t,i)},set:function(e,r,i){var n=i&&Se(e);return Oe(0,r,i?ke(e,t,i,"border-box"===v.css(e,"boxSizing",!1,n),n):0)}}})),v.cssHooks.marginRight=Te(f.reliableMarginRight,(function(e,t){if(t)return v.swap(e,{display:"inline-block"},we,[e,"marginRight"])})),v.each({margin:"",padding:"",border:"Width"},(function(e,t){v.cssHooks[e+t]={expand:function(r){for(var i=0,n={},o="string"==typeof r?r.split(" "):[r];i<4;i++)n[e+W[i]+t]=o[i]||o[i-2]||o[0];return n}},xe.test(e)||(v.cssHooks[e+t].set=Oe)})),v.fn.extend({css:function(e,t){return D(this,(function(e,t,r){var i,n,o={},s=0;if(v.isArray(t)){for(i=Se(e),n=t.length;s<n;s++)o[t[s]]=v.css(e,t[s],!1,i);return o}return void 0!==r?v.style(e,t,r):v.css(e,t)}),e,t,arguments.length>1)},show:function(){return De(this,!0)},hide:function(){return De(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){K(this)?v(this).show():v(this).hide()}))}}),v.Tween=Me,Me.prototype={constructor:Me,init:function(e,t,r,i,n,o){this.elem=e,this.prop=r,this.easing=n||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(v.cssNumber[r]?"":"px")},cur:function(){var e=Me.propHooks[this.prop];return e&&e.get?e.get(this):Me.propHooks._default.get(this)},run:function(e){var t,r=Me.propHooks[this.prop];return this.options.duration?this.pos=t=v.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):Me.propHooks._default.set(this),this}},Me.prototype.init.prototype=Me.prototype,Me.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=v.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){v.fx.step[e.prop]?v.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[v.cssProps[e.prop]]||v.cssHooks[e.prop])?v.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Me.propHooks.scrollTop=Me.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},v.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},v.fx=Me.prototype.init,v.fx.step={};var Ue,Be,je,He,Ge,Ve=/^(?:toggle|show|hide)$/,qe=new RegExp("^(?:([+-])=|)("+q+")([a-z%]*)$","i"),We=/queueHooks$/,Ke=[function(e,t,r){var i,n,o,s,a,u,l,c=this,h={},p=e.style,d=e.nodeType&&K(e),f=U.get(e,"fxshow");for(i in r.queue||(null==(a=v._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,c.always((function(){c.always((function(){a.unqueued--,v.queue(e,"fx").length||a.empty.fire()}))}))),1===e.nodeType&&("height"in t||"width"in t)&&(r.overflow=[p.overflow,p.overflowX,p.overflowY],"none"===(l=v.css(e,"display"))&&(l=Ee(e.nodeName)),"inline"===l&&"none"===v.css(e,"float")&&(p.display="inline-block")),r.overflow&&(p.overflow="hidden",c.always((function(){p.overflow=r.overflow[0],p.overflowX=r.overflow[1],p.overflowY=r.overflow[2]}))),t)if(n=t[i],Ve.exec(n)){if(delete t[i],o=o||"toggle"===n,n===(d?"hide":"show")){if("show"!==n||!f||void 0===f[i])continue;d=!0}h[i]=f&&f[i]||v.style(e,i)}if(!v.isEmptyObject(h))for(i in f?"hidden"in f&&(d=f.hidden):f=U.access(e,"fxshow",{}),o&&(f.hidden=!d),d?v(e).show():c.done((function(){v(e).hide()})),c.done((function(){var t;for(t in U.remove(e,"fxshow"),h)v.style(e,t,h[t])})),h)s=Ze(d?f[i]:0,i,c),i in f||(f[i]=s.start,d&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}],ze={"*":[function(e,t){var r=this.createTween(e,t),i=r.cur(),n=qe.exec(t),o=n&&n[3]||(v.cssNumber[e]?"":"px"),s=(v.cssNumber[e]||"px"!==o&&+i)&&qe.exec(v.css(r.elem,e)),a=1,u=20;if(s&&s[3]!==o){o=o||s[3],n=n||[],s=+i||1;do{s/=a=a||".5",v.style(r.elem,e,s+o)}while(a!==(a=r.cur()/i)&&1!==a&&--u)}return n&&(s=r.start=+s||+i||0,r.unit=o,r.end=n[1]?s+(n[1]+1)*n[2]:+n[2]),r}]};function $e(){return setTimeout((function(){Ue=void 0})),Ue=v.now()}function Je(e,t){var r,i=0,n={height:e};for(t=t?1:0;i<4;i+=2-t)n["margin"+(r=W[i])]=n["padding"+r]=e;return t&&(n.opacity=n.width=e),n}function Ze(e,t,r){for(var i,n=(ze[t]||[]).concat(ze["*"]),o=0,s=n.length;o<s;o++)if(i=n[o].call(r,t,e))return i}function Ye(e,t,r){var i,n,o=0,s=Ke.length,a=v.Deferred().always((function(){delete u.elem})),u=function(){if(n)return!1;for(var t=Ue||$e(),r=Math.max(0,l.startTime+l.duration-t),i=1-(r/l.duration||0),o=0,s=l.tweens.length;o<s;o++)l.tweens[o].run(i);return a.notifyWith(e,[l,i,r]),i<1&&s?r:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:v.extend({},t),opts:v.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:Ue||$e(),duration:r.duration,tweens:[],createTween:function(t,r){var i=v.Tween(e,l.opts,t,r,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var r=0,i=t?l.tweens.length:0;if(n)return this;for(n=!0;r<i;r++)l.tweens[r].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(function(e,t){var r,i,n,o,s;for(r in e)if(n=t[i=v.camelCase(r)],o=e[r],v.isArray(o)&&(n=o[1],o=e[r]=o[0]),r!==i&&(e[i]=o,delete e[r]),(s=v.cssHooks[i])&&"expand"in s)for(r in o=s.expand(o),delete e[i],o)r in e||(e[r]=o[r],t[r]=n);else t[i]=n}(c,l.opts.specialEasing);o<s;o++)if(i=Ke[o].call(l,e,c,l.opts))return i;return v.map(c,Ze,l),v.isFunction(l.opts.start)&&l.opts.start.call(e,l),v.fx.timer(v.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}v.Animation=v.extend(Ye,{tweener:function(e,t){v.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var r,i=0,n=e.length;i<n;i++)r=e[i],ze[r]=ze[r]||[],ze[r].unshift(t)},prefilter:function(e,t){t?Ke.unshift(e):Ke.push(e)}}),v.speed=function(e,t,r){var i=e&&"object"==typeof e?v.extend({},e):{complete:r||!r&&t||v.isFunction(e)&&e,duration:e,easing:r&&t||t&&!v.isFunction(t)&&t};return i.duration=v.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in v.fx.speeds?v.fx.speeds[i.duration]:v.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){v.isFunction(i.old)&&i.old.call(this),i.queue&&v.dequeue(this,i.queue)},i},v.fn.extend({fadeTo:function(e,t,r,i){return this.filter(K).css("opacity",0).show().end().animate({opacity:t},e,r,i)},animate:function(e,t,r,i){var n=v.isEmptyObject(e),o=v.speed(t,r,i),s=function(){var t=Ye(this,v.extend({},e),o);(n||U.get(this,"finish"))&&t.stop(!0)};return s.finish=s,n||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(e,t,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,n=null!=e&&e+"queueHooks",o=v.timers,s=U.get(this);if(n)s[n]&&s[n].stop&&i(s[n]);else for(n in s)s[n]&&s[n].stop&&We.test(n)&&i(s[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));!t&&r||v.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,r=U.get(this),i=r[e+"queue"],n=r[e+"queueHooks"],o=v.timers,s=i?i.length:0;for(r.finish=!0,v.queue(this,e,[]),n&&n.stop&&n.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<s;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete r.finish}))}}),v.each(["toggle","show","hide"],(function(e,t){var r=v.fn[t];v.fn[t]=function(e,i,n){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(Je(t,!0),e,i,n)}})),v.each({slideDown:Je("show"),slideUp:Je("hide"),slideToggle:Je("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){v.fn[e]=function(e,r,i){return this.animate(t,e,r,i)}})),v.timers=[],v.fx.tick=function(){var e,t=0,r=v.timers;for(Ue=v.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||v.fx.stop(),Ue=void 0},v.fx.timer=function(e){v.timers.push(e),e()?v.fx.start():v.timers.pop()},v.fx.interval=13,v.fx.start=function(){Be||(Be=setInterval(v.fx.tick,v.fx.interval))},v.fx.stop=function(){clearInterval(Be),Be=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fn.delay=function(e,t){return e=v.fx&&v.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,r){var i=setTimeout(t,e);r.stop=function(){clearTimeout(i)}}))},je=g.createElement("input"),Ge=(He=g.createElement("select")).appendChild(g.createElement("option")),je.type="checkbox",f.checkOn=""!==je.value,f.optSelected=Ge.selected,He.disabled=!0,f.optDisabled=!Ge.disabled,(je=g.createElement("input")).value="t",je.type="radio",f.radioValue="t"===je.value;var Xe,Qe=v.expr.attrHandle;v.fn.extend({attr:function(e,t){return D(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){v.removeAttr(this,e)}))}}),v.extend({attr:function(e,t,r){var i,n,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===$?v.prop(e,t,r):(1===o&&v.isXMLDoc(e)||(t=t.toLowerCase(),i=v.attrHooks[t]||(v.expr.match.bool.test(t)?Xe:void 0)),void 0===r?i&&"get"in i&&null!==(n=i.get(e,t))?n:null==(n=v.find.attr(e,t))?void 0:n:null!==r?i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:(e.setAttribute(t,r+""),r):void v.removeAttr(e,t))},removeAttr:function(e,t){var r,i,n=0,o=t&&t.match(O);if(o&&1===e.nodeType)for(;r=o[n++];)i=v.propFix[r]||r,v.expr.match.bool.test(r)&&(e[i]=!1),e.removeAttribute(r)},attrHooks:{type:{set:function(e,t){if(!f.radioValue&&"radio"===t&&v.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}}}),Xe={set:function(e,t,r){return!1===t?v.removeAttr(e,r):e.setAttribute(r,r),r}},v.each(v.expr.match.bool.source.match(/\w+/g),(function(e,t){var r=Qe[t]||v.find.attr;Qe[t]=function(e,t,i){var n,o;return i||(o=Qe[t],Qe[t]=n,n=null!=r(e,t,i)?t.toLowerCase():null,Qe[t]=o),n}}));var et=/^(?:input|select|textarea|button)$/i;v.fn.extend({prop:function(e,t){return D(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[v.propFix[e]||e]}))}}),v.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,r){var i,n,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return(1!==o||!v.isXMLDoc(e))&&(t=v.propFix[t]||t,n=v.propHooks[t]),void 0!==r?n&&"set"in n&&void 0!==(i=n.set(e,r,t))?i:e[t]=r:n&&"get"in n&&null!==(i=n.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||et.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),f.optSelected||(v.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),v.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){v.propFix[this.toLowerCase()]=this}));var tt=/[\t\r\n\f]/g;v.fn.extend({addClass:function(e){var t,r,i,n,o,s,a="string"==typeof e&&e,u=0,l=this.length;if(v.isFunction(e))return this.each((function(t){v(this).addClass(e.call(this,t,this.className))}));if(a)for(t=(e||"").match(O)||[];u<l;u++)if(i=1===(r=this[u]).nodeType&&(r.className?(" "+r.className+" ").replace(tt," "):" ")){for(o=0;n=t[o++];)i.indexOf(" "+n+" ")<0&&(i+=n+" ");s=v.trim(i),r.className!==s&&(r.className=s)}return this},removeClass:function(e){var t,r,i,n,o,s,a=0===arguments.length||"string"==typeof e&&e,u=0,l=this.length;if(v.isFunction(e))return this.each((function(t){v(this).removeClass(e.call(this,t,this.className))}));if(a)for(t=(e||"").match(O)||[];u<l;u++)if(i=1===(r=this[u]).nodeType&&(r.className?(" "+r.className+" ").replace(tt," "):"")){for(o=0;n=t[o++];)for(;i.indexOf(" "+n+" ")>=0;)i=i.replace(" "+n+" "," ");s=e?v.trim(i):"",r.className!==s&&(r.className=s)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):v.isFunction(e)?this.each((function(r){v(this).toggleClass(e.call(this,r,this.className,t),t)})):this.each((function(){if("string"===r)for(var t,i=0,n=v(this),o=e.match(O)||[];t=o[i++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else r!==$&&"boolean"!==r||(this.className&&U.set(this,"__className__",this.className),this.className=this.className||!1===e?"":U.get(this,"__className__")||"")}))},hasClass:function(e){for(var t=" "+e+" ",r=0,i=this.length;r<i;r++)if(1===this[r].nodeType&&(" "+this[r].className+" ").replace(tt," ").indexOf(t)>=0)return!0;return!1}});var rt=/\r/g;v.fn.extend({val:function(e){var t,r,i,n=this[0];return arguments.length?(i=v.isFunction(e),this.each((function(r){var n;1===this.nodeType&&(null==(n=i?e.call(this,r,v(this).val()):e)?n="":"number"==typeof n?n+="":v.isArray(n)&&(n=v.map(n,(function(e){return null==e?"":e+""}))),(t=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,n,"value")||(this.value=n))}))):n?(t=v.valHooks[n.type]||v.valHooks[n.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(n,"value"))?r:"string"==typeof(r=n.value)?r.replace(rt,""):null==r?"":r:void 0}}),v.extend({valHooks:{select:{get:function(e){for(var t,r,i=e.options,n=e.selectedIndex,o="select-one"===e.type||n<0,s=o?null:[],a=o?n+1:i.length,u=n<0?a:o?n:0;u<a;u++)if(((r=i[u]).selected||u===n)&&(f.optDisabled?!r.disabled:null===r.getAttribute("disabled"))&&(!r.parentNode.disabled||!v.nodeName(r.parentNode,"optgroup"))){if(t=v(r).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var r,i,n=e.options,o=v.makeArray(t),s=n.length;s--;)((i=n[s]).selected=v.inArray(v(i).val(),o)>=0)&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),v.each(["radio","checkbox"],(function(){v.valHooks[this]={set:function(e,t){if(v.isArray(t))return e.checked=v.inArray(v(e).val(),t)>=0}},f.checkOn||(v.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),v.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(e,t){v.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}})),v.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,i){return this.on(t,e,r,i)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)}});var it=v.now(),nt=/\?/;v.parseJSON=function(e){return JSON.parse(e+"")},v.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||v.error("Invalid XML: "+e),t};var ot,st,at=/#.*$/,ut=/([?&])_=[^&]*/,lt=/^(.*?):[ \t]*([^\r\n]*)$/gm,ct=/^(?:GET|HEAD)$/,ht=/^\/\//,pt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,dt={},ft={},gt="*/".concat("*");try{st=location.href}catch(e){(st=g.createElement("a")).href="",st=st.href}function mt(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var i,n=0,o=t.toLowerCase().match(O)||[];if(v.isFunction(r))for(;i=o[n++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(r)):(e[i]=e[i]||[]).push(r)}}function vt(e,t,r,i){var n={},o=e===ft;function s(a){var u;return n[a]=!0,v.each(e[a]||[],(function(e,a){var l=a(t,r,i);return"string"!=typeof l||o||n[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),s(l),!1)})),u}return s(t.dataTypes[0])||!n["*"]&&s("*")}function yt(e,t){var r,i,n=v.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((n[r]?e:i||(i={}))[r]=t[r]);return i&&v.extend(!0,e,i),e}ot=pt.exec(st.toLowerCase())||[],v.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:st,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ot[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":gt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":v.parseJSON,"text xml":v.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?yt(yt(e,v.ajaxSettings),t):yt(v.ajaxSettings,e)},ajaxPrefilter:mt(dt),ajaxTransport:mt(ft),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,n,o,s,a,u,l,c=v.ajaxSetup({},t),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?v(h):v.event,d=v.Deferred(),f=v.Callbacks("once memory"),g=c.statusCode||{},m={},y={},_=0,E="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!o)for(o={};t=lt.exec(n);)o[t[1].toLowerCase()]=t[2];t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?n:null},setRequestHeader:function(e,t){var r=e.toLowerCase();return _||(e=y[r]=y[r]||e,m[e]=t),this},overrideMimeType:function(e){return _||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(_<2)for(t in e)g[t]=[g[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||E;return r&&r.abort(t),b(0,t),this}};if(d.promise(x).complete=f.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||st)+"").replace(at,"").replace(ht,ot[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=v.trim(c.dataType||"*").toLowerCase().match(O)||[""],null==c.crossDomain&&(a=pt.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===ot[1]&&a[2]===ot[2]&&(a[3]||("http:"===a[1]?"80":"443"))===(ot[3]||("http:"===ot[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=v.param(c.data,c.traditional)),vt(dt,c,t,x),2===_)return x;for(l in(u=c.global)&&0==v.active++&&v.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!ct.test(c.type),i=c.url,c.hasContent||(c.data&&(i=c.url+=(nt.test(i)?"&":"?")+c.data,delete c.data),!1===c.cache&&(c.url=ut.test(i)?i.replace(ut,"$1_="+it++):i+(nt.test(i)?"&":"?")+"_="+it++)),c.ifModified&&(v.lastModified[i]&&x.setRequestHeader("If-Modified-Since",v.lastModified[i]),v.etag[i]&&x.setRequestHeader("If-None-Match",v.etag[i])),(c.data&&c.hasContent&&!1!==c.contentType||t.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+gt+"; q=0.01":""):c.accepts["*"]),c.headers)x.setRequestHeader(l,c.headers[l]);if(c.beforeSend&&(!1===c.beforeSend.call(h,x,c)||2===_))return x.abort();for(l in E="abort",{success:1,error:1,complete:1})x[l](c[l]);if(r=vt(ft,c,t,x)){x.readyState=1,u&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(s=setTimeout((function(){x.abort("timeout")}),c.timeout));try{_=1,r.send(m,b)}catch(e){if(!(_<2))throw e;b(-1,e)}}else b(-1,"No Transport");function b(e,t,o,a){var l,m,y,E,b,S=t;2!==_&&(_=2,s&&clearTimeout(s),r=void 0,n=a||"",x.readyState=e>0?4:0,l=e>=200&&e<300||304===e,o&&(E=function(e,t,r){for(var i,n,o,s,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(n in a)if(a[n]&&a[n].test(i)){u.unshift(n);break}if(u[0]in r)o=u[0];else{for(n in r){if(!u[0]||e.converters[n+" "+u[0]]){o=n;break}s||(s=n)}o=o||s}if(o)return o!==u[0]&&u.unshift(o),r[o]}(c,x,o)),E=function(e,t,r,i){var n,o,s,a,u,l={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(r[e.responseFields[o]]=t),!u&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(s=l[u+" "+o]||l["* "+o]))for(n in l)if((a=n.split(" "))[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){!0===s?s=l[n]:!0!==l[n]&&(o=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(c,E,x,l),l?(c.ifModified&&((b=x.getResponseHeader("Last-Modified"))&&(v.lastModified[i]=b),(b=x.getResponseHeader("etag"))&&(v.etag[i]=b)),204===e||"HEAD"===c.type?S="nocontent":304===e?S="notmodified":(S=E.state,m=E.data,l=!(y=E.error))):(y=S,!e&&S||(S="error",e<0&&(e=0))),x.status=e,x.statusText=(t||S)+"",l?d.resolveWith(h,[m,S,x]):d.rejectWith(h,[x,S,y]),x.statusCode(g),g=void 0,u&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?m:y]),f.fireWith(h,[x,S]),u&&(p.trigger("ajaxComplete",[x,c]),--v.active||v.event.trigger("ajaxStop")))}return x},getJSON:function(e,t,r){return v.get(e,t,r,"json")},getScript:function(e,t){return v.get(e,void 0,t,"script")}}),v.each(["get","post"],(function(e,t){v[t]=function(e,r,i,n){return v.isFunction(r)&&(n=n||i,i=r,r=void 0),v.ajax({url:e,type:t,dataType:n,data:r,success:i})}})),v.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){v.fn[t]=function(e){return this.on(t,e)}})),v._evalUrl=function(e){return v.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},v.fn.extend({wrapAll:function(e){var t;return v.isFunction(e)?this.each((function(t){v(this).wrapAll(e.call(this,t))})):(this[0]&&(t=v(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this)},wrapInner:function(e){return v.isFunction(e)?this.each((function(t){v(this).wrapInner(e.call(this,t))})):this.each((function(){var t=v(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)}))},wrap:function(e){var t=v.isFunction(e);return this.each((function(r){v(this).wrapAll(t?e.call(this,r):e)}))},unwrap:function(){return this.parent().each((function(){v.nodeName(this,"body")||v(this).replaceWith(this.childNodes)})).end()}}),v.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},v.expr.filters.visible=function(e){return!v.expr.filters.hidden(e)};var _t=/%20/g,Et=/\[\]$/,xt=/\r?\n/g,bt=/^(?:submit|button|image|reset|file)$/i,St=/^(?:input|select|textarea|keygen)/i;function wt(e,t,r,i){var n;if(v.isArray(t))v.each(t,(function(t,n){r||Et.test(e)?i(e,n):wt(e+"["+("object"==typeof n?t:"")+"]",n,r,i)}));else if(r||"object"!==v.type(t))i(e,t);else for(n in t)wt(e+"["+n+"]",t[n],r,i)}v.param=function(e,t){var r,i=[],n=function(e,t){t=v.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=v.ajaxSettings&&v.ajaxSettings.traditional),v.isArray(e)||e.jquery&&!v.isPlainObject(e))v.each(e,(function(){n(this.name,this.value)}));else for(r in e)wt(r,e[r],t,n);return i.join("&").replace(_t,"+")},v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=v.prop(this,"elements");return e?v.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!v(this).is(":disabled")&&St.test(this.nodeName)&&!bt.test(e)&&(this.checked||!z.test(e))})).map((function(e,t){var r=v(this).val();return null==r?null:v.isArray(r)?v.map(r,(function(e){return{name:t.name,value:e.replace(xt,"\r\n")}})):{name:t.name,value:r.replace(xt,"\r\n")}})).get()}}),v.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Tt=0,At={},It={0:200,1223:204},Lt=v.ajaxSettings.xhr();i.ActiveXObject&&v(i).on("unload",(function(){for(var e in At)At[e]()})),f.cors=!!Lt&&"withCredentials"in Lt,f.ajax=Lt=!!Lt,v.ajaxTransport((function(e){var t;if(f.cors||Lt&&!e.crossDomain)return{send:function(r,i){var n,o=e.xhr(),s=++Tt;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(n in e.xhrFields)o[n]=e.xhrFields[n];for(n in e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)o.setRequestHeader(n,r[n]);t=function(e){return function(){t&&(delete At[s],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?i(o.status,o.statusText):i(It[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=At[s]=t("abort"),o.send(e.hasContent&&e.data||null)},abort:function(){t&&t()}}})),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return v.globalEval(e),e}}}),v.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),v.ajaxTransport("script",(function(e){var t,r;if(e.crossDomain)return{send:function(i,n){t=v("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&n("error"===e.type?404:200,e.type)}),g.head.appendChild(t[0])},abort:function(){r&&r()}}}));var Ct=[],Nt=/(=)\?(?=&|$)|\?\?/;v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ct.pop()||v.expando+"_"+it++;return this[e]=!0,e}}),v.ajaxPrefilter("json jsonp",(function(e,t,r){var n,o,s,a=!1!==e.jsonp&&(Nt.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Nt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=v.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Nt,"$1"+n):!1!==e.jsonp&&(e.url+=(nt.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return s||v.error(n+" was not called"),s[0]},e.dataTypes[0]="json",o=i[n],i[n]=function(){s=arguments},r.always((function(){i[n]=o,e[n]&&(e.jsonpCallback=t.jsonpCallback,Ct.push(n)),s&&v.isFunction(o)&&o(s[0]),s=o=void 0})),"script"})),v.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||g;var i=w.exec(e),n=!r&&[];return i?[t.createElement(i[1])]:(i=v.buildFragment([e],t,n),n&&n.length&&v(n).remove(),v.merge([],i.childNodes))};var Rt=v.fn.load;v.fn.load=function(e,t,r){if("string"!=typeof e&&Rt)return Rt.apply(this,arguments);var i,n,o,s=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a),e=e.slice(0,a)),v.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(n="POST"),s.length>0&&v.ajax({url:e,type:n,dataType:"html",data:t}).done((function(e){o=arguments,s.html(i?v("<div>").append(v.parseHTML(e)).find(i):e)})).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},v.expr.filters.animated=function(e){return v.grep(v.timers,(function(t){return e===t.elem})).length};var Pt=i.document.documentElement;function Ot(e){return v.isWindow(e)?e:9===e.nodeType&&e.defaultView}v.offset={setOffset:function(e,t,r){var i,n,o,s,a,u,l=v.css(e,"position"),c=v(e),h={};"static"===l&&(e.style.position="relative"),a=c.offset(),o=v.css(e,"top"),u=v.css(e,"left"),("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1?(s=(i=c.position()).top,n=i.left):(s=parseFloat(o)||0,n=parseFloat(u)||0),v.isFunction(t)&&(t=t.call(e,r,a)),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+n),"using"in t?t.using.call(e,h):c.css(h)}},v.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){v.offset.setOffset(this,e,t)}));var t,r,i=this[0],n={top:0,left:0},o=i&&i.ownerDocument;return o?(t=o.documentElement,v.contains(t,i)?(typeof i.getBoundingClientRect!==$&&(n=i.getBoundingClientRect()),r=Ot(o),{top:n.top+r.pageYOffset-t.clientTop,left:n.left+r.pageXOffset-t.clientLeft}):n):void 0},position:function(){if(this[0]){var e,t,r=this[0],i={top:0,left:0};return"fixed"===v.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),v.nodeName(e[0],"html")||(i=e.offset()),i.top+=v.css(e[0],"borderTopWidth",!0),i.left+=v.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-v.css(r,"marginTop",!0),left:t.left-i.left-v.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||Pt;e&&!v.nodeName(e,"html")&&"static"===v.css(e,"position");)e=e.offsetParent;return e||Pt}))}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var r="pageYOffset"===t;v.fn[e]=function(n){return D(this,(function(e,n,o){var s=Ot(e);if(void 0===o)return s?s[t]:e[n];s?s.scrollTo(r?i.pageXOffset:o,r?o:i.pageYOffset):e[n]=o}),e,n,arguments.length,null)}})),v.each(["top","left"],(function(e,t){v.cssHooks[t]=Te(f.pixelPosition,(function(e,r){if(r)return r=we(e,t),be.test(r)?v(e).position()[t]+"px":r}))})),v.each({Height:"height",Width:"width"},(function(e,t){v.each({padding:"inner"+e,content:t,"":"outer"+e},(function(r,i){v.fn[i]=function(i,n){var o=arguments.length&&(r||"boolean"!=typeof i),s=r||(!0===i||!0===n?"margin":"border");return D(this,(function(t,r,i){var n;return v.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(n=t.documentElement,Math.max(t.body["scroll"+e],n["scroll"+e],t.body["offset"+e],n["offset"+e],n["client"+e])):void 0===i?v.css(t,r,s):v.style(t,r,i,s)}),t,o?i:void 0,o,null)}}))})),v.fn.size=function(){return this.length},v.fn.andSelf=v.fn.addBack,void 0===(r=function(){return v}.apply(t,[]))||(e.exports=r);var kt=i.jQuery,Ft=i.$;return v.noConflict=function(e){return i.$===v&&(i.$=Ft),e&&i.jQuery===v&&(i.jQuery=kt),v},typeof n===$&&(i.jQuery=i.$=v),v},"object"==typeof e.exports?e.exports=i.document?n(i,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(i)},5386:(e,t,r)=>{var i=r(2830);window.jQuery=r(2830);var n=r(4813),o=r(9502),s=r(3206).resolve,a=r(3705),u=r(5587),l=r(7269),c=r(4186),h=r(9045);r(2226),r(3866),r(5565),r(3478),r(6523),r(6159),r(3132),void 0===r.g.process&&(r.g.process=r(470)),function(e){function t(t,r){this.element=t,this.options=e.extend({},this.options,r),this._createQueryWorker(),this._initQueryTabs()}function i(e){var t,r,i;function n(){t="",e.empty(),r=50,clearTimeout(i)}function o(n){r>0?(e.append(p(n)),0==--r&&(i=setTimeout(s,1e3))):t+=n}function s(){clearTimeout(i),i=null,t?(e.append(p(t)),t="",i=setTimeout(s,1e3)):r=1}return n(),o.clear=n,o.flush=s,o}function p(e){return(e+"").split("\n").map((function(e){return e.replace(/(<)|(>)|(&)/g,d).replace(/([\s"])(https?:\/\/[^\s<>"]+)/g,f)})).join("<br/>")}function d(e,t,r,i){return(t?"&lt;":r&&"&gt;")||i&&"&amp;"}function f(e,t,r){return t+'<a href="'+(r=p(r))+'" target=_blank>'+r+"</a>"}function g(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function m(e,t){for(var r={},i=e?e.length:0,n=0;n<i;n++)r[e[n]]=t;return r}function v(e){if(e)try{return new Date(Date.parse(e))}catch(e){}}function y(t,r){return r=r||e("<div>",{class:"result"}).append(e("<dl>"))[0],e(r.firstChild).empty().append(e.map(t,(function(t,r){return[e("<dt>",{text:r}),e("<dd>",{html:p(t)})]}))),r}e.fn.queryui=function(r,i,n){"string"!=typeof r&&(n=i,i=r,r="init");for(var o=this,s=0;s<this.length&&o===this;s++){var a=e(this[s]),u=a.data("queryui");switch(r){case"init":u||(a.data("queryui",u=new t(a,i)),u._create());break;case"option":if(!u)throw new Error("Query UI not activated on this element");void 0===i?o=u.options:void 0===n?o=u.options[n]:u._setOption(i,n)}}return o},t.prototype={options:{datasources:[],queries:[],prefixes:[]},_create:function(){var t=this,r=this.options,n=this.element,o=this.$stop=e(".stop",n),s=this.$start=e(".start",n),a=e(".querytext"),u=e(".querycontext"),l=e(".results-to-tree"),c=this.$queryTextsIndexed={},p=this.$queryContextsIndexed={},d=this.$queryResultsToTreesIndexed={},f=this.$queries=e(".query",n),g=e(".log",n),v=e(".results",n),_=e("<div>",{class:"text"}),E=this.$datasources=e(".datasources",n),x=this.$datetime=e(".datetime",n),b=this.$httpProxy=e(".httpProxy",n),S=this.$bypassCache=e(".bypassCache",n),w=this.$solidIdp=e(".solid-auth .idp",n),T=this.$showDetails=e(".details-toggle",n),A=e(".proxy-default",n);for(var I in this.$details=e(".details",n),E.length||(E=this.$datasources=e("<select>")),v.length||(v=e("<div>")),g.length||(g=e("<div>")),E.chosen({create_option:function(e){return r.datasources.map((function(e){return e.url})).indexOf(e)>=0?(r.selectedDatasources[e]="persistent",t._setOption("selectedDatasources",Object.assign({},r.selectedDatasources)),!1):this.select_append_option({value:e,text:e})},persistent_create_option:!0,skip_no_results:!0,search_contains:!0,display_selected_options:!1,placeholder_text:" ",create_option_text:"Add datasource"}),E.change((function(){var e=m(E.val(),"persistent");Object.keys(r.selectedDatasources).forEach((function(t){t in e&&(e[t]=r.selectedDatasources[t])})),t._setOption("selectedDatasources",e)})),a.each((function(){var i=e(this),n=i.parent().attr("id").substr(4);c[n]=i,i.edited=""!==i.val(),i.change((function(){r.query=i.val(),i.edited=!0})),c[n].sync=function(){i.yasqe&&i.yasqe.getValue()!==r.query&&i.yasqe.setValue(r.query),t._setSelectedDataSourcesForQuery()},h&&i.hasClass("yasqe")&&(i.yasqe=h.fromTextArea(i[0],{createShareLink:null,persistent:null}),i.yasqe.on("change",(function(){i.val(i.yasqe.getValue()),i.change()})))})),u.each((function(){var t=e(this),i=t.parent().attr("id").substr(4);p[i]=t,t.edited=""!==t.val(),t.change((function(){r.queryContext=t.val(),t.edited=!0}))})),l.each((function(){var t=e(this),i=t.parent().attr("id").substr(4);d[i]=t,t.edited=""!==t.val(),t.change((function(){r.resultsToTree=t.is(":checked"),t.edited=!0}))})),f.chosen({skip_no_results:!0,placeholder_text:" "}),f.change((function(e){if(r.query!==f.val()&&(e=f.val())){t._setOption("queryFormat",f.find(":selected").attr("queryFormat"));var i=f.find(":selected").attr("queryContext");p[r.queryFormat]&&(p[r.queryFormat].val(r.queryContext=i).edited=!1),c[r.queryFormat].val(r.query=e).edited=!1,c[r.queryFormat].sync();var n=t._getHashedQueryDatasources(t._getSelectedQueryId());t._setOption("selectedDatasources",n)}})),x.change((function(){t._setOption("datetime",x.val())})),b.change((function(){t._setOption("httpProxy",b.val())})),S.change((function(){t._setOption("bypassCache",S.is(":checked"))})),w.change((function(){t._setOption("solidIdp",w.val())})),s.click(this._startExecution.bind(this)),o.click(this._stopExecutionForcefully.bind(this)),T.click((function(){t.$details.is(":visible")?t._hideDetails():t._showDetails()})),v.append(_),this._resultsScroller=new FastScroller(v,y),this._resultAppender=i(_),this._logAppender=i(g),this.$timing=e(".timing",n),A.on("click",(function(){return b.val(document.location.protocol+"//proxy.linkeddatafragments.org/").change(),!1})),r)this._setOption(I,r[I],!0)},_setOption:function(t,r,i){var n=this.options;if(i||n[t]!==r){n[t]=r;var o=this,s=this.$datasources,l=this.$queries;switch(t){case"map":const b=this.$map=e(".results-map",this.element),S=this.$mapWrapper=e(".results-map-wrapper",this.element);this.map=u.map(b.get(0)).setView([52.517987721,6.116665362],8),this.mapLayer=u.layerGroup().addTo(this.map),u.tileLayer(r.url,{maxZoom:18,attribution:r.attribution,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1}).addTo(this.map),S.hide();break;case"solidAuth":if(r){r.settingsOnly||(e(".solid-auth",this.element).removeClass("details").show(),this.$details=e(".details",this.$element)),r.defaultIdp&&o._setOption("solidIdp",r.defaultIdp);const t=e(".idp",this.element),i=e(".login",this.element),n=e(".webid",this.element),s=this.$solidSession=new a.Session;s.onSessionRestore((e=>{history.pushState(null,null,e),o.element.trigger("loadStateFromUrl")})),this._createQueryWorkerSessionHandler(),s.handleIncomingRedirect({url:window.location.href,restorePreviousSession:!0}).then((()=>{o.element.trigger("loadStateFromUrl"),i.removeAttr("disabled"),s.info.isLoggedIn?(i.text("Log out"),t.hide(),o._setWebIdName(),n.show(),o._setOption("datasources",[{name:"My Solid Profile",url:s.info.webId},...o.options.datasources]),this._queryWorker.postMessage({type:"getWebIdName",webId:s.info.webId,context:o._getQueryContext()})):(i.text("Log in"),n.hide(),t.show()),i.on("click",(function(){return s.info.isLoggedIn?(s.logout(),i.text("Log in"),n.hide(),t.show()):s.login({oidcIssuer:t.val(),redirectUrl:"https://query.linkeddatafragments.org/",clientName:"Comunica Web Client",clientId:"https://query.linkeddatafragments.org/solid-client-id.jsonld"}),!1}))}))}break;case"solidIdp":this.$solidIdp.val(r).change();break;case"queryFormats":var c=null,h=!1;for(var p in r)r[p]?c?h=!0:c=p:e("#"+p).hide();c&&this._setOption("queryFormat",c),h||this.element.find(".query-texts").hide();break;case"datasources":var d={};r.forEach((function(e,t){if(!e.name)throw new Error('Invalid datasource configuration: No "name" entry was found for datasource '+t);if(!e.url)throw new Error('Invalid datasource configuration: No "url" entry was found for datasource "'+e.name+'"');if(d[e.url])throw new Error('Invalid datasource configuration: Each URL can only occur once in the datasource list, but found "'+e.url+'" in datasources "'+d[e.url]+'" and "'+e.name+'"');d[e.url]=e.name})),s.find("option:not(.extra-information)").remove(),s.append((r||[]).map((function(t,r){return e("<option>",{text:t.name,value:t.url})}))),this._setOption("selectedDatasources",n.selectedDatasources,!0);break;case"selectedDatasources":var f=s.children();i&&(!r||!Object.keys(r).length)&&f.length>1&&(n[t]=r={},r[f[1].value]="transient");var v=m(r?Object.keys(r):[],"persistent");f.each((function(t){if(t>0){var i=e(this),n=e(this).val();i.prop("selected",n in v),i.toggleClass("search-choice-transient",!(!(n in v)||"transient"!==r[n])),v[n]="default"}})),s.append(e.map(v,(function(t,r){return"default"===t?null:e("<option>",{text:r,value:r,selected:!0})}))).trigger("chosen:updated"),this._loadQueries(r);break;case"query":for(var y in this.$queryTextsIndexed)this.$queryTextsIndexed[y].val("");this.$queryTextsIndexed[n.queryFormat].val(r).change(),this.$queryTextsIndexed[n.queryFormat].sync(),this._refreshQueries(l);break;case"context":this.$contextDefault=r;break;case"queryContext":for(var _ in this.$queryContextsIndexed)this.$queryContextsIndexed[_].val("");this.$queryContextsIndexed[n.queryFormat]&&this.$queryContextsIndexed[n.queryFormat].val(r).change();break;case"resultsToTree":for(var E in this.$queryResultsToTreesIndexed)this.$queryResultsToTreesIndexed[E][0].checked=!1;this.$queryResultsToTreesIndexed[n.queryFormat]&&(this.$queryResultsToTreesIndexed[n.queryFormat][0].checked=r,this.$queryResultsToTreesIndexed[n.queryFormat].change());break;case"queryFormat":var x=e("#"+r);x.hasClass("inactive")&&(this.element.find(".query-texts").find("li a").addClass("inactive"),x.removeClass("inactive"),o.element.find(".query-text-container").hide(),e("#tab-"+r).show()),this.options.query=this.$queryTextsIndexed[n.queryFormat].val(),this.options.queryContext=this.$queryContextsIndexed[n.queryFormat]?this.$queryContextsIndexed[n.queryFormat].val():"",this.options.resultsToTree=!!this.$queryResultsToTreesIndexed[n.queryFormat]&&this.$queryResultsToTreesIndexed[n.queryFormat][0].checked,this.element.change();break;case"queries":this._setSelectedDataSourcesForQuery(),r.forEach((function(e){e.datasourceMatcher=new RegExp("^(?:"+e.datasources.map(g).join("|").replace(/\\\*|^$/g,".*")+")$")})),this._loadQueries(n.selectedDatasources);break;case"datetime":r&&this._showDetails(),this.$datetime.val(r).change();break;case"httpProxy":r&&this._showDetails(),this.$httpProxy.val(r).change();break;case"bypassCache":this.$bypassCache.prop("checked",r).change();break;case"relevantQueries":r=r||[],this.$queryTextsIndexed[n.queryFormat].edited||r.some((function(e){return e.query===n.query}))||!r[0]||(this._setOption("queryFormat",r[0].queryFormat),this._setOption("query",r[0].query),this._setOption("queryContext",r[0].context),r[0].datasources.length>1&&1===Object.keys(n.selectedDatasources).length&&"transient"===n.selectedDatasources[Object.keys(n.selectedDatasources)[0]]&&o._setOption("selectedDatasources",this._getHashedQueryDatasources(this._getSelectedQueryId()))),this._refreshQueries(l);break;case"branding":r.title&&e("body header h1 a").text(r.title),r.title_href&&e("body header h1 a").attr("href",r.title_href),r.title&&e("body header p a").text(r.subtitle),r.subtitle_href&&e("body header p a").attr("href",r.subtitle_href),r.page_title&&e("head title").text(r.page_title);break;case"allowNoSources":this.$allowNoSources=r;break;case"settings":e.getJSON(r,(function(e){for(var t in e)o._setOption(t,e[t]);o.element.trigger("settingsUpdated")}))}}},_getHashedQueryDatasources:function(e){var t,r=this._getPersistedDatasources(),i=this._getQueryDatasources(e,r),n=!Object.keys(r).some((function(e){return i.indexOf(r[e])<0}));if(n)for(var o in t=m(i,"transient"),r)t[r[o]]="persistent";else t=m(r,"persistent");return t},_getPersistedDatasources:function(){var e=[];return Object.keys(this.options.selectedDatasources).forEach((function(t){"persistent"===this.options.selectedDatasources[t]&&e.push(t)}),this),e},_setSelectedDataSourcesForQuery:function(){if(this._getSelectedQueryId()>=0){var e=this._getHashedQueryDatasources(this._getSelectedQueryId());this._setOption("selectedDatasources",e)}},_getSelectedQueryId:function(){var e=-1;return this.options.queries.forEach((function(t,r){t.query===this.options.query&&(e=r)}),this),e},_getQueryDatasources:function(e,t){t=t||[];var r=this.options.queries[e].datasources;r.length||(r=["*"]);var i=[];return r.forEach((function(e){var r=new RegExp("^"+e.replace(/\*/g,".*")+"$");n(t,r)||n(this.options.datasources.map((function(e){return e.url})),r)}),this),i;function n(e,t){return Object.keys(e).some((function(r){return t.test(e[r])&&i.push(e[r])}))}},_refreshQueries:function(t){var r=this.options;t.empty().append(e("<option>"),r.queries.map((function(t){return e("<option>",{text:t.name,value:t.query,selected:r.query===t.query}).attr("queryFormat",t.queryFormat).attr("queryContext",t.context).addClass("query-type-"+t.queryFormat).addClass("query").toggleClass("query-relevant",r.relevantQueries.indexOf(t)>=0)}))).trigger("chosen:updated").change()},_loadQueries:function(e){var t=(this.options.queries||[]).filter((function(t,r){t.id=r;var i=Object.keys(e).filter((function(t){return"persistent"===e[t]}));return!e||!i.length||i.some((function(e){return!t.datasourceMatcher||t.datasourceMatcher.test(e)}))})),r=t.map((function(e){return e.id})).join();this._querySetId!==r&&(this._querySetId=r,this._setOption("relevantQueries",t))},_startExecution:function(){var t=this.$datasources.val()||[];if(!t.length&&!this.$allowNoSources)return alert("Please choose a datasource to execute the query.");this.$mapWrapper&&(this.$mapWrapper.hide(),this.mapLayer.clearLayers(),this.markerArray=[]),this.$stop.show(),this.$start.hide(),this._resultsScroller.removeAll(),this._resultAppender.clear(),this._logAppender.clear(),this.options.bypassCache&&this._stopExecutionForcefully(),e("html,body").animate({scrollTop:this.$stop.offset().top}),this._resultCount=0,this._startTimer();var r={...this._getQueryContext(),sources:t.map((function(e){var t,r=e.indexOf("@");return r>0&&(t=e.substr(0,r),e=e.substr(r+1,e.length)),{type:t,value:e=s(e,window.location.href)}}))},i="";if("sparql"===this.options.queryFormat)for(var n in this.options.prefixes)i+="PREFIX "+n+": <"+this.options.prefixes[n]+">\n";var o=i+this.$queryTextsIndexed[this.options.queryFormat].val();this._queryWorker.postMessage({type:"query",query:o,context:r,resultsToTree:this.options.resultsToTree})},_getQueryContext:function(){var e={...this.$contextDefault||{},datetime:v(this.options.datetime),queryFormat:this.options.queryFormat,httpProxy:this.options.httpProxy,workerSolidAuth:!!this.$solidSession};if(this.options.queryContext)try{var t=JSON.parse(this.options.queryContext);Object.assign(e,t)}catch(e){this._resultAppender(e.message+"\n")}return e},_stopExecutionBase:function(e){this._stopTimer(),this.$stop.hide(),this.$start.show(),e&&e.message&&this._resultAppender("# "+e.message),this._resultAppender.flush(),this._logAppender.flush(),this._writeResult=this._writeEnd=null},_stopExecution:function(e){this._queryWorker.postMessage({type:"stop"}),this._stopExecutionBase(e)},_stopExecutionForcefully:function(e){this._queryWorker.terminate(),this._createQueryWorker(),this._createQueryWorkerSessionHandler(),this._stopExecutionBase(e)},_initResults:function(t){var r=this._resultAppender;switch(t){case"bindings":this._writeResult=function(e){this._resultsScroller.addContent([e])},this._writeEnd=function(){this._resultCount||r("This query has no results.")};break;case"quads":var i=new n.StreamWriter(this.options).on("data",r).on("error",(e=>{throw e}));this._writeResult=function(e){i.write(o.stringQuadToQuad(e))},this._writeEnd=function(){i.end()};break;case"boolean":this._writeResult=function(e){r(e)},this._writeEnd=e.noop;break;default:r(t+" queries are unsupported.")}},_addResult:function(e){this._writeResult&&(this._resultCount++,this._writeResult(e),this.map&&this._handleGeospatialResult(e))},_handleGeospatialResult:function(e){var t=this;for(const r in e){const i=e[r];if(i.endsWith("^^http://www.openlinksw.com/schemas/virtrdf#Geometry")||i.endsWith("^^http://www.opengis.net/ont/geosparql#wktLiteral")){const n=e[`${r}Label`],o=/^"(.*)"\^\^[^\^]*$/.exec(i)[1],s=new c.Wkt;s.read(o);const a={type:"Feature",properties:{},geometry:s.toJson()};n&&(a.properties.name=n.split("@",1)[0].replace(/['"]+/g,""));let h=u.geoJSON(a,{onEachFeature:function(e){let r,i;if("Polygon"===e.geometry.type){const t=l.centroid(e);r=t.geometry.coordinates[0],i=t.geometry.coordinates[1]}if("Point"===e.geometry.type&&(r=e.geometry.coordinates[0],i=e.geometry.coordinates[1]),r&&i){let o=u.circleMarker([i,r]);t.mapLayer.addLayer(o).addTo(t.map),t.markerArray.push(o),n&&o.bindPopup(e.properties.name)}}});t.mapLayer.addLayer(h).addTo(t.map),t.map.fitBounds(u.featureGroup(t.markerArray).getBounds()),t.$mapWrapper.is(":visible")||t.$mapWrapper.show()}}},_endResults:function(){this._writeEnd&&(this._writeEnd(),this._stopExecution())},_startTimer:function(){this._startTime=new Date,this._stopTimer(),this._updateTimer(),this._updateTimerHandle=setInterval(this._updateTimer.bind(this),100)},_updateTimer:function(){this.$timing.text(this._resultCount.toLocaleString()+" result"+(1===this._resultCount?"":"s")+" in "+((new Date-this._startTime)/1e3).toFixed(1)+"s")},_stopTimer:function(){this._updateTimerHandle&&(this._updateTimer(),clearInterval(this._updateTimerHandle),this._updateTimerHandle=0)},_showDetails:function(){this.$details.slideDown(150),this.$showDetails.addClass("enabled")},_hideDetails:function(){this._setOption("datetime",""),this.$details.slideUp(150),this.$showDetails.removeClass("enabled")},_initQueryTabs:function(){var t=this.element.find(".query-texts");t.find("li a:not(:first)").addClass("inactive"),this.element.find(".query-text-container").hide(),this.element.find(".query-text-container:first").show(),this.options.queryFormat=t.find("li a:first").attr("id");var r=this;t.find("li a").click((function(){var t=e(this).attr("id");r._setOption("queryFormat",t)}))},_createQueryWorker:function(){var e=this;this._queryWorker=new Worker("scripts/ldf-client-worker.min.js"),this._queryWorkerSessionHandler=void 0,this._queryWorker.onmessage=function(t){if(!e._queryWorkerSessionHandler||!e._queryWorkerSessionHandler.onmessage(t)){var r=t.data;switch(r.type){case"queryInfo":return e._initResults(r.queryType);case"result":return e._addResult(r.result);case"end":return e._endResults();case"log":return e._logAppender(r.log);case"error":return this.onerror(r.error);case"webIdName":return e._setWebIdName(r.name)}}},this._queryWorker.onerror=function(t){e._stopExecution(t)}},_createQueryWorkerSessionHandler:function(){this.$solidSession&&(this._queryWorkerSessionHandler=new a.WindowToWorkerHandler(this,this._queryWorker,this.$solidSession))},_setWebIdName:function(t){var r;e(".webid",this.element).html(`Logged in as <a href="${this.$solidSession.info.webId}" target="_blank">${t||(r=this.$solidSession.info.webId,35,r.length>35?"&hellip;"+r.slice(r.length-35,r.length):r)}</a>`)}},document.getElementById("comunica-version").innerHTML="Comunica version: "+r(4390).version}(i)},2202:(e,t,r)=>{r(2830)((function(e){var t=e(".ldf-client").one("settingsUpdated",(function(){r(),e(window).on("popstate",r),history.replaceState&&t.on("change",i)}));function r(){var e=location.hash;!location.hash&&location.search&&location.search.indexOf("&state")<0&&(e=location.search.replace(/\+/g,"%20"),history.replaceState(null,null,window.location.href.replace("?","#").replace(/\+/g,"%20")));var r=e.substr(1).split("&").reduce((function(e,t){var r=t.match(/^([^=]+)=(.*)/);return r&&(e[decodeURIComponent(r[1])]=decodeURIComponent(r[2])),e}),{});if((r.datasources=r.datasources||r.startFragment)||r.transientDatasources){var i={};r.datasources&&r.datasources.split(/[ ,;]+/).forEach((function(e){i[e]="persistent"})),r.transientDatasources&&r.transientDatasources.split(/[ ,;]+/).forEach((function(e){i[e]="transient"})),t.queryui("option","selectedDatasources",i)}r.queryFormat&&t.queryui("option","queryFormat",r.queryFormat),r.query&&t.queryui("option","query",r.query),r.queryContext&&t.queryui("option","queryContext",r.queryContext),r.resultsToTree&&t.queryui("option","resultsToTree","false"!==r.resultsToTree),r.datetime&&t.queryui("option","datetime",r.datetime),r.httpProxy&&t.queryui("option","httpProxy",r.httpProxy),r.bypassCache&&t.queryui("option","bypassCache",r.bypassCache),r.solidIdp&&t.queryui("option","solidIdp",r.solidIdp)}function i(){var e=[],r=t.queryui("option"),i={persistent:[],transient:[]},n=r.query===(r.queries[0]||{}).query;Object.keys(r.selectedDatasources||{}).forEach((function(e){i[r.selectedDatasources[e]].push(e)})),0!==i.persistent.length&&e.push("datasources="+i.persistent.map(encodeURIComponent).join(";")),0!==i.transient.length&&e.push("transientDatasources="+i.transient.map(encodeURIComponent).join(";")),n||e.push("query="+encodeURIComponent(r.query||"")),!n&&r.queryContext&&e.push("queryContext="+encodeURIComponent(r.queryContext||"")),n||"sparql"===r.queryFormat||e.push("resultsToTree="+encodeURIComponent(r.resultsToTree)),"sparql"!==r.queryFormat&&e.push("queryFormat="+encodeURIComponent(r.queryFormat||"")),r.datetime&&e.push("datetime="+encodeURIComponent(r.datetime)),r.httpProxy&&e.push("httpProxy="+encodeURIComponent(r.httpProxy)),r.bypassCache&&e.push("bypassCache="+encodeURIComponent(r.bypassCache)),r.solidIdp&&r.solidAuth.defaultIdp!==r.solidIdp&&e.push("solidIdp="+encodeURIComponent(r.solidIdp)),e=e.length?"#"+e.join("&"):"",history.replaceState(null,null,location.href.replace(/(?:#.*)?$/,e))}e(".ldf-client").on("loadStateFromUrl",r)}))},6068:(e,t,r)=>{"use strict";r.p},1948:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});const i=r.p+"queries.json"},8298:(e,t,r)=>{"use strict";r.p},6241:(e,t,r)=>{"use strict";r.p},9286:(e,t,r)=>{"use strict";r.p},2362:(e,t,r)=>{"use strict";r.p},7478:(e,t,r)=>{"use strict";r.p},7058:(e,t,r)=>{"use strict";r.p},4235:(e,t,r)=>{"use strict";r.p},3126:(e,t,r)=>{"use strict";r.p},3478:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});const i=r.p+"images/layers-2x.png"},5565:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});const i=r.p+"images/layers.png"},6159:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});const i=r.p+"images/marker-icon-2x.png"},6523:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});const i=r.p+"images/marker-icon.png"},3132:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});const i=r.p+"images/marker-shadow.png"},3866:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});const i=r.p+"styles/leaflet.css"},2226:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});const i=r.p+"styles/yasqe.css"},8133:(e,t,r)=>{"use strict";r.p},4390:e=>{e.exports={name:"@comunica/query-sparql",version:"2.6.9",description:"A SPARQL query engine for querying over decentralized RDF knowledge graphs on the Web",main:"lib/index.js",typings:"lib/index",repository:{type:"git",url:"https://github.com/comunica/comunica.git",directory:"engines/query-sparql"},publishConfig:{access:"public"},sideEffects:!1,keywords:["comunica","sparql","engine","query","update","sparql engine","sparql query","sparql update","sparql 1.1"],license:"MIT",bin:{"comunica-sparql":"bin/query.js","comunica-sparql-http":"bin/http.js","comunica-dynamic-sparql":"bin/query-dynamic.js"},bugs:{url:"https://github.com/comunica/comunica/issues"},homepage:"https://comunica.dev/",files:["components","config","lib/**/*.d.ts","lib/**/*.js","lib/**/*.js.map","bin/**/*.d.ts","bin/**/*.js","bin/**/*.js.map","engine-default.js"],dependencies:{"@comunica/actor-context-preprocess-source-to-destination":"^2.6.8","@comunica/actor-dereference-fallback":"^2.6.8","@comunica/actor-dereference-http":"^2.6.9","@comunica/actor-dereference-rdf-parse":"^2.6.8","@comunica/actor-hash-bindings-sha1":"^2.6.8","@comunica/actor-http-fetch":"^2.6.9","@comunica/actor-http-proxy":"^2.6.9","@comunica/actor-http-wayback":"^2.6.9","@comunica/actor-init-query":"^2.6.9","@comunica/actor-optimize-query-operation-bgp-to-join":"^2.6.8","@comunica/actor-optimize-query-operation-join-bgp":"^2.6.8","@comunica/actor-optimize-query-operation-join-connected":"^2.6.8","@comunica/actor-query-operation-ask":"^2.6.8","@comunica/actor-query-operation-bgp-join":"^2.6.8","@comunica/actor-query-operation-construct":"^2.6.8","@comunica/actor-query-operation-describe-subject":"^2.6.8","@comunica/actor-query-operation-distinct-hash":"^2.6.8","@comunica/actor-query-operation-extend":"^2.6.8","@comunica/actor-query-operation-filter-sparqlee":"^2.6.8","@comunica/actor-query-operation-from-quad":"^2.6.8","@comunica/actor-query-operation-group":"^2.6.8","@comunica/actor-query-operation-join":"^2.6.8","@comunica/actor-query-operation-leftjoin":"^2.6.9","@comunica/actor-query-operation-minus":"^2.6.8","@comunica/actor-query-operation-nop":"^2.6.8","@comunica/actor-query-operation-orderby-sparqlee":"^2.6.8","@comunica/actor-query-operation-path-alt":"^2.6.8","@comunica/actor-query-operation-path-inv":"^2.6.8","@comunica/actor-query-operation-path-link":"^2.6.8","@comunica/actor-query-operation-path-nps":"^2.6.8","@comunica/actor-query-operation-path-one-or-more":"^2.6.8","@comunica/actor-query-operation-path-seq":"^2.6.8","@comunica/actor-query-operation-path-zero-or-more":"^2.6.8","@comunica/actor-query-operation-path-zero-or-one":"^2.6.8","@comunica/actor-query-operation-project":"^2.6.8","@comunica/actor-query-operation-quadpattern":"^2.6.8","@comunica/actor-query-operation-reduced-hash":"^2.6.8","@comunica/actor-query-operation-service":"^2.6.8","@comunica/actor-query-operation-slice":"^2.6.8","@comunica/actor-query-operation-sparql-endpoint":"^2.6.9","@comunica/actor-query-operation-union":"^2.6.8","@comunica/actor-query-operation-update-add-rewrite":"^2.6.8","@comunica/actor-query-operation-update-clear":"^2.6.9","@comunica/actor-query-operation-update-compositeupdate":"^2.6.8","@comunica/actor-query-operation-update-copy-rewrite":"^2.6.8","@comunica/actor-query-operation-update-create":"^2.6.9","@comunica/actor-query-operation-update-deleteinsert":"^2.6.9","@comunica/actor-query-operation-update-drop":"^2.6.9","@comunica/actor-query-operation-update-load":"^2.6.9","@comunica/actor-query-operation-update-move-rewrite":"^2.6.8","@comunica/actor-query-operation-values":"^2.6.8","@comunica/actor-query-parse-graphql":"^2.6.8","@comunica/actor-query-parse-sparql":"^2.6.8","@comunica/actor-query-result-serialize-json":"^2.6.8","@comunica/actor-query-result-serialize-rdf":"^2.6.8","@comunica/actor-query-result-serialize-simple":"^2.6.8","@comunica/actor-query-result-serialize-sparql-csv":"^2.6.8","@comunica/actor-query-result-serialize-sparql-json":"^2.6.9","@comunica/actor-query-result-serialize-sparql-tsv":"^2.6.8","@comunica/actor-query-result-serialize-sparql-xml":"^2.6.8","@comunica/actor-query-result-serialize-stats":"^2.6.9","@comunica/actor-query-result-serialize-table":"^2.6.8","@comunica/actor-query-result-serialize-tree":"^2.6.8","@comunica/actor-rdf-join-entries-sort-cardinality":"^2.6.8","@comunica/actor-rdf-join-inner-hash":"^2.6.8","@comunica/actor-rdf-join-inner-multi-bind":"^2.6.8","@comunica/actor-rdf-join-inner-multi-empty":"^2.6.8","@comunica/actor-rdf-join-inner-multi-smallest":"^2.6.8","@comunica/actor-rdf-join-inner-nestedloop":"^2.6.8","@comunica/actor-rdf-join-inner-none":"^2.6.8","@comunica/actor-rdf-join-inner-single":"^2.6.8","@comunica/actor-rdf-join-inner-symmetrichash":"^2.6.8","@comunica/actor-rdf-join-minus-hash":"^2.6.8","@comunica/actor-rdf-join-minus-hash-undef":"^2.6.8","@comunica/actor-rdf-join-optional-bind":"^2.6.8","@comunica/actor-rdf-join-optional-nestedloop":"^2.6.8","@comunica/actor-rdf-join-selectivity-variable-counting":"^2.6.8","@comunica/actor-rdf-metadata-all":"^2.6.8","@comunica/actor-rdf-metadata-extract-allow-http-methods":"^2.6.8","@comunica/actor-rdf-metadata-extract-hydra-controls":"^2.6.8","@comunica/actor-rdf-metadata-extract-hydra-count":"^2.6.8","@comunica/actor-rdf-metadata-extract-hydra-pagesize":"^2.6.8","@comunica/actor-rdf-metadata-extract-patch-sparql-update":"^2.6.8","@comunica/actor-rdf-metadata-extract-put-accepted":"^2.6.8","@comunica/actor-rdf-metadata-extract-request-time":"^2.6.8","@comunica/actor-rdf-metadata-extract-sparql-service":"^2.6.8","@comunica/actor-rdf-metadata-primary-topic":"^2.6.8","@comunica/actor-rdf-parse-html":"^2.6.8","@comunica/actor-rdf-parse-html-microdata":"^2.6.8","@comunica/actor-rdf-parse-html-rdfa":"^2.6.8","@comunica/actor-rdf-parse-html-script":"^2.6.8","@comunica/actor-rdf-parse-jsonld":"^2.6.9","@comunica/actor-rdf-parse-n3":"^2.6.8","@comunica/actor-rdf-parse-rdfxml":"^2.6.8","@comunica/actor-rdf-parse-shaclc":"^2.6.8","@comunica/actor-rdf-parse-xml-rdfa":"^2.6.8","@comunica/actor-rdf-resolve-hypermedia-links-next":"^2.6.8","@comunica/actor-rdf-resolve-hypermedia-links-queue-fifo":"^2.6.8","@comunica/actor-rdf-resolve-hypermedia-none":"^2.6.8","@comunica/actor-rdf-resolve-hypermedia-qpf":"^2.6.8","@comunica/actor-rdf-resolve-hypermedia-sparql":"^2.6.9","@comunica/actor-rdf-resolve-quad-pattern-federated":"^2.6.8","@comunica/actor-rdf-resolve-quad-pattern-hypermedia":"^2.6.9","@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source":"^2.6.8","@comunica/actor-rdf-resolve-quad-pattern-string-source":"^2.6.8","@comunica/actor-rdf-serialize-jsonld":"^2.6.8","@comunica/actor-rdf-serialize-n3":"^2.6.8","@comunica/actor-rdf-serialize-shaclc":"^2.6.8","@comunica/actor-rdf-update-hypermedia-patch-sparql-update":"^2.6.9","@comunica/actor-rdf-update-hypermedia-put-ldp":"^2.6.9","@comunica/actor-rdf-update-hypermedia-sparql":"^2.6.9","@comunica/actor-rdf-update-quads-hypermedia":"^2.6.9","@comunica/actor-rdf-update-quads-rdfjs-store":"^2.6.9","@comunica/bus-http-invalidate":"^2.6.8","@comunica/bus-query-operation":"^2.6.8","@comunica/config-query-sparql":"^2.6.0","@comunica/core":"^2.6.8","@comunica/logger-void":"^2.6.8","@comunica/mediator-all":"^2.6.8","@comunica/mediator-combine-pipeline":"^2.6.8","@comunica/mediator-combine-union":"^2.6.8","@comunica/mediator-join-coefficients-fixed":"^2.6.8","@comunica/mediator-number":"^2.6.8","@comunica/mediator-race":"^2.6.8","@comunica/runner":"^2.6.8","@comunica/runner-cli":"^2.6.8"},scripts:{build:"npm run build:ts","build:ts":'node "../../node_modules/typescript/bin/tsc"',prepare:"comunica-compile-config config/config-default.json > engine-default.js",browser:'npm run prepare && "../../node_modules/webpack/bin/webpack.js" --config webpack.config.js --mode production',"browser-profile":'"../../node_modules/webpack/bin/webpack.js" --config webpack.config.js --profile --mode production --json > stats.json && webpack-bundle-analyzer stats.json && rm stats.json',"spec:base":"node ../../node_modules/rdf-test-suite/bin/Runner.js spec/sparql-engine.js http://w3c.github.io/rdf-tests/sparql11/data-sparql11/manifest-all.ttl -c ../../.rdf-test-suite-cache/","spec:query":"yarn run spec:base -s http://www.w3.org/TR/sparql11-query/","spec:update":"yarn run spec:base -s http://www.w3.org/TR/sparql11-update/ -e","spec:csv-tsv":"yarn run spec:base -s http://www.w3.org/TR/sparql11-results-csv-tsv/","spec:json":"yarn run spec:base -s http://www.w3.org/TR/sparql11-results-json/","spec:fed":"yarn run spec:base -s http://www.w3.org/TR/sparql11-federated-query/","spec:sd":"yarn run spec:base -s http://www.w3.org/TR/sparql11-service-description/","spec:prot":"yarn run spec:base -s http://www.w3.org/TR/sparql11-protocol/","spec:graphstore":"yarn run spec:base -s http://www.w3.org/TR/sparql11-http-rdf-update/",spec:"yarn run spec:query && yarn run spec:update","spec-earl":"yarn run spec:query -o earl -p spec/earl-meta.json > earl.ttl",integration:"rdf-test-suite-ldf spec/sparql-engine.js https://comunica.github.io/manifest-ldf-tests/next/sparql/sparql-manifest.ttl -d 200000 -c ../../.rdf-test-suite-ldf-cache/"},browser:{"./lib/index.js":"./lib/index-browser.js"},gitHead:"739f55dbe1b95743866f4e393ffe7a62f0410436"}},5644:function(e){var t;t=function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=22)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n={debug:function(){},info:function(){},warn:function(){},error:function(){}},o=void 0,s=void 0;(t.Log=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.reset=function(){s=3,o=n},e.debug=function(){if(s>=4){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];o.debug.apply(o,Array.from(t))}},e.info=function(){if(s>=3){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];o.info.apply(o,Array.from(t))}},e.warn=function(){if(s>=2){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];o.warn.apply(o,Array.from(t))}},e.error=function(){if(s>=1){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];o.error.apply(o,Array.from(t))}},i(e,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return s},set:function(e){if(!(0<=e&&e<=4))throw new Error("Invalid log level");s=e}},{key:"logger",get:function(){return o},set:function(e){if(!e.debug&&e.info&&(e.debug=e.info),!(e.debug&&e.info&&e.warn&&e.error))throw new Error("Invalid logger");o=e}}]),e}()).reset()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n={setInterval:function(e){function t(t,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return setInterval(e,t)})),clearInterval:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return clearInterval(e)}))},o=!1,s=null;t.Global=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e._testing=function(){o=!0},e.setXMLHttpRequest=function(e){s=e},i(e,null,[{key:"location",get:function(){if(!o)return location}},{key:"localStorage",get:function(){if(!o&&"undefined"!=typeof window)return localStorage}},{key:"sessionStorage",get:function(){if(!o&&"undefined"!=typeof window)return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!o&&"undefined"!=typeof window)return s||XMLHttpRequest}},{key:"timer",get:function(){if(!o)return n}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataService=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0),o=r(7);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=".well-known/openid-configuration";t.MetadataService=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.JsonService;if(s(this,e),!t)throw n.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=t,this._jsonService=new r(["application/jwk-set+json"])}return e.prototype.resetSigningKeys=function(){this._settings=this._settings||{},this._settings.signingKeys=void 0},e.prototype.getMetadata=function(){var e=this;return this._settings.metadata?(n.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(n.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then((function(t){n.Log.debug("MetadataService.getMetadata: json received");var r=e._settings.metadataSeed||{};return e._settings.metadata=Object.assign({},r,t),e._settings.metadata}))):(n.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},e.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},e.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},e.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},e.prototype.getTokenEndpoint=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._getMetadataProperty("token_endpoint",e)},e.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},e.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},e.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},e.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},e.prototype._getMetadataProperty=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n.Log.debug("MetadataService.getMetadataProperty for: "+e),this.getMetadata().then((function(r){if(n.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),void 0===r[e]){if(!0===t)return void n.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+e);throw n.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+e),new Error("Metadata does not contain property "+e)}return r[e]}))},e.prototype.getSigningKeys=function(){var e=this;return this._settings.signingKeys?(n.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then((function(t){return n.Log.debug("MetadataService.getSigningKeys: jwks_uri received",t),e._jsonService.getJson(t).then((function(t){if(n.Log.debug("MetadataService.getSigningKeys: key set received",t),!t.keys)throw n.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return e._settings.signingKeys=t.keys,e._settings.signingKeys}))}))},i(e,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(a)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=a))),this._metadataUrl}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UrlUtility=void 0;var i=r(0),n=r(1);t.UrlUtility=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.addQueryParam=function(e,t,r){return e.indexOf("?")<0&&(e+="?"),"?"!==e[e.length-1]&&(e+="&"),e+=encodeURIComponent(t),(e+="=")+encodeURIComponent(r)},e.parseUrlFragment=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.Global;"string"!=typeof e&&(e=r.location.href);var o=e.lastIndexOf(t);o>=0&&(e=e.substr(o+1)),"?"===t&&(o=e.indexOf("#"))>=0&&(e=e.substr(0,o));for(var s,a={},u=/([^&=]+)=([^&]*)/g,l=0;s=u.exec(e);)if(a[decodeURIComponent(s[1])]=decodeURIComponent(s[2].replace(/\+/g," ")),l++>50)return i.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",e),{error:"Response exceeded expected number of parameters"};for(var c in a)return a;return{}},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JoseUtil=void 0;var i=r(26),n=function(e){return e&&e.__esModule?e:{default:e}}(r(33));t.JoseUtil=(0,n.default)({jws:i.jws,KeyUtil:i.KeyUtil,X509:i.X509,crypto:i.crypto,hextob64u:i.hextob64u,b64tohex:i.b64tohex,AllowedSigningAlgs:i.AllowedSigningAlgs})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OidcClientSettings=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=r(0),s=r(23),a=r(6),u=r(24),l=r(2);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h=".well-known/openid-configuration",p="id_token",d="openid",f="client_secret_post";t.OidcClientSettings=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.authority,n=t.metadataUrl,o=t.metadata,h=t.signingKeys,g=t.metadataSeed,m=t.client_id,v=t.client_secret,y=t.response_type,_=void 0===y?p:y,E=t.scope,x=void 0===E?d:E,b=t.redirect_uri,S=t.post_logout_redirect_uri,w=t.client_authentication,T=void 0===w?f:w,A=t.prompt,I=t.display,L=t.max_age,C=t.ui_locales,N=t.acr_values,R=t.resource,P=t.response_mode,O=t.filterProtocolClaims,k=void 0===O||O,F=t.loadUserInfo,D=void 0===F||F,M=t.staleStateAge,U=void 0===M?900:M,B=t.clockSkew,j=void 0===B?300:B,H=t.clockService,G=void 0===H?new s.ClockService:H,V=t.userInfoJwtIssuer,q=void 0===V?"OP":V,W=t.mergeClaims,K=void 0!==W&&W,z=t.stateStore,$=void 0===z?new a.WebStorageStateStore:z,J=t.ResponseValidatorCtor,Z=void 0===J?u.ResponseValidator:J,Y=t.MetadataServiceCtor,X=void 0===Y?l.MetadataService:Y,Q=t.extraQueryParams,ee=void 0===Q?{}:Q,te=t.extraTokenParams,re=void 0===te?{}:te;c(this,e),this._authority=r,this._metadataUrl=n,this._metadata=o,this._metadataSeed=g,this._signingKeys=h,this._client_id=m,this._client_secret=v,this._response_type=_,this._scope=x,this._redirect_uri=b,this._post_logout_redirect_uri=S,this._client_authentication=T,this._prompt=A,this._display=I,this._max_age=L,this._ui_locales=C,this._acr_values=N,this._resource=R,this._response_mode=P,this._filterProtocolClaims=!!k,this._loadUserInfo=!!D,this._staleStateAge=U,this._clockSkew=j,this._clockService=G,this._userInfoJwtIssuer=q,this._mergeClaims=!!K,this._stateStore=$,this._validator=new Z(this),this._metadataService=new X(this),this._extraQueryParams="object"===(void 0===ee?"undefined":i(ee))?ee:{},this._extraTokenParams="object"===(void 0===re?"undefined":i(re))?re:{}}return e.prototype.getEpochTime=function(){return this._clockService.getEpochTime()},n(e,[{key:"client_id",get:function(){return this._client_id},set:function(e){if(this._client_id)throw o.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=e}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function(){return this._client_authentication}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(e){if(this._authority)throw o.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=e}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(h)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=h)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(e){this._metadata=e}},{key:"metadataSeed",get:function(){return this._metadataSeed},set:function(e){this._metadataSeed=e}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(e){this._signingKeys=e}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function(){return this._mergeClaims}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(e){"object"===(void 0===e?"undefined":i(e))?this._extraQueryParams=e:this._extraQueryParams={}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(e){"object"===(void 0===e?"undefined":i(e))?this._extraTokenParams=e:this._extraTokenParams={}}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebStorageStateStore=void 0;var i=r(0),n=r(1);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.WebStorageStateStore=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.prefix,i=void 0===r?"oidc.":r,s=t.store,a=void 0===s?n.Global.localStorage:s;o(this,e),this._store=a,this._prefix=i}return e.prototype.set=function(e,t){return i.Log.debug("WebStorageStateStore.set",e),e=this._prefix+e,this._store.setItem(e,t),Promise.resolve()},e.prototype.get=function(e){i.Log.debug("WebStorageStateStore.get",e),e=this._prefix+e;var t=this._store.getItem(e);return Promise.resolve(t)},e.prototype.remove=function(e){i.Log.debug("WebStorageStateStore.remove",e),e=this._prefix+e;var t=this._store.getItem(e);return this._store.removeItem(e),Promise.resolve(t)},e.prototype.getAllKeys=function(){i.Log.debug("WebStorageStateStore.getAllKeys");for(var e=[],t=0;t<this._store.length;t++){var r=this._store.key(t);0===r.indexOf(this._prefix)&&e.push(r.substr(this._prefix.length))}return Promise.resolve(e)},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonService=void 0;var i=r(0),n=r(1);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.JsonService=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.Global.XMLHttpRequest,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;o(this,e),t&&Array.isArray(t)?this._contentTypes=t.slice():this._contentTypes=[],this._contentTypes.push("application/json"),i&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=r,this._jwtHandler=i}return e.prototype.getJson=function(e,t){var r=this;if(!e)throw i.Log.error("JsonService.getJson: No url passed"),new Error("url");return i.Log.debug("JsonService.getJson, url: ",e),new Promise((function(n,o){var s=new r._XMLHttpRequest;s.open("GET",e);var a=r._contentTypes,u=r._jwtHandler;s.onload=function(){if(i.Log.debug("JsonService.getJson: HTTP response received, status",s.status),200===s.status){var t=s.getResponseHeader("Content-Type");if(t){var r=a.find((function(e){if(t.startsWith(e))return!0}));if("application/jwt"==r)return void u(s).then(n,o);if(r)try{return void n(JSON.parse(s.responseText))}catch(e){return i.Log.error("JsonService.getJson: Error parsing JSON response",e.message),void o(e)}}o(Error("Invalid response Content-Type: "+t+", from URL: "+e))}else o(Error(s.statusText+" ("+s.status+")"))},s.onerror=function(){i.Log.error("JsonService.getJson: network error"),o(Error("Network Error"))},t&&(i.Log.debug("JsonService.getJson: token passed, setting Authorization header"),s.setRequestHeader("Authorization","Bearer "+t)),s.send()}))},e.prototype.postForm=function(e,t,r){var n=this;if(!e)throw i.Log.error("JsonService.postForm: No url passed"),new Error("url");return i.Log.debug("JsonService.postForm, url: ",e),new Promise((function(o,s){var a=new n._XMLHttpRequest;a.open("POST",e);var u=n._contentTypes;a.onload=function(){if(i.Log.debug("JsonService.postForm: HTTP response received, status",a.status),200!==a.status){if(400===a.status&&(r=a.getResponseHeader("Content-Type"))&&u.find((function(e){if(r.startsWith(e))return!0})))try{var t=JSON.parse(a.responseText);if(t&&t.error)return i.Log.error("JsonService.postForm: Error from server: ",t.error),void s(new Error(t.error))}catch(e){return i.Log.error("JsonService.postForm: Error parsing JSON response",e.message),void s(e)}s(Error(a.statusText+" ("+a.status+")"))}else{var r;if((r=a.getResponseHeader("Content-Type"))&&u.find((function(e){if(r.startsWith(e))return!0})))try{return void o(JSON.parse(a.responseText))}catch(e){return i.Log.error("JsonService.postForm: Error parsing JSON response",e.message),void s(e)}s(Error("Invalid response Content-Type: "+r+", from URL: "+e))}},a.onerror=function(){i.Log.error("JsonService.postForm: network error"),s(Error("Network Error"))};var l="";for(var c in t){var h=t[c];h&&(l.length>0&&(l+="&"),l+=encodeURIComponent(c),l+="=",l+=encodeURIComponent(h))}a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),void 0!==r&&a.setRequestHeader("Authorization","Basic "+btoa(r)),a.send(l)}))},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SigninRequest=void 0;var i=r(0),n=r(3),o=r(13);t.SigninRequest=function(){function e(t){var r=t.url,s=t.client_id,a=t.redirect_uri,u=t.response_type,l=t.scope,c=t.authority,h=t.data,p=t.prompt,d=t.display,f=t.max_age,g=t.ui_locales,m=t.id_token_hint,v=t.login_hint,y=t.acr_values,_=t.resource,E=t.response_mode,x=t.request,b=t.request_uri,S=t.extraQueryParams,w=t.request_type,T=t.client_secret,A=t.extraTokenParams,I=t.skipUserInfo;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!r)throw i.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!s)throw i.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!a)throw i.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!u)throw i.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!l)throw i.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!c)throw i.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var L=e.isOidc(u),C=e.isCode(u);E||(E=e.isCode(u)?"query":null),this.state=new o.SigninState({nonce:L,data:h,client_id:s,authority:c,redirect_uri:a,code_verifier:C,request_type:w,response_mode:E,client_secret:T,scope:l,extraTokenParams:A,skipUserInfo:I}),r=n.UrlUtility.addQueryParam(r,"client_id",s),r=n.UrlUtility.addQueryParam(r,"redirect_uri",a),r=n.UrlUtility.addQueryParam(r,"response_type",u),r=n.UrlUtility.addQueryParam(r,"scope",l),r=n.UrlUtility.addQueryParam(r,"state",this.state.id),L&&(r=n.UrlUtility.addQueryParam(r,"nonce",this.state.nonce)),C&&(r=n.UrlUtility.addQueryParam(r,"code_challenge",this.state.code_challenge),r=n.UrlUtility.addQueryParam(r,"code_challenge_method","S256"));var N={prompt:p,display:d,max_age:f,ui_locales:g,id_token_hint:m,login_hint:v,acr_values:y,resource:_,request:x,request_uri:b,response_mode:E};for(var R in N)N[R]&&(r=n.UrlUtility.addQueryParam(r,R,N[R]));for(var P in S)r=n.UrlUtility.addQueryParam(r,P,S[P]);this.url=r}return e.isOidc=function(e){return!!e.split(/\s+/g).filter((function(e){return"id_token"===e}))[0]},e.isOAuth=function(e){return!!e.split(/\s+/g).filter((function(e){return"token"===e}))[0]},e.isCode=function(e){return!!e.split(/\s+/g).filter((function(e){return"code"===e}))[0]},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.State=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r(14));function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.State=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.id,i=t.data,n=t.created,a=t.request_type;s(this,e),this._id=r||(0,o.default)(),this._data=i,this._created="number"==typeof n&&n>0?n:parseInt(Date.now()/1e3),this._request_type=a}return e.prototype.toStorageString=function(){return n.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},e.fromStorageString=function(t){return n.Log.debug("State.fromStorageString"),new e(JSON.parse(t))},e.clearStaleState=function(t,r){var i=Date.now()/1e3-r;return t.getAllKeys().then((function(r){n.Log.debug("State.clearStaleState: got keys",r);for(var o=[],s=function(s){var a=r[s];u=t.get(a).then((function(r){var o=!1;if(r)try{var s=e.fromStorageString(r);n.Log.debug("State.clearStaleState: got item from key: ",a,s.created),s.created<=i&&(o=!0)}catch(e){n.Log.error("State.clearStaleState: Error parsing state for key",a,e.message),o=!0}else n.Log.debug("State.clearStaleState: no item in storage for key: ",a),o=!0;if(o)return n.Log.debug("State.clearStaleState: removed item for key: ",a),t.remove(a)})),o.push(u)},a=0;a<r.length;a++){var u;s(a)}return n.Log.debug("State.clearStaleState: waiting on promise count:",o.length),Promise.all(o)}))},i(e,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OidcClient=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0),o=r(5),s=r(12),a=r(8),u=r(34),l=r(35),c=r(36),h=r(13),p=r(9);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.OidcClient=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,e),t instanceof o.OidcClientSettings?this._settings=t:this._settings=new o.OidcClientSettings(t)}return e.prototype.createSigninRequest=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.response_type,i=t.scope,o=t.redirect_uri,s=t.data,u=t.state,l=t.prompt,c=t.display,h=t.max_age,p=t.ui_locales,d=t.id_token_hint,f=t.login_hint,g=t.acr_values,m=t.resource,v=t.request,y=t.request_uri,_=t.response_mode,E=t.extraQueryParams,x=t.extraTokenParams,b=t.request_type,S=t.skipUserInfo,w=arguments[1];n.Log.debug("OidcClient.createSigninRequest");var T=this._settings.client_id;r=r||this._settings.response_type,i=i||this._settings.scope,o=o||this._settings.redirect_uri,l=l||this._settings.prompt,c=c||this._settings.display,h=h||this._settings.max_age,p=p||this._settings.ui_locales,g=g||this._settings.acr_values,m=m||this._settings.resource,_=_||this._settings.response_mode,E=E||this._settings.extraQueryParams,x=x||this._settings.extraTokenParams;var A=this._settings.authority;return a.SigninRequest.isCode(r)&&"code"!==r?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then((function(t){n.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",t);var I=new a.SigninRequest({url:t,client_id:T,redirect_uri:o,response_type:r,scope:i,data:s||u,authority:A,prompt:l,display:c,max_age:h,ui_locales:p,id_token_hint:d,login_hint:f,acr_values:g,resource:m,request:v,request_uri:y,extraQueryParams:E,extraTokenParams:x,request_type:b,response_mode:_,client_secret:e._settings.client_secret,skipUserInfo:S}),L=I.state;return(w=w||e._stateStore).set(L.id,L.toStorageString()).then((function(){return I}))}))},e.prototype.readSigninResponseState=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n.Log.debug("OidcClient.readSigninResponseState");var i="query"===this._settings.response_mode||!this._settings.response_mode&&a.SigninRequest.isCode(this._settings.response_type),o=i?"?":"#",s=new u.SigninResponse(e,o);if(!s.state)return n.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response"));t=t||this._stateStore;var l=r?t.remove.bind(t):t.get.bind(t);return l(s.state).then((function(e){if(!e)throw n.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:h.SigninState.fromStorageString(e),response:s}}))},e.prototype.processSigninResponse=function(e,t){var r=this;return n.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(e,t,!0).then((function(e){var t=e.state,i=e.response;return n.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),r._validator.validateSigninResponse(t,i)}))},e.prototype.createSignoutRequest=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.id_token_hint,i=t.data,o=t.state,s=t.post_logout_redirect_uri,a=t.extraQueryParams,u=t.request_type,c=arguments[1];return n.Log.debug("OidcClient.createSignoutRequest"),s=s||this._settings.post_logout_redirect_uri,a=a||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then((function(t){if(!t)throw n.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");n.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",t);var h=new l.SignoutRequest({url:t,id_token_hint:r,post_logout_redirect_uri:s,data:i||o,extraQueryParams:a,request_type:u}),p=h.state;return p&&(n.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(c=c||e._stateStore).set(p.id,p.toStorageString())),h}))},e.prototype.readSignoutResponseState=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n.Log.debug("OidcClient.readSignoutResponseState");var i=new c.SignoutResponse(e);if(!i.state)return n.Log.debug("OidcClient.readSignoutResponseState: No state in response"),i.error?(n.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",i.error),Promise.reject(new s.ErrorResponse(i))):Promise.resolve({state:void 0,response:i});var o=i.state;t=t||this._stateStore;var a=r?t.remove.bind(t):t.get.bind(t);return a(o).then((function(e){if(!e)throw n.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:p.State.fromStorageString(e),response:i}}))},e.prototype.processSignoutResponse=function(e,t){var r=this;return n.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(e,t,!0).then((function(e){var t=e.state,i=e.response;return t?(n.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),r._validator.validateSignoutResponse(t,i)):(n.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),i)}))},e.prototype.clearStaleState=function(e){return n.Log.debug("OidcClient.clearStaleState"),e=e||this._stateStore,p.State.clearStaleState(e,this.settings.staleStateAge)},i(e,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenClient=void 0;var i=r(7),n=r(2),o=r(0);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.TokenClient=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.JsonService,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.MetadataService;if(s(this,e),!t)throw o.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=t,this._jsonService=new r,this._metadataService=new a(this._settings)}return e.prototype.exchangeCode=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=Object.assign({},t)).grant_type=t.grant_type||"authorization_code",t.client_id=t.client_id||this._settings.client_id,t.client_secret=t.client_secret||this._settings.client_secret,t.redirect_uri=t.redirect_uri||this._settings.redirect_uri;var r=void 0,i=t._client_authentication||this._settings._client_authentication;return delete t._client_authentication,t.code?t.redirect_uri?t.code_verifier?t.client_id?t.client_secret||"client_secret_basic"!=i?("client_secret_basic"==i&&(r=t.client_id+":"+t.client_secret,delete t.client_id,delete t.client_secret),this._metadataService.getTokenEndpoint(!1).then((function(i){return o.Log.debug("TokenClient.exchangeCode: Received token endpoint"),e._jsonService.postForm(i,t,r).then((function(e){return o.Log.debug("TokenClient.exchangeCode: response received"),e}))}))):(o.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(new Error("A client_secret is required"))):(o.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(o.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(o.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(o.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},e.prototype.exchangeRefreshToken=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=Object.assign({},t)).grant_type=t.grant_type||"refresh_token",t.client_id=t.client_id||this._settings.client_id,t.client_secret=t.client_secret||this._settings.client_secret;var r=void 0,i=t._client_authentication||this._settings._client_authentication;return delete t._client_authentication,t.refresh_token?t.client_id?("client_secret_basic"==i&&(r=t.client_id+":"+t.client_secret,delete t.client_id,delete t.client_secret),this._metadataService.getTokenEndpoint(!1).then((function(i){return o.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),e._jsonService.postForm(i,t,r).then((function(e){return o.Log.debug("TokenClient.exchangeRefreshToken: response received"),e}))}))):(o.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(o.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorResponse=void 0;var i=r(0);function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.ErrorResponse=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=r.error,a=r.error_description,u=r.error_uri,l=r.state,c=r.session_state;if(n(this,t),!s)throw i.Log.error("No error passed to ErrorResponse"),new Error("error");var h=o(this,e.call(this,a||s));return h.name="ErrorResponse",h.error=s,h.error_description=a,h.error_uri=u,h.state=l,h.session_state=c,h}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Error)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SigninState=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0),o=r(9),s=r(4),a=function(e){return e&&e.__esModule?e:{default:e}}(r(14));function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.SigninState=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.nonce,n=r.authority,o=r.client_id,c=r.redirect_uri,h=r.code_verifier,p=r.response_mode,d=r.client_secret,f=r.scope,g=r.extraTokenParams,m=r.skipUserInfo;u(this,t);var v=l(this,e.call(this,arguments[0]));if(!0===i?v._nonce=(0,a.default)():i&&(v._nonce=i),!0===h?v._code_verifier=(0,a.default)()+(0,a.default)()+(0,a.default)():h&&(v._code_verifier=h),v.code_verifier){var y=s.JoseUtil.hashString(v.code_verifier,"SHA256");v._code_challenge=s.JoseUtil.hexToBase64Url(y)}return v._redirect_uri=c,v._authority=n,v._client_id=o,v._response_mode=p,v._client_secret=d,v._scope=f,v._extraTokenParams=g,v._skipUserInfo=m,v}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.toStorageString=function(){return n.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},t.fromStorageString=function(e){return n.Log.debug("SigninState.fromStorageString"),new t(JSON.parse(e))},i(t,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),t}(o.State)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return("undefined"!=i&&null!==i&&void 0!==i.getRandomValues?n:o)().replace(/-/g,"")};var i="undefined"!=typeof window?window.crypto||window.msCrypto:null;function n(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^i.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}function o(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^16*Math.random()>>e/4).toString(16)}))}e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0);t.User=function(){function e(t){var r=t.id_token,i=t.session_state,n=t.access_token,o=t.refresh_token,s=t.token_type,a=t.scope,u=t.profile,l=t.expires_at,c=t.state;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id_token=r,this.session_state=i,this.access_token=n,this.refresh_token=o,this.token_type=s,this.scope=a,this.profile=u,this.expires_at=l,this.state=c}return e.prototype.toStorageString=function(){return n.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},e.fromStorageString=function(t){return n.Log.debug("User.fromStorageString"),new e(JSON.parse(t))},i(e,[{key:"expires_in",get:function(){if(this.expires_at){var e=parseInt(Date.now()/1e3);return this.expires_at-e}},set:function(e){var t=parseInt(e);if("number"==typeof t&&t>0){var r=parseInt(Date.now()/1e3);this.expires_at=r+t}}},{key:"expired",get:function(){var e=this.expires_in;if(void 0!==e)return e<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccessTokenEvents=void 0;var i=r(0),n=r(46);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.AccessTokenEvents=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.accessTokenExpiringNotificationTime,i=void 0===r?60:r,s=t.accessTokenExpiringTimer,a=void 0===s?new n.Timer("Access token expiring"):s,u=t.accessTokenExpiredTimer,l=void 0===u?new n.Timer("Access token expired"):u;o(this,e),this._accessTokenExpiringNotificationTime=i,this._accessTokenExpiring=a,this._accessTokenExpired=l}return e.prototype.load=function(e){if(e.access_token&&void 0!==e.expires_in){var t=e.expires_in;if(i.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",t),t>0){var r=t-this._accessTokenExpiringNotificationTime;r<=0&&(r=1),i.Log.debug("AccessTokenEvents.load: registering expiring timer in:",r),this._accessTokenExpiring.init(r)}else i.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var n=t+1;i.Log.debug("AccessTokenEvents.load: registering expired timer in:",n),this._accessTokenExpired.init(n)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},e.prototype.unload=function(){i.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},e.prototype.addAccessTokenExpiring=function(e){this._accessTokenExpiring.addHandler(e)},e.prototype.removeAccessTokenExpiring=function(e){this._accessTokenExpiring.removeHandler(e)},e.prototype.addAccessTokenExpired=function(e){this._accessTokenExpired.addHandler(e)},e.prototype.removeAccessTokenExpired=function(e){this._accessTokenExpired.removeHandler(e)},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Event=void 0;var i=r(0);t.Event=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t,this._callbacks=[]}return e.prototype.addHandler=function(e){this._callbacks.push(e)},e.prototype.removeHandler=function(e){var t=this._callbacks.findIndex((function(t){return t===e}));t>=0&&this._callbacks.splice(t,1)},e.prototype.raise=function(){i.Log.debug("Event: Raising event: "+this._name);for(var e=0;e<this._callbacks.length;e++){var t;(t=this._callbacks)[e].apply(t,arguments)}},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionMonitor=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0),o=r(19),s=r(1);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.SessionMonitor=function(){function e(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.CheckSessionIFrame,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.Global.timer;if(a(this,e),!t)throw n.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=t,this._CheckSessionIFrameCtor=i,this._timer=u,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then((function(e){e?r._start(e):r._settings.monitorAnonymousSession&&r._userManager.querySessionStatus().then((function(e){var t={session_state:e.session_state};e.sub&&e.sid&&(t.profile={sub:e.sub,sid:e.sid}),r._start(t)})).catch((function(e){n.Log.error("SessionMonitor ctor: error from querySessionStatus:",e.message)}))})).catch((function(e){n.Log.error("SessionMonitor ctor: error from getUser:",e.message)})))}return e.prototype._start=function(e){var t=this,r=e.session_state;r&&(e.profile?(this._sub=e.profile.sub,this._sid=e.profile.sid,n.Log.debug("SessionMonitor._start: session_state:",r,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,n.Log.debug("SessionMonitor._start: session_state:",r,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(r):this._metadataService.getCheckSessionIframe().then((function(e){if(e){n.Log.debug("SessionMonitor._start: Initializing check session iframe");var i=t._client_id,o=t._checkSessionInterval,s=t._stopCheckSessionOnError;t._checkSessionIFrame=new t._CheckSessionIFrameCtor(t._callback.bind(t),i,e,o,s),t._checkSessionIFrame.load().then((function(){t._checkSessionIFrame.start(r)}))}else n.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")})).catch((function(e){n.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",e.message)})))},e.prototype._stop=function(){var e=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(n.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var t=this._timer.setInterval((function(){e._timer.clearInterval(t),e._userManager.querySessionStatus().then((function(t){var r={session_state:t.session_state};t.sub&&t.sid&&(r.profile={sub:t.sub,sid:t.sid}),e._start(r)})).catch((function(e){n.Log.error("SessionMonitor: error from querySessionStatus:",e.message)}))}),1e3)},e.prototype._callback=function(){var e=this;this._userManager.querySessionStatus().then((function(t){var r=!0;t?t.sub===e._sub?(r=!1,e._checkSessionIFrame.start(t.session_state),t.sid===e._sid?n.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",t.session_state):(n.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",t.session_state),e._userManager.events._raiseUserSessionChanged())):n.Log.debug("SessionMonitor._callback: Different subject signed into OP:",t.sub):n.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),r&&(e._sub?(n.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),e._userManager.events._raiseUserSignedOut()):(n.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),e._userManager.events._raiseUserSignedIn()))})).catch((function(t){e._sub&&(n.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",t.message),e._userManager.events._raiseUserSignedOut())}))},i(e,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckSessionIFrame=void 0;var i=r(0);function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.CheckSessionIFrame=function(){function e(t,r,i,o){var s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];n(this,e),this._callback=t,this._client_id=r,this._url=i,this._interval=o||2e3,this._stopOnError=s;var a=i.indexOf("/",i.indexOf("//")+2);this._frame_origin=i.substr(0,a),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=i}return e.prototype.load=function(){var e=this;return new Promise((function(t){e._frame.onload=function(){t()},window.document.body.appendChild(e._frame),e._boundMessageEvent=e._message.bind(e),window.addEventListener("message",e._boundMessageEvent,!1)}))},e.prototype._message=function(e){e.origin===this._frame_origin&&e.source===this._frame.contentWindow&&("error"===e.data?(i.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===e.data?(i.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):i.Log.debug("CheckSessionIFrame: "+e.data+" message from check session op iframe"))},e.prototype.start=function(e){var t=this;if(this._session_state!==e){i.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=e;var r=function(){t._frame.contentWindow.postMessage(t._client_id+" "+t._session_state,t._frame_origin)};r(),this._timer=window.setInterval(r,this._interval)}},e.prototype.stop=function(){this._session_state=null,this._timer&&(i.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenRevocationClient=void 0;var i=r(0),n=r(2),o=r(1);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a="access_token",u="refresh_token";t.TokenRevocationClient=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Global.XMLHttpRequest,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.MetadataService;if(s(this,e),!t)throw i.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=t,this._XMLHttpRequestCtor=r,this._metadataService=new a(this._settings)}return e.prototype.revoke=function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"access_token";if(!e)throw i.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if(n!==a&&n!=u)throw i.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then((function(o){if(o){i.Log.debug("TokenRevocationClient.revoke: Revoking "+n);var s=r._settings.client_id,a=r._settings.client_secret;return r._revoke(o,s,a,e,n)}if(t)throw i.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")}))},e.prototype._revoke=function(e,t,r,n,o){var s=this;return new Promise((function(a,u){var l=new s._XMLHttpRequestCtor;l.open("POST",e),l.onload=function(){i.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",l.status),200===l.status?a():u(Error(l.statusText+" ("+l.status+")"))},l.onerror=function(){i.Log.debug("TokenRevocationClient.revoke: Network Error."),u("Network Error")};var c="client_id="+encodeURIComponent(t);r&&(c+="&client_secret="+encodeURIComponent(r)),c+="&token_type_hint="+encodeURIComponent(o),c+="&token="+encodeURIComponent(n),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.send(c)}))},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CordovaPopupWindow=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0);t.CordovaPopupWindow=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t})),this.features=t.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=t.popupWindowTarget||"_blank",this.redirect_uri=t.startUrl,n.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return e.prototype._isInAppBrowserInstalled=function(e){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some((function(t){return e.hasOwnProperty(t)}))},e.prototype.navigate=function(e){if(e&&e.url){if(!window.cordova)return this._error("cordova is undefined");var t=window.cordova.require("cordova/plugin_list").metadata;if(!1===this._isInAppBrowserInstalled(t))return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(e.url,this.target,this.features),this._popup?(n.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},e.prototype._loadStartCallback=function(e){0===e.url.indexOf(this.redirect_uri)&&this._success({url:e.url})},e.prototype._exitCallback=function(e){this._error(e)},e.prototype._success=function(e){this._cleanup(),n.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(e)},e.prototype._error=function(e){this._cleanup(),n.Log.error(e),this._reject(new Error(e))},e.prototype.close=function(){this._cleanup()},e.prototype._cleanup=function(){this._popup&&(n.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},i(e,[{key:"promise",get:function(){return this._promise}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),n=r(10),o=r(5),s=r(6),a=r(37),u=r(38),l=r(16),c=r(2),h=r(48),p=r(49),d=r(19),f=r(20),g=r(18),m=r(1),v=r(15),y=r(50);t.default={Version:y.Version,Log:i.Log,OidcClient:n.OidcClient,OidcClientSettings:o.OidcClientSettings,WebStorageStateStore:s.WebStorageStateStore,InMemoryWebStorage:a.InMemoryWebStorage,UserManager:u.UserManager,AccessTokenEvents:l.AccessTokenEvents,MetadataService:c.MetadataService,CordovaPopupNavigator:h.CordovaPopupNavigator,CordovaIFrameNavigator:p.CordovaIFrameNavigator,CheckSessionIFrame:d.CheckSessionIFrame,TokenRevocationClient:f.TokenRevocationClient,SessionMonitor:g.SessionMonitor,Global:m.Global,User:v.User},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClockService=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.getEpochTime=function(){return Promise.resolve(Date.now()/1e3|0)},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseValidator=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=r(0),o=r(2),s=r(25),a=r(11),u=r(12),l=r(4);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];t.ResponseValidator=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.MetadataService,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.UserInfoService,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.JoseUtil,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.TokenClient;if(c(this,e),!t)throw n.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=t,this._metadataService=new r(this._settings),this._userInfoService=new i(this._settings),this._joseUtil=u,this._tokenClient=new h(this._settings)}return e.prototype.validateSigninResponse=function(e,t){var r=this;return n.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(e,t).then((function(t){return n.Log.debug("ResponseValidator.validateSigninResponse: state processed"),r._validateTokens(e,t).then((function(t){return n.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),r._processClaims(e,t).then((function(e){return n.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),e}))}))}))},e.prototype.validateSignoutResponse=function(e,t){return e.id!==t.state?(n.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(n.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),t.state=e.data,t.error?(n.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",t.error),Promise.reject(new u.ErrorResponse(t))):Promise.resolve(t))},e.prototype._processSigninParams=function(e,t){if(e.id!==t.state)return n.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!e.client_id)return n.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!e.authority)return n.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==e.authority)return n.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=e.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==e.client_id)return n.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=e.client_id;return n.Log.debug("ResponseValidator._processSigninParams: state validated"),t.state=e.data,t.error?(n.Log.warn("ResponseValidator._processSigninParams: Response was error",t.error),Promise.reject(new u.ErrorResponse(t))):e.nonce&&!t.id_token?(n.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!e.nonce&&t.id_token?(n.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):e.code_verifier&&!t.code?(n.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!e.code_verifier&&t.code?(n.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(t.scope||(t.scope=e.scope),Promise.resolve(t))},e.prototype._processClaims=function(e,t){var r=this;if(t.isOpenIdConnect){if(n.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),t.profile=this._filterProtocolClaims(t.profile),!0!==e.skipUserInfo&&this._settings.loadUserInfo&&t.access_token)return n.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(t.access_token).then((function(e){return n.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),e.sub!==t.profile.sub?(n.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(t.profile=r._mergeClaims(t.profile,e),n.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",t.profile),t)}));n.Log.debug("ResponseValidator._processClaims: not loading user info")}else n.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(t)},e.prototype._mergeClaims=function(e,t){var r=Object.assign({},e);for(var n in t){var o=t[n];Array.isArray(o)||(o=[o]);for(var s=0;s<o.length;s++){var a=o[s];r[n]?Array.isArray(r[n])?r[n].indexOf(a)<0&&r[n].push(a):r[n]!==a&&("object"===(void 0===a?"undefined":i(a))&&this._settings.mergeClaims?r[n]=this._mergeClaims(r[n],a):r[n]=[r[n],a]):r[n]=a}}return r},e.prototype._filterProtocolClaims=function(e){n.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",e);var t=Object.assign({},e);return this._settings._filterProtocolClaims?(h.forEach((function(e){delete t[e]})),n.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",t)):n.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),t},e.prototype._validateTokens=function(e,t){return t.code?(n.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(e,t)):t.id_token?t.access_token?(n.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(e,t)):(n.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(e,t)):(n.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(t))},e.prototype._processCode=function(e,t){var r=this,o={client_id:e.client_id,client_secret:e.client_secret,code:t.code,redirect_uri:e.redirect_uri,code_verifier:e.code_verifier};return e.extraTokenParams&&"object"===i(e.extraTokenParams)&&Object.assign(o,e.extraTokenParams),this._tokenClient.exchangeCode(o).then((function(i){for(var o in i)t[o]=i[o];return t.id_token?(n.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),r._validateIdTokenAttributes(e,t)):(n.Log.debug("ResponseValidator._processCode: token response successful, returning response"),t)}))},e.prototype._validateIdTokenAttributes=function(e,t){var r=this;return this._metadataService.getIssuer().then((function(i){var o=e.client_id,s=r._settings.clockSkew;return n.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",s),r._settings.getEpochTime().then((function(a){return r._joseUtil.validateJwtAttributes(t.id_token,i,o,s,a).then((function(r){return e.nonce&&e.nonce!==r.nonce?(n.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):r.sub?(t.profile=r,t):(n.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))}))}))}))},e.prototype._validateIdTokenAndAccessToken=function(e,t){var r=this;return this._validateIdToken(e,t).then((function(e){return r._validateAccessToken(e)}))},e.prototype._getSigningKeyForJwt=function(e){var t=this;return this._metadataService.getSigningKeys().then((function(r){var i=e.header.kid;if(!r)return n.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));n.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var o=void 0;if(i)o=r.filter((function(e){return e.kid===i}))[0];else{if((r=t._filterByAlg(r,e.header.alg)).length>1)return n.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));o=r[0]}return Promise.resolve(o)}))},e.prototype._getSigningKeyForJwtWithSingleRetry=function(e){var t=this;return this._getSigningKeyForJwt(e).then((function(r){return r?Promise.resolve(r):(t._metadataService.resetSigningKeys(),t._getSigningKeyForJwt(e))}))},e.prototype._validateIdToken=function(e,t){var r=this;if(!e.nonce)return n.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var i=this._joseUtil.parseJwt(t.id_token);return i&&i.header&&i.payload?e.nonce!==i.payload.nonce?(n.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then((function(o){return n.Log.debug("ResponseValidator._validateIdToken: Received issuer"),r._getSigningKeyForJwtWithSingleRetry(i).then((function(s){if(!s)return n.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var a=e.client_id,u=r._settings.clockSkew;return n.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",u),r._joseUtil.validateJwt(t.id_token,s,o,a,u).then((function(){return n.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),i.payload.sub?(t.profile=i.payload,t):(n.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))}))}))})):(n.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",i),Promise.reject(new Error("Failed to parse id_token")))},e.prototype._filterByAlg=function(e,t){var r=null;if(t.startsWith("RS"))r="RSA";else if(t.startsWith("PS"))r="PS";else{if(!t.startsWith("ES"))return n.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",t),[];r="EC"}return n.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",r),e=e.filter((function(e){return e.kty===r})),n.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",r,e.length),e},e.prototype._validateAccessToken=function(e){if(!e.profile)return n.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!e.profile.at_hash)return n.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!e.id_token)return n.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var t=this._joseUtil.parseJwt(e.id_token);if(!t||!t.header)return n.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",t),Promise.reject(new Error("Failed to parse id_token"));var r=t.header.alg;if(!r||5!==r.length)return n.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",r),Promise.reject(new Error("Unsupported alg: "+r));var i=r.substr(2,3);if(!i)return n.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",r,i),Promise.reject(new Error("Unsupported alg: "+r));if(256!==(i=parseInt(i))&&384!==i&&512!==i)return n.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",r,i),Promise.reject(new Error("Unsupported alg: "+r));var o="sha"+i,s=this._joseUtil.hashString(e.access_token,o);if(!s)return n.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",o),Promise.reject(new Error("Failed to validate at_hash"));var a=s.substr(0,s.length/2),u=this._joseUtil.hexToBase64Url(a);return u!==e.profile.at_hash?(n.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",u,e.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(n.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(e))},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserInfoService=void 0;var i=r(7),n=r(2),o=r(0),s=r(4);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.UserInfoService=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.JsonService,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.MetadataService,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.JoseUtil;if(a(this,e),!t)throw o.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=t,this._jsonService=new r(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new u(this._settings),this._joseUtil=l}return e.prototype.getClaims=function(e){var t=this;return e?this._metadataService.getUserInfoEndpoint().then((function(r){return o.Log.debug("UserInfoService.getClaims: received userinfo url",r),t._jsonService.getJson(r,e).then((function(e){return o.Log.debug("UserInfoService.getClaims: claims received",e),e}))})):(o.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},e.prototype._getClaimsFromJwt=function e(t){var r=this;try{var i=this._joseUtil.parseJwt(t.responseText);if(!i||!i.header||!i.payload)return o.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",i),Promise.reject(new Error("Failed to parse id_token"));var n=i.header.kid,s=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":s=this._metadataService.getIssuer();break;case"ANY":s=Promise.resolve(i.payload.iss);break;default:s=Promise.resolve(this._settings.userInfoJwtIssuer)}return s.then((function(e){return o.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+e),r._metadataService.getSigningKeys().then((function(s){if(!s)return o.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));o.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var a=void 0;if(n)a=s.filter((function(e){return e.kid===n}))[0];else{if((s=r._filterByAlg(s,i.header.alg)).length>1)return o.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));a=s[0]}if(!a)return o.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var u=r._settings.client_id,l=r._settings.clockSkew;return o.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",l),r._joseUtil.validateJwt(t.responseText,a,e,u,l,void 0,!0).then((function(){return o.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),i.payload}))}))}))}catch(e){return o.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",e.message),void reject(e)}},e.prototype._filterByAlg=function(e,t){var r=null;if(t.startsWith("RS"))r="RSA";else if(t.startsWith("PS"))r="PS";else{if(!t.startsWith("ES"))return o.Log.debug("UserInfoService._filterByAlg: alg not supported: ",t),[];r="EC"}return o.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",r),e=e.filter((function(e){return e.kty===r})),o.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",r,e.length),e},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AllowedSigningAlgs=t.b64tohex=t.hextob64u=t.crypto=t.X509=t.KeyUtil=t.jws=void 0;var i=r(27);t.jws=i.jws,t.KeyUtil=i.KEYUTIL,t.X509=i.X509,t.crypto=i.crypto,t.hextob64u=i.hextob64u,t.b64tohex=i.b64tohex,t.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,i,n,o,s,a,u,l,c,h,p,d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f={userAgent:!1},g={},m=m||(r=Math,n=(i={}).lib={},o=n.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var r=new e;return t&&r.mixIn(t),r.hasOwnProperty("init")||(r.init=function(){r.$super.init.apply(this,arguments)}),r.init.prototype=r,r.$super=this,r},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=n.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,r=e.words,i=this.sigBytes,n=e.sigBytes;if(this.clamp(),i%4)for(var o=0;o<n;o++){var s=r[o>>>2]>>>24-o%4*8&255;t[i+o>>>2]|=s<<24-(i+o)%4*8}else for(o=0;o<n;o+=4)t[i+o>>>2]=r[o>>>2];return this.sigBytes+=n,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=r.ceil(t/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],i=0;i<e;i+=4)t.push(4294967296*r.random()|0);return new s.init(t,e)}}),a=i.enc={},u=a.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var o=t[n>>>2]>>>24-n%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new s.init(r,t/2)}},l=a.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var o=t[n>>>2]>>>24-n%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new s.init(r,t)}},c=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},h=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,i=t.words,n=t.sigBytes,o=this.blockSize,a=n/(4*o),u=(a=e?r.ceil(a):r.max((0|a)-this._minBufferSize,0))*o,l=r.min(4*u,n);if(u){for(var c=0;c<u;c+=o)this._doProcessBlock(i,c);var h=i.splice(0,u);t.sigBytes-=l}return new s.init(h,l)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),n.Hasher=h.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new p.HMAC.init(e,r).finalize(t)}}}),p=i.algo={},i);!function(e){var t,r=(t=m).lib,i=r.Base,n=r.WordArray;(t=t.x64={}).Word=i.extend({init:function(e,t){this.high=e,this.low=t}}),t.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,r=[],i=0;i<t;i++){var o=e[i];r.push(o.high),r.push(o.low)}return n.create(r,this.sigBytes)},clone:function(){for(var e=i.clone.call(this),t=e.words=this.words.slice(0),r=t.length,n=0;n<r;n++)t[n]=t[n].clone();return e}})}(),function(){var e=m,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,i=this._map;e.clamp(),e=[];for(var n=0;n<r;n+=3)for(var o=(t[n>>>2]>>>24-n%4*8&255)<<16|(t[n+1>>>2]>>>24-(n+1)%4*8&255)<<8|t[n+2>>>2]>>>24-(n+2)%4*8&255,s=0;4>s&&n+.75*s<r;s++)e.push(i.charAt(o>>>6*(3-s)&63));if(t=i.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var r=e.length,i=this._map;(n=i.charAt(64))&&-1!=(n=e.indexOf(n))&&(r=n);for(var n=[],o=0,s=0;s<r;s++)if(s%4){var a=i.indexOf(e.charAt(s-1))<<s%4*2,u=i.indexOf(e.charAt(s))>>>6-s%4*2;n[o>>>2]|=(a|u)<<24-o%4*8,o++}return t.create(n,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){for(var t=m,r=(n=t.lib).WordArray,i=n.Hasher,n=t.algo,o=[],s=[],a=function(e){return 4294967296*(e-(0|e))|0},u=2,l=0;64>l;){var c;e:{c=u;for(var h=e.sqrt(c),p=2;p<=h;p++)if(!(c%p)){c=!1;break e}c=!0}c&&(8>l&&(o[l]=a(e.pow(u,.5))),s[l]=a(e.pow(u,1/3)),l++),u++}var d=[];n=n.SHA256=i.extend({_doReset:function(){this._hash=new r.init(o.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],n=r[1],o=r[2],a=r[3],u=r[4],l=r[5],c=r[6],h=r[7],p=0;64>p;p++){if(16>p)d[p]=0|e[t+p];else{var f=d[p-15],g=d[p-2];d[p]=((f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3)+d[p-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+d[p-16]}f=h+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&l^~u&c)+s[p]+d[p],g=((i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22))+(i&n^i&o^n&o),h=c,c=l,l=u,u=a+f|0,a=o,o=n,n=i,i=f+g|0}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+u|0,r[5]=r[5]+l|0,r[6]=r[6]+c|0,r[7]=r[7]+h|0},_doFinalize:function(){var t=this._data,r=t.words,i=8*this._nDataBytes,n=8*t.sigBytes;return r[n>>>5]|=128<<24-n%32,r[14+(n+64>>>9<<4)]=e.floor(i/4294967296),r[15+(n+64>>>9<<4)]=i,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA256=i._createHelper(n),t.HmacSHA256=i._createHmacHelper(n)}(Math),function(){function e(){return i.create.apply(i,arguments)}for(var t=m,r=t.lib.Hasher,i=(o=t.x64).Word,n=o.WordArray,o=t.algo,s=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],a=[],u=0;80>u;u++)a[u]=e();o=o.SHA512=r.extend({_doReset:function(){this._hash=new n.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var r=(h=this._hash.words)[0],i=h[1],n=h[2],o=h[3],u=h[4],l=h[5],c=h[6],h=h[7],p=r.high,d=r.low,f=i.high,g=i.low,m=n.high,v=n.low,y=o.high,_=o.low,E=u.high,x=u.low,b=l.high,S=l.low,w=c.high,T=c.low,A=h.high,I=h.low,L=p,C=d,N=f,R=g,P=m,O=v,k=y,F=_,D=E,M=x,U=b,B=S,j=w,H=T,G=A,V=I,q=0;80>q;q++){var W=a[q];if(16>q)var K=W.high=0|e[t+2*q],z=W.low=0|e[t+2*q+1];else{K=((z=(K=a[q-15]).high)>>>1|($=K.low)<<31)^(z>>>8|$<<24)^z>>>7;var $=($>>>1|z<<31)^($>>>8|z<<24)^($>>>7|z<<25),J=((z=(J=a[q-2]).high)>>>19|(Z=J.low)<<13)^(z<<3|Z>>>29)^z>>>6,Z=(Z>>>19|z<<13)^(Z<<3|z>>>29)^(Z>>>6|z<<26),Y=(z=a[q-7]).high,X=(Q=a[q-16]).high,Q=Q.low;K=(K=(K=K+Y+((z=$+z.low)>>>0<$>>>0?1:0))+J+((z+=Z)>>>0<Z>>>0?1:0))+X+((z+=Q)>>>0<Q>>>0?1:0),W.high=K,W.low=z}Y=D&U^~D&j,Q=M&B^~M&H,W=L&N^L&P^N&P;var ee=C&R^C&O^R&O,te=($=(L>>>28|C<<4)^(L<<30|C>>>2)^(L<<25|C>>>7),J=(C>>>28|L<<4)^(C<<30|L>>>2)^(C<<25|L>>>7),(Z=s[q]).high),re=Z.low;X=G+((D>>>14|M<<18)^(D>>>18|M<<14)^(D<<23|M>>>9))+((Z=V+((M>>>14|D<<18)^(M>>>18|D<<14)^(M<<23|D>>>9)))>>>0<V>>>0?1:0),G=j,V=H,j=U,H=B,U=D,B=M,D=k+(X=(X=(X=X+Y+((Z+=Q)>>>0<Q>>>0?1:0))+te+((Z+=re)>>>0<re>>>0?1:0))+K+((Z+=z)>>>0<z>>>0?1:0))+((M=F+Z|0)>>>0<F>>>0?1:0)|0,k=P,F=O,P=N,O=R,N=L,R=C,L=X+(W=$+W+((z=J+ee)>>>0<J>>>0?1:0))+((C=Z+z|0)>>>0<Z>>>0?1:0)|0}d=r.low=d+C,r.high=p+L+(d>>>0<C>>>0?1:0),g=i.low=g+R,i.high=f+N+(g>>>0<R>>>0?1:0),v=n.low=v+O,n.high=m+P+(v>>>0<O>>>0?1:0),_=o.low=_+F,o.high=y+k+(_>>>0<F>>>0?1:0),x=u.low=x+M,u.high=E+D+(x>>>0<M>>>0?1:0),S=l.low=S+B,l.high=b+U+(S>>>0<B>>>0?1:0),T=c.low=T+H,c.high=w+j+(T>>>0<H>>>0?1:0),I=h.low=I+V,h.high=A+G+(I>>>0<V>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[30+(i+128>>>10<<5)]=Math.floor(r/4294967296),t[31+(i+128>>>10<<5)]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),t.SHA512=r._createHelper(o),t.HmacSHA512=r._createHmacHelper(o)}(),function(){var e=m,t=(n=e.x64).Word,r=n.WordArray,i=(n=e.algo).SHA512,n=n.SHA384=i.extend({_doReset:function(){this._hash=new r.init([new t.init(3418070365,3238371032),new t.init(1654270250,914150663),new t.init(2438529370,812702999),new t.init(355462360,4144912697),new t.init(1731405415,4290775857),new t.init(2394180231,1750603025),new t.init(3675008525,1694076839),new t.init(1203062813,3204075428)])},_doFinalize:function(){var e=i._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=i._createHelper(n),e.HmacSHA384=i._createHmacHelper(n)}();var v,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function _(e){var t,r,i="";for(t=0;t+3<=e.length;t+=3)r=parseInt(e.substring(t,t+3),16),i+=y.charAt(r>>6)+y.charAt(63&r);for(t+1==e.length?(r=parseInt(e.substring(t,t+1),16),i+=y.charAt(r<<2)):t+2==e.length&&(r=parseInt(e.substring(t,t+2),16),i+=y.charAt(r>>2)+y.charAt((3&r)<<4));(3&i.length)>0;)i+="=";return i}function E(e){var t,r,i,n="",o=0;for(t=0;t<e.length&&"="!=e.charAt(t);++t)(i=y.indexOf(e.charAt(t)))<0||(0==o?(n+=I(i>>2),r=3&i,o=1):1==o?(n+=I(r<<2|i>>4),r=15&i,o=2):2==o?(n+=I(r),n+=I(i>>2),r=3&i,o=3):(n+=I(r<<2|i>>4),n+=I(15&i),o=0));return 1==o&&(n+=I(r<<2)),n}function x(e){var t,r=E(e),i=new Array;for(t=0;2*t<r.length;++t)i[t]=parseInt(r.substring(2*t,2*t+2),16);return i}function b(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function S(){return new b(null)}"Microsoft Internet Explorer"==f.appName?(b.prototype.am=function(e,t,r,i,n,o){for(var s=32767&t,a=t>>15;--o>=0;){var u=32767&this[e],l=this[e++]>>15,c=a*u+l*s;n=((u=s*u+((32767&c)<<15)+r[i]+(1073741823&n))>>>30)+(c>>>15)+a*l+(n>>>30),r[i++]=1073741823&u}return n},v=30):"Netscape"!=f.appName?(b.prototype.am=function(e,t,r,i,n,o){for(;--o>=0;){var s=t*this[e++]+r[i]+n;n=Math.floor(s/67108864),r[i++]=67108863&s}return n},v=26):(b.prototype.am=function(e,t,r,i,n,o){for(var s=16383&t,a=t>>14;--o>=0;){var u=16383&this[e],l=this[e++]>>14,c=a*u+l*s;n=((u=s*u+((16383&c)<<14)+r[i]+n)>>28)+(c>>14)+a*l,r[i++]=268435455&u}return n},v=28),b.prototype.DB=v,b.prototype.DM=(1<<v)-1,b.prototype.DV=1<<v,b.prototype.FV=Math.pow(2,52),b.prototype.F1=52-v,b.prototype.F2=2*v-52;var w,T,A=new Array;for(w="0".charCodeAt(0),T=0;T<=9;++T)A[w++]=T;for(w="a".charCodeAt(0),T=10;T<36;++T)A[w++]=T;for(w="A".charCodeAt(0),T=10;T<36;++T)A[w++]=T;function I(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function L(e,t){var r=A[e.charCodeAt(t)];return null==r?-1:r}function C(e){var t=S();return t.fromInt(e),t}function N(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function R(e){this.m=e}function P(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function O(e,t){return e&t}function k(e,t){return e|t}function F(e,t){return e^t}function D(e,t){return e&~t}function M(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function U(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function B(){}function j(e){return e}function H(e){this.r2=S(),this.q3=S(),b.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}R.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},R.prototype.revert=function(e){return e},R.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},R.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},R.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},P.prototype.convert=function(e){var t=S();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(b.ZERO)>0&&this.m.subTo(t,t),t},P.prototype.revert=function(e){var t=S();return e.copyTo(t),this.reduce(t),t},P.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],i=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,i,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},P.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},P.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},b.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},b.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},b.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var i=e.length,n=!1,o=0;--i>=0;){var s=8==r?255&e[i]:L(e,i);s<0?"-"==e.charAt(i)&&(n=!0):(n=!1,0==o?this[this.t++]=s:o+r>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),n&&b.ZERO.subTo(this,this)},b.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},b.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s},b.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},b.prototype.lShiftTo=function(e,t){var r,i=e%this.DB,n=this.DB-i,o=(1<<n)-1,s=Math.floor(e/this.DB),a=this.s<<i&this.DM;for(r=this.t-1;r>=0;--r)t[r+s+1]=this[r]>>n|a,a=(this[r]&o)<<i;for(r=s-1;r>=0;--r)t[r]=0;t[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()},b.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var i=e%this.DB,n=this.DB-i,o=(1<<i)-1;t[0]=this[r]>>i;for(var s=r+1;s<this.t;++s)t[s-r-1]|=(this[s]&o)<<n,t[s-r]=this[s]>>i;i>0&&(t[this.t-r-1]|=(this.s&o)<<n),t.t=this.t-r,t.clamp()}},b.prototype.subTo=function(e,t){for(var r=0,i=0,n=Math.min(e.t,this.t);r<n;)i+=this[r]-e[r],t[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i-=e[r],t[r++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[r++]=this.DV+i:i>0&&(t[r++]=i),t.t=r,t.clamp()},b.prototype.multiplyTo=function(e,t){var r=this.abs(),i=e.abs(),n=r.t;for(t.t=n+i.t;--n>=0;)t[n]=0;for(n=0;n<i.t;++n)t[n+r.t]=r.am(0,i[n],t,n,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&b.ZERO.subTo(t,t)},b.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var i=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,i,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},b.prototype.divRemTo=function(e,t,r){var i=e.abs();if(!(i.t<=0)){var n=this.abs();if(n.t<i.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=S());var o=S(),s=this.s,a=e.s,u=this.DB-N(i[i.t-1]);u>0?(i.lShiftTo(u,o),n.lShiftTo(u,r)):(i.copyTo(o),n.copyTo(r));var l=o.t,c=o[l-1];if(0!=c){var h=c*(1<<this.F1)+(l>1?o[l-2]>>this.F2:0),p=this.FV/h,d=(1<<this.F1)/h,f=1<<this.F2,g=r.t,m=g-l,v=null==t?S():t;for(o.dlShiftTo(m,v),r.compareTo(v)>=0&&(r[r.t++]=1,r.subTo(v,r)),b.ONE.dlShiftTo(l,v),v.subTo(o,o);o.t<l;)o[o.t++]=0;for(;--m>=0;){var y=r[--g]==c?this.DM:Math.floor(r[g]*p+(r[g-1]+f)*d);if((r[g]+=o.am(0,y,r,m,0,l))<y)for(o.dlShiftTo(m,v),r.subTo(v,r);r[g]<--y;)r.subTo(v,r)}null!=t&&(r.drShiftTo(l,t),s!=a&&b.ZERO.subTo(t,t)),r.t=l,r.clamp(),u>0&&r.rShiftTo(u,r),s<0&&b.ZERO.subTo(r,r)}}},b.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},b.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},b.prototype.exp=function(e,t){if(e>4294967295||e<1)return b.ONE;var r=S(),i=S(),n=t.convert(this),o=N(e)-1;for(n.copyTo(r);--o>=0;)if(t.sqrTo(r,i),(e&1<<o)>0)t.mulTo(i,n,r);else{var s=r;r=i,i=s}return t.revert(r)},b.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,i=(1<<t)-1,n=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(r=this[s]>>a)>0&&(n=!0,o=I(r));s>=0;)a<t?(r=(this[s]&(1<<a)-1)<<t-a,r|=this[--s]>>(a+=this.DB-t)):(r=this[s]>>(a-=t)&i,a<=0&&(a+=this.DB,--s)),r>0&&(n=!0),n&&(o+=I(r));return n?o:"0"},b.prototype.negate=function(){var e=S();return b.ZERO.subTo(this,e),e},b.prototype.abs=function(){return this.s<0?this.negate():this},b.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0},b.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+N(this[this.t-1]^this.s&this.DM)},b.prototype.mod=function(e){var t=S();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(b.ZERO)>0&&e.subTo(t,t),t},b.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new R(t):new P(t),this.exp(e,r)},b.ZERO=C(0),b.ONE=C(1),B.prototype.convert=j,B.prototype.revert=j,B.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},B.prototype.sqrTo=function(e,t){e.squareTo(t)},H.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=S();return e.copyTo(t),this.reduce(t),t},H.prototype.revert=function(e){return e},H.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},H.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},H.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var G,V,q,W=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],K=(1<<26)/W[W.length-1];function z(){this.i=0,this.j=0,this.S=new Array}function $(){!function(e){V[q++]^=255&e,V[q++]^=e>>8&255,V[q++]^=e>>16&255,V[q++]^=e>>24&255,q>=256&&(q-=256)}((new Date).getTime())}if(b.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},b.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),i=C(r),n=S(),o=S(),s="";for(this.divRemTo(i,n,o);n.signum()>0;)s=(r+o.intValue()).toString(e).substr(1)+s,n.divRemTo(i,n,o);return o.intValue().toString(e)+s},b.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),i=Math.pow(t,r),n=!1,o=0,s=0,a=0;a<e.length;++a){var u=L(e,a);u<0?"-"==e.charAt(a)&&0==this.signum()&&(n=!0):(s=t*s+u,++o>=r&&(this.dMultiply(i),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(s,0)),n&&b.ZERO.subTo(this,this)},b.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(b.ONE.shiftLeft(e-1),k,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(b.ONE.shiftLeft(e-1),this);else{var i=new Array,n=7&e;i.length=1+(e>>3),t.nextBytes(i),n>0?i[0]&=(1<<n)-1:i[0]=0,this.fromString(i,256)}},b.prototype.bitwiseTo=function(e,t,r){var i,n,o=Math.min(e.t,this.t);for(i=0;i<o;++i)r[i]=t(this[i],e[i]);if(e.t<this.t){for(n=e.s&this.DM,i=o;i<this.t;++i)r[i]=t(this[i],n);r.t=this.t}else{for(n=this.s&this.DM,i=o;i<e.t;++i)r[i]=t(n,e[i]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},b.prototype.changeBit=function(e,t){var r=b.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},b.prototype.addTo=function(e,t){for(var r=0,i=0,n=Math.min(e.t,this.t);r<n;)i+=this[r]+e[r],t[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i+=e[r],t[r++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=i<0?-1:0,i>0?t[r++]=i:i<-1&&(t[r++]=this.DV+i),t.t=r,t.clamp()},b.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},b.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},b.prototype.multiplyLowerTo=function(e,t,r){var i,n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r[--n]=0;for(i=r.t-this.t;n<i;++n)r[n+this.t]=this.am(0,e[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e[n],r,n,0,t-n);r.clamp()},b.prototype.multiplyUpperTo=function(e,t,r){--t;var i=r.t=this.t+e.t-t;for(r.s=0;--i>=0;)r[i]=0;for(i=Math.max(t-this.t,0);i<e.t;++i)r[this.t+i-t]=this.am(t-i,e[i],r,0,0,this.t+i-t);r.clamp(),r.drShiftTo(1,r)},b.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this[0]%e;else for(var i=this.t-1;i>=0;--i)r=(t*r+this[i])%e;return r},b.prototype.millerRabin=function(e){var t=this.subtract(b.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var i=t.shiftRight(r);(e=e+1>>1)>W.length&&(e=W.length);for(var n=S(),o=0;o<e;++o){n.fromInt(W[Math.floor(Math.random()*W.length)]);var s=n.modPow(i,this);if(0!=s.compareTo(b.ONE)&&0!=s.compareTo(t)){for(var a=1;a++<r&&0!=s.compareTo(t);)if(0==(s=s.modPowInt(2,this)).compareTo(b.ONE))return!1;if(0!=s.compareTo(t))return!1}}return!0},b.prototype.clone=function(){var e=S();return this.copyTo(e),e},b.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},b.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},b.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},b.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},b.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,i=this.DB-e*this.DB%8,n=0;if(e-- >0)for(i<this.DB&&(r=this[e]>>i)!=(this.s&this.DM)>>i&&(t[n++]=r|this.s<<this.DB-i);e>=0;)i<8?(r=(this[e]&(1<<i)-1)<<8-i,r|=this[--e]>>(i+=this.DB-8)):(r=this[e]>>(i-=8)&255,i<=0&&(i+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==n&&(128&this.s)!=(128&r)&&++n,(n>0||r!=this.s)&&(t[n++]=r);return t},b.prototype.equals=function(e){return 0==this.compareTo(e)},b.prototype.min=function(e){return this.compareTo(e)<0?this:e},b.prototype.max=function(e){return this.compareTo(e)>0?this:e},b.prototype.and=function(e){var t=S();return this.bitwiseTo(e,O,t),t},b.prototype.or=function(e){var t=S();return this.bitwiseTo(e,k,t),t},b.prototype.xor=function(e){var t=S();return this.bitwiseTo(e,F,t),t},b.prototype.andNot=function(e){var t=S();return this.bitwiseTo(e,D,t),t},b.prototype.not=function(){for(var e=S(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},b.prototype.shiftLeft=function(e){var t=S();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},b.prototype.shiftRight=function(e){var t=S();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},b.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+M(this[e]);return this.s<0?this.t*this.DB:-1},b.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=U(this[r]^t);return e},b.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},b.prototype.setBit=function(e){return this.changeBit(e,k)},b.prototype.clearBit=function(e){return this.changeBit(e,D)},b.prototype.flipBit=function(e){return this.changeBit(e,F)},b.prototype.add=function(e){var t=S();return this.addTo(e,t),t},b.prototype.subtract=function(e){var t=S();return this.subTo(e,t),t},b.prototype.multiply=function(e){var t=S();return this.multiplyTo(e,t),t},b.prototype.divide=function(e){var t=S();return this.divRemTo(e,t,null),t},b.prototype.remainder=function(e){var t=S();return this.divRemTo(e,null,t),t},b.prototype.divideAndRemainder=function(e){var t=S(),r=S();return this.divRemTo(e,t,r),new Array(t,r)},b.prototype.modPow=function(e,t){var r,i,n=e.bitLength(),o=C(1);if(n<=0)return o;r=n<18?1:n<48?3:n<144?4:n<768?5:6,i=n<8?new R(t):t.isEven()?new H(t):new P(t);var s=new Array,a=3,u=r-1,l=(1<<r)-1;if(s[1]=i.convert(this),r>1){var c=S();for(i.sqrTo(s[1],c);a<=l;)s[a]=S(),i.mulTo(c,s[a-2],s[a]),a+=2}var h,p,d=e.t-1,f=!0,g=S();for(n=N(e[d])-1;d>=0;){for(n>=u?h=e[d]>>n-u&l:(h=(e[d]&(1<<n+1)-1)<<u-n,d>0&&(h|=e[d-1]>>this.DB+n-u)),a=r;0==(1&h);)h>>=1,--a;if((n-=a)<0&&(n+=this.DB,--d),f)s[h].copyTo(o),f=!1;else{for(;a>1;)i.sqrTo(o,g),i.sqrTo(g,o),a-=2;a>0?i.sqrTo(o,g):(p=o,o=g,g=p),i.mulTo(g,s[h],o)}for(;d>=0&&0==(e[d]&1<<n);)i.sqrTo(o,g),p=o,o=g,g=p,--n<0&&(n=this.DB-1,--d)}return i.revert(o)},b.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return b.ZERO;for(var r=e.clone(),i=this.clone(),n=C(1),o=C(0),s=C(0),a=C(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(n.isEven()&&o.isEven()||(n.addTo(this,n),o.subTo(e,o)),n.rShiftTo(1,n)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;i.isEven();)i.rShiftTo(1,i),t?(s.isEven()&&a.isEven()||(s.addTo(this,s),a.subTo(e,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(i)>=0?(r.subTo(i,r),t&&n.subTo(s,n),o.subTo(a,o)):(i.subTo(r,i),t&&s.subTo(n,s),a.subTo(o,a))}return 0!=i.compareTo(b.ONE)?b.ZERO:a.compareTo(e)>=0?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a},b.prototype.pow=function(e){return this.exp(e,new B)},b.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var i=t;t=r,r=i}var n=t.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return t;for(n<o&&(o=n),o>0&&(t.rShiftTo(o,t),r.rShiftTo(o,r));t.signum()>0;)(n=t.getLowestSetBit())>0&&t.rShiftTo(n,t),(n=r.getLowestSetBit())>0&&r.rShiftTo(n,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r},b.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r[0]<=W[W.length-1]){for(t=0;t<W.length;++t)if(r[0]==W[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<W.length;){for(var i=W[t],n=t+1;n<W.length&&i<K;)i*=W[n++];for(i=r.modInt(i);t<n;)if(i%W[t++]==0)return!1}return r.millerRabin(e)},b.prototype.square=function(){var e=S();return this.squareTo(e),e},z.prototype.init=function(e){var t,r,i;for(t=0;t<256;++t)this.S[t]=t;for(r=0,t=0;t<256;++t)r=r+this.S[t]+e[t%e.length]&255,i=this.S[t],this.S[t]=this.S[r],this.S[r]=i;this.i=0,this.j=0},z.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]},null==V){var J;if(V=new Array,q=0,void 0!==g&&(void 0!==g.crypto||void 0!==g.msCrypto)){var Z=g.crypto||g.msCrypto;if(Z.getRandomValues){var Y=new Uint8Array(32);for(Z.getRandomValues(Y),J=0;J<32;++J)V[q++]=Y[J]}else if("Netscape"==f.appName&&f.appVersion<"5"){var X=g.crypto.random(32);for(J=0;J<X.length;++J)V[q++]=255&X.charCodeAt(J)}}for(;q<256;)J=Math.floor(65536*Math.random()),V[q++]=J>>>8,V[q++]=255&J;q=0,$()}function Q(){if(null==G){for($(),(G=new z).init(V),q=0;q<V.length;++q)V[q]=0;q=0}return G.next()}function ee(){}function te(e,t){return new b(e,t)}function re(e,t,r){for(var i="",n=0;i.length<t;)i+=r(String.fromCharCode.apply(String,e.concat([(4278190080&n)>>24,(16711680&n)>>16,(65280&n)>>8,255&n]))),n+=1;return i}function ie(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function ne(e,t){this.x=t,this.q=e}function oe(e,t,r,i){this.curve=e,this.x=t,this.y=r,this.z=null==i?b.ONE:i,this.zinv=null}function se(e,t,r){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(r),this.infinity=new oe(this,null,null)}ee.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=Q()},ie.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},ie.prototype.setPublic=function(e,t){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof e)this.n=e,this.e=t;else{if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA public key";this.n=te(e,16),this.e=parseInt(t,16)}},ie.prototype.encrypt=function(e){var t=function(e,t){if(t<e.length+11)throw"Message too long for RSA";for(var r=new Array,i=e.length-1;i>=0&&t>0;){var n=e.charCodeAt(i--);n<128?r[--t]=n:n>127&&n<2048?(r[--t]=63&n|128,r[--t]=n>>6|192):(r[--t]=63&n|128,r[--t]=n>>6&63|128,r[--t]=n>>12|224)}r[--t]=0;for(var o=new ee,s=new Array;t>2;){for(s[0]=0;0==s[0];)o.nextBytes(s);r[--t]=s[0]}return r[--t]=2,r[--t]=0,new b(r)}(e,this.n.bitLength()+7>>3);if(null==t)return null;var r=this.doPublic(t);if(null==r)return null;var i=r.toString(16);return 0==(1&i.length)?i:"0"+i},ie.prototype.encryptOAEP=function(e,t,r){var i=function(e,t,r,i){var n=ue.crypto.MessageDigest,o=ue.crypto.Util,s=null;if(r||(r="sha1"),"string"==typeof r&&(s=n.getCanonicalAlgName(r),i=n.getHashLength(s),r=function(e){return be(o.hashHex(Se(e),s))}),e.length+2*i+2>t)throw"Message too long for RSA";var a,u="";for(a=0;a<t-e.length-2*i-2;a+=1)u+="\0";var l=r("")+u+""+e,c=new Array(i);(new ee).nextBytes(c);var h=re(c,l.length,r),p=[];for(a=0;a<l.length;a+=1)p[a]=l.charCodeAt(a)^h.charCodeAt(a);var d=re(p,c.length,r),f=[0];for(a=0;a<c.length;a+=1)f[a+1]=c[a]^d.charCodeAt(a);return new b(f.concat(p))}(e,this.n.bitLength()+7>>3,t,r);if(null==i)return null;var n=this.doPublic(i);if(null==n)return null;var o=n.toString(16);return 0==(1&o.length)?o:"0"+o},ie.prototype.type="RSA",ne.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.x.equals(e.x)},ne.prototype.toBigInteger=function(){return this.x},ne.prototype.negate=function(){return new ne(this.q,this.x.negate().mod(this.q))},ne.prototype.add=function(e){return new ne(this.q,this.x.add(e.toBigInteger()).mod(this.q))},ne.prototype.subtract=function(e){return new ne(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))},ne.prototype.multiply=function(e){return new ne(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))},ne.prototype.square=function(){return new ne(this.q,this.x.square().mod(this.q))},ne.prototype.divide=function(e){return new ne(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))},oe.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},oe.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},oe.prototype.equals=function(e){return e==this||(this.isInfinity()?e.isInfinity():e.isInfinity()?this.isInfinity():!!e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(b.ZERO)&&e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(b.ZERO))},oe.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(b.ZERO)&&!this.y.toBigInteger().equals(b.ZERO)},oe.prototype.negate=function(){return new oe(this.curve,this.x,this.y.negate(),this.z)},oe.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),r=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(b.ZERO.equals(r))return b.ZERO.equals(t)?this.twice():this.curve.getInfinity();var i=new b("3"),n=this.x.toBigInteger(),o=this.y.toBigInteger(),s=(e.x.toBigInteger(),e.y.toBigInteger(),r.square()),a=s.multiply(r),u=n.multiply(s),l=t.square().multiply(this.z),c=l.subtract(u.shiftLeft(1)).multiply(e.z).subtract(a).multiply(r).mod(this.curve.q),h=u.multiply(i).multiply(t).subtract(o.multiply(a)).subtract(l.multiply(t)).multiply(e.z).add(t.multiply(a)).mod(this.curve.q),p=a.multiply(this.z).multiply(e.z).mod(this.curve.q);return new oe(this.curve,this.curve.fromBigInteger(c),this.curve.fromBigInteger(h),p)},oe.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new b("3"),t=this.x.toBigInteger(),r=this.y.toBigInteger(),i=r.multiply(this.z),n=i.multiply(r).mod(this.curve.q),o=this.curve.a.toBigInteger(),s=t.square().multiply(e);b.ZERO.equals(o)||(s=s.add(this.z.square().multiply(o)));var a=(s=s.mod(this.curve.q)).square().subtract(t.shiftLeft(3).multiply(n)).shiftLeft(1).multiply(i).mod(this.curve.q),u=s.multiply(e).multiply(t).subtract(n.shiftLeft(1)).shiftLeft(2).multiply(n).subtract(s.square().multiply(s)).mod(this.curve.q),l=i.square().multiply(i).shiftLeft(3).mod(this.curve.q);return new oe(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(u),l)},oe.prototype.multiply=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,r=e,i=r.multiply(new b("3")),n=this.negate(),o=this,s=this.curve.q.subtract(e),a=s.multiply(new b("3")),u=new oe(this.curve,this.x,this.y),l=u.negate();for(t=i.bitLength()-2;t>0;--t){o=o.twice();var c=i.testBit(t);c!=r.testBit(t)&&(o=o.add(c?this:n))}for(t=a.bitLength()-2;t>0;--t){u=u.twice();var h=a.testBit(t);h!=s.testBit(t)&&(u=u.add(h?u:l))}return o},oe.prototype.multiplyTwo=function(e,t,r){var i;i=e.bitLength()>r.bitLength()?e.bitLength()-1:r.bitLength()-1;for(var n=this.curve.getInfinity(),o=this.add(t);i>=0;)n=n.twice(),e.testBit(i)?n=r.testBit(i)?n.add(o):n.add(this):r.testBit(i)&&(n=n.add(t)),--i;return n},se.prototype.getQ=function(){return this.q},se.prototype.getA=function(){return this.a},se.prototype.getB=function(){return this.b},se.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)},se.prototype.getInfinity=function(){return this.infinity},se.prototype.fromBigInteger=function(e){return new ne(this.q,e)},se.prototype.decodePointHex=function(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:default:return null;case 4:case 6:case 7:var t=(e.length-2)/2,r=e.substr(2,t),i=e.substr(t+2,t);return new oe(this,this.fromBigInteger(new b(r,16)),this.fromBigInteger(new b(i,16)))}},ne.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},oe.prototype.getEncoded=function(e){var t=function(e,t){var r=e.toByteArrayUnsigned();if(t<r.length)r=r.slice(r.length-t);else for(;t>r.length;)r.unshift(0);return r},r=this.getX().toBigInteger(),i=this.getY().toBigInteger(),n=t(r,32);return e?i.isEven()?n.unshift(2):n.unshift(3):(n.unshift(4),n=n.concat(t(i,32))),n},oe.decodeFrom=function(e,t){t[0];var r=t.length-1,i=t.slice(1,1+r/2),n=t.slice(1+r/2,1+r);i.unshift(0),n.unshift(0);var o=new b(i),s=new b(n);return new oe(e,e.fromBigInteger(o),e.fromBigInteger(s))},oe.decodeFromHex=function(e,t){t.substr(0,2);var r=t.length-2,i=t.substr(2,r/2),n=t.substr(2+r/2,r/2),o=new b(i,16),s=new b(n,16);return new oe(e,e.fromBigInteger(o),e.fromBigInteger(s))},oe.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var t=e.x.subtract(this.x),r=e.y.subtract(this.y).divide(t),i=r.square().subtract(this.x).subtract(e.x),n=r.multiply(this.x.subtract(i)).subtract(this.y);return new oe(this.curve,i,n)},oe.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=this.curve.fromBigInteger(b.valueOf(2)),t=this.curve.fromBigInteger(b.valueOf(3)),r=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)),i=r.square().subtract(this.x.multiply(e)),n=r.multiply(this.x.subtract(i)).subtract(this.y);return new oe(this.curve,i,n)},oe.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,r=e,i=r.multiply(new b("3")),n=this.negate(),o=this;for(t=i.bitLength()-2;t>0;--t){o=o.twice();var s=i.testBit(t);s!=r.testBit(t)&&(o=o.add2D(s?this:n))}return o},oe.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),t=this.getY().toBigInteger(),r=this.curve.getA().toBigInteger(),i=this.curve.getB().toBigInteger(),n=this.curve.getQ(),o=t.multiply(t).mod(n),s=e.multiply(e).multiply(e).add(r.multiply(e)).add(i).mod(n);return o.equals(s)},oe.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},oe.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var t=this.getX().toBigInteger(),r=this.getY().toBigInteger();if(t.compareTo(b.ONE)<0||t.compareTo(e.subtract(b.ONE))>0)throw new Error("x coordinate out of bounds");if(r.compareTo(b.ONE)<0||r.compareTo(e.subtract(b.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var ae=function(){var e=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),t=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),r={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function i(e,t,i){return t?r[t]:String.fromCharCode(parseInt(i,16))}var n=new String(""),o=Object.hasOwnProperty;return function(r,s){var a,u,l=r.match(e),c=l[0],h=!1;"{"===c?a={}:"["===c?a=[]:(a=[],h=!0);for(var p=[a],f=1-h,g=l.length;f<g;++f){var m;switch((c=l[f]).charCodeAt(0)){default:(m=p[0])[u||m.length]=+c,u=void 0;break;case 34:if(-1!==(c=c.substring(1,c.length-1)).indexOf("\\")&&(c=c.replace(t,i)),m=p[0],!u){if(!(m instanceof Array)){u=c||n;break}u=m.length}m[u]=c,u=void 0;break;case 91:m=p[0],p.unshift(m[u||m.length]=[]),u=void 0;break;case 93:case 125:p.shift();break;case 102:(m=p[0])[u||m.length]=!1,u=void 0;break;case 110:(m=p[0])[u||m.length]=null,u=void 0;break;case 116:(m=p[0])[u||m.length]=!0,u=void 0;break;case 123:m=p[0],p.unshift(m[u||m.length]={}),u=void 0}}if(h){if(1!==p.length)throw new Error;a=a[0]}else if(p.length)throw new Error;return s&&(a=function e(t,r){var i=t[r];if(i&&"object"===(void 0===i?"undefined":d(i))){var n=null;for(var a in i)if(o.call(i,a)&&i!==t){var u=e(i,a);void 0!==u?i[a]=u:(n||(n=[]),n.push(a))}if(n)for(var l=n.length;--l>=0;)delete i[n[l]]}return s.call(t,r,i)}({"":a},"")),a}}();void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.asn1&&ue.asn1||(ue.asn1={}),ue.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var r=t.substr(1).length;r%2==1?r+=1:t.match(/^[0-7]/)||(r+=2);for(var i="",n=0;n<r;n++)i+="f";t=new b(i,16).xor(e).add(b.ONE).toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return Ie(e,t)},this.newObject=function(e){var t=ue.asn1,r=t.ASN1Object,i=t.DERBoolean,n=t.DERInteger,o=t.DERBitString,s=t.DEROctetString,a=t.DERNull,u=t.DERObjectIdentifier,l=t.DEREnumerated,c=t.DERUTF8String,h=t.DERNumericString,p=t.DERPrintableString,d=t.DERTeletexString,f=t.DERIA5String,g=t.DERUTCTime,m=t.DERGeneralizedTime,v=t.DERVisibleString,y=t.DERBMPString,_=t.DERSequence,E=t.DERSet,x=t.DERTaggedObject,b=t.ASN1Util.newObject;if(e instanceof t.ASN1Object)return e;var S=Object.keys(e);if(1!=S.length)throw new Error("key of param shall be only one.");var w=S[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+w+":"))throw new Error("undefined key: "+w);if("bool"==w)return new i(e[w]);if("int"==w)return new n(e[w]);if("bitstr"==w)return new o(e[w]);if("octstr"==w)return new s(e[w]);if("null"==w)return new a(e[w]);if("oid"==w)return new u(e[w]);if("enum"==w)return new l(e[w]);if("utf8str"==w)return new c(e[w]);if("numstr"==w)return new h(e[w]);if("prnstr"==w)return new p(e[w]);if("telstr"==w)return new d(e[w]);if("ia5str"==w)return new f(e[w]);if("utctime"==w)return new g(e[w]);if("gentime"==w)return new m(e[w]);if("visstr"==w)return new v(e[w]);if("bmpstr"==w)return new y(e[w]);if("asn1"==w)return new r(e[w]);if("seq"==w){for(var T=e[w],A=[],I=0;I<T.length;I++){var L=b(T[I]);A.push(L)}return new _({array:A})}if("set"==w){for(T=e[w],A=[],I=0;I<T.length;I++)L=b(T[I]),A.push(L);return new E({array:A})}if("tag"==w){var C=e[w];if("[object Array]"===Object.prototype.toString.call(C)&&3==C.length){var N=b(C[2]);return new x({tag:C[0],explicit:C[1],obj:N})}return new x(C)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},ue.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",r=parseInt(e.substr(0,2),16),i=(t=Math.floor(r/40)+"."+r%40,""),n=2;n<e.length;n+=2){var o=("00000000"+parseInt(e.substr(n,2),16).toString(2)).slice(-8);i+=o.substr(1,7),"0"==o.substr(0,1)&&(t=t+"."+new b(i,2).toString(10),i="")}return t},ue.asn1.ASN1Util.oidIntToHex=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},r=function(e){var r="",i=new b(e,10).toString(2),n=7-i.length%7;7==n&&(n=0);for(var o="",s=0;s<n;s++)o+="0";for(i=o+i,s=0;s<i.length-1;s+=7){var a=i.substr(s,7);s!=i.length-7&&(a="1"+a),r+=t(parseInt(a,2))}return r};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var i="",n=e.split("."),o=40*parseInt(n[0])+parseInt(n[1]);i+=t(o),n.splice(0,2);for(var s=0;s<n.length;s++)i+=r(n[s]);return i},ue.asn1.ASN1Object=function(e){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+"".length+",v="+this.hV);var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var r=t.length/2;if(r>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+r).toString(16)+t},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(e){this.params=e},null!=e&&null!=e.tlv&&(this.hTLV=e.tlv,this.isModified=!1)},ue.asn1.DERAbstractString=function(e){ue.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=Ee(this.s).toLowerCase()},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},He(ue.asn1.DERAbstractString,ue.asn1.ASN1Object),ue.asn1.DERAbstractTime=function(e){ue.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(e){var t=e.getTime()+6e4*e.getTimezoneOffset();return new Date(t)},this.formatDate=function(e,t,r){var i=this.zeroPadding,n=this.localDateToUTC(e),o=String(n.getFullYear());"utc"==t&&(o=o.substr(2,2));var s=o+i(String(n.getMonth()+1),2)+i(String(n.getDate()),2)+i(String(n.getHours()),2)+i(String(n.getMinutes()),2)+i(String(n.getSeconds()),2);if(!0===r){var a=n.getMilliseconds();if(0!=a){var u=i(String(a),3);s=s+"."+(u=u.replace(/[0]+$/,""))}}return s+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=ge(e)},this.setByDateValue=function(e,t,r,i,n,o){var s=new Date(Date.UTC(e,t-1,r,i,n,o,0));this.setByDate(s)},this.getFreshValueHex=function(){return this.hV}},He(ue.asn1.DERAbstractTime,ue.asn1.ASN1Object),ue.asn1.DERAbstractStructured=function(e){ue.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},He(ue.asn1.DERAbstractStructured,ue.asn1.ASN1Object),ue.asn1.DERBoolean=function(e){ue.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==e?"010100":"0101ff"},He(ue.asn1.DERBoolean,ue.asn1.ASN1Object),ue.asn1.DERInteger=function(e){ue.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=ue.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new b(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},He(ue.asn1.DERInteger,ue.asn1.ASN1Object),ue.asn1.DERBitString=function(e){if(void 0!==e&&void 0!==e.obj){var t=ue.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.getEncodedHex()}ue.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;var r="0"+e;this.hTLV=null,this.isModified=!0,this.hV=r+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0);for(var r=0;r<=t;r++)e+="0";var i="";for(r=0;r<e.length-1;r+=8){var n=e.substr(r,8),o=parseInt(n,2).toString(16);1==o.length&&(o="0"+o),i+=o}this.hTLV=null,this.isModified=!0,this.hV="0"+t+i},this.setByBooleanArray=function(e){for(var t="",r=0;r<e.length;r++)1==e[r]?t+="1":t+="0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},He(ue.asn1.DERBitString,ue.asn1.ASN1Object),ue.asn1.DEROctetString=function(e){if(void 0!==e&&void 0!==e.obj){var t=ue.asn1.ASN1Util.newObject(e.obj);e.hex=t.getEncodedHex()}ue.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},He(ue.asn1.DEROctetString,ue.asn1.DERAbstractString),ue.asn1.DERNull=function(){ue.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},He(ue.asn1.DERNull,ue.asn1.ASN1Object),ue.asn1.DERObjectIdentifier=function(e){ue.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){var t=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},r=function(e){var r="",i=parseInt(e,10).toString(2),n=7-i.length%7;7==n&&(n=0);for(var o="",s=0;s<n;s++)o+="0";for(i=o+i,s=0;s<i.length-1;s+=7){var a=i.substr(s,7);s!=i.length-7&&(a="1"+a),r+=t(parseInt(a,2))}return r};try{if(!e.match(/^[0-9.]+$/))return null;var i="",n=e.split("."),o=40*parseInt(n[0],10)+parseInt(n[1],10);i+=t(o),n.splice(0,2);for(var s=0;s<n.length;s++)i+=r(n[s]);return i}catch(e){return null}}(e);if(null==t)throw new Error("malformed oid string: "+e);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueName=function(e){var t=ue.asn1.x509.OID.name2oid(e);if(""===t)throw new Error("DERObjectIdentifier oidName undefined: "+e);this.setValueOidString(t)},this.setValueNameOrOid=function(e){e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(e){"string"==typeof e?this.setValueNameOrOid(e):void 0!==e.oid?this.setValueNameOrOid(e.oid):void 0!==e.name?this.setValueNameOrOid(e.name):void 0!==e.hex&&this.setValueHex(e.hex)},void 0!==e&&this.setByParam(e)},He(ue.asn1.DERObjectIdentifier,ue.asn1.ASN1Object),ue.asn1.DEREnumerated=function(e){ue.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=ue.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new b(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},He(ue.asn1.DEREnumerated,ue.asn1.ASN1Object),ue.asn1.DERUTF8String=function(e){ue.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},He(ue.asn1.DERUTF8String,ue.asn1.DERAbstractString),ue.asn1.DERNumericString=function(e){ue.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},He(ue.asn1.DERNumericString,ue.asn1.DERAbstractString),ue.asn1.DERPrintableString=function(e){ue.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},He(ue.asn1.DERPrintableString,ue.asn1.DERAbstractString),ue.asn1.DERTeletexString=function(e){ue.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},He(ue.asn1.DERTeletexString,ue.asn1.DERAbstractString),ue.asn1.DERIA5String=function(e){ue.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},He(ue.asn1.DERIA5String,ue.asn1.DERAbstractString),ue.asn1.DERVisibleString=function(e){ue.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="1a"},He(ue.asn1.DERVisibleString,ue.asn1.DERAbstractString),ue.asn1.DERBMPString=function(e){ue.asn1.DERBMPString.superclass.constructor.call(this,e),this.hT="1e"},He(ue.asn1.DERBMPString,ue.asn1.DERAbstractString),ue.asn1.DERUTCTime=function(e){ue.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=ge(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=ge(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date))},He(ue.asn1.DERUTCTime,ue.asn1.DERAbstractTime),ue.asn1.DERGeneralizedTime=function(e){ue.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=ge(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=ge(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date),!0===e.millis&&(this.withMillis=!0))},He(ue.asn1.DERGeneralizedTime,ue.asn1.DERAbstractTime),ue.asn1.DERSequence=function(e){ue.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++)e+=this.asn1Array[t].getEncodedHex();return this.hV=e,this.hV}},He(ue.asn1.DERSequence,ue.asn1.DERAbstractStructured),ue.asn1.DERSet=function(e){ue.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++){var r=this.asn1Array[t];e.push(r.getEncodedHex())}return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},He(ue.asn1.DERSet,ue.asn1.DERAbstractStructured),ue.asn1.DERTaggedObject=function(e){ue.asn1.DERTaggedObject.superclass.constructor.call(this);var t=ue.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,r){this.hT=t,this.isExplicit=e,this.asn1Object=r,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=r.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(e){null!=e.tag&&(this.hT=e.tag),null!=e.explicit&&(this.isExplicit=e.explicit),null!=e.tage&&(this.hT=e.tage,this.isExplicit=!0),null!=e.tagi&&(this.hT=e.tagi,this.isExplicit=!1),null!=e.obj&&(e.obj instanceof t.ASN1Object?(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):"object"==d(e.obj)&&(this.asn1Object=t.ASN1Util.newObject(e.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},null!=e&&this.setByParam(e)},He(ue.asn1.DERTaggedObject,ue.asn1.ASN1Object);var ue,le,ce,he=new function(){};function pe(e){for(var t=new Array,r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function de(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}function fe(e){for(var t="",r=0;r<e.length;r++){var i=e[r].toString(16);1==i.length&&(i="0"+i),t+=i}return t}function ge(e){return fe(pe(e))}function me(e){return(e=(e=e.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function ve(e){return e.length%4==2?e+="==":e.length%4==3&&(e+="="),(e=e.replace(/-/g,"+")).replace(/_/g,"/")}function ye(e){return e.length%2==1&&(e="0"+e),me(_(e))}function _e(e){return E(ve(e))}function Ee(e){return Re(Me(e))}function xe(e){return decodeURIComponent(Pe(e))}function be(e){for(var t="",r=0;r<e.length-1;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t}function Se(e){for(var t="",r=0;r<e.length;r++)t+=("0"+e.charCodeAt(r).toString(16)).slice(-2);return t}function we(e){return _(e)}function Te(e){return we(e).replace(/(.{64})/g,"$1\r\n").replace(/\r\n$/,"")}function Ae(e){return E(e.replace(/[^0-9A-Za-z\/+=]*/g,""))}function Ie(e,t){return"-----BEGIN "+t+"-----\r\n"+Te(e)+"\r\n-----END "+t+"-----\r\n"}function Le(e,t){if(-1==e.indexOf("-----BEGIN "))throw"can't find PEM header: "+t;return Ae(e=void 0!==t?(e=e.replace(new RegExp("^[^]*-----BEGIN "+t+"-----"),"")).replace(new RegExp("-----END "+t+"-----[^]*$"),""):(e=e.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function Ce(e){var t,r,i,n,o,s,a,u,l,c,h;if(h=e.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return u=h[1],t=parseInt(u),2===u.length&&(50<=t&&t<100?t=1900+t:0<=t&&t<50&&(t=2e3+t)),r=parseInt(h[2])-1,i=parseInt(h[3]),n=parseInt(h[4]),o=parseInt(h[5]),s=parseInt(h[6]),a=0,""!==(l=h[7])&&(c=(l.substr(1)+"00").substr(0,3),a=parseInt(c)),Date.UTC(t,r,i,n,o,s,a);throw"unsupported zulu format: "+e}function Ne(e){return~~(Ce(e)/1e3)}function Re(e){return e.replace(/%/g,"")}function Pe(e){return e.replace(/(..)/g,"%$1")}function Oe(e){var t="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw t;var r=(e=e.toLowerCase()).split(":").length-1;if(r<2)throw t;var i=":".repeat(7-r+2),n=(e=e.replace("::",i)).split(":");if(8!=n.length)throw t;for(var o=0;o<8;o++)n[o]=("0000"+n[o]).slice(-4);return n.join("")}function ke(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var t=(e=e.toLowerCase()).match(/.{1,4}/g),r=0;r<8;r++)t[r]=t[r].replace(/^0+/,""),""==t[r]&&(t[r]="0");var i=(e=":"+t.join(":")+":").match(/:(0:){2,}/g);if(null===i)return e.slice(1,-1);var n="";for(r=0;r<i.length;r++)i[r].length>n.length&&(n=i[r]);return(e=e.replace(n,"::")).slice(1,-1)}function Fe(e){var t="malformed hex value";if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw t;if(8!=e.length)return 32==e.length?ke(e):e;try{return parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16)}catch(e){throw t}}function De(e){return e.match(/.{4}/g).map((function(e){var t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2),16);if(0==t&r<128)return String.fromCharCode(r);if(t<8){var i=128|63&r;return xe((192|(7&t)<<3|(192&r)>>6).toString(16)+i.toString(16))}i=128|(15&t)<<2|(192&r)>>6;var n=128|63&r;return xe((224|(240&t)>>4).toString(16)+i.toString(16)+n.toString(16))})).join("")}function Me(e){for(var t=encodeURIComponent(e),r="",i=0;i<t.length;i++)"%"==t[i]?(r+=t.substr(i,3),i+=2):r=r+"%"+ge(t[i]);return r}function Ue(e){return!(e.length%2!=0||!e.match(/^[0-9a-f]+$/)&&!e.match(/^[0-9A-F]+$/))}function Be(e){return e.length%2==1?"0"+e:e.substr(0,1)>"7"?"00"+e:e}he.getLblen=function(e,t){if("8"!=e.substr(t+2,1))return 1;var r=parseInt(e.substr(t+3,1));return 0==r?-1:0<r&&r<10?r+1:-2},he.getL=function(e,t){var r=he.getLblen(e,t);return r<1?"":e.substr(t+2,2*r)},he.getVblen=function(e,t){var r;return""==(r=he.getL(e,t))?-1:("8"===r.substr(0,1)?new b(r.substr(2),16):new b(r,16)).intValue()},he.getVidx=function(e,t){var r=he.getLblen(e,t);return r<0?r:t+2*(r+1)},he.getV=function(e,t){var r=he.getVidx(e,t),i=he.getVblen(e,t);return e.substr(r,2*i)},he.getTLV=function(e,t){return e.substr(t,2)+he.getL(e,t)+he.getV(e,t)},he.getTLVblen=function(e,t){return 2+2*he.getLblen(e,t)+2*he.getVblen(e,t)},he.getNextSiblingIdx=function(e,t){return he.getVidx(e,t)+2*he.getVblen(e,t)},he.getChildIdx=function(e,t){var r,i,n,o=he,s=[];r=o.getVidx(e,t),i=2*o.getVblen(e,t),"03"==e.substr(t,2)&&(r+=2,i-=2),n=0;for(var a=r;n<=i;){var u=o.getTLVblen(e,a);if((n+=u)<=i&&s.push(a),a+=u,n>=i)break}return s},he.getNthChildIdx=function(e,t,r){return he.getChildIdx(e,t)[r]},he.getIdxbyList=function(e,t,r,i){var n,o,s=he;return 0==r.length?void 0!==i&&e.substr(t,2)!==i?-1:t:(n=r.shift())>=(o=s.getChildIdx(e,t)).length?-1:s.getIdxbyList(e,o[n],r,i)},he.getIdxbyListEx=function(e,t,r,i){var n,o,s=he;if(0==r.length)return void 0!==i&&e.substr(t,2)!==i?-1:t;n=r.shift(),o=s.getChildIdx(e,t);for(var a=0,u=0;u<o.length;u++){var l=e.substr(o[u],2);if("number"==typeof n&&!s.isContextTag(l)&&a==n||"string"==typeof n&&s.isContextTag(l,n))return s.getIdxbyListEx(e,o[u],r,i);s.isContextTag(l)||a++}return-1},he.getTLVbyList=function(e,t,r,i){var n=he,o=n.getIdxbyList(e,t,r,i);return-1==o||o>=e.length?null:n.getTLV(e,o)},he.getTLVbyListEx=function(e,t,r,i){var n=he,o=n.getIdxbyListEx(e,t,r,i);return-1==o?null:n.getTLV(e,o)},he.getVbyList=function(e,t,r,i,n){var o,s,a=he;return-1==(o=a.getIdxbyList(e,t,r,i))||o>=e.length?null:(s=a.getV(e,o),!0===n&&(s=s.substr(2)),s)},he.getVbyListEx=function(e,t,r,i,n){var o,s,a=he;return-1==(o=a.getIdxbyListEx(e,t,r,i))?null:(s=a.getV(e,o),"03"==e.substr(o,2)&&!1!==n&&(s=s.substr(2)),s)},he.getInt=function(e,t,r){null==r&&(r=-1);try{var i=e.substr(t,2);if("02"!=i&&"03"!=i)return r;var n=he.getV(e,t);return"02"==i?parseInt(n,16):function(e){try{var t=e.substr(0,2);if("00"==t)return parseInt(e.substr(2),16);var r=parseInt(t,16),i=e.substr(2),n=parseInt(i,16).toString(2);return"0"==n&&(n="00000000"),n=n.slice(0,0-r),parseInt(n,2)}catch(e){return-1}}(n)}catch(e){return r}},he.getOID=function(e,t,r){null==r&&(r=null);try{return"06"!=e.substr(t,2)?r:function(e){if(!Ue(e))return null;try{var t=[],r=e.substr(0,2),i=parseInt(r,16);t[0]=new String(Math.floor(i/40)),t[1]=new String(i%40);for(var n=e.substr(2),o=[],s=0;s<n.length/2;s++)o.push(parseInt(n.substr(2*s,2),16));var a=[],u="";for(s=0;s<o.length;s++)128&o[s]?u+=je((127&o[s]).toString(2),7):(u+=je((127&o[s]).toString(2),7),a.push(new String(parseInt(u,2))),u="");var l=t.join(".");return a.length>0&&(l=l+"."+a.join(".")),l}catch(e){return null}}(he.getV(e,t))}catch(e){return r}},he.getOIDName=function(e,t,r){null==r&&(r=null);try{var i=he.getOID(e,t,r);if(i==r)return r;var n=ue.asn1.x509.OID.oid2name(i);return""==n?i:n}catch(e){return r}},he.getString=function(e,t,r){null==r&&(r=null);try{return be(he.getV(e,t))}catch(e){return r}},he.hextooidstr=function(e){var t=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},r=[],i=e.substr(0,2),n=parseInt(i,16);r[0]=new String(Math.floor(n/40)),r[1]=new String(n%40);for(var o=e.substr(2),s=[],a=0;a<o.length/2;a++)s.push(parseInt(o.substr(2*a,2),16));var u=[],l="";for(a=0;a<s.length;a++)128&s[a]?l+=t((127&s[a]).toString(2),7):(l+=t((127&s[a]).toString(2),7),u.push(new String(parseInt(l,2))),l="");var c=r.join(".");return u.length>0&&(c=c+"."+u.join(".")),c},he.dump=function(e,t,r,i){var n=he,o=n.getV,s=n.dump,a=n.getChildIdx,u=e;e instanceof ue.asn1.ASN1Object&&(u=e.getEncodedHex());var l=function(e,t){return e.length<=2*t?e:e.substr(0,t)+"..(total "+e.length/2+"bytes).."+e.substr(e.length-t,t)};void 0===t&&(t={ommit_long_octet:32}),void 0===r&&(r=0),void 0===i&&(i="");var c,h=t.ommit_long_octet;if("01"==(c=u.substr(r,2)))return"00"==(p=o(u,r))?i+"BOOLEAN FALSE\n":i+"BOOLEAN TRUE\n";if("02"==c)return i+"INTEGER "+l(p=o(u,r),h)+"\n";if("03"==c){var p=o(u,r);return n.isASN1HEX(p.substr(2))?(x=i+"BITSTRING, encapsulates\n")+s(p.substr(2),t,0,i+"  "):i+"BITSTRING "+l(p,h)+"\n"}if("04"==c)return p=o(u,r),n.isASN1HEX(p)?(x=i+"OCTETSTRING, encapsulates\n")+s(p,t,0,i+"  "):i+"OCTETSTRING "+l(p,h)+"\n";if("05"==c)return i+"NULL\n";if("06"==c){var d=o(u,r),f=ue.asn1.ASN1Util.oidHexToInt(d),g=ue.asn1.x509.OID.oid2name(f),m=f.replace(/\./g," ");return""!=g?i+"ObjectIdentifier "+g+" ("+m+")\n":i+"ObjectIdentifier ("+m+")\n"}if("0a"==c)return i+"ENUMERATED "+parseInt(o(u,r))+"\n";if("0c"==c)return i+"UTF8String '"+xe(o(u,r))+"'\n";if("13"==c)return i+"PrintableString '"+xe(o(u,r))+"'\n";if("14"==c)return i+"TeletexString '"+xe(o(u,r))+"'\n";if("16"==c)return i+"IA5String '"+xe(o(u,r))+"'\n";if("17"==c)return i+"UTCTime "+xe(o(u,r))+"\n";if("18"==c)return i+"GeneralizedTime "+xe(o(u,r))+"\n";if("1a"==c)return i+"VisualString '"+xe(o(u,r))+"'\n";if("1e"==c)return i+"BMPString '"+De(o(u,r))+"'\n";if("30"==c){if("3000"==u.substr(r,4))return i+"SEQUENCE {}\n";x=i+"SEQUENCE\n";var v=t;if((2==(E=a(u,r)).length||3==E.length)&&"06"==u.substr(E[0],2)&&"04"==u.substr(E[E.length-1],2)){g=n.oidname(o(u,E[0]));var y=JSON.parse(JSON.stringify(t));y.x509ExtName=g,v=y}for(var _=0;_<E.length;_++)x+=s(u,v,E[_],i+"  ");return x}if("31"==c){x=i+"SET\n";var E=a(u,r);for(_=0;_<E.length;_++)x+=s(u,t,E[_],i+"  ");return x}if(0!=(128&(c=parseInt(c,16)))){var x,b=31&c;if(0!=(32&c)){for(x=i+"["+b+"]\n",E=a(u,r),_=0;_<E.length;_++)x+=s(u,t,E[_],i+"  ");return x}return p=o(u,r),he.isASN1HEX(p)?(x=i+"["+b+"]\n")+s(p,t,0,i+"  "):(("68747470"==p.substr(0,8)||"subjectAltName"===t.x509ExtName&&2==b)&&(p=xe(p)),i+"["+b+"] "+p+"\n")}return i+"UNKNOWN("+c+") "+o(u,r)+"\n"},he.isContextTag=function(e,t){var r,i;e=e.toLowerCase();try{r=parseInt(e,16)}catch(e){return-1}if(void 0===t)return 128==(192&r);try{return null!=t.match(/^\[[0-9]+\]$/)&&!((i=parseInt(t.substr(1,t.length-1),10))>31)&&128==(192&r)&&(31&r)==i}catch(e){return!1}},he.isASN1HEX=function(e){var t=he;if(e.length%2==1)return!1;var r=t.getVblen(e,0),i=e.substr(0,2),n=t.getL(e,0);return e.length-i.length-n.length==2*r},he.checkStrictDER=function(e,t,r,i,n){var o=he;if(void 0===r){if("string"!=typeof e)throw new Error("not hex string");if(e=e.toLowerCase(),!ue.lang.String.isHex(e))throw new Error("not hex string");r=e.length,n=(i=e.length/2)<128?1:Math.ceil(i.toString(16))+1}if(o.getL(e,t).length>2*n)throw new Error("L of TLV too long: idx="+t);var s=o.getVblen(e,t);if(s>i)throw new Error("value of L too long than hex: idx="+t);var a=o.getTLV(e,t),u=a.length-2-o.getL(e,t).length;if(u!==2*s)throw new Error("V string length and L's value not the same:"+u+"/"+2*s);if(0===t&&e.length!=a.length)throw new Error("total length and TLV length unmatch:"+e.length+"!="+a.length);var l=e.substr(t,2);if("02"===l){var c=o.getVidx(e,t);if("00"==e.substr(c,2)&&e.charCodeAt(c+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(l,16)){for(var h=o.getVblen(e,t),p=0,d=o.getChildIdx(e,t),f=0;f<d.length;f++)p+=o.getTLV(e,d[f]).length,o.checkStrictDER(e,d[f],r,i,n);if(2*h!=p)throw new Error("sum of children's TLV length and L unmatch: "+2*h+"!="+p)}},he.oidname=function(e){var t=ue.asn1;ue.lang.String.isHex(e)&&(e=t.ASN1Util.oidHexToInt(e));var r=t.x509.OID.oid2name(e);return""===r&&(r=e),r},void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.lang&&ue.lang||(ue.lang={}),ue.lang.String=function(){},"function"==typeof e?(t.utf8tob64u=le=function(t){return me(e.from(t,"utf8").toString("base64"))},t.b64utoutf8=ce=function(t){return e.from(ve(t),"base64").toString("utf8")}):(t.utf8tob64u=le=function(e){return ye(Re(Me(e)))},t.b64utoutf8=ce=function(e){return decodeURIComponent(Pe(_e(e)))}),ue.lang.String.isInteger=function(e){return!!e.match(/^[0-9]+$/)||!!e.match(/^-[0-9]+$/)},ue.lang.String.isHex=function(e){return Ue(e)},ue.lang.String.isBase64=function(e){return!(!(e=e.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||e.length%4!=0)},ue.lang.String.isBase64URL=function(e){return!e.match(/[+/=]/)&&(e=ve(e),ue.lang.String.isBase64(e))},ue.lang.String.isIntegerArray=function(e){return!!(e=e.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},ue.lang.String.isPrintable=function(e){return null!==e.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},ue.lang.String.isIA5=function(e){return null!==e.match(/^[\x20-\x21\x23-\x7f]*$/)},ue.lang.String.isMail=function(e){return null!==e.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};var je=function(e,t,r){return null==r&&(r="0"),e.length>=t?e:new Array(t-e.length+1).join(r)+e};function He(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t)}void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.crypto&&ue.crypto||(ue.crypto={}),ue.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:m.algo.MD5,sha1:m.algo.SHA1,sha224:m.algo.SHA224,sha256:m.algo.SHA256,sha384:m.algo.SHA384,sha512:m.algo.SHA512,ripemd160:m.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){if(void 0===this.DIGESTINFOHEAD[t])throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+e},this.getPaddedDigestInfoHex=function(e,t,r){var i=this.getDigestInfoHex(e,t),n=r/4;if(i.length+22>n)throw"key is too short for SigAlg: keylen="+r+","+t;for(var o="0001",s="00"+i,a="",u=n-o.length-s.length,l=0;l<u;l+=2)a+="ff";return o+a+s},this.hashString=function(e,t){return new ue.crypto.MessageDigest({alg:t}).digestString(e)},this.hashHex=function(e,t){return new ue.crypto.MessageDigest({alg:t}).digestHex(e)},this.sha1=function(e){return this.hashString(e,"sha1")},this.sha256=function(e){return this.hashString(e,"sha256")},this.sha256Hex=function(e){return this.hashHex(e,"sha256")},this.sha512=function(e){return this.hashString(e,"sha512")},this.sha512Hex=function(e){return this.hashHex(e,"sha512")},this.isKey=function(e){return e instanceof ie||e instanceof ue.crypto.DSA||e instanceof ue.crypto.ECDSA}},ue.crypto.Util.md5=function(e){return new ue.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(e)},ue.crypto.Util.ripemd160=function(e){return new ue.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(e)},ue.crypto.Util.SECURERANDOMGEN=new ee,ue.crypto.Util.getRandomHexOfNbytes=function(e){var t=new Array(e);return ue.crypto.Util.SECURERANDOMGEN.nextBytes(t),fe(t)},ue.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new b(ue.crypto.Util.getRandomHexOfNbytes(e),16)},ue.crypto.Util.getRandomHexOfNbits=function(e){var t=e%8,r=new Array((e-t)/8+1);return ue.crypto.Util.SECURERANDOMGEN.nextBytes(r),r[0]=(255<<t&255^255)&r[0],fe(r)},ue.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new b(ue.crypto.Util.getRandomHexOfNbits(e),16)},ue.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var t=e.bitLength();;){var r=ue.crypto.Util.getRandomBigIntegerOfNbits(t);if(-1!=e.compareTo(r))return r}},ue.crypto.Util.getRandomBigIntegerMinToMax=function(e,t){var r=e.compareTo(t);if(1==r)throw"biMin is greater than biMax";if(0==r)return e;var i=t.subtract(e);return ue.crypto.Util.getRandomBigIntegerZeroToMax(i).add(e)},ue.crypto.MessageDigest=function(e){this.setAlgAndProvider=function(e,t){if(null!==(e=ue.crypto.MessageDigest.getCanonicalAlgName(e))&&void 0===t&&(t=ue.crypto.Util.DEFAULTPROVIDER[e]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(e)&&"cryptojs"==t){try{this.md=ue.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[e].create()}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=m.enc.Hex.parse(e);this.md.update(t)},this.digest=function(){return this.md.finalize().toString(m.enc.Hex)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}if(-1!=":sha256:".indexOf(e)&&"sjcl"==t){try{this.md=new sjcl.hash.sha256}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=sjcl.codec.hex.toBits(e);this.md.update(t)},this.digest=function(){var e=this.md.finalize();return sjcl.codec.hex.fromBits(e)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==e&&void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=ue.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},ue.crypto.MessageDigest.getCanonicalAlgName=function(e){return"string"==typeof e&&(e=(e=e.toLowerCase()).replace(/-/,"")),e},ue.crypto.MessageDigest.getHashLength=function(e){var t=ue.crypto.MessageDigest,r=t.getCanonicalAlgName(e);if(void 0===t.HASHLENGTH[r])throw"not supported algorithm: "+e;return t.HASHLENGTH[r]},ue.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},ue.crypto.Mac=function(e){this.setAlgAndProvider=function(e,t){if(null==(e=e.toLowerCase())&&(e="hmacsha1"),"hmac"!=(e=e.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+e;void 0===t&&(t=ue.crypto.Util.DEFAULTPROVIDER[e]),this.algProv=e+"/"+t;var r=e.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(r)&&"cryptojs"==t){try{var i=ue.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[r];this.mac=m.algo.HMAC.create(i,this.pass)}catch(e){throw"setAlgAndProvider hash alg set fail hashAlg="+r+"/"+e}this.updateString=function(e){this.mac.update(e)},this.updateHex=function(e){var t=m.enc.Hex.parse(e);this.mac.update(t)},this.doFinal=function(){return this.mac.finalize().toString(m.enc.Hex)},this.doFinalString=function(e){return this.updateString(e),this.doFinal()},this.doFinalHex=function(e){return this.updateHex(e),this.doFinal()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(e){if("string"==typeof e){var t=e;return e.length%2!=1&&e.match(/^[0-9A-Fa-f]+$/)||(t=Se(e)),void(this.pass=m.enc.Hex.parse(t))}if("object"!=(void 0===e?"undefined":d(e)))throw"KJUR.crypto.Mac unsupported password type: "+e;if(t=null,void 0!==e.hex){if(e.hex.length%2!=0||!e.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+e.hex;t=e.hex}if(void 0!==e.utf8&&(t=Ee(e.utf8)),void 0!==e.rstr&&(t=Se(e.rstr)),void 0!==e.b64&&(t=E(e.b64)),void 0!==e.b64u&&(t=_e(e.b64u)),null==t)throw"KJUR.crypto.Mac unsupported password type: "+e;this.pass=m.enc.Hex.parse(t)},void 0!==e&&(void 0!==e.pass&&this.setPassword(e.pass),void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=ue.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},ue.crypto.Signature=function(e){var t=null;if(this._setAlgNames=function(){var e=this.algName.match(/^(.+)with(.+)$/);e&&(this.mdAlgName=e[1].toLowerCase(),this.pubkeyAlgName=e[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(e,t){for(var r="",i=t/4-e.length,n=0;n<i;n++)r+="0";return r+e},this.setAlgAndProvider=function(e,t){if(this._setAlgNames(),"cryptojs/jsrsa"!=t)throw new Error("provider not supported: "+t);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new ue.crypto.MessageDigest({alg:this.mdAlgName})}catch(e){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+e)}this.init=function(e,t){var r=null;try{r=void 0===t?Ge.getKey(e):Ge.getKey(e,t)}catch(e){throw"init failed:"+e}if(!0===r.isPrivate)this.prvKey=r,this.state="SIGN";else{if(!0!==r.isPublic)throw"init failed.:"+r;this.pubKey=r,this.state="VERIFY"}},this.updateString=function(e){this.md.updateString(e)},this.updateHex=function(e){this.md.updateHex(e)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==ue.crypto.ECDSA&&(this.prvKey=new ue.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof ie&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof ie&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof ue.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof ue.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(e){return this.updateString(e),this.sign()},this.signHex=function(e){return this.updateHex(e),this.sign()},this.verify=function(e){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==ue.crypto.ECDSA&&(this.pubKey=new ue.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof ie&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,e,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof ie&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==ue.crypto.ECDSA&&this.pubKey instanceof ue.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==ue.crypto.DSA&&this.pubKey instanceof ue.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(e,t){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(e){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(e){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(e){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(e){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=e,void 0!==e&&(void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov?this.provName=ue.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==e.psssaltlen&&(this.pssSaltLen=e.psssaltlen),void 0!==e.prvkeypem)){if(void 0!==e.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{t=Ge.getKey(e.prvkeypem),this.init(t)}catch(e){throw"fatal error to load pem private key: "+e}}},ue.crypto.Cipher=function(e){},ue.crypto.Cipher.encrypt=function(e,t,r){if(t instanceof ie&&t.isPublic){var i=ue.crypto.Cipher.getAlgByKeyAndName(t,r);if("RSA"===i)return t.encrypt(e);if("RSAOAEP"===i)return t.encryptOAEP(e,"sha1");var n=i.match(/^RSAOAEP(\d+)$/);if(null!==n)return t.encryptOAEP(e,"sha"+n[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.encrypt: unsupported key or algorithm"},ue.crypto.Cipher.decrypt=function(e,t,r){if(t instanceof ie&&t.isPrivate){var i=ue.crypto.Cipher.getAlgByKeyAndName(t,r);if("RSA"===i)return t.decrypt(e);if("RSAOAEP"===i)return t.decryptOAEP(e,"sha1");var n=i.match(/^RSAOAEP(\d+)$/);if(null!==n)return t.decryptOAEP(e,"sha"+n[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.decrypt: unsupported key or algorithm"},ue.crypto.Cipher.getAlgByKeyAndName=function(e,t){if(e instanceof ie){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(t))return t;if(null==t)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+t}throw"getAlgByKeyAndName: not supported algorithm name: "+t},ue.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.crypto&&ue.crypto||(ue.crypto={}),ue.crypto.ECDSA=function(e){var t=Error,r=b,i=oe,n=ue.crypto.ECDSA,o=ue.crypto.ECParameterDB,s=n.getName,a=he,u=a.getVbyListEx,l=a.isASN1HEX,c=new ee;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(e){return new r(e.bitLength(),c).mod(e.subtract(r.ONE)).add(r.ONE)},this.setNamedCurve=function(e){this.ecparams=o.getByName(e),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=e},this.setPrivateKeyHex=function(e){this.isPrivate=!0,this.prvKeyHex=e},this.setPublicKeyHex=function(e){this.isPublic=!0,this.pubKeyHex=e},this.getPublicKeyXYHex=function(){var e=this.pubKeyHex;if("04"!==e.substr(0,2))throw"this method supports uncompressed format(04) only";var t=this.ecparams.keylen/4;if(e.length!==2+2*t)throw"malformed public key hex length";var r={};return r.x=e.substr(2,t),r.y=e.substr(2+t),r},this.getShortNISTPCurveName=function(){var e=this.curveName;return"secp256r1"===e||"NIST P-256"===e||"P-256"===e||"prime256v1"===e?"P-256":"secp384r1"===e||"NIST P-384"===e||"P-384"===e?"P-384":null},this.generateKeyPairHex=function(){var e=this.ecparams.n,t=this.getBigRandom(e),r=this.ecparams.G.multiply(t),i=r.getX().toBigInteger(),n=r.getY().toBigInteger(),o=this.ecparams.keylen/4,s=("0000000000"+t.toString(16)).slice(-o),a="04"+("0000000000"+i.toString(16)).slice(-o)+("0000000000"+n.toString(16)).slice(-o);return this.setPrivateKeyHex(s),this.setPublicKeyHex(a),{ecprvhex:s,ecpubhex:a}},this.signWithMessageHash=function(e){return this.signHex(e,this.prvKeyHex)},this.signHex=function(e,t){var i=new r(t,16),o=this.ecparams.n,s=new r(e.substring(0,this.ecparams.keylen/4),16);do{var a=this.getBigRandom(o),u=this.ecparams.G.multiply(a).getX().toBigInteger().mod(o)}while(u.compareTo(r.ZERO)<=0);var l=a.modInverse(o).multiply(s.add(i.multiply(u))).mod(o);return n.biRSSigToASN1Sig(u,l)},this.sign=function(e,t){var i=t,n=this.ecparams.n,o=r.fromByteArrayUnsigned(e);do{var s=this.getBigRandom(n),a=this.ecparams.G.multiply(s).getX().toBigInteger().mod(n)}while(a.compareTo(b.ZERO)<=0);var u=s.modInverse(n).multiply(o.add(i.multiply(a))).mod(n);return this.serializeSig(a,u)},this.verifyWithMessageHash=function(e,t){return this.verifyHex(e,t,this.pubKeyHex)},this.verifyHex=function(e,t,o){try{var s,a,u=n.parseSigHex(t);s=u.r,a=u.s;var l=i.decodeFromHex(this.ecparams.curve,o),c=new r(e.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(c,s,a,l)}catch(e){return!1}},this.verify=function(e,t,n){var o,s,a;if(Bitcoin.Util.isArray(t)){var u=this.parseSig(t);o=u.r,s=u.s}else{if("object"!==(void 0===t?"undefined":d(t))||!t.r||!t.s)throw"Invalid value for signature";o=t.r,s=t.s}if(n instanceof oe)a=n;else{if(!Bitcoin.Util.isArray(n))throw"Invalid format for pubkey value, must be byte array or ECPointFp";a=i.decodeFrom(this.ecparams.curve,n)}var l=r.fromByteArrayUnsigned(e);return this.verifyRaw(l,o,s,a)},this.verifyRaw=function(e,t,i,n){var o=this.ecparams.n,s=this.ecparams.G;if(t.compareTo(r.ONE)<0||t.compareTo(o)>=0)return!1;if(i.compareTo(r.ONE)<0||i.compareTo(o)>=0)return!1;var a=i.modInverse(o),u=e.multiply(a).mod(o),l=t.multiply(a).mod(o);return s.multiply(u).add(n.multiply(l)).getX().toBigInteger().mod(o).equals(t)},this.serializeSig=function(e,t){var r=e.toByteArraySigned(),i=t.toByteArraySigned(),n=[];return n.push(2),n.push(r.length),(n=n.concat(r)).push(2),n.push(i.length),(n=n.concat(i)).unshift(n.length),n.unshift(48),n},this.parseSig=function(e){var t;if(48!=e[0])throw new Error("Signature not a valid DERSequence");if(2!=e[t=2])throw new Error("First element in signature must be a DERInteger");var i=e.slice(t+2,t+2+e[t+1]);if(2!=e[t+=2+e[t+1]])throw new Error("Second element in signature must be a DERInteger");var n=e.slice(t+2,t+2+e[t+1]);return t+=2+e[t+1],{r:r.fromByteArrayUnsigned(i),s:r.fromByteArrayUnsigned(n)}},this.parseSigCompact=function(e){if(65!==e.length)throw"Signature has the wrong length";var t=e[0]-27;if(t<0||t>7)throw"Invalid signature type";var i=this.ecparams.n;return{r:r.fromByteArrayUnsigned(e.slice(1,33)).mod(i),s:r.fromByteArrayUnsigned(e.slice(33,65)).mod(i),i:t}},this.readPKCS5PrvKeyHex=function(e){if(!1===l(e))throw new Error("not ASN.1 hex string");var t,r,i;try{t=u(e,0,["[0]",0],"06"),r=u(e,0,[1],"04");try{i=u(e,0,["[1]",0],"03")}catch(e){}}catch(e){throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=s(t),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(i),this.setPrivateKeyHex(r),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(e){if(!1===l(e))throw new t("not ASN.1 hex string");var r,i,n;try{u(e,0,[1,0],"06"),r=u(e,0,[1,1],"06"),i=u(e,0,[2,0,1],"04");try{n=u(e,0,[2,0,"[1]",0],"03")}catch(e){}}catch(e){throw new t("malformed PKCS#8 plain ECC private key")}if(this.curveName=s(r),void 0===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(n),this.setPrivateKeyHex(i),this.isPublic=!1},this.readPKCS8PubKeyHex=function(e){if(!1===l(e))throw new t("not ASN.1 hex string");var r,i;try{u(e,0,[0,0],"06"),r=u(e,0,[0,1],"06"),i=u(e,0,[1],"03")}catch(e){throw new t("malformed PKCS#8 ECC public key")}if(this.curveName=s(r),null===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(i)},this.readCertPubKeyHex=function(e,r){if(!1===l(e))throw new t("not ASN.1 hex string");var i,n;try{i=u(e,0,[0,5,0,1],"06"),n=u(e,0,[0,5,1],"03")}catch(e){throw new t("malformed X.509 certificate ECC public key")}if(this.curveName=s(i),null===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(n)},void 0!==e&&void 0!==e.curve&&(this.curveName=e.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==e&&(void 0!==e.prv&&this.setPrivateKeyHex(e.prv),void 0!==e.pub&&this.setPublicKeyHex(e.pub))},ue.crypto.ECDSA.parseSigHex=function(e){var t=ue.crypto.ECDSA.parseSigHexInHexRS(e);return{r:new b(t.r,16),s:new b(t.s,16)}},ue.crypto.ECDSA.parseSigHexInHexRS=function(e){var t=he,r=t.getChildIdx,i=t.getV;if(t.checkStrictDER(e,0),"30"!=e.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var n=r(e,0);if(2!=n.length)throw new Error("signature shall have two elements");var o=n[0],s=n[1];if("02"!=e.substr(o,2))throw new Error("1st item not ASN.1 integer");if("02"!=e.substr(s,2))throw new Error("2nd item not ASN.1 integer");return{r:i(e,o),s:i(e,s)}},ue.crypto.ECDSA.asn1SigToConcatSig=function(e){var t=ue.crypto.ECDSA.parseSigHexInHexRS(e),r=t.r,i=t.s;if("00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),"00"==i.substr(0,2)&&i.length%32==2&&(i=i.substr(2)),r.length%32==30&&(r="00"+r),i.length%32==30&&(i="00"+i),r.length%32!=0)throw"unknown ECDSA sig r length error";if(i.length%32!=0)throw"unknown ECDSA sig s length error";return r+i},ue.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var t=e.substr(0,e.length/2),r=e.substr(e.length/2);return ue.crypto.ECDSA.hexRSSigToASN1Sig(t,r)},ue.crypto.ECDSA.hexRSSigToASN1Sig=function(e,t){var r=new b(e,16),i=new b(t,16);return ue.crypto.ECDSA.biRSSigToASN1Sig(r,i)},ue.crypto.ECDSA.biRSSigToASN1Sig=function(e,t){var r=ue.asn1,i=new r.DERInteger({bigint:e}),n=new r.DERInteger({bigint:t});return new r.DERSequence({array:[i,n]}).getEncodedHex()},ue.crypto.ECDSA.getName=function(e){return"2b8104001f"===e?"secp192k1":"2a8648ce3d030107"===e?"secp256r1":"2b8104000a"===e?"secp256k1":"2b81040021"===e?"secp224r1":"2b81040022"===e?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e)?"secp256r1":-1!=="|secp256k1|".indexOf(e)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(e)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(e)?"secp384r1":null},void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.crypto&&ue.crypto||(ue.crypto={}),ue.crypto.ECParameterDB=new function(){var e={},t={};function r(e){return new b(e,16)}this.getByName=function(r){var i=r;if(void 0!==t[i]&&(i=t[r]),void 0!==e[i])return e[i];throw"unregistered EC curve name: "+i},this.regist=function(i,n,o,s,a,u,l,c,h,p,d,f){e[i]={};var g=r(o),m=r(s),v=r(a),y=r(u),_=r(l),E=new se(g,m,v),x=E.decodePointHex("04"+c+h);e[i].name=i,e[i].keylen=n,e[i].curve=E,e[i].G=x,e[i].n=y,e[i].h=_,e[i].oid=d,e[i].info=f;for(var b=0;b<p.length;b++)t[p[b]]=i}},ue.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),ue.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),ue.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),ue.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),ue.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),ue.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),ue.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),ue.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),ue.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),ue.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var Ge=function(){var e=function(e,r,i){return t(m.AES,e,r,i)},t=function(e,t,r,i){var n=m.enc.Hex.parse(t),o=m.enc.Hex.parse(r),s=m.enc.Hex.parse(i),a={};a.key=o,a.iv=s,a.ciphertext=n;var u=e.decrypt(a,o,{iv:s});return m.enc.Hex.stringify(u)},r=function(e,t,r){return i(m.AES,e,t,r)},i=function(e,t,r,i){var n=m.enc.Hex.parse(t),o=m.enc.Hex.parse(r),s=m.enc.Hex.parse(i),a=e.encrypt(n,o,{iv:s}),u=m.enc.Hex.parse(a.toString());return m.enc.Base64.stringify(u)},n={"AES-256-CBC":{proc:e,eproc:r,keylen:32,ivlen:16},"AES-192-CBC":{proc:e,eproc:r,keylen:24,ivlen:16},"AES-128-CBC":{proc:e,eproc:r,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(e,r,i){return t(m.TripleDES,e,r,i)},eproc:function(e,t,r){return i(m.TripleDES,e,t,r)},keylen:24,ivlen:8},"DES-CBC":{proc:function(e,r,i){return t(m.DES,e,r,i)},eproc:function(e,t,r){return i(m.DES,e,t,r)},keylen:8,ivlen:8}},o=function(e){var t={},r=e.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));r&&(t.cipher=r[1],t.ivsalt=r[2]);var i=e.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));i&&(t.type=i[1]);var n=-1,o=0;-1!=e.indexOf("\r\n\r\n")&&(n=e.indexOf("\r\n\r\n"),o=2),-1!=e.indexOf("\n\n")&&(n=e.indexOf("\n\n"),o=1);var s=e.indexOf("-----END");if(-1!=n&&-1!=s){var a=e.substring(n+2*o,s-o);a=a.replace(/\s+/g,""),t.data=a}return t},s=function(e,t,r){for(var i=r.substring(0,16),o=m.enc.Hex.parse(i),s=m.enc.Utf8.parse(t),a=n[e].keylen+n[e].ivlen,u="",l=null;;){var c=m.algo.MD5.create();if(null!=l&&c.update(l),c.update(s),c.update(o),l=c.finalize(),(u+=m.enc.Hex.stringify(l)).length>=2*a)break}var h={};return h.keyhex=u.substr(0,2*n[e].keylen),h.ivhex=u.substr(2*n[e].keylen,2*n[e].ivlen),h},a=function(e,t,r,i){var o=m.enc.Base64.parse(e),s=m.enc.Hex.stringify(o);return(0,n[t].proc)(s,r,i)};return{version:"1.0.0",parsePKCS5PEM:function(e){return o(e)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(e,t,r){return s(e,t,r)},decryptKeyB64:function(e,t,r,i){return a(e,t,r,i)},getDecryptedKeyHex:function(e,t){var r=o(e),i=(r.type,r.cipher),n=r.ivsalt,u=r.data,l=s(i,t,n).keyhex;return a(u,i,l,n)},getEncryptedPKCS5PEMFromPrvKeyHex:function(e,t,r,i,o){var a="";if(void 0!==i&&null!=i||(i="AES-256-CBC"),void 0===n[i])throw new Error("KEYUTIL unsupported algorithm: "+i);void 0!==o&&null!=o||(o=function(e){var t=m.lib.WordArray.random(e);return m.enc.Hex.stringify(t)}(n[i].ivlen).toUpperCase());var u=function(e,t,r,i){return(0,n[t].eproc)(e,r,i)}(t,i,s(i,r,o).keyhex,o);return a="-----BEGIN "+e+" PRIVATE KEY-----\r\n",a+="Proc-Type: 4,ENCRYPTED\r\n",a+="DEK-Info: "+i+","+o+"\r\n",a+="\r\n",(a+=u.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+e+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(e){var t=he,r=t.getChildIdx,i=t.getV,n={},o=r(e,0);if(2!=o.length)throw new Error("malformed format: SEQUENCE(0).items != 2: "+o.length);n.ciphertext=i(e,o[1]);var s=r(e,o[0]);if(2!=s.length)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+s.length);if("2a864886f70d01050d"!=i(e,s[0]))throw new Error("this only supports pkcs5PBES2");var a=r(e,s[1]);if(2!=s.length)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+a.length);var u=r(e,a[1]);if(2!=u.length)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+u.length);if("2a864886f70d0307"!=i(e,u[0]))throw"this only supports TripleDES";n.encryptionSchemeAlg="TripleDES",n.encryptionSchemeIV=i(e,u[1]);var l=r(e,a[0]);if(2!=l.length)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+l.length);if("2a864886f70d01050c"!=i(e,l[0]))throw new Error("this only supports pkcs5PBKDF2");var c=r(e,l[1]);if(c.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+c.length);n.pbkdf2Salt=i(e,c[0]);var h=i(e,c[1]);try{n.pbkdf2Iter=parseInt(h,16)}catch(e){throw new Error("malformed format pbkdf2Iter: "+h)}return n},getPBKDF2KeyHexFromParam:function(e,t){var r=m.enc.Hex.parse(e.pbkdf2Salt),i=e.pbkdf2Iter,n=m.PBKDF2(t,r,{keySize:6,iterations:i});return m.enc.Hex.stringify(n)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(e,t){var r=Le(e,"ENCRYPTED PRIVATE KEY"),i=this.parseHexOfEncryptedPKCS8(r),n=Ge.getPBKDF2KeyHexFromParam(i,t),o={};o.ciphertext=m.enc.Hex.parse(i.ciphertext);var s=m.enc.Hex.parse(n),a=m.enc.Hex.parse(i.encryptionSchemeIV),u=m.TripleDES.decrypt(o,s,{iv:a});return m.enc.Hex.stringify(u)},getKeyFromEncryptedPKCS8PEM:function(e,t){var r=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(e,t);return this.getKeyFromPlainPrivatePKCS8Hex(r)},parsePlainPrivatePKCS8Hex:function(e){var t=he,r=t.getChildIdx,i=t.getV,n={algparam:null};if("30"!=e.substr(0,2))throw new Error("malformed plain PKCS8 private key(code:001)");var o=r(e,0);if(o.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if("30"!=e.substr(o[1],2))throw new Error("malformed PKCS8 private key(code:003)");var s=r(e,o[1]);if(2!=s.length)throw new Error("malformed PKCS8 private key(code:004)");if("06"!=e.substr(s[0],2))throw new Error("malformed PKCS8 private key(code:005)");if(n.algoid=i(e,s[0]),"06"==e.substr(s[1],2)&&(n.algparam=i(e,s[1])),"04"!=e.substr(o[2],2))throw new Error("malformed PKCS8 private key(code:006)");return n.keyidx=t.getVidx(e,o[2]),n},getKeyFromPlainPrivatePKCS8PEM:function(e){var t=Le(e,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(t)},getKeyFromPlainPrivatePKCS8Hex:function(e){var t,r=this.parsePlainPrivatePKCS8Hex(e);if("2a864886f70d010101"==r.algoid)t=new ie;else if("2a8648ce380401"==r.algoid)t=new ue.crypto.DSA;else{if("2a8648ce3d0201"!=r.algoid)throw new Error("unsupported private key algorithm");t=new ue.crypto.ECDSA}return t.readPKCS8PrvKeyHex(e),t},_getKeyFromPublicPKCS8Hex:function(e){var t,r=he.getVbyList(e,0,[0,0],"06");if("2a864886f70d010101"===r)t=new ie;else if("2a8648ce380401"===r)t=new ue.crypto.DSA;else{if("2a8648ce3d0201"!==r)throw new Error("unsupported PKCS#8 public key hex");t=new ue.crypto.ECDSA}return t.readPKCS8PubKeyHex(e),t},parsePublicRawRSAKeyHex:function(e){var t=he,r=t.getChildIdx,i=t.getV,n={};if("30"!=e.substr(0,2))throw new Error("malformed RSA key(code:001)");var o=r(e,0);if(2!=o.length)throw new Error("malformed RSA key(code:002)");if("02"!=e.substr(o[0],2))throw new Error("malformed RSA key(code:003)");if(n.n=i(e,o[0]),"02"!=e.substr(o[1],2))throw new Error("malformed RSA key(code:004)");return n.e=i(e,o[1]),n},parsePublicPKCS8Hex:function(e){var t=he,r=t.getChildIdx,i=t.getV,n={algparam:null},o=r(e,0);if(2!=o.length)throw new Error("outer DERSequence shall have 2 elements: "+o.length);var s=o[0];if("30"!=e.substr(s,2))throw new Error("malformed PKCS8 public key(code:001)");var a=r(e,s);if(2!=a.length)throw new Error("malformed PKCS8 public key(code:002)");if("06"!=e.substr(a[0],2))throw new Error("malformed PKCS8 public key(code:003)");if(n.algoid=i(e,a[0]),"06"==e.substr(a[1],2)?n.algparam=i(e,a[1]):"30"==e.substr(a[1],2)&&(n.algparam={},n.algparam.p=t.getVbyList(e,a[1],[0],"02"),n.algparam.q=t.getVbyList(e,a[1],[1],"02"),n.algparam.g=t.getVbyList(e,a[1],[2],"02")),"03"!=e.substr(o[1],2))throw new Error("malformed PKCS8 public key(code:004)");return n.key=i(e,o[1]).substr(2),n}}}();function Ve(e,t){for(var r="",i=t/4-e.length,n=0;n<i;n++)r+="0";return r+e}function qe(e,t,r){for(var i="",n=0;i.length<t;)i+=be(r(Se(e+String.fromCharCode.apply(String,[(4278190080&n)>>24,(16711680&n)>>16,(65280&n)>>8,255&n])))),n+=1;return i}function We(e){for(var t in ue.crypto.Util.DIGESTINFOHEAD){var r=ue.crypto.Util.DIGESTINFOHEAD[t],i=r.length;if(e.substring(0,i)==r)return[t,e.substring(i)]}return[]}function Ke(e){var t,r=he,i=r.getChildIdx,n=r.getV,o=r.getTLV,s=r.getVbyList,a=r.getVbyListEx,u=r.getTLVbyList,l=r.getTLVbyListEx,c=r.getIdxbyList,h=r.getIdxbyListEx,p=r.getVidx,d=r.getInt,f=r.oidname,g=r.hextooidstr,m=Le;try{t=ue.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch(e){}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(null===this.hex||0!==this.version)return this.version;var e=u(this.hex,0,[0,0]);if("a0"==e.substr(0,2)){var t=u(e,0,[0]),r=d(t,0);if(r<0||2<r)throw new Error("malformed version field");return this.version=r+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return a(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var e=l(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(e)},this.getAlgorithmIdentifierName=function(e){for(var r in t)if(e===t[r])return r;return f(a(e,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return u(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return u(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var e=s(this.hex,0,[0,4+this.foffset,0]);return e=e.replace(/(..)/g,"%$1"),decodeURIComponent(e)},this.getNotAfter=function(){var e=s(this.hex,0,[0,4+this.foffset,1]);return e=e.replace(/(..)/g,"%$1"),decodeURIComponent(e)},this.getPublicKeyHex=function(){return r.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return c(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var e=this.getPublicKeyIdx();return c(this.hex,e,[1,0],"30")},this.getPublicKey=function(){return Ge.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var e=u(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(e)},this.getSignatureValueHex=function(){return s(this.hex,0,[2],"03",!0)},this.verifySignature=function(e){var t=this.getSignatureAlgorithmField(),r=this.getSignatureValueHex(),i=u(this.hex,0,[0],"30"),n=new ue.crypto.Signature({alg:t});return n.init(e),n.updateHex(i),n.verify(r)},this.parseExt=function(e){var t,o,a;if(void 0===e){if(a=this.hex,3!==this.version)return-1;t=c(a,0,[0,7,0],"30"),o=i(a,t)}else{a=Le(e);var u=c(a,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=n(a,u))return void(this.aExtInfo=new Array);t=c(a,0,[0,3,0,1,0],"30"),o=i(a,t),this.hex=a}this.aExtInfo=new Array;for(var l=0;l<o.length;l++){var h={critical:!1},d=0;3===i(a,o[l]).length&&(h.critical=!0,d=1),h.oid=r.hextooidstr(s(a,o[l],[0],"06"));var f=c(a,o[l],[1+d]);h.vidx=p(a,f),this.aExtInfo.push(h)}},this.getExtInfo=function(e){var t=this.aExtInfo,r=e;if(e.match(/^[0-9.]+$/)||(r=ue.asn1.x509.OID.name2oid(e)),""!==r)for(var i=0;i<t.length;i++)if(t[i].oid===r)return t[i]},this.getExtBasicConstraints=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("basicConstraints");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var i={extname:"basicConstraints"};if(t&&(i.critical=!0),"3000"===e)return i;if("30030101ff"===e)return i.cA=!0,i;if("30060101ff02"===e.substr(0,12)){var s=n(e,10),a=parseInt(s,16);return i.cA=!0,i.pathLen=a,i}throw new Error("hExtV parse error: "+e)},this.getExtKeyUsage=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("keyUsage");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var i={extname:"keyUsage"};return t&&(i.critical=!0),i.names=this.getExtKeyUsageString(e).split(","),i},this.getExtKeyUsageBin=function(e){if(void 0===e){var t=this.getExtInfo("keyUsage");if(void 0===t)return"";e=o(this.hex,t.vidx)}if(8!=e.length&&10!=e.length)throw new Error("malformed key usage value: "+e);var r="000000000000000"+parseInt(e.substr(6),16).toString(2);return 8==e.length&&(r=r.slice(-8)),10==e.length&&(r=r.slice(-16)),""==(r=r.replace(/0+$/,""))&&(r="0"),r},this.getExtKeyUsageString=function(e){for(var t=this.getExtKeyUsageBin(e),r=new Array,i=0;i<t.length;i++)"1"==t.substr(i,1)&&r.push(Ke.KEYUSAGE_NAME[i]);return r.join(",")},this.getExtSubjectKeyIdentifier=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("subjectKeyIdentifier");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var i={extname:"subjectKeyIdentifier"};t&&(i.critical=!0);var s=n(e,0);return i.kid={hex:s},i},this.getExtAuthorityKeyIdentifier=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("authorityKeyIdentifier");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var s={extname:"authorityKeyIdentifier"};t&&(s.critical=!0);for(var a=i(e,0),u=0;u<a.length;u++){var l=e.substr(a[u],2);if("80"===l&&(s.kid={hex:n(e,a[u])}),"a1"===l){var c=o(e,a[u]),h=this.getGeneralNames(c);s.issuer=h[0].dn}"82"===l&&(s.sn={hex:n(e,a[u])})}return s},this.getExtExtKeyUsage=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("extKeyUsage");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var s={extname:"extKeyUsage",array:[]};t&&(s.critical=!0);for(var a=i(e,0),u=0;u<a.length;u++)s.array.push(f(n(e,a[u])));return s},this.getExtExtKeyUsageName=function(){var e=this.getExtInfo("extKeyUsage");if(void 0===e)return e;var t=new Array,r=o(this.hex,e.vidx);if(""===r)return t;for(var s=i(r,0),a=0;a<s.length;a++)t.push(f(n(r,s[a])));return t},this.getExtSubjectAltName=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("subjectAltName");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var i={extname:"subjectAltName",array:[]};return t&&(i.critical=!0),i.array=this.getGeneralNames(e),i},this.getExtIssuerAltName=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("issuerAltName");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var i={extname:"issuerAltName",array:[]};return t&&(i.critical=!0),i.array=this.getGeneralNames(e),i},this.getGeneralNames=function(e){for(var t=i(e,0),r=[],n=0;n<t.length;n++){var s=this.getGeneralName(o(e,t[n]));void 0!==s&&r.push(s)}return r},this.getGeneralName=function(e){var t=e.substr(0,2),r=n(e,0),i=be(r);return"81"==t?{rfc822:i}:"82"==t?{dns:i}:"86"==t?{uri:i}:"87"==t?{ip:Fe(r)}:"a4"==t?{dn:this.getX500Name(r)}:void 0},this.getExtSubjectAltName2=function(){var e,t,r,s=this.getExtInfo("subjectAltName");if(void 0===s)return s;for(var a=new Array,u=o(this.hex,s.vidx),l=i(u,0),c=0;c<l.length;c++)r=u.substr(l[c],2),e=n(u,l[c]),"81"===r&&(t=xe(e),a.push(["MAIL",t])),"82"===r&&(t=xe(e),a.push(["DNS",t])),"84"===r&&(t=Ke.hex2dn(e,0),a.push(["DN",t])),"86"===r&&(t=xe(e),a.push(["URI",t])),"87"===r&&(t=Fe(e),a.push(["IP",t]));return a},this.getExtCRLDistributionPoints=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("cRLDistributionPoints");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var n={extname:"cRLDistributionPoints",array:[]};t&&(n.critical=!0);for(var s=i(e,0),a=0;a<s.length;a++){var u=o(e,s[a]);n.array.push(this.getDistributionPoint(u))}return n},this.getDistributionPoint=function(e){for(var t={},r=i(e,0),n=0;n<r.length;n++){var s=e.substr(r[n],2),a=o(e,r[n]);"a0"==s&&(t.dpname=this.getDistributionPointName(a))}return t},this.getDistributionPointName=function(e){for(var t={},r=i(e,0),n=0;n<r.length;n++){var s=e.substr(r[n],2),a=o(e,r[n]);"a0"==s&&(t.full=this.getGeneralNames(a))}return t},this.getExtCRLDistributionPointsURI=function(){var e=this.getExtInfo("cRLDistributionPoints");if(void 0===e)return e;for(var t=new Array,r=i(this.hex,e.vidx),n=0;n<r.length;n++)try{var o=xe(s(this.hex,r[n],[0,0,0],"86"));t.push(o)}catch(e){}return t},this.getExtAIAInfo=function(){var e=this.getExtInfo("authorityInfoAccess");if(void 0===e)return e;for(var t={ocsp:[],caissuer:[]},r=i(this.hex,e.vidx),n=0;n<r.length;n++){var o=s(this.hex,r[n],[0],"06"),a=s(this.hex,r[n],[1],"86");"2b06010505073001"===o&&t.ocsp.push(xe(a)),"2b06010505073002"===o&&t.caissuer.push(xe(a))}return t},this.getExtAuthorityInfoAccess=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("authorityInfoAccess");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var n={extname:"authorityInfoAccess",array:[]};t&&(n.critical=!0);for(var u=i(e,0),l=0;l<u.length;l++){var c=a(e,u[l],[0],"06"),h=xe(s(e,u[l],[1],"86"));if("2b06010505073001"==c)n.array.push({ocsp:h});else{if("2b06010505073002"!=c)throw new Error("unknown method: "+c);n.array.push({caissuer:h})}}return n},this.getExtCertificatePolicies=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("certificatePolicies");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var n={extname:"certificatePolicies",array:[]};t&&(n.critical=!0);for(var s=i(e,0),a=0;a<s.length;a++){var u=o(e,s[a]),l=this.getPolicyInformation(u);n.array.push(l)}return n},this.getPolicyInformation=function(e){var t={},r=s(e,0,[0],"06");t.policyoid=f(r);var n=h(e,0,[1],"30");if(-1!=n){t.array=[];for(var a=i(e,n),u=0;u<a.length;u++){var l=o(e,a[u]),c=this.getPolicyQualifierInfo(l);t.array.push(c)}}return t},this.getPolicyQualifierInfo=function(e){var t={},r=s(e,0,[0],"06");if("2b06010505070201"===r){var i=a(e,0,[1],"16");t.cps=be(i)}else if("2b06010505070202"===r){var n=u(e,0,[1],"30");t.unotice=this.getUserNotice(n)}return t},this.getUserNotice=function(e){for(var t={},r=i(e,0),n=0;n<r.length;n++){var s=o(e,r[n]);"30"!=s.substr(0,2)&&(t.exptext=this.getDisplayText(s))}return t},this.getDisplayText=function(e){var t={};return t.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[e.substr(0,2)],t.str=be(n(e,0)),t},this.getExtCRLNumber=function(e,t){var r={extname:"cRLNumber"};if(t&&(r.critical=!0),"02"==e.substr(0,2))return r.num={hex:n(e,0)},r;throw new Error("hExtV parse error: "+e)},this.getExtCRLReason=function(e,t){var r={extname:"cRLReason"};if(t&&(r.critical=!0),"0a"==e.substr(0,2))return r.code=parseInt(n(e,0),16),r;throw new Error("hExtV parse error: "+e)},this.getExtOcspNonce=function(e,t){var r={extname:"ocspNonce"};t&&(r.critical=!0);var i=n(e,0);return r.hex=i,r},this.getExtOcspNoCheck=function(e,t){var r={extname:"ocspNoCheck"};return t&&(r.critical=!0),r},this.getExtAdobeTimeStamp=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("adobeTimeStamp");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var n={extname:"adobeTimeStamp"};t&&(n.critical=!0);var s=i(e,0);if(s.length>1){var a=o(e,s[1]),u=this.getGeneralName(a);null!=u.uri&&(n.uri=u.uri)}if(s.length>2){var l=o(e,s[2]);"0101ff"==l&&(n.reqauth=!0),"010100"==l&&(n.reqauth=!1)}return n},this.getX500NameRule=function(e){for(var t=null,r=[],i=0;i<e.length;i++)for(var n=e[i],o=0;o<n.length;o++)r.push(n[o]);for(i=0;i<r.length;i++){var s=r[i],a=s.ds,u=s.value,l=s.type;if("prn"!=a&&"utf8"!=a&&"ia5"!=a)return"mixed";if("ia5"==a){if("CN"!=l)return"mixed";if(ue.lang.String.isMail(u))continue;return"mixed"}if("C"==l){if("prn"==a)continue;return"mixed"}if(null==t)t=a;else if(t!==a)return"mixed"}return null==t?"prn":t},this.getX500Name=function(e){var t=this.getX500NameArray(e);return{array:t,str:this.dnarraytostr(t)}},this.getX500NameArray=function(e){for(var t=[],r=i(e,0),n=0;n<r.length;n++)t.push(this.getRDN(o(e,r[n])));return t},this.getRDN=function(e){for(var t=[],r=i(e,0),n=0;n<r.length;n++)t.push(this.getAttrTypeAndValue(o(e,r[n])));return t},this.getAttrTypeAndValue=function(e){var t={type:null,value:null,ds:null},r=i(e,0),n=s(e,r[0],[],"06"),o=s(e,r[1],[]),a=ue.asn1.ASN1Util.oidHexToInt(n);return t.type=ue.asn1.x509.OID.oid2atype(a),t.ds=this.HEX2STAG[e.substr(r[1],2)],"bmp"!=t.ds?t.value=xe(o):t.value=De(o),t},this.readCertPEM=function(e){this.readCertHex(m(e))},this.readCertHex=function(e){this.hex=e,this.getVersion();try{c(this.hex,0,[0,7],"a3"),this.parseExt()}catch(e){}},this.getParam=function(){var e={};return e.version=this.getVersion(),e.serial={hex:this.getSerialNumberHex()},e.sigalg=this.getSignatureAlgorithmField(),e.issuer=this.getIssuer(),e.notbefore=this.getNotBefore(),e.notafter=this.getNotAfter(),e.subject=this.getSubject(),e.sbjpubkey=Ie(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(e.ext=this.getExtParamArray()),e.sighex=this.getSignatureValueHex(),e},this.getExtParamArray=function(e){null==e&&-1!=h(this.hex,0,[0,"[3]"])&&(e=l(this.hex,0,[0,"[3]",0],"30"));for(var t=[],r=i(e,0),n=0;n<r.length;n++){var s=o(e,r[n]),a=this.getExtParam(s);null!=a&&t.push(a)}return t},this.getExtParam=function(e){var t=i(e,0).length;if(2!=t&&3!=t)throw new Error("wrong number elements in Extension: "+t+" "+e);var r=g(s(e,0,[0],"06")),n=!1;3==t&&"0101ff"==u(e,0,[1])&&(n=!0);var o=u(e,0,[t-1,0]),a=void 0;if("2.5.29.14"==r?a=this.getExtSubjectKeyIdentifier(o,n):"2.5.29.15"==r?a=this.getExtKeyUsage(o,n):"2.5.29.17"==r?a=this.getExtSubjectAltName(o,n):"2.5.29.18"==r?a=this.getExtIssuerAltName(o,n):"2.5.29.19"==r?a=this.getExtBasicConstraints(o,n):"2.5.29.31"==r?a=this.getExtCRLDistributionPoints(o,n):"2.5.29.32"==r?a=this.getExtCertificatePolicies(o,n):"2.5.29.35"==r?a=this.getExtAuthorityKeyIdentifier(o,n):"2.5.29.37"==r?a=this.getExtExtKeyUsage(o,n):"1.3.6.1.5.5.7.1.1"==r?a=this.getExtAuthorityInfoAccess(o,n):"2.5.29.20"==r?a=this.getExtCRLNumber(o,n):"2.5.29.21"==r?a=this.getExtCRLReason(o,n):"1.3.6.1.5.5.7.48.1.2"==r?a=this.getExtOcspNonce(o,n):"1.3.6.1.5.5.7.48.1.5"==r?a=this.getExtOcspNoCheck(o,n):"1.2.840.113583.1.1.9.1"==r&&(a=this.getExtAdobeTimeStamp(o,n)),null!=a)return a;var l={extname:r,extn:o};return n&&(l.critical=!0),l},this.findExt=function(e,t){for(var r=0;r<e.length;r++)if(e[r].extname==t)return e[r];return null},this.updateExtCDPFullURI=function(e,t){var r=this.findExt(e,"cRLDistributionPoints");if(null!=r&&null!=r.array)for(var i=r.array,n=0;n<i.length;n++)if(null!=i[n].dpname&&null!=i[n].dpname.full)for(var o=i[n].dpname.full,s=0;s<o.length;s++){var a=o[n];null!=a.uri&&(a.uri=t)}},this.updateExtAIAOCSP=function(e,t){var r=this.findExt(e,"authorityInfoAccess");if(null!=r&&null!=r.array)for(var i=r.array,n=0;n<i.length;n++)null!=i[n].ocsp&&(i[n].ocsp=t)},this.updateExtAIACAIssuer=function(e,t){var r=this.findExt(e,"authorityInfoAccess");if(null!=r&&null!=r.array)for(var i=r.array,n=0;n<i.length;n++)null!=i[n].caissuer&&(i[n].caissuer=t)},this.dnarraytostr=function(e){return"/"+e.map((function(e){return function(e){return e.map((function(e){return function(e){return e.type+"="+e.value}(e).replace(/\+/,"\\+")})).join("+")}(e).replace(/\//,"\\/")})).join("/")},this.getInfo=function(){var e,t,r,i=function(e){return JSON.stringify(e.array).replace(/[\[\]\{\}\"]/g,"")},n=function(e){for(var t="",r=e.array,i=0;i<r.length;i++){var n=r[i];if(t+="    policy oid: "+n.policyoid+"\n",void 0!==n.array)for(var o=0;o<n.array.length;o++){var s=n.array[o];void 0!==s.cps&&(t+="    cps: "+s.cps+"\n")}}return t},o=function(e){for(var t="",r=e.array,i=0;i<r.length;i++){var n=r[i];try{void 0!==n.dpname.full[0].uri&&(t+="    "+n.dpname.full[0].uri+"\n")}catch(e){}try{void 0!==n.dname.full[0].dn.hex&&(t+="    "+Ke.hex2dn(n.dpname.full[0].dn.hex)+"\n")}catch(e){}}return t},s=function(e){for(var t="",r=e.array,i=0;i<r.length;i++){var n=r[i];void 0!==n.caissuer&&(t+="    caissuer: "+n.caissuer+"\n"),void 0!==n.ocsp&&(t+="    ocsp: "+n.ocsp+"\n")}return t};if(e="Basic Fields\n",e+="  serial number: "+this.getSerialNumberHex()+"\n",e+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",e+="  issuer: "+this.getIssuerString()+"\n",e+="  notBefore: "+this.getNotBefore()+"\n",e+="  notAfter: "+this.getNotAfter()+"\n",e+="  subject: "+this.getSubjectString()+"\n",e+="  subject public key info: \n",e+="    key algorithm: "+(t=this.getPublicKey()).type+"\n","RSA"===t.type&&(e+="    n="+Be(t.n.toString(16)).substr(0,16)+"...\n",e+="    e="+Be(t.e.toString(16))+"\n"),null!=(r=this.aExtInfo)){e+="X509v3 Extensions:\n";for(var a=0;a<r.length;a++){var u=r[a],l=ue.asn1.x509.OID.oid2name(u.oid);""===l&&(l=u.oid);var c="";if(!0===u.critical&&(c="CRITICAL"),e+="  "+l+" "+c+":\n","basicConstraints"===l){var h=this.getExtBasicConstraints();void 0===h.cA?e+="    {}\n":(e+="    cA=true",void 0!==h.pathLen&&(e+=", pathLen="+h.pathLen),e+="\n")}else if("keyUsage"===l)e+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===l)e+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"===l){var p=this.getExtAuthorityKeyIdentifier();void 0!==p.kid&&(e+="    kid="+p.kid.hex+"\n")}else"extKeyUsage"===l?e+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n":"subjectAltName"===l?e+="    "+i(this.getExtSubjectAltName())+"\n":"cRLDistributionPoints"===l?e+=o(this.getExtCRLDistributionPoints()):"authorityInfoAccess"===l?e+=s(this.getExtAuthorityInfoAccess()):"certificatePolicies"===l&&(e+=n(this.getExtCertificatePolicies()))}}return(e+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof e&&(-1!=e.indexOf("-----BEGIN")?this.readCertPEM(e):ue.lang.String.isHex(e)&&this.readCertHex(e))}Ge.getKey=function(e,t,r){var i,n=(v=he).getChildIdx,o=(v.getV,v.getVbyList),s=ue.crypto,a=s.ECDSA,u=s.DSA,l=ie,c=Le,h=Ge;if(void 0!==l&&e instanceof l)return e;if(void 0!==a&&e instanceof a)return e;if(void 0!==u&&e instanceof u)return e;if(void 0!==e.curve&&void 0!==e.xy&&void 0===e.d)return new a({pub:e.xy,curve:e.curve});if(void 0!==e.curve&&void 0!==e.d)return new a({prv:e.d,curve:e.curve});if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(C=new l).setPublic(e.n,e.e),C;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.co&&void 0===e.qi)return(C=new l).setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),C;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0===e.p)return(C=new l).setPrivate(e.n,e.e,e.d),C;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0===e.x)return(C=new u).setPublic(e.p,e.q,e.g,e.y),C;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0!==e.x)return(C=new u).setPrivate(e.p,e.q,e.g,e.y,e.x),C;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(C=new l).setPublic(_e(e.n),_e(e.e)),C;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.qi)return(C=new l).setPrivateEx(_e(e.n),_e(e.e),_e(e.d),_e(e.p),_e(e.q),_e(e.dp),_e(e.dq),_e(e.qi)),C;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d)return(C=new l).setPrivate(_e(e.n),_e(e.e),_e(e.d)),C;if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0===e.d){var p=(L=new a({curve:e.crv})).ecparams.keylen/4,d="04"+("0000000000"+_e(e.x)).slice(-p)+("0000000000"+_e(e.y)).slice(-p);return L.setPublicKeyHex(d),L}if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0!==e.d){p=(L=new a({curve:e.crv})).ecparams.keylen/4,d="04"+("0000000000"+_e(e.x)).slice(-p)+("0000000000"+_e(e.y)).slice(-p);var f=("0000000000"+_e(e.d)).slice(-p);return L.setPublicKeyHex(d),L.setPrivateKeyHex(f),L}if("pkcs5prv"===r){var g,m=e,v=he;if(9===(g=n(m,0)).length)(C=new l).readPKCS5PrvKeyHex(m);else if(6===g.length)(C=new u).readPKCS5PrvKeyHex(m);else{if(!(g.length>2&&"04"===m.substr(g[1],2)))throw new Error("unsupported PKCS#1/5 hexadecimal key");(C=new a).readPKCS5PrvKeyHex(m)}return C}if("pkcs8prv"===r)return h.getKeyFromPlainPrivatePKCS8Hex(e);if("pkcs8pub"===r)return h._getKeyFromPublicPKCS8Hex(e);if("x509pub"===r)return Ke.getPublicKeyFromCertHex(e);if(-1!=e.indexOf("-END CERTIFICATE-",0)||-1!=e.indexOf("-END X509 CERTIFICATE-",0)||-1!=e.indexOf("-END TRUSTED CERTIFICATE-",0))return Ke.getPublicKeyFromCertPEM(e);if(-1!=e.indexOf("-END PUBLIC KEY-")){var y=Le(e,"PUBLIC KEY");return h._getKeyFromPublicPKCS8Hex(y)}if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var _=c(e,"RSA PRIVATE KEY");return h.getKey(_,null,"pkcs5prv")}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var E=o(i=c(e,"DSA PRIVATE KEY"),0,[1],"02"),x=o(i,0,[2],"02"),S=o(i,0,[3],"02"),w=o(i,0,[4],"02"),T=o(i,0,[5],"02");return(C=new u).setPrivate(new b(E,16),new b(x,16),new b(S,16),new b(w,16),new b(T,16)),C}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED"))return _=c(e,"EC PRIVATE KEY"),h.getKey(_,null,"pkcs5prv");if(-1!=e.indexOf("-END PRIVATE KEY-"))return h.getKeyFromPlainPrivatePKCS8PEM(e);if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var A=h.getDecryptedKeyHex(e,t),I=new ie;return I.readPKCS5PrvKeyHex(A),I}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var L,C=o(i=h.getDecryptedKeyHex(e,t),0,[1],"04"),N=o(i,0,[2,0],"06"),R=o(i,0,[3,0],"03").substr(2);if(void 0===ue.crypto.OID.oidhex2name[N])throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+N);return(L=new a({curve:ue.crypto.OID.oidhex2name[N]})).setPublicKeyHex(R),L.setPrivateKeyHex(C),L.isPublic=!1,L}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED"))return E=o(i=h.getDecryptedKeyHex(e,t),0,[1],"02"),x=o(i,0,[2],"02"),S=o(i,0,[3],"02"),w=o(i,0,[4],"02"),T=o(i,0,[5],"02"),(C=new u).setPrivate(new b(E,16),new b(x,16),new b(S,16),new b(w,16),new b(T,16)),C;if(-1!=e.indexOf("-END ENCRYPTED PRIVATE KEY-"))return h.getKeyFromEncryptedPKCS8PEM(e,t);throw new Error("not supported argument")},Ge.generateKeypair=function(e,t){if("RSA"==e){var r=t;(s=new ie).generate(r,"10001"),s.isPrivate=!0,s.isPublic=!0;var i=new ie,n=s.n.toString(16),o=s.e.toString(16);return i.setPublic(n,o),i.isPrivate=!1,i.isPublic=!0,(a={}).prvKeyObj=s,a.pubKeyObj=i,a}if("EC"==e){var s,a,u=t,l=new ue.crypto.ECDSA({curve:u}).generateKeyPairHex();return(s=new ue.crypto.ECDSA({curve:u})).setPublicKeyHex(l.ecpubhex),s.setPrivateKeyHex(l.ecprvhex),s.isPrivate=!0,s.isPublic=!1,(i=new ue.crypto.ECDSA({curve:u})).setPublicKeyHex(l.ecpubhex),i.isPrivate=!1,i.isPublic=!0,(a={}).prvKeyObj=s,a.pubKeyObj=i,a}throw new Error("unknown algorithm: "+e)},Ge.getPEM=function(e,t,r,i,n,o){var s=ue,a=s.asn1,u=a.DERObjectIdentifier,l=a.DERInteger,c=a.ASN1Util.newObject,h=a.x509.SubjectPublicKeyInfo,p=s.crypto,d=p.DSA,f=p.ECDSA,g=ie;function v(e){return c({seq:[{int:0},{int:{bigint:e.n}},{int:e.e},{int:{bigint:e.d}},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.dmp1}},{int:{bigint:e.dmq1}},{int:{bigint:e.coeff}}]})}function y(e){return c({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a0",!0,{oid:{name:e.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]})}function _(e){return c({seq:[{int:0},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}},{int:{bigint:e.y}},{int:{bigint:e.x}}]})}if((void 0!==g&&e instanceof g||void 0!==d&&e instanceof d||void 0!==f&&e instanceof f)&&1==e.isPublic&&(void 0===t||"PKCS8PUB"==t))return Ie(S=new h(e).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==t&&void 0!==g&&e instanceof g&&(void 0===r||null==r)&&1==e.isPrivate)return Ie(S=v(e).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==t&&void 0!==f&&e instanceof f&&(void 0===r||null==r)&&1==e.isPrivate){var E=new u({name:e.curveName}).getEncodedHex(),x=y(e).getEncodedHex(),b="";return(b+=Ie(E,"EC PARAMETERS"))+Ie(x,"EC PRIVATE KEY")}if("PKCS1PRV"==t&&void 0!==d&&e instanceof d&&(void 0===r||null==r)&&1==e.isPrivate)return Ie(S=_(e).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==t&&void 0!==g&&e instanceof g&&void 0!==r&&null!=r&&1==e.isPrivate){var S=v(e).getEncodedHex();return void 0===i&&(i="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",S,r,i,o)}if("PKCS5PRV"==t&&void 0!==f&&e instanceof f&&void 0!==r&&null!=r&&1==e.isPrivate)return S=y(e).getEncodedHex(),void 0===i&&(i="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",S,r,i,o);if("PKCS5PRV"==t&&void 0!==d&&e instanceof d&&void 0!==r&&null!=r&&1==e.isPrivate)return S=_(e).getEncodedHex(),void 0===i&&(i="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",S,r,i,o);var w=function(e,t){var r=T(e,t);return new c({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:r.pbkdf2Salt}},{int:r.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:r.encryptionSchemeIV}}]}]}]},{octstr:{hex:r.ciphertext}}]}).getEncodedHex()},T=function(e,t){var r=m.lib.WordArray.random(8),i=m.lib.WordArray.random(8),n=m.PBKDF2(t,r,{keySize:6,iterations:100}),o=m.enc.Hex.parse(e),s=m.TripleDES.encrypt(o,n,{iv:i})+"",a={};return a.ciphertext=s,a.pbkdf2Salt=m.enc.Hex.stringify(r),a.pbkdf2Iter=100,a.encryptionSchemeAlg="DES-EDE3-CBC",a.encryptionSchemeIV=m.enc.Hex.stringify(i),a};if("PKCS8PRV"==t&&null!=g&&e instanceof g&&1==e.isPrivate){var A=v(e).getEncodedHex();return S=c({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:A}}]}).getEncodedHex(),void 0===r||null==r?Ie(S,"PRIVATE KEY"):Ie(x=w(S,r),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==t&&void 0!==f&&e instanceof f&&1==e.isPrivate)return A=new c({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]}).getEncodedHex(),S=c({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:A}}]}).getEncodedHex(),void 0===r||null==r?Ie(S,"PRIVATE KEY"):Ie(x=w(S,r),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==t&&void 0!==d&&e instanceof d&&1==e.isPrivate)return A=new l({bigint:e.x}).getEncodedHex(),S=c({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:A}}]}).getEncodedHex(),void 0===r||null==r?Ie(S,"PRIVATE KEY"):Ie(x=w(S,r),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Ge.getKeyFromCSRPEM=function(e){var t=Le(e,"CERTIFICATE REQUEST");return Ge.getKeyFromCSRHex(t)},Ge.getKeyFromCSRHex=function(e){var t=Ge.parseCSRHex(e);return Ge.getKey(t.p8pubkeyhex,null,"pkcs8pub")},Ge.parseCSRHex=function(e){var t=he,r=t.getChildIdx,i=t.getTLV,n={},o=e;if("30"!=o.substr(0,2))throw new Error("malformed CSR(code:001)");var s=r(o,0);if(s.length<1)throw new Error("malformed CSR(code:002)");if("30"!=o.substr(s[0],2))throw new Error("malformed CSR(code:003)");var a=r(o,s[0]);if(a.length<3)throw new Error("malformed CSR(code:004)");return n.p8pubkeyhex=i(o,a[2]),n},Ge.getKeyID=function(e){var t=Ge,r=he;"string"==typeof e&&-1!=e.indexOf("BEGIN ")&&(e=t.getKey(e));var i=Le(t.getPEM(e)),n=r.getIdxbyList(i,0,[1]),o=r.getV(i,n).substring(2);return ue.crypto.Util.hashHex(o,"sha1")},Ge.getJWKFromKey=function(e){var t={};if(e instanceof ie&&e.isPrivate)return t.kty="RSA",t.n=ye(e.n.toString(16)),t.e=ye(e.e.toString(16)),t.d=ye(e.d.toString(16)),t.p=ye(e.p.toString(16)),t.q=ye(e.q.toString(16)),t.dp=ye(e.dmp1.toString(16)),t.dq=ye(e.dmq1.toString(16)),t.qi=ye(e.coeff.toString(16)),t;if(e instanceof ie&&e.isPublic)return t.kty="RSA",t.n=ye(e.n.toString(16)),t.e=ye(e.e.toString(16)),t;if(e instanceof ue.crypto.ECDSA&&e.isPrivate){if("P-256"!==(i=e.getShortNISTPCurveName())&&"P-384"!==i)throw new Error("unsupported curve name for JWT: "+i);var r=e.getPublicKeyXYHex();return t.kty="EC",t.crv=i,t.x=ye(r.x),t.y=ye(r.y),t.d=ye(e.prvKeyHex),t}if(e instanceof ue.crypto.ECDSA&&e.isPublic){var i;if("P-256"!==(i=e.getShortNISTPCurveName())&&"P-384"!==i)throw new Error("unsupported curve name for JWT: "+i);return r=e.getPublicKeyXYHex(),t.kty="EC",t.crv=i,t.x=ye(r.x),t.y=ye(r.y),t}throw new Error("not supported key object")},ie.getPosArrayOfChildrenFromHex=function(e){return he.getChildIdx(e,0)},ie.getHexValueArrayOfChildrenFromHex=function(e){var t,r=he.getV,i=r(e,(t=ie.getPosArrayOfChildrenFromHex(e))[0]),n=r(e,t[1]),o=r(e,t[2]),s=r(e,t[3]),a=r(e,t[4]),u=r(e,t[5]),l=r(e,t[6]),c=r(e,t[7]),h=r(e,t[8]);return(t=new Array).push(i,n,o,s,a,u,l,c,h),t},ie.prototype.readPrivateKeyFromPEMString=function(e){var t=Le(e),r=ie.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])},ie.prototype.readPKCS5PrvKeyHex=function(e){var t=ie.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},ie.prototype.readPKCS8PrvKeyHex=function(e){var t,r,i,n,o,s,a,u,l=he,c=l.getVbyListEx;if(!1===l.isASN1HEX(e))throw new Error("not ASN.1 hex string");try{t=c(e,0,[2,0,1],"02"),r=c(e,0,[2,0,2],"02"),i=c(e,0,[2,0,3],"02"),n=c(e,0,[2,0,4],"02"),o=c(e,0,[2,0,5],"02"),s=c(e,0,[2,0,6],"02"),a=c(e,0,[2,0,7],"02"),u=c(e,0,[2,0,8],"02")}catch(e){throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(t,r,i,n,o,s,a,u)},ie.prototype.readPKCS5PubKeyHex=function(e){var t=he,r=t.getV;if(!1===t.isASN1HEX(e))throw new Error("keyHex is not ASN.1 hex string");var i=t.getChildIdx(e,0);if(2!==i.length||"02"!==e.substr(i[0],2)||"02"!==e.substr(i[1],2))throw new Error("wrong hex for PKCS#5 public key");var n=r(e,i[0]),o=r(e,i[1]);this.setPublic(n,o)},ie.prototype.readPKCS8PubKeyHex=function(e){var t=he;if(!1===t.isASN1HEX(e))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==t.getTLVbyListEx(e,0,[0,0]))throw new Error("not PKCS8 RSA public key");var r=t.getTLVbyListEx(e,0,[1,0]);this.readPKCS5PubKeyHex(r)},ie.prototype.readCertPubKeyHex=function(e,t){var r,i;(r=new Ke).readCertHex(e),i=r.getPublicKeyHex(),this.readPKCS8PubKeyHex(i)},new RegExp("[^0-9a-f]","gi"),ie.prototype.sign=function(e,t){var r=function(e){return ue.crypto.Util.hashString(e,t)}(e);return this.signWithMessageHash(r,t)},ie.prototype.signWithMessageHash=function(e,t){var r=te(ue.crypto.Util.getPaddedDigestInfoHex(e,t,this.n.bitLength()),16);return Ve(this.doPrivate(r).toString(16),this.n.bitLength())},ie.prototype.signPSS=function(e,t,r){var i=function(e){return ue.crypto.Util.hashHex(e,t)}(Se(e));return void 0===r&&(r=-1),this.signWithMessageHashPSS(i,t,r)},ie.prototype.signWithMessageHashPSS=function(e,t,r){var i,n=be(e),o=n.length,s=this.n.bitLength()-1,a=Math.ceil(s/8),u=function(e){return ue.crypto.Util.hashHex(e,t)};if(-1===r||void 0===r)r=o;else if(-2===r)r=a-o-2;else if(r<-2)throw new Error("invalid salt length");if(a<o+r+2)throw new Error("data too long");var l="";r>0&&(l=new Array(r),(new ee).nextBytes(l),l=String.fromCharCode.apply(String,l));var c=be(u(Se("\0\0\0\0\0\0\0\0"+n+l))),h=[];for(i=0;i<a-r-o-2;i+=1)h[i]=0;var p=String.fromCharCode.apply(String,h)+""+l,d=qe(c,p.length,u),f=[];for(i=0;i<p.length;i+=1)f[i]=p.charCodeAt(i)^d.charCodeAt(i);var g=65280>>8*a-s&255;for(f[0]&=~g,i=0;i<o;i++)f.push(c.charCodeAt(i));return f.push(188),Ve(this.doPrivate(new b(f)).toString(16),this.n.bitLength())},ie.prototype.verify=function(e,t){if(null==(t=t.toLowerCase()).match(/^[0-9a-f]+$/))return!1;var r=te(t,16),i=this.n.bitLength();if(r.bitLength()>i)return!1;var n=this.doPublic(r).toString(16);if(n.length+3!=i/4)return!1;var o=We(n.replace(/^1f+00/,""));if(0==o.length)return!1;var s=o[0];return o[1]==function(e){return ue.crypto.Util.hashString(e,s)}(e)},ie.prototype.verifyWithMessageHash=function(e,t){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var r=te(t,16);if(r.bitLength()>this.n.bitLength())return 0;var i=We(this.doPublic(r).toString(16).replace(/^1f+00/,""));return 0!=i.length&&(i[0],i[1]==e)},ie.prototype.verifyPSS=function(e,t,r,i){var n=function(e){return ue.crypto.Util.hashHex(e,r)}(Se(e));return void 0===i&&(i=-1),this.verifyWithMessageHashPSS(n,t,r,i)},ie.prototype.verifyWithMessageHashPSS=function(e,t,r,i){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var n,o=new b(t,16),s=function(e){return ue.crypto.Util.hashHex(e,r)},a=be(e),u=a.length,l=this.n.bitLength()-1,c=Math.ceil(l/8);if(-1===i||void 0===i)i=u;else if(-2===i)i=c-u-2;else if(i<-2)throw new Error("invalid salt length");if(c<u+i+2)throw new Error("data too long");var h=this.doPublic(o).toByteArray();for(n=0;n<h.length;n+=1)h[n]&=255;for(;h.length<c;)h.unshift(0);if(188!==h[c-1])throw new Error("encoded message does not end in 0xbc");var p=(h=String.fromCharCode.apply(String,h)).substr(0,c-u-1),d=h.substr(p.length,u),f=65280>>8*c-l&255;if(0!=(p.charCodeAt(0)&f))throw new Error("bits beyond keysize not zero");var g=qe(d,p.length,s),m=[];for(n=0;n<p.length;n+=1)m[n]=p.charCodeAt(n)^g.charCodeAt(n);m[0]&=~f;var v=c-u-i-2;for(n=0;n<v;n+=1)if(0!==m[n])throw new Error("leftmost octets not zero");if(1!==m[v])throw new Error("0x01 marker not found");return d===be(s(Se("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,m.slice(-i)))))},ie.SALT_LEN_HLEN=-1,ie.SALT_LEN_MAX=-2,ie.SALT_LEN_RECOVER=-2,Ke.hex2dn=function(e,t){void 0===t&&(t=0);var r=new Ke;return he.getTLV(e,t),r.getX500Name(e).str},Ke.hex2rdn=function(e,t){if(void 0===t&&(t=0),"31"!==e.substr(t,2))throw new Error("malformed RDN");for(var r=new Array,i=he.getChildIdx(e,t),n=0;n<i.length;n++)r.push(Ke.hex2attrTypeValue(e,i[n]));return(r=r.map((function(e){return e.replace("+","\\+")}))).join("+")},Ke.hex2attrTypeValue=function(e,t){var r=he,i=r.getV;if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw new Error("malformed attribute type and value");var n=r.getChildIdx(e,t);2!==n.length||e.substr(n[0],2);var o=i(e,n[0]),s=ue.asn1.ASN1Util.oidHexToInt(o);return ue.asn1.x509.OID.oid2atype(s)+"="+be(i(e,n[1]))},Ke.getPublicKeyFromCertHex=function(e){var t=new Ke;return t.readCertHex(e),t.getPublicKey()},Ke.getPublicKeyFromCertPEM=function(e){var t=new Ke;return t.readCertPEM(e),t.getPublicKey()},Ke.getPublicKeyInfoPropOfCertPEM=function(e){var t,r,i=he.getVbyList,n={algparam:null};return(t=new Ke).readCertPEM(e),r=t.getPublicKeyHex(),n.keyhex=i(r,0,[1],"03").substr(2),n.algoid=i(r,0,[0,0],"06"),"2a8648ce3d0201"===n.algoid&&(n.algparam=i(r,0,[0,1],"06")),n},Ke.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.jws&&ue.jws||(ue.jws={}),ue.jws.JWS=function(){var e=ue.jws.JWS.isSafeJSONString;this.parseJWS=function(t,r){if(void 0===this.parsedJWS||!r&&void 0===this.parsedJWS.sigvalH){var i=t.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==i)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var n=i[1],o=i[2],s=i[3],a=n+"."+o;if(this.parsedJWS={},this.parsedJWS.headB64U=n,this.parsedJWS.payloadB64U=o,this.parsedJWS.sigvalB64U=s,this.parsedJWS.si=a,!r){var u=_e(s),l=te(u,16);this.parsedJWS.sigvalH=u,this.parsedJWS.sigvalBI=l}var c=ce(n),h=ce(o);if(this.parsedJWS.headS=c,this.parsedJWS.payloadS=h,!e(c,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+c}}},ue.jws.JWS.sign=function(e,t,r,i,n){var o,s,a,u=ue,l=u.jws.JWS,c=l.readSafeJSONString,h=l.isSafeJSONString,p=u.crypto,f=(p.ECDSA,p.Mac),g=p.Signature,m=JSON;if("string"!=typeof t&&"object"!=(void 0===t?"undefined":d(t)))throw"spHeader must be JSON string or object: "+t;if("object"==(void 0===t?"undefined":d(t))&&(s=t,o=m.stringify(s)),"string"==typeof t){if(!h(o=t))throw"JWS Head is not safe JSON string: "+o;s=c(o)}if(a=r,"object"==(void 0===r?"undefined":d(r))&&(a=m.stringify(r)),""!=e&&null!=e||void 0===s.alg||(e=s.alg),""!=e&&null!=e&&void 0===s.alg&&(s.alg=e,o=m.stringify(s)),e!==s.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+s.alg;var v=null;if(void 0===l.jwsalg2sigalg[e])throw"unsupported alg name: "+e;v=l.jwsalg2sigalg[e];var y=le(o)+"."+le(a),_="";if("Hmac"==v.substr(0,4)){if(void 0===i)throw"mac key shall be specified for HS* alg";var E=new f({alg:v,prov:"cryptojs",pass:i});E.updateString(y),_=E.doFinal()}else if(-1!=v.indexOf("withECDSA")){(b=new g({alg:v})).init(i,n),b.updateString(y);var x=b.sign();_=ue.crypto.ECDSA.asn1SigToConcatSig(x)}else{var b;"none"!=v&&((b=new g({alg:v})).init(i,n),b.updateString(y),_=b.sign())}return y+"."+ye(_)},ue.jws.JWS.verify=function(e,t,r){var i,n=ue,o=n.jws.JWS,s=o.readSafeJSONString,a=n.crypto,u=a.ECDSA,l=a.Mac,c=a.Signature;void 0!==d(ie)&&(i=ie);var h=e.split(".");if(3!==h.length)return!1;var p,f=h[0]+"."+h[1],g=_e(h[2]),m=s(ce(h[0])),v=null;if(void 0===m.alg)throw"algorithm not specified in header";if(p=(v=m.alg).substr(0,2),null!=r&&"[object Array]"===Object.prototype.toString.call(r)&&r.length>0&&-1==(":"+r.join(":")+":").indexOf(":"+v+":"))throw"algorithm '"+v+"' not accepted in the list";if("none"!=v&&null===t)throw"key shall be specified to verify.";if("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&(t=Ge.getKey(t)),!("RS"!=p&&"PS"!=p||t instanceof i))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==p&&!(t instanceof u))throw"key shall be a ECDSA obj for ES* algs";var y=null;if(void 0===o.jwsalg2sigalg[m.alg])throw"unsupported alg name: "+v;if("none"==(y=o.jwsalg2sigalg[v]))throw"not supported";if("Hmac"==y.substr(0,4)){if(void 0===t)throw"hexadecimal key shall be specified for HMAC";var _=new l({alg:y,pass:t});return _.updateString(f),g==_.doFinal()}if(-1!=y.indexOf("withECDSA")){var E,x=null;try{x=u.concatSigToASN1Sig(g)}catch(e){return!1}return(E=new c({alg:y})).init(t),E.updateString(f),E.verify(x)}return(E=new c({alg:y})).init(t),E.updateString(f),E.verify(g)},ue.jws.JWS.parse=function(e){var t,r,i,n=e.split("."),o={};if(2!=n.length&&3!=n.length)throw"malformed sJWS: wrong number of '.' splitted elements";return t=n[0],r=n[1],3==n.length&&(i=n[2]),o.headerObj=ue.jws.JWS.readSafeJSONString(ce(t)),o.payloadObj=ue.jws.JWS.readSafeJSONString(ce(r)),o.headerPP=JSON.stringify(o.headerObj,null,"  "),null==o.payloadObj?o.payloadPP=ce(r):o.payloadPP=JSON.stringify(o.payloadObj,null,"  "),void 0!==i&&(o.sigHex=_e(i)),o},ue.jws.JWS.verifyJWT=function(e,t,r){var i=ue.jws,n=i.JWS,o=n.readSafeJSONString,s=n.inArray,a=n.includedArray,u=e.split("."),l=u[0],c=u[1],h=(_e(u[2]),o(ce(l))),p=o(ce(c));if(void 0===h.alg)return!1;if(void 0===r.alg)throw"acceptField.alg shall be specified";if(!s(h.alg,r.alg))return!1;if(void 0!==p.iss&&"object"===d(r.iss)&&!s(p.iss,r.iss))return!1;if(void 0!==p.sub&&"object"===d(r.sub)&&!s(p.sub,r.sub))return!1;if(void 0!==p.aud&&"object"===d(r.aud))if("string"==typeof p.aud){if(!s(p.aud,r.aud))return!1}else if("object"==d(p.aud)&&!a(p.aud,r.aud))return!1;var f=i.IntDate.getNow();return void 0!==r.verifyAt&&"number"==typeof r.verifyAt&&(f=r.verifyAt),void 0!==r.gracePeriod&&"number"==typeof r.gracePeriod||(r.gracePeriod=0),!(void 0!==p.exp&&"number"==typeof p.exp&&p.exp+r.gracePeriod<f||void 0!==p.nbf&&"number"==typeof p.nbf&&f<p.nbf-r.gracePeriod||void 0!==p.iat&&"number"==typeof p.iat&&f<p.iat-r.gracePeriod||void 0!==p.jti&&void 0!==r.jti&&p.jti!==r.jti||!n.verify(e,t,r.alg))},ue.jws.JWS.includedArray=function(e,t){var r=ue.jws.JWS.inArray;if(null===e)return!1;if("object"!==(void 0===e?"undefined":d(e)))return!1;if("number"!=typeof e.length)return!1;for(var i=0;i<e.length;i++)if(!r(e[i],t))return!1;return!0},ue.jws.JWS.inArray=function(e,t){if(null===t)return!1;if("object"!==(void 0===t?"undefined":d(t)))return!1;if("number"!=typeof t.length)return!1;for(var r=0;r<t.length;r++)if(t[r]==e)return!0;return!1},ue.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},ue.jws.JWS.isSafeJSONString=function(e,t,r){var i=null;try{return"object"!=(void 0===(i=ae(e))?"undefined":d(i))||i.constructor===Array?0:(t&&(t[r]=i),1)}catch(e){return 0}},ue.jws.JWS.readSafeJSONString=function(e){var t=null;try{return"object"!=(void 0===(t=ae(e))?"undefined":d(t))||t.constructor===Array?null:t}catch(e){return null}},ue.jws.JWS.getEncodedSignatureValueFromJWS=function(e){var t=e.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==t)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return t[1]},ue.jws.JWS.getJWKthumbprint=function(e){if("RSA"!==e.kty&&"EC"!==e.kty&&"oct"!==e.kty)throw"unsupported algorithm for JWK Thumprint";var t="{";if("RSA"===e.kty){if("string"!=typeof e.n||"string"!=typeof e.e)throw"wrong n and e value for RSA key";t+='"e":"'+e.e+'",',t+='"kty":"'+e.kty+'",',t+='"n":"'+e.n+'"}'}else if("EC"===e.kty){if("string"!=typeof e.crv||"string"!=typeof e.x||"string"!=typeof e.y)throw"wrong crv, x and y value for EC key";t+='"crv":"'+e.crv+'",',t+='"kty":"'+e.kty+'",',t+='"x":"'+e.x+'",',t+='"y":"'+e.y+'"}'}else if("oct"===e.kty){if("string"!=typeof e.k)throw"wrong k value for oct(symmetric) key";t+='"kty":"'+e.kty+'",',t+='"k":"'+e.k+'"}'}var r=Se(t);return ye(ue.crypto.Util.hashHex(r,"sha256"))},ue.jws.IntDate={},ue.jws.IntDate.get=function(e){var t=ue.jws.IntDate,r=t.getNow,i=t.getZulu;if("now"==e)return r();if("now + 1hour"==e)return r()+3600;if("now + 1day"==e)return r()+86400;if("now + 1month"==e)return r()+2592e3;if("now + 1year"==e)return r()+31536e3;if(e.match(/Z$/))return i(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e},ue.jws.IntDate.getZulu=function(e){return Ne(e)},ue.jws.IntDate.getNow=function(){return~~(new Date/1e3)},ue.jws.IntDate.intDate2UTCString=function(e){return new Date(1e3*e).toUTCString()},ue.jws.IntDate.intDate2Zulu=function(e){var t=new Date(1e3*e);return("0000"+t.getUTCFullYear()).slice(-4)+("00"+(t.getUTCMonth()+1)).slice(-2)+("00"+t.getUTCDate()).slice(-2)+("00"+t.getUTCHours()).slice(-2)+("00"+t.getUTCMinutes()).slice(-2)+("00"+t.getUTCSeconds()).slice(-2)+"Z"},t.SecureRandom=ee,t.rng_seed_time=$,t.BigInteger=b,t.RSAKey=ie;var ze=ue.crypto.EDSA;t.EDSA=ze;var $e=ue.crypto.DSA;t.DSA=$e;var Je=ue.crypto.Signature;t.Signature=Je;var Ze=ue.crypto.MessageDigest;t.MessageDigest=Ze;var Ye=ue.crypto.Mac;t.Mac=Ye;var Xe=ue.crypto.Cipher;t.Cipher=Xe,t.KEYUTIL=Ge,t.ASN1HEX=he,t.X509=Ke,t.CryptoJS=m,t.b64tohex=E,t.b64toBA=x,t.stoBA=pe,t.BAtos=de,t.BAtohex=fe,t.stohex=ge,t.stob64=function(e){return _(ge(e))},t.stob64u=function(e){return me(_(ge(e)))},t.b64utos=function(e){return de(x(ve(e)))},t.b64tob64u=me,t.b64utob64=ve,t.hex2b64=_,t.hextob64u=ye,t.b64utohex=_e,t.utf8tob64u=le,t.b64utoutf8=ce,t.utf8tob64=function(e){return _(Re(Me(e)))},t.b64toutf8=function(e){return decodeURIComponent(Pe(E(e)))},t.utf8tohex=Ee,t.hextoutf8=xe,t.hextorstr=be,t.rstrtohex=Se,t.hextob64=we,t.hextob64nl=Te,t.b64nltohex=Ae,t.hextopem=Ie,t.pemtohex=Le,t.hextoArrayBuffer=function(e){if(e.length%2!=0)throw"input is not even length";if(null==e.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var t=new ArrayBuffer(e.length/2),r=new DataView(t),i=0;i<e.length/2;i++)r.setUint8(i,parseInt(e.substr(2*i,2),16));return t},t.ArrayBuffertohex=function(e){for(var t="",r=new DataView(e),i=0;i<e.byteLength;i++)t+=("00"+r.getUint8(i).toString(16)).slice(-2);return t},t.zulutomsec=Ce,t.zulutosec=Ne,t.zulutodate=function(e){return new Date(Ce(e))},t.datetozulu=function(e,t,r){var i,n=e.getUTCFullYear();if(t){if(n<1950||2049<n)throw"not proper year for UTCTime: "+n;i=(""+n).slice(-2)}else i=("000"+n).slice(-4);if(i+=("0"+(e.getUTCMonth()+1)).slice(-2),i+=("0"+e.getUTCDate()).slice(-2),i+=("0"+e.getUTCHours()).slice(-2),i+=("0"+e.getUTCMinutes()).slice(-2),i+=("0"+e.getUTCSeconds()).slice(-2),r){var o=e.getUTCMilliseconds();0!==o&&(i+="."+(o=(o=("00"+o).slice(-3)).replace(/0+$/g,"")))}return i+"Z"},t.uricmptohex=Re,t.hextouricmp=Pe,t.ipv6tohex=Oe,t.hextoipv6=ke,t.hextoip=Fe,t.iptohex=function(e){var t="malformed IP address";if(!(e=e.toLowerCase(e)).match(/^[0-9.]+$/)){if(e.match(/^[0-9a-f:]+$/)&&-1!==e.indexOf(":"))return Oe(e);throw t}var r=e.split(".");if(4!==r.length)throw t;var i="";try{for(var n=0;n<4;n++)i+=("0"+parseInt(r[n]).toString(16)).slice(-2);return i}catch(e){throw t}},t.encodeURIComponentAll=Me,t.newline_toUnix=function(e){return e.replace(/\r\n/gm,"\n")},t.newline_toDos=function(e){return(e=e.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},t.hextoposhex=Be,t.intarystrtohex=function(e){e=(e=(e=e.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return e.split(/,/).map((function(e,t,r){var i=parseInt(e);if(i<0||255<i)throw"integer not in range 0-255";return("00"+i.toString(16)).slice(-2)})).join("")}catch(e){throw"malformed integer array string: "+e}},t.strdiffidx=function(e,t){var r=e.length;e.length>t.length&&(r=t.length);for(var i=0;i<r;i++)if(e.charCodeAt(i)!=t.charCodeAt(i))return i;return e.length!=t.length?r:-1},t.KJUR=ue;var Qe=ue.crypto;t.crypto=Qe;var et=ue.asn1;t.asn1=et;var tt=ue.jws;t.jws=tt;var rt=ue.lang;t.lang=rt}).call(this,r(28).Buffer)},function(e,t,r){"use strict";(function(e){var i=r(30),n=r(31),o=r(32);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return l(this,e,t,r)}function l(e,t,r,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,i){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,r):new Uint8Array(t,r,i),u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=p(e,t),e}(e,t,r,i):"string"==typeof t?function(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|f(t,r),n=(e=a(e,i)).write(t,r);return n!==i&&(e=e.slice(0,n)),e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|d(t.length);return 0===(e=a(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?a(e,0):p(e,t);if("Buffer"===t.type&&o(t.data))return p(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(c(t),e=a(e,t<0?0:0|d(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function p(e,t){var r=t.length<0?0:0|d(t.length);e=a(e,r);for(var i=0;i<r;i+=1)e[i]=255&t[i];return e}function d(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function f(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(e).length;default:if(i)return H(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,r){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,r);case"utf8":case"utf-8":return A(this,t,r);case"ascii":return L(this,t,r);case"latin1":case"binary":return C(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function m(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function v(e,t,r,i,n){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=u.from(t,i)),u.isBuffer(t))return 0===t.length?-1:y(e,t,r,i,n);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):y(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function y(e,t,r,i,n){var o,s=1,a=e.length,u=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(n){var c=-1;for(o=r;o<a;o++)if(l(e,o)===l(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){for(var h=!0,p=0;p<u;p++)if(l(e,o+p)!==l(t,p)){h=!1;break}if(h)return o}return-1}function _(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function E(e,t,r,i){return V(H(t,e.length-r),e,r,i)}function x(e,t,r,i){return V(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function b(e,t,r,i){return x(e,t,r,i)}function S(e,t,r,i){return V(G(t),e,r,i)}function w(e,t,r,i){return V(function(e,t){for(var r,i,n,o=[],s=0;s<e.length&&!((t-=2)<0);++s)i=(r=e.charCodeAt(s))>>8,n=r%256,o.push(n),o.push(i);return o}(t,e.length-r),e,r,i)}function T(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function A(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var o,s,a,u,l=e[n],c=null,h=l>239?4:l>223?3:l>191?2:1;if(n+h<=r)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(o=e[n+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=e[n+1],s=e[n+2],128==(192&o)&&128==(192&s)&&(u=(15&l)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=e[n+1],s=e[n+2],a=e[n+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|1023&c),i.push(c),n+=h}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);for(var r="",i=0;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=I));return r}(i)}t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return l(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,i){return c(t),t<=0?a(e,t):void 0!==r?"string"==typeof i?a(e,t).fill(r,i):a(e,t).fill(r):a(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return h(null,e)},u.allocUnsafeSlow=function(e){return h(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,n=0,o=Math.min(r,i);n<o;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=u.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var s=e[r];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,n),n+=s.length}return i},u.byteLength=f,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):g.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,i,n){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(n>>>=0)-(i>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(o,s),l=this.slice(i,n),c=e.slice(t,r),h=0;h<a;++h)if(l[h]!==c[h]){o=l[h],s=c[h];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},u.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return _(this,e,t,r);case"utf8":case"utf-8":return E(this,e,t,r);case"ascii":return x(this,e,t,r);case"latin1":case"binary":return b(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function L(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function C(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function N(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var n="",o=t;o<r;++o)n+=j(e[o]);return n}function R(e,t,r){for(var i=e.slice(t,r),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+256*i[o+1]);return n}function P(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,r,i,n,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<o)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function k(e,t,r,i){t<0&&(t=65535+t+1);for(var n=0,o=Math.min(e.length-r,2);n<o;++n)e[r+n]=(t&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function F(e,t,r,i){t<0&&(t=4294967295+t+1);for(var n=0,o=Math.min(e.length-r,4);n<o;++n)e[r+n]=t>>>8*(i?n:3-n)&255}function D(e,t,r,i,n,o){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(e,t,r,i,o){return o||D(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function U(e,t,r,i,o){return o||D(e,0,r,8),n.write(e,t,r,i,52,8),r+8}u.prototype.slice=function(e,t){var r,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var n=t-e;r=new u(n,void 0);for(var o=0;o<n;++o)r[o]=this[o+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var i=this[e],n=1,o=0;++o<t&&(n*=256);)i+=this[e+o]*n;return i},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},u.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var i=this[e],n=1,o=0;++o<t&&(n*=256);)i+=this[e+o]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var i=t,n=1,o=this[e+--i];i>0&&(n*=256);)o+=this[e+--i]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),n.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),n.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),n.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),n.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,i){e=+e,t|=0,r|=0,i||O(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,o=0;for(this[t]=255&e;++o<r&&(n*=256);)this[t+o]=e/n&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,i){e=+e,t|=0,r|=0,i||O(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,o=1;for(this[t+n]=255&e;--n>=0&&(o*=256);)this[t+n]=e/o&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):k(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):k(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):F(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);O(this,e,t,r,n-1,-n)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},u.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);O(this,e,t,r,n-1,-n)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):k(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):k(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):F(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return M(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return M(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,i){if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var n,o=i-r;if(this===e&&r<t&&t<i)for(n=o-1;n>=0;--n)e[n+t]=this[n+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(n=0;n<o;++n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},u.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=u.isBuffer(e)?e:H(new u(e,i).toString()),a=s.length;for(o=0;o<r-t;++o)this[o+t]=s[o%a]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function j(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){var r;t=t||1/0;for(var i=e.length,n=null,o=[],s=0;s<i;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function G(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}}).call(this,r(29))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],i=t[1];return 3*(r+i)/4-i},t.toByteArray=function(e){var t,r,i=l(e),s=i[0],a=i[1],u=new o(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),c=0,h=a>0?s-4:s;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[c++]=255&t),1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,o=[],s=16383,a=0,u=r-n;a<u;a+=s)o.push(c(e,a,a+s>u?u:a+s));return 1===n?(t=e[r-1],o.push(i[t>>2]+i[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],o.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"=")),o.join("")};for(var i=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)i[a]=s[a],n[s.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,r){for(var n,o,s=[],a=t;a<r;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(i[(o=n)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,i,n){var o,s,a=8*n-i-1,u=(1<<a)-1,l=u>>1,c=-7,h=r?n-1:0,p=r?-1:1,d=e[t+h];for(h+=p,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+e[t+h],h+=p,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=256*s+e[t+h],h+=p,c-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,i),o-=l}return(d?-1:1)*s*Math.pow(2,o-i)},t.write=function(e,t,r,i,n,o){var s,a,u,l=8*o-n-1,c=(1<<l)-1,h=c>>1,p=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,f=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+h>=1?p/u:p*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(t*u-1)*Math.pow(2,n),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,n),s=0));n>=8;e[r+d]=255&a,d+=f,a/=256,n-=8);for(s=s<<n|a,l+=n;l>0;e[r+d]=255&s,d+=f,s/=256,l-=8);e[r+d-f]|=128*g}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.jws,r=e.KeyUtil,n=e.X509,o=e.crypto,s=e.hextob64u,a=e.b64tohex,u=e.AllowedSigningAlgs;return function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.parseJwt=function e(r){i.Log.debug("JoseUtil.parseJwt");try{var n=t.JWS.parse(r);return{header:n.headerObj,payload:n.payloadObj}}catch(e){i.Log.error(e)}},e.validateJwt=function(t,o,s,u,l,c,h){i.Log.debug("JoseUtil.validateJwt");try{if("RSA"===o.kty)if(o.e&&o.n)o=r.getKey(o);else{if(!o.x5c||!o.x5c.length)return i.Log.error("JoseUtil.validateJwt: RSA key missing key material",o),Promise.reject(new Error("RSA key missing key material"));var p=a(o.x5c[0]);o=n.getPublicKeyFromCertHex(p)}else{if("EC"!==o.kty)return i.Log.error("JoseUtil.validateJwt: Unsupported key type",o&&o.kty),Promise.reject(new Error(o.kty));if(!(o.crv&&o.x&&o.y))return i.Log.error("JoseUtil.validateJwt: EC key missing key material",o),Promise.reject(new Error("EC key missing key material"));o=r.getKey(o)}return e._validateJwt(t,o,s,u,l,c,h)}catch(e){return i.Log.error(e&&e.message||e),Promise.reject("JWT validation failed")}},e.validateJwtAttributes=function(t,r,n,o,s,a){o||(o=0),s||(s=parseInt(Date.now()/1e3));var u=e.parseJwt(t).payload;if(!u.iss)return i.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(u.iss!==r)return i.Log.error("JoseUtil._validateJwt: Invalid issuer in token",u.iss),Promise.reject(new Error("Invalid issuer in token: "+u.iss));if(!u.aud)return i.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(u.aud===n||Array.isArray(u.aud)&&u.aud.indexOf(n)>=0))return i.Log.error("JoseUtil._validateJwt: Invalid audience in token",u.aud),Promise.reject(new Error("Invalid audience in token: "+u.aud));if(u.azp&&u.azp!==n)return i.Log.error("JoseUtil._validateJwt: Invalid azp in token",u.azp),Promise.reject(new Error("Invalid azp in token: "+u.azp));if(!a){var l=s+o,c=s-o;if(!u.iat)return i.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(l<u.iat)return i.Log.error("JoseUtil._validateJwt: iat is in the future",u.iat),Promise.reject(new Error("iat is in the future: "+u.iat));if(u.nbf&&l<u.nbf)return i.Log.error("JoseUtil._validateJwt: nbf is in the future",u.nbf),Promise.reject(new Error("nbf is in the future: "+u.nbf));if(!u.exp)return i.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(u.exp<c)return i.Log.error("JoseUtil._validateJwt: exp is in the past",u.exp),Promise.reject(new Error("exp is in the past:"+u.exp))}return Promise.resolve(u)},e._validateJwt=function(r,n,o,s,a,l,c){return e.validateJwtAttributes(r,o,s,a,l,c).then((function(e){try{return t.JWS.verify(r,n,u)?e:(i.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(e){return i.Log.error(e&&e.message||e),Promise.reject(new Error("signature validation failed"))}}))},e.hashString=function e(t,r){try{return o.Util.hashString(t,r)}catch(e){i.Log.error(e)}},e.hexToBase64Url=function e(t){try{return s(t)}catch(e){i.Log.error(e)}},e}()};var i=r(0);e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SigninResponse=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(3);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.SigninResponse=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";o(this,e);var i=n.UrlUtility.parseUrlFragment(t,r);this.error=i.error,this.error_description=i.error_description,this.error_uri=i.error_uri,this.code=i.code,this.state=i.state,this.id_token=i.id_token,this.session_state=i.session_state,this.access_token=i.access_token,this.token_type=i.token_type,this.scope=i.scope,this.profile=void 0,this.expires_in=i.expires_in}return i(e,[{key:"expires_in",get:function(){if(this.expires_at){var e=parseInt(Date.now()/1e3);return this.expires_at-e}},set:function(e){var t=parseInt(e);if("number"==typeof t&&t>0){var r=parseInt(Date.now()/1e3);this.expires_at=r+t}}},{key:"expired",get:function(){var e=this.expires_in;if(void 0!==e)return e<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignoutRequest=void 0;var i=r(0),n=r(3),o=r(9);t.SignoutRequest=function e(t){var r=t.url,s=t.id_token_hint,a=t.post_logout_redirect_uri,u=t.data,l=t.extraQueryParams,c=t.request_type;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!r)throw i.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var h in s&&(r=n.UrlUtility.addQueryParam(r,"id_token_hint",s)),a&&(r=n.UrlUtility.addQueryParam(r,"post_logout_redirect_uri",a),u&&(this.state=new o.State({data:u,request_type:c}),r=n.UrlUtility.addQueryParam(r,"state",this.state.id))),l)r=n.UrlUtility.addQueryParam(r,h,l[h]);this.url=r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignoutResponse=void 0;var i=r(3);t.SignoutResponse=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=i.UrlUtility.parseUrlFragment(t,"?");this.error=r.error,this.error_description=r.error_description,this.error_uri=r.error_uri,this.state=r.state}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryWebStorage=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0);t.InMemoryWebStorage=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data={}}return e.prototype.getItem=function(e){return n.Log.debug("InMemoryWebStorage.getItem",e),this._data[e]},e.prototype.setItem=function(e,t){n.Log.debug("InMemoryWebStorage.setItem",e),this._data[e]=t},e.prototype.removeItem=function(e){n.Log.debug("InMemoryWebStorage.removeItem",e),delete this._data[e]},e.prototype.key=function(e){return Object.getOwnPropertyNames(this._data)[e]},i(e,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserManager=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0),o=r(10),s=r(39),a=r(15),u=r(45),l=r(47),c=r(18),h=r(8),p=r(20),d=r(11),f=r(4);function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.UserManager=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.SilentRenewService,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.SessionMonitor,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.TokenRevocationClient,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d.TokenClient,v=arguments.length>5&&void 0!==arguments[5]?arguments[5]:f.JoseUtil;g(this,t),r instanceof s.UserManagerSettings||(r=new s.UserManagerSettings(r));var y=m(this,e.call(this,r));return y._events=new u.UserManagerEvents(r),y._silentRenewService=new i(y),y.settings.automaticSilentRenew&&(n.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),y.startSilentRenew()),y.settings.monitorSession&&(n.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),y._sessionMonitor=new o(y)),y._tokenRevocationClient=new a(y._settings),y._tokenClient=new h(y._settings),y._joseUtil=v,y}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getUser=function(){var e=this;return this._loadUser().then((function(t){return t?(n.Log.info("UserManager.getUser: user loaded"),e._events.load(t,!1),t):(n.Log.info("UserManager.getUser: user not found in storage"),null)}))},t.prototype.removeUser=function(){var e=this;return this.storeUser(null).then((function(){n.Log.info("UserManager.removeUser: user removed from storage"),e._events.unload()}))},t.prototype.signinRedirect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="si:r";var t={useReplaceToNavigate:e.useReplaceToNavigate};return this._signinStart(e,this._redirectNavigator,t).then((function(){n.Log.info("UserManager.signinRedirect: successful")}))},t.prototype.signinRedirectCallback=function(e){return this._signinEnd(e||this._redirectNavigator.url).then((function(e){return e.profile&&e.profile.sub?n.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",e.profile.sub):n.Log.info("UserManager.signinRedirectCallback: no sub"),e}))},t.prototype.signinPopup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="si:p";var t=e.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return t?(e.redirect_uri=t,e.display="popup",this._signin(e,this._popupNavigator,{startUrl:t,popupWindowFeatures:e.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:e.popupWindowTarget||this.settings.popupWindowTarget}).then((function(e){return e&&(e.profile&&e.profile.sub?n.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",e.profile.sub):n.Log.info("UserManager.signinPopup: no sub")),e}))):(n.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},t.prototype.signinPopupCallback=function(e){return this._signinCallback(e,this._popupNavigator).then((function(e){return e&&(e.profile&&e.profile.sub?n.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",e.profile.sub):n.Log.info("UserManager.signinPopupCallback: no sub")),e})).catch((function(e){n.Log.error(e.message)}))},t.prototype.signinSilent=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=Object.assign({},t),this._loadUser().then((function(r){return r&&r.refresh_token?(t.refresh_token=r.refresh_token,e._useRefreshToken(t)):(t.request_type="si:s",t.id_token_hint=t.id_token_hint||e.settings.includeIdTokenInSilentRenew&&r&&r.id_token,r&&e._settings.validateSubOnSilentRenew&&(n.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",r.profile.sub),t.current_sub=r.profile.sub),e._signinSilentIframe(t))}))},t.prototype._useRefreshToken=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._tokenClient.exchangeRefreshToken(t).then((function(t){return t?t.access_token?e._loadUser().then((function(r){if(r){var i=Promise.resolve();return t.id_token&&(i=e._validateIdTokenFromTokenRefreshToken(r.profile,t.id_token)),i.then((function(){return n.Log.debug("UserManager._useRefreshToken: refresh token response success"),r.id_token=t.id_token||r.id_token,r.access_token=t.access_token,r.refresh_token=t.refresh_token||r.refresh_token,r.expires_in=t.expires_in,e.storeUser(r).then((function(){return e._events.load(r),r}))}))}return null})):(n.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(n.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))}))},t.prototype._validateIdTokenFromTokenRefreshToken=function(e,t){var r=this;return this._metadataService.getIssuer().then((function(i){return r.settings.getEpochTime().then((function(o){return r._joseUtil.validateJwtAttributes(t,i,r._settings.client_id,r._settings.clockSkew,o).then((function(t){return t?t.sub!==e.sub?(n.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):t.auth_time&&t.auth_time!==e.auth_time?(n.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):t.azp&&t.azp!==e.azp?(n.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!t.azp&&e.azp?(n.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(n.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))}))}))}))},t.prototype._signinSilentIframe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return t?(e.redirect_uri=t,e.prompt=e.prompt||"none",this._signin(e,this._iframeNavigator,{startUrl:t,silentRequestTimeout:e.silentRequestTimeout||this.settings.silentRequestTimeout}).then((function(e){return e&&(e.profile&&e.profile.sub?n.Log.info("UserManager.signinSilent: successful, signed in sub: ",e.profile.sub):n.Log.info("UserManager.signinSilent: no sub")),e}))):(n.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},t.prototype.signinSilentCallback=function(e){return this._signinCallback(e,this._iframeNavigator).then((function(e){return e&&(e.profile&&e.profile.sub?n.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",e.profile.sub):n.Log.info("UserManager.signinSilentCallback: no sub")),e}))},t.prototype.signinCallback=function(e){var t=this;return this.readSigninResponseState(e).then((function(r){var i=r.state;return r.response,"si:r"===i.request_type?t.signinRedirectCallback(e):"si:p"===i.request_type?t.signinPopupCallback(e):"si:s"===i.request_type?t.signinSilentCallback(e):Promise.reject(new Error("invalid response_type in state"))}))},t.prototype.signoutCallback=function(e,t){var r=this;return this.readSignoutResponseState(e).then((function(i){var n=i.state,o=i.response;return n?"so:r"===n.request_type?r.signoutRedirectCallback(e):"so:p"===n.request_type?r.signoutPopupCallback(e,t):Promise.reject(new Error("invalid response_type in state")):o}))},t.prototype.querySessionStatus=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=Object.assign({},t)).request_type="si:s";var r=t.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return r?(t.redirect_uri=r,t.prompt="none",t.response_type=t.response_type||this.settings.query_status_response_type,t.scope=t.scope||"openid",t.skipUserInfo=!0,this._signinStart(t,this._iframeNavigator,{startUrl:r,silentRequestTimeout:t.silentRequestTimeout||this.settings.silentRequestTimeout}).then((function(t){return e.processSigninResponse(t.url).then((function(e){if(n.Log.debug("UserManager.querySessionStatus: got signin response"),e.session_state&&e.profile.sub)return n.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",e.profile.sub),{session_state:e.session_state,sub:e.profile.sub,sid:e.profile.sid};n.Log.info("querySessionStatus successful, user not authenticated")})).catch((function(t){if(t.session_state&&e.settings.monitorAnonymousSession&&("login_required"==t.message||"consent_required"==t.message||"interaction_required"==t.message||"account_selection_required"==t.message))return n.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:t.session_state};throw t}))}))):(n.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},t.prototype._signin=function(e,t){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._signinStart(e,t,i).then((function(t){return r._signinEnd(t.url,e)}))},t.prototype._signinStart=function(e,t){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.prepare(i).then((function(t){return n.Log.debug("UserManager._signinStart: got navigator window handle"),r.createSigninRequest(e).then((function(e){return n.Log.debug("UserManager._signinStart: got signin request"),i.url=e.url,i.id=e.state.id,t.navigate(i)})).catch((function(e){throw t.close&&(n.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),t.close()),e}))}))},t.prototype._signinEnd=function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.processSigninResponse(e).then((function(e){n.Log.debug("UserManager._signinEnd: got signin response");var i=new a.User(e);if(r.current_sub){if(r.current_sub!==i.profile.sub)return n.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",i.profile.sub),Promise.reject(new Error("login_required"));n.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return t.storeUser(i).then((function(){return n.Log.debug("UserManager._signinEnd: user stored"),t._events.load(i),i}))}))},t.prototype._signinCallback=function(e,t){n.Log.debug("UserManager._signinCallback");var r="query"===this._settings.response_mode||!this._settings.response_mode&&h.SigninRequest.isCode(this._settings.response_type)?"?":"#";return t.callback(e,void 0,r)},t.prototype.signoutRedirect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="so:r";var t=e.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;t&&(e.post_logout_redirect_uri=t);var r={useReplaceToNavigate:e.useReplaceToNavigate};return this._signoutStart(e,this._redirectNavigator,r).then((function(){n.Log.info("UserManager.signoutRedirect: successful")}))},t.prototype.signoutRedirectCallback=function(e){return this._signoutEnd(e||this._redirectNavigator.url).then((function(e){return n.Log.info("UserManager.signoutRedirectCallback: successful"),e}))},t.prototype.signoutPopup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="so:p";var t=e.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return e.post_logout_redirect_uri=t,e.display="popup",e.post_logout_redirect_uri&&(e.state=e.state||{}),this._signout(e,this._popupNavigator,{startUrl:t,popupWindowFeatures:e.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:e.popupWindowTarget||this.settings.popupWindowTarget}).then((function(){n.Log.info("UserManager.signoutPopup: successful")}))},t.prototype.signoutPopupCallback=function(e,t){return void 0===t&&"boolean"==typeof e&&(t=e,e=null),this._popupNavigator.callback(e,t,"?").then((function(){n.Log.info("UserManager.signoutPopupCallback: successful")}))},t.prototype._signout=function(e,t){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._signoutStart(e,t,i).then((function(e){return r._signoutEnd(e.url)}))},t.prototype._signoutStart=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,r=arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.prepare(i).then((function(r){return n.Log.debug("UserManager._signoutStart: got navigator window handle"),t._loadUser().then((function(o){return n.Log.debug("UserManager._signoutStart: loaded current user from storage"),(t._settings.revokeAccessTokenOnSignout?t._revokeInternal(o):Promise.resolve()).then((function(){var s=e.id_token_hint||o&&o.id_token;return s&&(n.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),e.id_token_hint=s),t.removeUser().then((function(){return n.Log.debug("UserManager._signoutStart: user removed, creating signout request"),t.createSignoutRequest(e).then((function(e){return n.Log.debug("UserManager._signoutStart: got signout request"),i.url=e.url,e.state&&(i.id=e.state.id),r.navigate(i)}))}))}))})).catch((function(e){throw r.close&&(n.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),r.close()),e}))}))},t.prototype._signoutEnd=function(e){return this.processSignoutResponse(e).then((function(e){return n.Log.debug("UserManager._signoutEnd: got signout response"),e}))},t.prototype.revokeAccessToken=function(){var e=this;return this._loadUser().then((function(t){return e._revokeInternal(t,!0).then((function(r){if(r)return n.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),t.access_token=null,t.refresh_token=null,t.expires_at=null,t.token_type=null,e.storeUser(t).then((function(){n.Log.debug("UserManager.revokeAccessToken: user stored"),e._events.load(t)}))}))})).then((function(){n.Log.info("UserManager.revokeAccessToken: access token revoked successfully")}))},t.prototype._revokeInternal=function(e,t){var r=this;if(e){var i=e.access_token,o=e.refresh_token;return this._revokeAccessTokenInternal(i,t).then((function(e){return r._revokeRefreshTokenInternal(o,t).then((function(t){return e||t||n.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),e||t}))}))}return Promise.resolve(!1)},t.prototype._revokeAccessTokenInternal=function(e,t){return!e||e.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(e,t).then((function(){return!0}))},t.prototype._revokeRefreshTokenInternal=function(e,t){return e?this._tokenRevocationClient.revoke(e,t,"refresh_token").then((function(){return!0})):Promise.resolve(!1)},t.prototype.startSilentRenew=function(){this._silentRenewService.start()},t.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},t.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then((function(e){return e?(n.Log.debug("UserManager._loadUser: user storageString loaded"),a.User.fromStorageString(e)):(n.Log.debug("UserManager._loadUser: no user storageString"),null)}))},t.prototype.storeUser=function(e){if(e){n.Log.debug("UserManager.storeUser: storing user");var t=e.toStorageString();return this._userStore.set(this._userStoreKey,t)}return n.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},i(t,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),t}(o.OidcClient)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserManagerSettings=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=(r(0),r(5)),o=r(40),s=r(41),a=r(43),u=r(6),l=r(1),c=r(8);function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.UserManagerSettings=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.popup_redirect_uri,n=r.popup_post_logout_redirect_uri,d=r.popupWindowFeatures,f=r.popupWindowTarget,g=r.silent_redirect_uri,m=r.silentRequestTimeout,v=r.automaticSilentRenew,y=void 0!==v&&v,_=r.validateSubOnSilentRenew,E=void 0!==_&&_,x=r.includeIdTokenInSilentRenew,b=void 0===x||x,S=r.monitorSession,w=void 0===S||S,T=r.monitorAnonymousSession,A=void 0!==T&&T,I=r.checkSessionInterval,L=void 0===I?2e3:I,C=r.stopCheckSessionOnError,N=void 0===C||C,R=r.query_status_response_type,P=r.revokeAccessTokenOnSignout,O=void 0!==P&&P,k=r.accessTokenExpiringNotificationTime,F=void 0===k?60:k,D=r.redirectNavigator,M=void 0===D?new o.RedirectNavigator:D,U=r.popupNavigator,B=void 0===U?new s.PopupNavigator:U,j=r.iframeNavigator,H=void 0===j?new a.IFrameNavigator:j,G=r.userStore,V=void 0===G?new u.WebStorageStateStore({store:l.Global.sessionStorage}):G;h(this,t);var q=p(this,e.call(this,arguments[0]));return q._popup_redirect_uri=i,q._popup_post_logout_redirect_uri=n,q._popupWindowFeatures=d,q._popupWindowTarget=f,q._silent_redirect_uri=g,q._silentRequestTimeout=m,q._automaticSilentRenew=y,q._validateSubOnSilentRenew=E,q._includeIdTokenInSilentRenew=b,q._accessTokenExpiringNotificationTime=F,q._monitorSession=w,q._monitorAnonymousSession=A,q._checkSessionInterval=L,q._stopCheckSessionOnError=N,R?q._query_status_response_type=R:arguments[0]&&arguments[0].response_type?q._query_status_response_type=c.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":q._query_status_response_type="id_token",q._revokeAccessTokenOnSignout=O,q._redirectNavigator=M,q._popupNavigator=B,q._iframeNavigator=H,q._userStore=V,q}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),t}(n.OidcClientSettings)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RedirectNavigator=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0);t.RedirectNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(){return Promise.resolve(this)},e.prototype.navigate=function(e){return e&&e.url?(e.useReplaceToNavigate?window.location.replace(e.url):window.location=e.url,Promise.resolve()):(n.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},i(e,[{key:"url",get:function(){return window.location.href}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopupNavigator=void 0;var i=r(0),n=r(42);t.PopupNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(e){var t=new n.PopupWindow(e);return Promise.resolve(t)},e.prototype.callback=function e(t,r,o){i.Log.debug("PopupNavigator.callback");try{return n.PopupWindow.notifyOpener(t,r,o),Promise.resolve()}catch(e){return Promise.reject(e)}},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopupWindow=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0),o=r(3);t.PopupWindow=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t}));var i=t.popupWindowTarget||"_blank",o=t.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;";this._popup=window.open("",i,o),this._popup&&(n.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return e.prototype.navigate=function(e){return this._popup?e&&e.url?(n.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=e.id,this._id&&(window["popupCallback_"+e.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=e.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},e.prototype._success=function(e){n.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(e)},e.prototype._error=function(e){n.Log.error("PopupWindow.error: ",e),this._cleanup(),this._reject(new Error(e))},e.prototype.close=function(){this._cleanup(!1)},e.prototype._cleanup=function(e){n.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!e&&this._popup.close(),this._popup=null},e.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},e.prototype._callback=function(e,t){this._cleanup(t),e?(n.Log.debug("PopupWindow.callback success"),this._success({url:e})):(n.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},e.notifyOpener=function(e,t,r){if(window.opener){if(e=e||window.location.href){var i=o.UrlUtility.parseUrlFragment(e,r);if(i.state){var s="popupCallback_"+i.state,a=window.opener[s];a?(n.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),a(e,t)):n.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else n.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else n.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},i(e,[{key:"promise",get:function(){return this._promise}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFrameNavigator=void 0;var i=r(0),n=r(44);t.IFrameNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(e){var t=new n.IFrameWindow(e);return Promise.resolve(t)},e.prototype.callback=function e(t){i.Log.debug("IFrameNavigator.callback");try{return n.IFrameWindow.notifyParent(t),Promise.resolve()}catch(e){return Promise.reject(e)}},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFrameWindow=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0);t.IFrameWindow=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t})),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return e.prototype.navigate=function(e){if(e&&e.url){var t=e.silentRequestTimeout||1e4;n.Log.debug("IFrameWindow.navigate: Using timeout of:",t),this._timer=window.setTimeout(this._timeout.bind(this),t),this._frame.src=e.url}else this._error("No url provided");return this.promise},e.prototype._success=function(e){this._cleanup(),n.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(e)},e.prototype._error=function(e){this._cleanup(),n.Log.error(e),this._reject(new Error(e))},e.prototype.close=function(){this._cleanup()},e.prototype._cleanup=function(){this._frame&&(n.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},e.prototype._timeout=function(){n.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},e.prototype._message=function(e){if(n.Log.debug("IFrameWindow.message"),this._timer&&e.origin===this._origin&&e.source===this._frame.contentWindow&&"string"==typeof e.data&&(e.data.startsWith("http://")||e.data.startsWith("https://"))){var t=e.data;t?this._success({url:t}):this._error("Invalid response from frame")}},e.notifyParent=function(e){n.Log.debug("IFrameWindow.notifyParent"),(e=e||window.location.href)&&(n.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(e,location.protocol+"//"+location.host))},i(e,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserManagerEvents=void 0;var i=r(0),n=r(16),o=r(17);t.UserManagerEvents=function(e){function t(r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,r));return i._userLoaded=new o.Event("User loaded"),i._userUnloaded=new o.Event("User unloaded"),i._silentRenewError=new o.Event("Silent renew error"),i._userSignedIn=new o.Event("User signed in"),i._userSignedOut=new o.Event("User signed out"),i._userSessionChanged=new o.Event("User session changed"),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.load=function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];i.Log.debug("UserManagerEvents.load"),e.prototype.load.call(this,t),r&&this._userLoaded.raise(t)},t.prototype.unload=function(){i.Log.debug("UserManagerEvents.unload"),e.prototype.unload.call(this),this._userUnloaded.raise()},t.prototype.addUserLoaded=function(e){this._userLoaded.addHandler(e)},t.prototype.removeUserLoaded=function(e){this._userLoaded.removeHandler(e)},t.prototype.addUserUnloaded=function(e){this._userUnloaded.addHandler(e)},t.prototype.removeUserUnloaded=function(e){this._userUnloaded.removeHandler(e)},t.prototype.addSilentRenewError=function(e){this._silentRenewError.addHandler(e)},t.prototype.removeSilentRenewError=function(e){this._silentRenewError.removeHandler(e)},t.prototype._raiseSilentRenewError=function(e){i.Log.debug("UserManagerEvents._raiseSilentRenewError",e.message),this._silentRenewError.raise(e)},t.prototype.addUserSignedIn=function(e){this._userSignedIn.addHandler(e)},t.prototype.removeUserSignedIn=function(e){this._userSignedIn.removeHandler(e)},t.prototype._raiseUserSignedIn=function(){i.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},t.prototype.addUserSignedOut=function(e){this._userSignedOut.addHandler(e)},t.prototype.removeUserSignedOut=function(e){this._userSignedOut.removeHandler(e)},t.prototype._raiseUserSignedOut=function(){i.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},t.prototype.addUserSessionChanged=function(e){this._userSessionChanged.addHandler(e)},t.prototype.removeUserSessionChanged=function(e){this._userSessionChanged.removeHandler(e)},t.prototype._raiseUserSessionChanged=function(){i.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},t}(n.AccessTokenEvents)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0),o=r(1),s=r(17);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.Timer=function(e){function t(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Global.timer,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;a(this,t);var s=u(this,e.call(this,r));return s._timer=i,s._nowFunc=n||function(){return Date.now()/1e3},s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.init=function(e){e<=0&&(e=1),e=parseInt(e);var t=this.now+e;if(this.expiration===t&&this._timerHandle)n.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),n.Log.debug("Timer.init timer "+this._name+" for duration:",e),this._expiration=t;var r=5;e<r&&(r=e),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*r)}},t.prototype.cancel=function(){this._timerHandle&&(n.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},t.prototype._callback=function(){var t=this._expiration-this.now;n.Log.debug("Timer.callback; "+this._name+" timer expires in:",t),this._expiration<=this.now&&(this.cancel(),e.prototype.raise.call(this))},i(t,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),t}(s.Event)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SilentRenewService=void 0;var i=r(0);t.SilentRenewService=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userManager=t}return e.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then((function(e){})).catch((function(e){i.Log.error("SilentRenewService.start: Error from getUser:",e.message)})))},e.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},e.prototype._tokenExpiring=function(){var e=this;this._userManager.signinSilent().then((function(e){i.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")}),(function(t){i.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",t.message),e._userManager.events._raiseSilentRenewError(t)}))},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CordovaPopupNavigator=void 0;var i=r(21);t.CordovaPopupNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(e){var t=new i.CordovaPopupWindow(e);return Promise.resolve(t)},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CordovaIFrameNavigator=void 0;var i=r(21);t.CordovaIFrameNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(e){e.popupWindowFeatures="hidden=yes";var t=new i.CordovaPopupWindow(e);return Promise.resolve(t)},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Version="1.11.6"}])},e.exports=t()},2307:(e,t,r)=>{"use strict";r.r(t),r.d(t,{CordovaIFrameNavigator:()=>i.CordovaIFrameNavigator,CordovaPopupNavigator:()=>i.CordovaPopupNavigator,InMemoryWebStorage:()=>i.InMemoryWebStorage,Log:()=>i.Log,OidcClient:()=>i.OidcClient,SessionMonitor:()=>i.SessionMonitor,User:()=>i.User,UserManager:()=>i.UserManager,Version:()=>i.Version,WebStorageStateStore:()=>i.WebStorageStateStore,clearOidcPersistentStorage:()=>p,getBearerToken:()=>u,getDpopToken:()=>l,refresh:()=>c,registerClient:()=>o,removeOidcQueryParam:()=>h});var i=r(5644),n=r(6429);async function o(e,t){var r;if(!t.registrationEndpoint)throw new Error("Dynamic Registration could not be completed because the issuer has no registration endpoint.");if(!Array.isArray(t.idTokenSigningAlgValuesSupported))throw new Error("The OIDC issuer discovery profile is missing the 'id_token_signing_alg_values_supported' value, which is mandatory.");const i=(0,n.determineSigningAlg)(t.idTokenSigningAlgValuesSupported,n.PREFERRED_SIGNING_ALG),o={client_name:e.clientName,application_type:"web",redirect_uris:[null===(r=e.redirectUrl)||void 0===r?void 0:r.toString()],subject_type:"public",token_endpoint_auth_method:"client_secret_basic",id_token_signed_response_alg:i,grant_types:["authorization_code","refresh_token"]},s=await fetch(t.registrationEndpoint.toString(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(s.ok){const t=await s.json();return function(e,t){if(void 0===e.client_id)throw new Error(`Dynamic client registration failed: no client_id has been found on ${JSON.stringify(e)}`);if(t.redirectUrl&&(void 0===e.redirect_uris||e.redirect_uris[0]!==t.redirectUrl.toString()))throw new Error(`Dynamic client registration failed: the returned redirect URIs ${JSON.stringify(e.redirect_uris)} don't match the provided ${JSON.stringify([t.redirectUrl.toString()])}`)}(t,e),{clientId:t.client_id,clientSecret:t.client_secret,idTokenSignedResponseAlg:t.id_token_signed_response_alg,clientType:"dynamic"}}throw 400===s.status&&function(e,t){var r,i,n,o;if("invalid_redirect_uri"===e.error)throw new Error(`Dynamic client registration failed: the provided redirect uri [${null===(r=t.redirectUrl)||void 0===r?void 0:r.toString()}] is invalid - ${null!==(i=e.error_description)&&void 0!==i?i:""}`);if("invalid_client_metadata"===e.error)throw new Error(`Dynamic client registration failed: the provided client metadata ${JSON.stringify(t)} is invalid - ${null!==(n=e.error_description)&&void 0!==n?n:""}`);throw new Error(`Dynamic client registration failed: ${e.error} - ${null!==(o=e.error_description)&&void 0!==o?o:""}`)}(await s.json(),e),new Error(`Dynamic client registration failed: the server returned ${s.status} ${s.statusText} - ${await s.text()}`)}function s(e){return void 0!==e.error_description&&"string"==typeof e.error_description}function a(e,t){if(void 0!==(r=e).error&&"string"==typeof r.error)throw new n.OidcProviderError(`Token endpoint returned error [${e.error}]${s(e)?`: ${e.error_description}`:""}${function(e){return void 0!==e.error_uri&&"string"==typeof e.error_uri}(e)?` (see ${e.error_uri})`:""}`,e.error,s(e)?e.error_description:void 0);var r;if(!function(e){return void 0!==e.access_token&&"string"==typeof e.access_token}(e))throw new n.InvalidResponseError(["access_token"]);if(!function(e){return void 0!==e.id_token&&"string"==typeof e.id_token}(e))throw new n.InvalidResponseError(["id_token"]);if(!function(e){return void 0!==e.token_type&&"string"==typeof e.token_type}(e))throw new n.InvalidResponseError(["token_type"]);if(!function(e){return void 0===e.expires_in||"number"==typeof e.expires_in}(e))throw new n.InvalidResponseError(["expires_in"]);if(!t&&"bearer"!==e.token_type.toLowerCase())throw new Error(`Invalid token endpoint response: requested a [Bearer] token, but got a 'token_type' value of [${e.token_type}].`);return e}async function u(e){let t;try{const r=new i.OidcClient({response_mode:"query",loadUserInfo:!1});if(t=await r.processSigninResponse(e),void 0===r.settings.metadata)throw new Error("Cannot retrieve issuer metadata from client information in storage.");if(void 0===r.settings.metadata.jwks_uri)throw new Error("Missing some issuer metadata from client information in storage: 'jwks_uri' is undefined");if(void 0===r.settings.metadata.issuer)throw new Error("Missing some issuer metadata from client information in storage: 'issuer' is undefined");if(void 0===r.settings.client_id)throw new Error("Missing some client information in storage: 'client_id' is undefined");const o=await(0,n.getWebidFromTokenPayload)(t.id_token,r.settings.metadata.jwks_uri,r.settings.metadata.issuer,r.settings.client_id);return{accessToken:t.access_token,idToken:t.id_token,webId:o,refreshToken:t.refresh_token}}catch(t){throw new Error(`Problem handling Auth Code Grant (Flow) redirect - URL [${e}]: ${t}`)}}async function l(e,t,r){return async function(e,t,r,i){!function(e,t){if(t.grantType&&(!e.grantTypesSupported||!e.grantTypesSupported.includes(t.grantType)))throw new Error(`The issuer [${e.issuer}] does not support the [${t.grantType}] grant`);if(!e.tokenEndpoint)throw new Error(`This issuer [${e.issuer}] does not have a token endpoint`)}(e,r);const o={"content-type":"application/x-www-form-urlencoded"};let s;i&&(s=await(0,n.generateDpopKeyPair)(),o.DPoP=await(0,n.createDpopHeader)(e.tokenEndpoint,"POST",s)),t.clientSecret&&(o.Authorization=`Basic ${btoa(`${t.clientId}:${t.clientSecret}`)}`);const u={grant_type:r.grantType,redirect_uri:r.redirectUrl,code:r.code,code_verifier:r.codeVerifier,client_id:t.clientId},l={method:"POST",headers:o,body:new URLSearchParams(u).toString()},c=await await fetch(e.tokenEndpoint,l),h=a(await c.json(),i),p=await(0,n.getWebidFromTokenPayload)(h.id_token,e.jwksUri,e.issuer,t.clientId);return{accessToken:h.access_token,idToken:h.id_token,refreshToken:(d=h,void 0!==d.refresh_token&&"string"==typeof d.refresh_token?h.refresh_token:void 0),webId:p,dpopKey:s,expiresIn:h.expires_in};var d}(e,t,r,!0)}async function c(e,t,r,i){if(void 0===r.clientId)throw new Error("No client ID available when trying to refresh the access token.");const o={grant_type:"refresh_token",refresh_token:e,scope:n.DEFAULT_SCOPES};let s={};void 0!==i&&(s={DPoP:await(0,n.createDpopHeader)(t.tokenEndpoint,"POST",i)});let u={};void 0!==r.clientSecret?u={Authorization:`Basic ${btoa(`${r.clientId}:${r.clientSecret}`)}`}:(e=>{try{return new URL(e),!0}catch(e){return!1}})(r.clientId)&&(o.client_id=r.clientId);const l=await fetch(t.tokenEndpoint,{method:"POST",body:new URLSearchParams(o).toString(),headers:{...s,...u,"Content-Type":"application/x-www-form-urlencoded"}});let c;try{c=await l.json()}catch(e){throw new Error(`The token endpoint of issuer ${t.issuer} returned a malformed response.`)}const h=a(c,void 0!==i),p=await(0,n.getWebidFromTokenPayload)(h.id_token,t.jwksUri,t.issuer,r.clientId);return{accessToken:h.access_token,idToken:h.id_token,refreshToken:"string"==typeof h.refresh_token?h.refresh_token:void 0,webId:p,dpopKey:i,expiresIn:h.expires_in}}function h(e){const t=new URL(e);return t.searchParams.delete("code"),t.searchParams.delete("state"),t.hash="",t.toString()}async function p(){const e=new i.OidcClient({response_mode:"query"});await e.clearStaleState(new i.WebStorageStateStore({}));const t=window.localStorage,r=[];for(let e=0;e<=t.length;e+=1){const i=t.key(e);i&&(i.match(/^oidc\..+$/)||i.match(/^solidClientAuthenticationUser:.+$/))&&r.push(i)}r.forEach((e=>t.removeItem(e)))}},7165:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(6429),n=r(2307),o=(e,t)=>window.fetch(e,t),s=()=>Promise.reject(new Error("headersAuthenticator is not initialized yet"));t.default=class{constructor(e,t,r,a,u){this.loginHandler=e,this.redirectHandler=t,this.logoutHandler=r,this.sessionInfoManager=a,this.issuerConfigFetcher=u,this.login=async(e,t)=>{var r,i;await this.sessionInfoManager.clear(e.sessionId);const o=(0,n.removeOidcQueryParam)(null!==(r=e.redirectUrl)&&void 0!==r?r:window.location.href);await this.loginHandler.handle({...e,redirectUrl:o,clientName:null!==(i=e.clientName)&&void 0!==i?i:e.clientId,eventEmitter:t})},this.fetch=o,this.headersAuthenticator=s,this.logout=async e=>{await this.logoutHandler.handle(e),this.fetch=o,this.headersAuthenticator=s},this.getSessionInfo=async e=>this.sessionInfoManager.get(e),this.getAllSessionInfo=async()=>this.sessionInfoManager.getAll(),this.validateCurrentSession=async e=>{const t=await this.sessionInfoManager.get(e);return void 0===t||void 0===t.clientAppId||void 0===t.issuer?null:t},this.handleIncomingRedirect=async(e,t)=>{try{const r=await this.redirectHandler.handle(e,t);return this.fetch=r.fetch.bind(window),this.headersAuthenticator=r.headersAuthenticator,this.cleanUrlAfterRedirect(e),{isLoggedIn:r.isLoggedIn,webId:r.webId,sessionId:r.sessionId,expirationDate:r.expirationDate}}catch(r){return this.cleanUrlAfterRedirect(e),void t.emit(i.EVENTS.ERROR,"redirect",r)}}}cleanUrlAfterRedirect(e){const t=new URL(e);t.searchParams.delete("state"),t.searchParams.delete("code"),t.searchParams.delete("id_token"),t.searchParams.delete("access_token"),t.searchParams.delete("error"),t.searchParams.delete("error_description"),window.history.replaceState(null,"",t.toString())}}},1820:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Session=t.silentlyAuthenticate=void 0;const i=r(536),n=r(6429),o=r(1390),s=r(7038),a=r(4621);async function u(e,t,r){var i;const n=await t.validateCurrentSession(e);return null!==n&&(window.localStorage.setItem(a.KEY_CURRENT_URL,window.location.href),await t.login({sessionId:e,prompt:"none",oidcIssuer:n.issuer,redirectUrl:n.redirectUrl,clientId:n.clientAppId,clientSecret:n.clientAppSecret,tokenType:null!==(i=n.tokenType)&&void 0!==i?i:"DPoP"},r),!0)}t.silentlyAuthenticate=u;class l extends i.EventEmitter{constructor(e={},t){super(),this.tokenRequestInProgress=!1,this.login=async e=>{var t;return await this.clientAuthentication.login({sessionId:this.info.sessionId,...e,tokenType:null!==(t=e.tokenType)&&void 0!==t?t:"DPoP"},this),new Promise((()=>{}))},this.fetch=async(e,t)=>this.clientAuthentication.fetch(e,t),this.authenticateHeaders=(e,t,r)=>this.clientAuthentication.headersAuthenticator(e,t,r),this.internalLogout=async e=>{window.localStorage.removeItem(a.KEY_CURRENT_SESSION),await this.clientAuthentication.logout(this.info.sessionId),this.info.isLoggedIn=!1,e&&this.emit(n.EVENTS.LOGOUT)},this.logout=async()=>this.internalLogout(!0),this.handleIncomingRedirect=async(e={})=>{var t;if(this.info.isLoggedIn)return this.info;if(this.tokenRequestInProgress)return;const r="string"==typeof e?{url:e}:e,i=null!==(t=r.url)&&void 0!==t?t:window.location.href;this.tokenRequestInProgress=!0;const o=await this.clientAuthentication.handleIncomingRedirect(i,this);if(function(e){return!!(null==e?void 0:e.isLoggedIn)}(o)){this.setSessionInfo(o);const e=window.localStorage.getItem(a.KEY_CURRENT_URL);null===e?this.emit(n.EVENTS.LOGIN):(window.localStorage.removeItem(a.KEY_CURRENT_URL),this.emit(n.EVENTS.SESSION_RESTORED,e))}else if(!0===r.restorePreviousSession){const e=window.localStorage.getItem(a.KEY_CURRENT_SESSION);if(null!==e&&await u(e,this.clientAuthentication,this))return new Promise((()=>{}))}return this.tokenRequestInProgress=!1,o},e.clientAuthentication?this.clientAuthentication=e.clientAuthentication:e.secureStorage&&e.insecureStorage?this.clientAuthentication=(0,s.getClientAuthenticationWithDependencies)({secureStorage:e.secureStorage,insecureStorage:e.insecureStorage}):this.clientAuthentication=(0,s.getClientAuthenticationWithDependencies)({}),e.sessionInfo?this.info={sessionId:e.sessionInfo.sessionId,isLoggedIn:!1,webId:e.sessionInfo.webId}:this.info={sessionId:null!=t?t:(0,o.v4)(),isLoggedIn:!1},this.on(n.EVENTS.LOGIN,(()=>window.localStorage.setItem(a.KEY_CURRENT_SESSION,this.info.sessionId))),this.on(n.EVENTS.SESSION_EXPIRED,(()=>this.internalLogout(!1))),this.on(n.EVENTS.ERROR,(()=>this.internalLogout(!1)))}onLogin(e){this.on(n.EVENTS.LOGIN,e)}onLogout(e){this.on(n.EVENTS.LOGOUT,e)}onError(e){this.on(n.EVENTS.ERROR,e)}onSessionRestore(e){this.on(n.EVENTS.SESSION_RESTORED,e)}onSessionExpiration(e){this.on(n.EVENTS.SESSION_EXPIRED,e)}setSessionInfo(e){this.info.isLoggedIn=e.isLoggedIn,this.info.webId=e.webId,this.info.sessionId=e.sessionId,this.info.expirationDate=e.expirationDate,this.on(n.EVENTS.SESSION_EXTENDED,(e=>{this.info.expirationDate=Date.now()+1e3*e}))}}t.Session=l},4621:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_CURRENT_URL=t.KEY_CURRENT_SESSION=void 0;const i=r(6429);t.KEY_CURRENT_SESSION=`${i.SOLID_CLIENT_AUTHN_KEY_PREFIX}currentSession`,t.KEY_CURRENT_URL=`${i.SOLID_CLIENT_AUTHN_KEY_PREFIX}currentUrl`},2305:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onSessionRestore=t.onLogout=t.onLogin=t.handleIncomingRedirect=t.logout=t.login=t.fetch=t.getDefaultSession=void 0;const i=r(1820);let n;function o(){return void 0===n&&(n=new i.Session),n}t.getDefaultSession=o,t.fetch=(...e)=>o().fetch(...e),t.login=(...e)=>o().login(...e),t.logout=(...e)=>o().logout(...e),t.handleIncomingRedirect=(...e)=>o().handleIncomingRedirect(...e),t.onLogin=(...e)=>o().onLogin(...e),t.onLogout=(...e)=>o().onLogout(...e),t.onSessionRestore=(...e)=>o().onSessionRestore(...e)},7038:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getClientAuthenticationWithDependencies=void 0;const n=r(6429),o=i(r(7054)),s=i(r(7165)),a=i(r(1959)),u=i(r(5821)),l=i(r(1279)),c=r(9154),h=i(r(2176)),p=r(7330),d=r(8891),f=i(r(9631)),g=i(r(5301)),m=i(r(7868)),v=i(r(7822)),y=r(1848),_=i(r(6943));t.getClientAuthenticationWithDependencies=function(e){const t=new n.InMemoryStorage,r=e.secureStorage||t,i=e.insecureStorage||new g.default,E=new o.default(r,i),x=new l.default(E),b=new v.default(E),S=new p.SessionInfoManager(E),w=new _.default(E,x,b),T=new a.default(E,new u.default(E,new m.default),x,b),A=new f.default([new y.ErrorOidcHandler,new d.AuthCodeRedirectHandler(E,S,x,b,w),new c.FallbackRedirectHandler]);return new s.default(T,A,new h.default(S),S,x)}},3705:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryStorage=t.ConfigurationError=t.NotImplementedError=t.getClientAuthenticationWithDependencies=t.Session=void 0;var o=r(1820);Object.defineProperty(t,"Session",{enumerable:!0,get:function(){return o.Session}});var s=r(7038);Object.defineProperty(t,"getClientAuthenticationWithDependencies",{enumerable:!0,get:function(){return s.getClientAuthenticationWithDependencies}}),n(r(2305),t),n(r(2917),t),n(r(3795),t);var a=r(6429);Object.defineProperty(t,"NotImplementedError",{enumerable:!0,get:function(){return a.NotImplementedError}}),Object.defineProperty(t,"ConfigurationError",{enumerable:!0,get:function(){return a.ConfigurationError}}),Object.defineProperty(t,"InMemoryStorage",{enumerable:!0,get:function(){return a.InMemoryStorage}})},9631:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(6429);class n extends i.AggregateHandler{constructor(e){super(e)}}t.default=n},7822:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(2307);t.default=class{constructor(e){this.storageUtility=e}async getClient(e,t){const[r,n]=await Promise.all([this.storageUtility.getForUser(e.sessionId,"clientId",{secure:!1}),this.storageUtility.getForUser(e.sessionId,"clientSecret",{secure:!1})]);if(r)return{clientId:r,clientSecret:n,clientType:"dynamic"};try{const r=await(0,i.registerClient)(e,t),n={clientId:r.clientId};return r.clientSecret&&(n.clientSecret=r.clientSecret),r.idTokenSignedResponseAlg&&(n.idTokenSignedResponseAlg=r.idTokenSignedResponseAlg),await this.storageUtility.setForUser(e.sessionId,n,{secure:!1}),r}catch(e){throw new Error(`Client registration failed: [${e}]`)}}}},1279:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WELL_KNOWN_OPENID_CONFIG=void 0;const i=r(6429),n=r(1759);t.WELL_KNOWN_OPENID_CONFIG=".well-known/openid-configuration";const o={issuer:{toKey:"issuer",convertToUrl:!0},authorization_endpoint:{toKey:"authorizationEndpoint",convertToUrl:!0},token_endpoint:{toKey:"tokenEndpoint",convertToUrl:!0},userinfo_endpoint:{toKey:"userinfoEndpoint",convertToUrl:!0},jwks_uri:{toKey:"jwksUri",convertToUrl:!0},registration_endpoint:{toKey:"registrationEndpoint",convertToUrl:!0},scopes_supported:{toKey:"scopesSupported"},response_types_supported:{toKey:"responseTypesSupported"},response_modes_supported:{toKey:"responseModesSupported"},grant_types_supported:{toKey:"grantTypesSupported"},acr_values_supported:{toKey:"acrValuesSupported"},subject_types_supported:{toKey:"subjectTypesSupported"},id_token_signing_alg_values_supported:{toKey:"idTokenSigningAlgValuesSupported"},id_token_encryption_alg_values_supported:{toKey:"idTokenEncryptionAlgValuesSupported"},id_token_encryption_enc_values_supported:{toKey:"idTokenEncryptionEncValuesSupported"},userinfo_signing_alg_values_supported:{toKey:"userinfoSigningAlgValuesSupported"},userinfo_encryption_alg_values_supported:{toKey:"userinfoEncryptionAlgValuesSupported"},userinfo_encryption_enc_values_supported:{toKey:"userinfoEncryptionEncValuesSupported"},request_object_signing_alg_values_supported:{toKey:"requestObjectSigningAlgValuesSupported"},request_object_encryption_alg_values_supported:{toKey:"requestObjectEncryptionAlgValuesSupported"},request_object_encryption_enc_values_supported:{toKey:"requestObjectEncryptionEncValuesSupported"},token_endpoint_auth_methods_supported:{toKey:"tokenEndpointAuthMethodsSupported"},token_endpoint_auth_signing_alg_values_supported:{toKey:"tokenEndpointAuthSigningAlgValuesSupported"},display_values_supported:{toKey:"displayValuesSupported"},claim_types_supported:{toKey:"claimTypesSupported"},claims_supported:{toKey:"claimsSupported"},service_documentation:{toKey:"serviceDocumentation"},claims_locales_supported:{toKey:"claimsLocalesSupported"},ui_locales_supported:{toKey:"uiLocalesSupported"},claims_parameter_supported:{toKey:"claimsParameterSupported"},request_parameter_supported:{toKey:"requestParameterSupported"},request_uri_parameter_supported:{toKey:"requestUriParameterSupported"},require_request_uri_registration:{toKey:"requireRequestUriRegistration"},op_policy_uri:{toKey:"opPolicyUri",convertToUrl:!0},op_tos_uri:{toKey:"opTosUri",convertToUrl:!0}};class s{constructor(e){this.storageUtility=e}static getLocalStorageKey(e){return`issuerConfig:${e}`}async fetchConfig(e){let r;const a=(0,n.appendToUrlPathname)(e,t.WELL_KNOWN_OPENID_CONFIG),u=await window.fetch(a);try{r=function(e){const t={};return Object.keys(e).forEach((r=>{o[r]&&(t[o[r].toKey]=e[r])})),Array.isArray(t.scopesSupported)||(t.scopesSupported=["openid"]),t}(await u.json())}catch(t){throw new i.ConfigurationError(`[${e.toString()}] has an invalid configuration: ${t.message}`)}return await this.storageUtility.set(s.getLocalStorageKey(e),JSON.stringify(r)),r}}t.default=s},1959:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(6429);function n(e){return"string"==typeof e.oidcIssuer}function o(e){return"string"==typeof e.redirectUrl}t.default=class{constructor(e,t,r,i){this.storageUtility=e,this.oidcHandler=t,this.issuerConfigFetcher=r,this.clientRegistrar=i}async canHandle(e){return n(e)&&o(e)}async handle(e){if(!n(e))throw new i.ConfigurationError(`OidcLoginHandler requires an OIDC issuer: missing property 'oidcIssuer' in ${JSON.stringify(e)}`);if(!o(e))throw new i.ConfigurationError(`OidcLoginHandler requires a redirect URL: missing property 'redirectUrl' in ${JSON.stringify(e)}`);const t=await this.issuerConfigFetcher.fetchConfig(e.oidcIssuer),r=await(0,i.handleRegistration)(e,t,this.storageUtility,this.clientRegistrar),s={issuer:t.issuer,dpop:"dpop"===e.tokenType.toLowerCase(),...e,issuerConfiguration:t,client:r};return this.oidcHandler.handle(s)}}},7868:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{redirect(e,t){t&&t.handleRedirect?t.handleRedirect(e):t&&t.redirectByReplacingState?window.history.replaceState({},"",e):window.location.href=e}}},8891:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthCodeRedirectHandler=void 0;const i=r(6429),n=r(2307);t.AuthCodeRedirectHandler=class{constructor(e,t,r,i,n){this.storageUtility=e,this.sessionInfoManager=t,this.issuerConfigFetcher=r,this.clientRegistrar=i,this.tokerRefresher=n}async canHandle(e){try{const t=new URL(e);return null!==t.searchParams.get("code")&&null!==t.searchParams.get("state")}catch(t){throw new Error(`[${e}] is not a valid URL, and cannot be used as a redirect URL: ${t}`)}}async handle(e,t){if(!await this.canHandle(e))throw new Error(`AuthCodeRedirectHandler cannot handle [${e}]: it is missing one of [code, state].`);const r=new URL(e),o=r.searchParams.get("state"),s=await this.storageUtility.getForUser(o,"sessionId",{errorIfNull:!0}),{issuerConfig:a,codeVerifier:u,redirectUrl:l,dpop:c}=await(0,i.loadOidcContextFromStorage)(s,this.storageUtility,this.issuerConfigFetcher);if(void 0===u)throw new Error(`The code verifier for session ${s} is missing from storage.`);if(void 0===l)throw new Error(`The redirect URL for session ${s} is missing from storage.`);const h=await this.clientRegistrar.getClient({sessionId:s},a);let p;const d=Date.now();let f;c?(p=await(0,n.getDpopToken)(a,h,{grantType:"authorization_code",code:r.searchParams.get("code"),codeVerifier:u,redirectUrl:l}),window.localStorage.removeItem(`oidc.${o}`)):p=await(0,n.getBearerToken)(r.toString()),void 0!==p.refreshToken&&(f={sessionId:s,refreshToken:p.refreshToken,tokenRefresher:this.tokerRefresher});const g=await(0,i.buildAuthenticatedFetch)(fetch,p.accessToken,{dpopKey:p.dpopKey,refreshOptions:f,eventEmitter:t,expiresIn:p.expiresIn}),m=await(0,i.buildHeadersAuthenticator)(p.accessToken,{dpopKey:p.dpopKey});await this.storageUtility.setForUser(s,{webId:p.webId,isLoggedIn:"true"},{secure:!0}),r.searchParams.delete("code"),await this.storageUtility.setForUser(s,{redirectUrl:r.toString()},{secure:!1});const v=await this.sessionInfoManager.get(s);if(!v)throw new Error(`Could not retrieve session: [${s}].`);return Object.assign(v,{fetch:g,headersAuthenticator:m,expirationDate:"number"==typeof p.expiresIn?d+1e3*p.expiresIn:null})}}},1848:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorOidcHandler=void 0;const i=r(6429),n=r(7330);t.ErrorOidcHandler=class{async canHandle(e){try{return new URL(e).searchParams.has("error")}catch(t){throw new Error(`[${e}] is not a valid URL, and cannot be used as a redirect URL: ${t}`)}}async handle(e,t){if(void 0!==t){const r=new URL(e),n=r.searchParams.get("error"),o=r.searchParams.get("error_description");t.emit(i.EVENTS.ERROR,n,o)}return(0,n.getUnauthenticatedSession)()}}},9154:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FallbackRedirectHandler=void 0;const i=r(7330);t.FallbackRedirectHandler=class{async canHandle(e){try{return new URL(e),!0}catch(t){throw new Error(`[${e}] is not a valid URL, and cannot be used as a redirect URL: ${t}`)}}async handle(e){return(0,i.getUnauthenticatedSession)()}}},5821:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(6429),n=r(2307);t.default=class{constructor(e,t){this.storageUtility=e,this.redirector=t}async canHandle(e){return!!(e.issuerConfiguration.grantTypesSupported&&e.issuerConfiguration.grantTypesSupported.indexOf("authorization_code")>-1)}async handle(e){var t;const r={authority:e.issuer.toString(),client_id:e.client.clientId,client_secret:e.client.clientSecret,redirect_uri:e.redirectUrl.toString(),post_logout_redirect_uri:e.redirectUrl.toString(),response_type:"code",scope:i.DEFAULT_SCOPES,filterProtocolClaims:!0,loadUserInfo:!1,code_verifier:!0,prompt:null!==(t=e.prompt)&&void 0!==t?t:"consent"},o=new n.OidcClient(r),{redirector:s}=this,a=this.storageUtility;try{const t=await o.createSigninRequest();await Promise.all([a.setForUser(t.state._id,{sessionId:e.sessionId}),a.setForUser(e.sessionId,{codeVerifier:t.state._code_verifier,issuer:e.issuer.toString(),redirectUrl:e.redirectUrl,dpop:e.dpop?"true":"false"})]),s.redirect(t.url.toString(),{handleRedirect:e.handleRedirect})}catch(e){console.error(e)}}}},6943:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(6429),n=r(2307);t.default=class{constructor(e,t,r){this.storageUtility=e,this.issuerConfigFetcher=t,this.clientRegistrar=r}async refresh(e,t,r,o){const s=await(0,i.loadOidcContextFromStorage)(e,this.storageUtility,this.issuerConfigFetcher),a=await this.clientRegistrar.getClient({sessionId:e},s.issuerConfig);if(void 0===t)throw new Error(`Session [${e}] has no refresh token to allow it to refresh its access token.`);if(s.dpop&&void 0===r)throw new Error(`For session [${e}], the key bound to the DPoP access token must be provided to refresh said access token.`);const u=await(0,n.refresh)(t,s.issuerConfig,a,r);return void 0!==u.refreshToken&&(null==o||o.emit(i.EVENTS.NEW_REFRESH_TOKEN,u.refreshToken),await this.storageUtility.setForUser(e,{refreshToken:u.refreshToken})),u}}},2176:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.sessionInfoManager=e}async canHandle(){return!0}async handle(e){await this.sessionInfoManager.clear(e)}}},7330:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionInfoManager=t.clear=t.getUnauthenticatedSession=void 0;const i=r(6429),n=r(1390),o=r(2307);async function s(e,t){await Promise.all([t.deleteAllUserData(e,{secure:!1}),t.deleteAllUserData(e,{secure:!0}),t.delete("clientKey",{secure:!1})]),await(0,o.clearOidcPersistentStorage)()}t.getUnauthenticatedSession=function(){return{isLoggedIn:!1,sessionId:(0,n.v4)(),fetch,headersAuthenticator:async(e,t,r)=>r}},t.clear=s,t.SessionInfoManager=class{constructor(e){this.storageUtility=e}update(e,t){throw new Error("Not Implemented")}async get(e){var t;const r=await this.storageUtility.getForUser(e,"isLoggedIn",{secure:!0}),n=await this.storageUtility.getForUser(e,"webId",{secure:!0}),o=await this.storageUtility.getForUser(e,"clientId",{secure:!1}),s=await this.storageUtility.getForUser(e,"clientSecret",{secure:!1}),a=await this.storageUtility.getForUser(e,"redirectUrl",{secure:!1}),u=await this.storageUtility.getForUser(e,"refreshToken",{secure:!0}),l=await this.storageUtility.getForUser(e,"issuer",{secure:!1}),c=null!==(t=await this.storageUtility.getForUser(e,"tokenType",{secure:!1}))&&void 0!==t?t:"DPoP";if(!(0,i.isSupportedTokenType)(c))throw new Error(`Tokens of type [${c}] are not supported.`);if(void 0!==o||void 0!==r||void 0!==n||void 0!==u)return{sessionId:e,webId:n,isLoggedIn:"true"===r,redirectUrl:a,refreshToken:u,issuer:l,clientAppId:o,clientAppSecret:s,tokenType:c}}async getAll(){throw new Error("Not implemented")}async clear(e){return s(e,this.storageUtility)}async register(e){throw new Error("Not implemented")}async getRegisteredSessionIdAll(){throw new Error("Not implemented")}async clearAll(){throw new Error("Not implemented")}}},5301:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{get storage(){return window.localStorage}async get(e){return this.storage.getItem(e)||void 0}async set(e,t){this.storage.setItem(e,t)}async delete(e){this.storage.removeItem(e)}}},7054:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(6429);class n extends i.StorageUtility{constructor(e,t){super(e,t)}}t.default=n},1759:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appendToUrlPathname=void 0,t.appendToUrlPathname=function(e,t){const r=new URL(e),i=r.pathname;return r.pathname=`${i}${i.endsWith("/")?"":"/"}${t.startsWith("/")?t.substring(1):t}`,r.toString()}},2917:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WindowToWorkerHandler=void 0;const i=r(3795);t.WindowToWorkerHandler=class{constructor(e,t,r){this.windowSelf=e,this.worker=t,this.session=r}onmessage(e){if("object"==typeof e.data&&i.WorkerToWindowHandler.MESSAGE_KEY_POST in e.data){const t=e.data[i.WorkerToWindowHandler.MESSAGE_KEY_POST];return this.session.authenticateHeaders(t.resource,t.method,new Headers(t.headersUnauthenticatedRaw)).then((e=>{const r={messageId:t.messageId,headersAuthenticatedRaw:[...e.entries()]};this.worker.postMessage({[i.WorkerToWindowHandler.MESSAGE_KEY_RESPONSE]:r})})).catch((e=>{const r={messageId:t.messageId,errorMessage:e.message};this.worker.postMessage({[i.WorkerToWindowHandler.MESSAGE_KEY_RESPONSE]:r})})),!0}return!1}}},3795:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerToWindowHandler=void 0;class i{constructor(e){this.workerSelf=e,this.messageCounter=0,this.messageReceiveCallbackBuffer={}}onmessage(e){if("object"==typeof e.data&&i.MESSAGE_KEY_RESPONSE in e.data){const t=e.data[i.MESSAGE_KEY_RESPONSE],r=this.messageReceiveCallbackBuffer[t.messageId];if(!r)throw new Error(`Received unexpected authenticated headers response for id ${t.messageId}`);return t.errorMessage?r.reject(new Error(t.errorMessage)):r.resolve(new Headers(t.headersAuthenticatedRaw)),delete this.messageReceiveCallbackBuffer[t.messageId],!0}return!1}buildAuthenticatedFetch(){return async(e,t)=>{const i="string"==typeof e,n=e instanceof URL,o=await this.authenticateHeaders(i?e:n?e.toString():e.url,(i||n?null==t?void 0:t.method:e.method)||"get",new Headers(n||i||!e.headers?null==t?void 0:t.headers:e.headers));return"string"!=typeof e?r.g.fetch({...e,headers:o},{...t}):r.g.fetch(e,{...t,headers:o})}}authenticateHeaders(e,t,r){const n=this.messageCounter,o=new Promise(((e,t)=>{this.messageReceiveCallbackBuffer[n]={resolve:e,reject:t}}));this.messageCounter+=1;const s={messageId:n,resource:e,method:t,headersUnauthenticatedRaw:[...r.entries()]};return this.workerSelf.postMessage({[i.MESSAGE_KEY_POST]:s}),o}}t.WorkerToWindowHandler=i,i.MESSAGE_KEY_POST="solid-client-authn-js.requestUnauthenticated",i.MESSAGE_KEY_RESPONSE="solid-client-authn-js.headersAuthenticated"},4972:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateDpopKeyPair=t.createDpopHeader=void 0;const i=r(3848),n=r(1390),o=r(2530);function s(e){const t=new URL(e);return new URL(t.pathname,t.origin).toString()}t.createDpopHeader=async function(e,t,r){return new i.SignJWT({htu:s(e),htm:t.toUpperCase(),jti:(0,n.v4)()}).setProtectedHeader({alg:o.PREFERRED_SIGNING_ALG[0],jwk:r.publicKey,typ:"dpop+jwt"}).setIssuedAt().sign(r.privateKey,{})},t.generateDpopKeyPair=async function(){const{privateKey:e,publicKey:t}=await(0,i.generateKeyPair)(o.PREFERRED_SIGNING_ALG[0]),r={privateKey:e,publicKey:await(0,i.exportJWK)(t)};return[r.publicKey.alg]=o.PREFERRED_SIGNING_ALG,r}},5445:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildHeadersAuthenticator=t.buildAuthenticatedFetch=t.DEFAULT_EXPIRATION_TIME_SECONDS=void 0;const i=r(9640),n=r(2530),o=r(4972),s=r(2911),a=r(5321);async function u(e,t,r,n){if(void 0!==r)return async function(e,t,r,n){var s;const a=new i.Headers(null==n?void 0:n.headers);return a.set("Authorization",`DPoP ${t}`),a.set("DPoP",await(0,o.createDpopHeader)(e,null!==(s=null==n?void 0:n.method)&&void 0!==s?s:"get",r)),{...n,headers:a}}(e,t,r,n);const s=new i.Headers(null==n?void 0:n.headers);return s.set("Authorization",`Bearer ${t}`),{...n,headers:s}}async function l(e,t,r,i,n){return e(r,await u(r.toString(),t,n,i))}t.DEFAULT_EXPIRATION_TIME_SECONDS=600;const c=e=>void 0!==e?e-n.REFRESH_BEFORE_EXPIRATION_SECONDS>0?e-n.REFRESH_BEFORE_EXPIRATION_SECONDS:e:t.DEFAULT_EXPIRATION_TIME_SECONDS;t.buildAuthenticatedFetch=async function(e,r,i){var o;let u,h=r;const p=null==i?void 0:i.refreshOptions;if(void 0!==p){const e=async()=>{var r,o,l,d;try{const{accessToken:o,refreshToken:s,expiresIn:a}=await async function(e,r,i){var o;const s=await e.tokenRefresher.refresh(e.sessionId,e.refreshToken,r);return null==i||i.emit(n.EVENTS.SESSION_EXTENDED,null!==(o=s.expiresIn)&&void 0!==o?o:t.DEFAULT_EXPIRATION_TIME_SECONDS),"string"==typeof s.refreshToken&&(null==i||i.emit(n.EVENTS.NEW_REFRESH_TOKEN,s.refreshToken)),{accessToken:s.accessToken,refreshToken:s.refreshToken,expiresIn:s.expiresIn}}(p,i.dpopKey,i.eventEmitter);h=o,void 0!==s&&(p.refreshToken=s),clearTimeout(u),u=setTimeout(e,1e3*c(a)),null===(r=i.eventEmitter)||void 0===r||r.emit(n.EVENTS.TIMEOUT_SET,u)}catch(e){e instanceof s.OidcProviderError&&(null===(o=null==i?void 0:i.eventEmitter)||void 0===o||o.emit(n.EVENTS.ERROR,e.error,e.errorDescription),null===(l=null==i?void 0:i.eventEmitter)||void 0===l||l.emit(n.EVENTS.SESSION_EXPIRED)),e instanceof a.InvalidResponseError&&e.missingFields.includes("access_token")&&(null===(d=null==i?void 0:i.eventEmitter)||void 0===d||d.emit(n.EVENTS.SESSION_EXPIRED))}};u=setTimeout(e,1e3*c(i.expiresIn)),null===(o=i.eventEmitter)||void 0===o||o.emit(n.EVENTS.TIMEOUT_SET,u)}else if(void 0!==i&&void 0!==i.eventEmitter){const e=setTimeout((()=>{i.eventEmitter.emit(n.EVENTS.SESSION_EXPIRED)}),1e3*c(i.expiresIn));i.eventEmitter.emit(n.EVENTS.TIMEOUT_SET,e)}return async(t,r)=>{let n=await l(e,h,t,r,null==i?void 0:i.dpopKey);const o=!n.ok&&(s=n.status,![401,403].includes(s));var s;return n.ok||o||n.url!==t&&void 0!==(null==i?void 0:i.dpopKey)&&(n=await l(e,h,n.url,r,i.dpopKey)),n}},t.buildHeadersAuthenticator=async function(e,t){return async(r,n,o)=>{const s=new i.Headers((await u(r.toString(),e,null==t?void 0:t.dpopKey,{method:n})).headers);return o.forEach(((e,t)=>{s.has(t)||s.set(t,e)})),s}}},2530:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_SCOPES=t.REFRESH_BEFORE_EXPIRATION_SECONDS=t.EVENTS=t.PREFERRED_SIGNING_ALG=t.SOLID_CLIENT_AUTHN_KEY_PREFIX=void 0,t.SOLID_CLIENT_AUTHN_KEY_PREFIX="solidClientAuthn:",t.PREFERRED_SIGNING_ALG=["ES256","RS256"],t.EVENTS={ERROR:"error",LOGIN:"login",LOGOUT:"logout",NEW_REFRESH_TOKEN:"newRefreshToken",SESSION_EXPIRED:"sessionExpired",SESSION_EXTENDED:"sessionExtended",SESSION_RESTORED:"sessionRestore",TIMEOUT_SET:"timeoutSet"},t.REFRESH_BEFORE_EXPIRATION_SECONDS=5,t.DEFAULT_SCOPES=["openid","offline_access","webid"].join(" ")},6514:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super(e)}}t.default=r},1105:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e,t,i=!0){super("string"==typeof e?r.substituteParams(e,t):r.appendErrorIri(r.lookupErrorIri(e,t),e,i))}httpResponse(e,t=!0){return this.message=r.appendHttpResponseDetails(this.message,e,t),this.httpErrorResponse=e,this}hasHttpResponse(){return void 0!==this.httpErrorResponse}getHttpResponse(){return this.httpErrorResponse}getHttpStatusCode(){if(void 0===this.httpErrorResponse)throw new r("This InruptError was not provided with a HTTP response - so we can't get its HTTP Status Code.");return this.httpErrorResponse.status}getHttpStatusText(){if(void 0===this.httpErrorResponse)throw new r("This InruptError was not provided with a HTTP response - so we can't get its HTTP Status Text!");return this.httpErrorResponse.statusText}static determineIfVocabTerm(e){return void 0!==e.strict}static lookupErrorIri(e,t){if(r.determineIfVocabTerm(e)){const r=void 0===t?e.message:e.messageParams(...t);return void 0===r?`Looked up error message IRI [${e.value}], but found no message value.`:r}return`Error message looked up at: [${e.value}]${void 0===t?"":`, with params [${t.toString()}]`}`}static appendHttpResponseDetails(e,t,r){return r&&void 0!==t?`${e} HTTP details: status code [${t.status}], status text [${t.statusText}].`:e}static appendErrorIri(e,t,r){return r?`${e} Error IRI: [${t.value}].`:e}static substituteParams(e,t){let r=e;if(void 0!==t){const i=e.split("{{").length-1;if(i!==t.length)throw new Error(`Setting parameters on message [${e}], but it requires [${i}] params and we received [${t.length}].`);for(let e=0;e<t.length;e+=1){const i=`{{${e}}}`;r=r.replace(i,t[e])}}return r}}t.default=r},5321:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidResponseError=void 0;class r extends Error{constructor(e){super(`Invalid response from OIDC provider: missing fields ${e}`),this.missingFields=e}}t.InvalidResponseError=r},513:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super(`[${e}] is not implemented`)}}t.default=r},2911:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OidcProviderError=void 0;class r extends Error{constructor(e,t,r){super(e),this.error=t,this.errorDescription=r}}t.OidcProviderError=r},6429:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StorageUtilityGetResponse=t.StorageUtilityMock=t.mockStorageUtility=t.mockStorage=t.buildHeadersAuthenticator=t.buildAuthenticatedFetch=t.generateDpopKeyPair=t.createDpopHeader=t.OidcProviderError=t.InvalidResponseError=t.NotImplementedError=t.ConfigurationError=t.InMemoryStorage=t.getSessionIdFromOauthState=t.saveSessionInfoToStorage=t.loadOidcContextFromStorage=t.StorageUtility=t.determineSigningAlg=t.handleRegistration=t.USER_SESSION_PREFIX=t.isSupportedTokenType=t.fetchJwks=t.getWebidFromTokenPayload=t.AggregateHandler=void 0,n(r(2530),t);var s=r(8273);Object.defineProperty(t,"AggregateHandler",{enumerable:!0,get:function(){return o(s).default}});var a=r(3309);Object.defineProperty(t,"getWebidFromTokenPayload",{enumerable:!0,get:function(){return a.getWebidFromTokenPayload}}),Object.defineProperty(t,"fetchJwks",{enumerable:!0,get:function(){return a.fetchJwks}});var u=r(7149);Object.defineProperty(t,"isSupportedTokenType",{enumerable:!0,get:function(){return u.isSupportedTokenType}});var l=r(7319);Object.defineProperty(t,"USER_SESSION_PREFIX",{enumerable:!0,get:function(){return l.USER_SESSION_PREFIX}});var c=r(6763);Object.defineProperty(t,"handleRegistration",{enumerable:!0,get:function(){return c.handleRegistration}}),Object.defineProperty(t,"determineSigningAlg",{enumerable:!0,get:function(){return c.determineSigningAlg}});var h=r(605);Object.defineProperty(t,"StorageUtility",{enumerable:!0,get:function(){return o(h).default}}),Object.defineProperty(t,"loadOidcContextFromStorage",{enumerable:!0,get:function(){return h.loadOidcContextFromStorage}}),Object.defineProperty(t,"saveSessionInfoToStorage",{enumerable:!0,get:function(){return h.saveSessionInfoToStorage}}),Object.defineProperty(t,"getSessionIdFromOauthState",{enumerable:!0,get:function(){return h.getSessionIdFromOauthState}});var p=r(4671);Object.defineProperty(t,"InMemoryStorage",{enumerable:!0,get:function(){return o(p).default}});var d=r(6514);Object.defineProperty(t,"ConfigurationError",{enumerable:!0,get:function(){return o(d).default}});var f=r(513);Object.defineProperty(t,"NotImplementedError",{enumerable:!0,get:function(){return o(f).default}});var g=r(5321);Object.defineProperty(t,"InvalidResponseError",{enumerable:!0,get:function(){return g.InvalidResponseError}});var m=r(2911);Object.defineProperty(t,"OidcProviderError",{enumerable:!0,get:function(){return m.OidcProviderError}});var v=r(4972);Object.defineProperty(t,"createDpopHeader",{enumerable:!0,get:function(){return v.createDpopHeader}}),Object.defineProperty(t,"generateDpopKeyPair",{enumerable:!0,get:function(){return v.generateDpopKeyPair}});var y=r(5445);Object.defineProperty(t,"buildAuthenticatedFetch",{enumerable:!0,get:function(){return y.buildAuthenticatedFetch}}),Object.defineProperty(t,"buildHeadersAuthenticator",{enumerable:!0,get:function(){return y.buildHeadersAuthenticator}});var _=r(1422);Object.defineProperty(t,"mockStorage",{enumerable:!0,get:function(){return _.mockStorage}}),Object.defineProperty(t,"mockStorageUtility",{enumerable:!0,get:function(){return _.mockStorageUtility}}),Object.defineProperty(t,"StorageUtilityMock",{enumerable:!0,get:function(){return _.StorageUtilityMock}}),Object.defineProperty(t,"StorageUtilityGetResponse",{enumerable:!0,get:function(){return _.StorageUtilityGetResponse}})},6763:(e,t)=>{"use strict";function r(e){try{return new URL(e),!0}catch(e){return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.handleRegistration=t.determineSigningAlg=void 0,t.determineSigningAlg=function(e,t){var r;return null!==(r=t.find((t=>e.includes(t))))&&void 0!==r?r:null},t.handleRegistration=async function(e,t,i,n){const o=function(e,t){return void 0===e.clientId||r(e.clientId)?t.scopesSupported.includes("webid")&&void 0!==e.clientId&&r(e.clientId)?"solid-oidc":"dynamic":"static"}(e,t);return"dynamic"===o?n.getClient({sessionId:e.sessionId,clientName:e.clientName,redirectUrl:e.redirectUrl},t):(await i.setForUser(e.sessionId,{clientId:e.clientId}),e.clientSecret&&await i.setForUser(e.sessionId,{clientSecret:e.clientSecret}),e.clientName&&await i.setForUser(e.sessionId,{clientName:e.clientName}),{clientId:e.clientId,clientSecret:e.clientSecret,clientName:e.clientName,clientType:o})}},7149:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSupportedTokenType=void 0,t.isSupportedTokenType=function(e){return"string"==typeof e&&["DPoP","Bearer"].includes(e)}},7319:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USER_SESSION_PREFIX=void 0,t.USER_SESSION_PREFIX="solidClientAuthenticationUser"},4671:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.map={}}async get(e){return this.map[e]||void 0}async set(e,t){this.map[e]=t}async delete(e){delete this.map[e]}}},605:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.saveSessionInfoToStorage=t.loadOidcContextFromStorage=t.getSessionIdFromOauthState=void 0;const n=r(3848),o=i(r(1105));t.getSessionIdFromOauthState=async function(e,t){return e.getForUser(t,"sessionId")},t.loadOidcContextFromStorage=async function(e,t,r){try{const[i,n,o,s]=await Promise.all([t.getForUser(e,"issuer",{errorIfNull:!0}),t.getForUser(e,"codeVerifier"),t.getForUser(e,"redirectUrl"),t.getForUser(e,"dpop",{errorIfNull:!0})]);return await t.deleteForUser(e,"codeVerifier"),{codeVerifier:n,redirectUrl:o,issuerConfig:await r.fetchConfig(i),dpop:"true"===s}}catch(t){throw new Error(`Failed to retrieve OIDC context from storage associated with session [${e}]: ${t}`)}},t.saveSessionInfoToStorage=async function(e,t,r,i,o,s,a){void 0!==o&&await e.setForUser(t,{refreshToken:o},{secure:s}),void 0!==r&&await e.setForUser(t,{webId:r},{secure:s}),void 0!==i&&await e.setForUser(t,{isLoggedIn:i},{secure:s}),void 0!==a&&await e.setForUser(t,{publicKey:JSON.stringify(a.publicKey),privateKey:JSON.stringify(await(0,n.exportJWK)(a.privateKey))},{secure:s})},t.default=class{constructor(e,t){this.secureStorage=e,this.insecureStorage=t}getKey(e){return`solidClientAuthenticationUser:${e}`}async getUserData(e,t){const r=await(t?this.secureStorage:this.insecureStorage).get(this.getKey(e));if(void 0===r)return{};try{return JSON.parse(r)}catch(i){throw new o.default(`Data for user [${e}] in [${t?"secure":"unsecure"}] storage is corrupted - expected valid JSON, but got: ${r}`)}}async setUserData(e,t,r){await(r?this.secureStorage:this.insecureStorage).set(this.getKey(e),JSON.stringify(t))}async get(e,t){const r=await((null==t?void 0:t.secure)?this.secureStorage:this.insecureStorage).get(e);if(void 0===r&&(null==t?void 0:t.errorIfNull))throw new o.default(`[${e}] is not stored`);return r}async set(e,t,r){return((null==r?void 0:r.secure)?this.secureStorage:this.insecureStorage).set(e,t)}async delete(e,t){return((null==t?void 0:t.secure)?this.secureStorage:this.insecureStorage).delete(e)}async getForUser(e,t,r){const i=await this.getUserData(e,null==r?void 0:r.secure);let n;if(i&&i[t]||(n=void 0),n=i[t],void 0===n&&(null==r?void 0:r.errorIfNull))throw new o.default(`Field [${t}] for user [${e}] is not stored`);return n||void 0}async setForUser(e,t,r){let i;try{i=await this.getUserData(e,null==r?void 0:r.secure)}catch(e){i={}}await this.setUserData(e,{...i,...t},null==r?void 0:r.secure)}async deleteForUser(e,t,r){const i=await this.getUserData(e,null==r?void 0:r.secure);delete i[t],await this.setUserData(e,i,null==r?void 0:r.secure)}async deleteAllUserData(e,t){await((null==t?void 0:t.secure)?this.secureStorage:this.insecureStorage).delete(this.getKey(e))}}},1422:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.mockStorageUtility=t.mockStorage=t.StorageUtilityMock=t.StorageUtilityGetResponse=void 0;const n=i(r(605));t.StorageUtilityGetResponse="getResponse",t.StorageUtilityMock={get:async(e,r)=>t.StorageUtilityGetResponse,set:async(e,t)=>{},delete:async e=>{},getForUser:async(e,r,i)=>t.StorageUtilityGetResponse,setForUser:async(e,t,r)=>{},deleteForUser:async(e,t,r)=>{},deleteAllUserData:async(e,t)=>{}},t.mockStorage=e=>{const t=e;return{get:async e=>{if(void 0!==t[e])return"string"==typeof t[e]?t[e]:JSON.stringify(t[e])},set:async(e,r)=>{t[e]=r},delete:async e=>{delete t[e]}}},t.mockStorageUtility=(e,r=!1)=>r?new n.default((0,t.mockStorage)(e),(0,t.mockStorage)({})):new n.default((0,t.mockStorage)({}),(0,t.mockStorage)(e))},8273:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(r(1105));t.default=class{constructor(e){this.handleables=e}async getProperHandler(e){const t=await Promise.all(this.handleables.map((t=>t.canHandle(...e))));for(let e=0;e<t.length;e+=1)if(t[e])return this.handleables[e];return null}async canHandle(...e){return null!==await this.getProperHandler(e)}async handle(...e){const t=await this.getProperHandler(e);if(t)return t.handle(...e);throw new n.default(`[${this.constructor.name}] cannot find a suitable handler for: ${e.map((e=>{try{return JSON.stringify(e)}catch(t){return e.toString()}})).join(", ")}`)}}},3309:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWebidFromTokenPayload=t.fetchJwks=void 0;const i=r(9640),n=r(3848);async function o(e,t){const r=await(0,i.fetch)(e);if(200!==r.status)throw new Error(`Could not fetch JWKS for [${t}] at [${e}]: ${r.status} ${r.statusText}`);let n;try{n=(await r.json()).keys[0]}catch(r){throw new Error(`Malformed JWKS for [${t}] at [${e}]: ${r.message}`)}return n}t.fetchJwks=o,t.getWebidFromTokenPayload=async function(e,t,r,i){const s=await o(t,r);let a;try{const{payload:t}=await(0,n.jwtVerify)(e,await(0,n.importJWK)(s),{issuer:r,audience:i});a=t}catch(e){throw new Error(`Token verification failed: ${e.stack}`)}if("string"==typeof a.webid)return a.webid;if("string"!=typeof a.sub)throw new Error(`The token ${JSON.stringify(a)} is invalid: it has no 'webid' claim and no 'sub' claim.`);try{return new URL(a.sub),a.sub}catch(e){throw new Error(`The token has no 'webid' claim, and its 'sub' claim of [${a.sub}] is invalid as a URL - error [${e}].`)}}},7269:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(5090),n=r(6345);t.default=function(e,t){void 0===t&&(t={});var r=0,o=0,s=0;return i.coordEach(e,(function(e){r+=e[0],o+=e[1],s++}),!0),n.point([r/s,o/s],t.properties)}},6345:(e,t)=>{"use strict";function r(e,t,r){void 0===r&&(r={});var i={type:"Feature"};return(0===r.id||r.id)&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.properties=t||{},i.geometry=e,i}function i(e,t,i){if(void 0===i&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!d(e[0])||!d(e[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:e},t,i)}function n(e,t,i){void 0===i&&(i={});for(var n=0,o=e;n<o.length;n++){var s=o[n];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:e},t,i)}function o(e,t,i){if(void 0===i&&(i={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:e},t,i)}function s(e,t){void 0===t&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function a(e,t,i){return void 0===i&&(i={}),r({type:"MultiLineString",coordinates:e},t,i)}function u(e,t,i){return void 0===i&&(i={}),r({type:"MultiPoint",coordinates:e},t,i)}function l(e,t,i){return void 0===i&&(i={}),r({type:"MultiPolygon",coordinates:e},t,i)}function c(e,r){void 0===r&&(r="kilometers");var i=t.factors[r];if(!i)throw new Error(r+" units is invalid");return e*i}function h(e,r){void 0===r&&(r="kilometers");var i=t.factors[r];if(!i)throw new Error(r+" units is invalid");return e/i}function p(e){return e%(2*Math.PI)*180/Math.PI}function d(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:1.0936*t.earthRadius},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1.0936133},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=r,t.geometry=function(e,t,r){switch(void 0===r&&(r={}),e){case"Point":return i(t).geometry;case"LineString":return o(t).geometry;case"Polygon":return n(t).geometry;case"MultiPoint":return u(t).geometry;case"MultiLineString":return a(t).geometry;case"MultiPolygon":return l(t).geometry;default:throw new Error(e+" is invalid")}},t.point=i,t.points=function(e,t,r){return void 0===r&&(r={}),s(e.map((function(e){return i(e,t)})),r)},t.polygon=n,t.polygons=function(e,t,r){return void 0===r&&(r={}),s(e.map((function(e){return n(e,t)})),r)},t.lineString=o,t.lineStrings=function(e,t,r){return void 0===r&&(r={}),s(e.map((function(e){return o(e,t)})),r)},t.featureCollection=s,t.multiLineString=a,t.multiPoint=u,t.multiPolygon=l,t.geometryCollection=function(e,t,i){return void 0===i&&(i={}),r({type:"GeometryCollection",geometries:e},t,i)},t.round=function(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r},t.radiansToLength=c,t.lengthToRadians=h,t.lengthToDegrees=function(e,t){return p(h(e,t))},t.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=p,t.degreesToRadians=function(e){return e%360*Math.PI/180},t.convertLength=function(e,t,r){if(void 0===t&&(t="kilometers"),void 0===r&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return c(h(e,t),r)},t.convertArea=function(e,r,i){if(void 0===r&&(r="meters"),void 0===i&&(i="kilometers"),!(e>=0))throw new Error("area must be a positive number");var n=t.areaFactors[r];if(!n)throw new Error("invalid original units");var o=t.areaFactors[i];if(!o)throw new Error("invalid final units");return e/n*o},t.isNumber=d,t.isObject=function(e){return!!e&&e.constructor===Object},t.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((function(e){if(!d(e))throw new Error("bbox must only contain numbers")}))},t.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}},5090:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(6345);function n(e,t,r){if(null!==e)for(var i,o,s,a,u,l,c,h,p=0,d=0,f=e.type,g="FeatureCollection"===f,m="Feature"===f,v=g?e.features.length:1,y=0;y<v;y++){u=(h=!!(c=g?e.features[y].geometry:m?e.geometry:e)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var _=0;_<u;_++){var E=0,x=0;if(null!==(a=h?c.geometries[_]:c)){l=a.coordinates;var b=a.type;switch(p=!r||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===t(l,d,y,E,x))return!1;d++,E++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===t(l[i],d,y,E,x))return!1;d++,"MultiPoint"===b&&E++}"LineString"===b&&E++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(o=0;o<l[i].length-p;o++){if(!1===t(l[i][o],d,y,E,x))return!1;d++}"MultiLineString"===b&&E++,"Polygon"===b&&x++}"Polygon"===b&&E++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(x=0,o=0;o<l[i].length;o++){for(s=0;s<l[i][o].length-p;s++){if(!1===t(l[i][o][s],d,y,E,x))return!1;d++}x++}E++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(!1===n(a.geometries[i],t,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&!1!==t(e.features[r].properties,r);r++);break;case"Feature":t(e.properties,0)}}function s(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var r=0;r<e.features.length&&!1!==t(e.features[r],r);r++);}function a(e,t){var r,i,n,o,s,a,u,l,c,h,p=0,d="FeatureCollection"===e.type,f="Feature"===e.type,g=d?e.features.length:1;for(r=0;r<g;r++){for(a=d?e.features[r].geometry:f?e.geometry:e,l=d?e.features[r].properties:f?e.properties:{},c=d?e.features[r].bbox:f?e.bbox:void 0,h=d?e.features[r].id:f?e.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,n=0;n<s;n++)if(null!==(o=u?a.geometries[n]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(o,p,l,c,h))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===t(o.geometries[i],p,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,p,l,c,h))return!1;p++}}function u(e,t){a(e,(function(e,r,n,o,s){var a,u=null===e?null:e.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==t(i.feature(e,n,{bbox:o,id:s}),r,0)&&void 0}switch(u){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<e.coordinates.length;l++){var c={type:a,coordinates:e.coordinates[l]};if(!1===t(i.feature(c,n),r,l))return!1}}))}function l(e,t){u(e,(function(e,r,o){var s=0;if(e.geometry){var a=e.geometry.type;if("Point"!==a&&"MultiPoint"!==a){var u,l=0,c=0,h=0;return!1!==n(e,(function(n,a,p,d,f){if(void 0===u||r>l||d>c||f>h)return u=n,l=r,c=d,h=f,void(s=0);var g=i.lineString([u,n],e.properties);if(!1===t(g,r,o,f,s))return!1;s++,u=n}))&&void 0}}}))}function c(e,t){if(!e)throw new Error("geojson is required");u(e,(function(e,r,n){if(null!==e.geometry){var o=e.geometry.type,s=e.geometry.coordinates;switch(o){case"LineString":if(!1===t(e,r,n,0,0))return!1;break;case"Polygon":for(var a=0;a<s.length;a++)if(!1===t(i.lineString(s[a],e.properties),r,n,a))return!1}}}))}t.coordAll=function(e){var t=[];return n(e,(function(e){t.push(e)})),t},t.coordEach=n,t.coordReduce=function(e,t,r,i){var o=r;return n(e,(function(e,i,n,s,a){o=0===i&&void 0===r?e:t(o,e,i,n,s,a)}),i),o},t.featureEach=s,t.featureReduce=function(e,t,r){var i=r;return s(e,(function(e,n){i=0===n&&void 0===r?e:t(i,e,n)})),i},t.findPoint=function(e,t){if(t=t||{},!i.isObject(t))throw new Error("options is invalid");var r,n=t.featureIndex||0,o=t.multiFeatureIndex||0,s=t.geometryIndex||0,a=t.coordIndex||0,u=t.properties;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),u=u||e.features[n].properties,r=e.features[n].geometry;break;case"Feature":u=u||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":return i.point(l,u,t);case"MultiPoint":return o<0&&(o=l.length+o),i.point(l[o],u,t);case"LineString":return a<0&&(a=l.length+a),i.point(l[a],u,t);case"Polygon":return s<0&&(s=l.length+s),a<0&&(a=l[s].length+a),i.point(l[s][a],u,t);case"MultiLineString":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a),i.point(l[o][a],u,t);case"MultiPolygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),a<0&&(a=l[o][s].length-a),i.point(l[o][s][a],u,t)}throw new Error("geojson is invalid")},t.findSegment=function(e,t){if(t=t||{},!i.isObject(t))throw new Error("options is invalid");var r,n=t.featureIndex||0,o=t.multiFeatureIndex||0,s=t.geometryIndex||0,a=t.segmentIndex||0,u=t.properties;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),u=u||e.features[n].properties,r=e.features[n].geometry;break;case"Feature":u=u||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),i.lineString([l[a],l[a+1]],u,t);case"Polygon":return s<0&&(s=l.length+s),a<0&&(a=l[s].length+a-1),i.lineString([l[s][a],l[s][a+1]],u,t);case"MultiLineString":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a-1),i.lineString([l[o][a],l[o][a+1]],u,t);case"MultiPolygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),a<0&&(a=l[o][s].length-a-1),i.lineString([l[o][s][a],l[o][s][a+1]],u,t)}throw new Error("geojson is invalid")},t.flattenEach=u,t.flattenReduce=function(e,t,r){var i=r;return u(e,(function(e,n,o){i=0===n&&0===o&&void 0===r?e:t(i,e,n,o)})),i},t.geomEach=a,t.geomReduce=function(e,t,r){var i=r;return a(e,(function(e,n,o,s,a){i=0===n&&void 0===r?e:t(i,e,n,o,s,a)})),i},t.lineEach=c,t.lineReduce=function(e,t,r){var i=r;return c(e,(function(e,n,o,s){i=0===n&&void 0===r?e:t(i,e,n,o,s)})),i},t.propEach=o,t.propReduce=function(e,t,r){var i=r;return o(e,(function(e,n){i=0===n&&void 0===r?e:t(i,e,n)})),i},t.segmentEach=l,t.segmentReduce=function(e,t,r){var i=r,n=!1;return l(e,(function(e,o,s,a,u){i=!1===n&&void 0===r?e:t(i,e,o,s,a,u),n=!0})),i}},255:(e,t)=>{"use strict";t.byteLength=function(e){var t=u(e),r=t[0],i=t[1];return 3*(r+i)/4-i},t.toByteArray=function(e){var t,r,o=u(e),s=o[0],a=o[1],l=new n(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),c=0,h=a>0?s-4:s;for(r=0;r<h;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return 2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,l[c++]=255&t),1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l},t.fromByteArray=function(e){for(var t,i=e.length,n=i%3,o=[],s=16383,a=0,u=i-n;a<u;a+=s)o.push(l(e,a,a+s>u?u:a+s));return 1===n?(t=e[i-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===n&&(t=(e[i-2]<<8)+e[i-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],i=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,i){for(var n,o,s=[],a=t;a<i;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=n)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},7871:(e,t,r)=>{"use strict";const i=r(255),n=r(9818),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50;const s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|g(e,t);let i=a(r);const n=i.write(e,t);return n!==r&&(i=i.slice(0,n)),i}(e,t);if(ArrayBuffer.isView(e))return function(e){if(J(e,Uint8Array)){const t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return p(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(J(e,ArrayBuffer)||e&&J(e.buffer,ArrayBuffer))return d(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(J(e,SharedArrayBuffer)||e&&J(e.buffer,SharedArrayBuffer)))return d(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return u.from(i,t,r);const n=function(e){if(u.isBuffer(e)){const t=0|f(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||Z(e.length)?a(0):p(e):"Buffer"===e.type&&Array.isArray(e.data)?p(e.data):void 0}(e);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return c(e),a(e<0?0:0|f(e))}function p(e){const t=e.length<0?0:0|f(e.length),r=a(t);for(let i=0;i<t;i+=1)r[i]=255&e[i];return r}function d(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(i,u.prototype),i}function f(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function g(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||J(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;let n=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(e).length;default:if(n)return i?-1:K(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,r);case"utf8":case"utf-8":return A(this,t,r);case"ascii":return L(this,t,r);case"latin1":case"binary":return C(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function v(e,t,r){const i=e[t];e[t]=e[r],e[r]=i}function y(e,t,r,i,n){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Z(r=+r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=u.from(t,i)),u.isBuffer(t))return 0===t.length?-1:_(e,t,r,i,n);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):_(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function _(e,t,r,i,n){let o,s=1,a=e.length,u=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(n){let i=-1;for(o=r;o<a;o++)if(l(e,o)===l(t,-1===i?0:o-i)){if(-1===i&&(i=o),o-i+1===u)return i*s}else-1!==i&&(o-=o-i),i=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let i=0;i<u;i++)if(l(e,o+i)!==l(t,i)){r=!1;break}if(r)return o}return-1}function E(e,t,r,i){r=Number(r)||0;const n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;const o=t.length;let s;for(i>o/2&&(i=o/2),s=0;s<i;++s){const i=parseInt(t.substr(2*s,2),16);if(Z(i))return s;e[r+s]=i}return s}function x(e,t,r,i){return $(K(t,e.length-r),e,r,i)}function b(e,t,r,i){return $(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function S(e,t,r,i){return $(z(t),e,r,i)}function w(e,t,r,i){return $(function(e,t){let r,i,n;const o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),i=r>>8,n=r%256,o.push(n),o.push(i);return o}(t,e.length-r),e,r,i)}function T(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function A(e,t,r){r=Math.min(e.length,r);const i=[];let n=t;for(;n<r;){const t=e[n];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(n+s<=r){let r,i,a,u;switch(s){case 1:t<128&&(o=t);break;case 2:r=e[n+1],128==(192&r)&&(u=(31&t)<<6|63&r,u>127&&(o=u));break;case 3:r=e[n+1],i=e[n+2],128==(192&r)&&128==(192&i)&&(u=(15&t)<<12|(63&r)<<6|63&i,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=e[n+1],i=e[n+2],a=e[n+3],128==(192&r)&&128==(192&i)&&128==(192&a)&&(u=(15&t)<<18|(63&r)<<12|(63&i)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|1023&o),i.push(o),n+=s}return function(e){const t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);let r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=I));return r}(i)}t.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return c(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},u.allocUnsafe=function(e){return h(e)},u.allocUnsafeSlow=function(e){return h(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(J(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),J(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,i=t.length;for(let n=0,o=Math.min(r,i);n<o;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const i=u.allocUnsafe(t);let n=0;for(r=0;r<e.length;++r){let t=e[r];if(J(t,Uint8Array))n+t.length>i.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(i,n)):Uint8Array.prototype.set.call(i,t,n);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(i,n)}n+=t.length}return i},u.byteLength=g,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)v(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):m.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(e,t,r,i,n){if(J(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(this===e)return 0;let o=(n>>>=0)-(i>>>=0),s=(r>>>=0)-(t>>>=0);const a=Math.min(o,s),l=this.slice(i,n),c=e.slice(t,r);for(let e=0;e<a;++e)if(l[e]!==c[e]){o=l[e],s=c[e];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},u.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}const n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return E(this,e,t,r);case"utf8":case"utf-8":return x(this,e,t,r);case"ascii":case"latin1":case"binary":return b(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const I=4096;function L(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function C(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function N(e,t,r){const i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);let n="";for(let i=t;i<r;++i)n+=Y[e[i]];return n}function R(e,t,r){const i=e.slice(t,r);let n="";for(let e=0;e<i.length-1;e+=2)n+=String.fromCharCode(i[e]+256*i[e+1]);return n}function P(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,r,i,n,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<o)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function k(e,t,r,i,n){G(t,i,n,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function F(e,t,r,i,n){G(t,i,n,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function D(e,t,r,i,n,o){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(e,t,r,i,o){return t=+t,r>>>=0,o||D(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function U(e,t,r,i,o){return t=+t,r>>>=0,o||D(e,0,r,8),n.write(e,t,r,i,52,8),r+8}u.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const i=this.subarray(e,t);return Object.setPrototypeOf(i,u.prototype),i},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let i=this[e],n=1,o=0;for(;++o<t&&(n*=256);)i+=this[e+o]*n;return i},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let i=this[e+--t],n=1;for(;t>0&&(n*=256);)i+=this[e+--t]*n;return i},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=X((function(e){V(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||q(e,this.length-8);const i=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,n=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(i)+(BigInt(n)<<BigInt(32))})),u.prototype.readBigUInt64BE=X((function(e){V(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||q(e,this.length-8);const i=t*2**24+65536*this[++e]+256*this[++e]+this[++e],n=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(i)<<BigInt(32))+BigInt(n)})),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let i=this[e],n=1,o=0;for(;++o<t&&(n*=256);)i+=this[e+o]*n;return n*=128,i>=n&&(i-=Math.pow(2,8*t)),i},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let i=t,n=1,o=this[e+--i];for(;i>0&&(n*=256);)o+=this[e+--i]*n;return n*=128,o>=n&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||P(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||P(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=X((function(e){V(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||q(e,this.length-8);const i=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=X((function(e){V(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||q(e,this.length-8);const i=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||P(e,4,this.length),n.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||P(e,4,this.length),n.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||P(e,8,this.length),n.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||P(e,8,this.length),n.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,i){e=+e,t>>>=0,r>>>=0,i||O(this,e,t,r,Math.pow(2,8*r)-1,0);let n=1,o=0;for(this[t]=255&e;++o<r&&(n*=256);)this[t+o]=e/n&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,i){e=+e,t>>>=0,r>>>=0,i||O(this,e,t,r,Math.pow(2,8*r)-1,0);let n=r-1,o=1;for(this[t+n]=255&e;--n>=0&&(o*=256);)this[t+n]=e/o&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=X((function(e,t=0){return k(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=X((function(e,t=0){return F(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*r-1);O(this,e,t,r,i-1,-i)}let n=0,o=1,s=0;for(this[t]=255&e;++n<r&&(o*=256);)e<0&&0===s&&0!==this[t+n-1]&&(s=1),this[t+n]=(e/o>>0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*r-1);O(this,e,t,r,i-1,-i)}let n=r-1,o=1,s=0;for(this[t+n]=255&e;--n>=0&&(o*=256);)e<0&&0===s&&0!==this[t+n+1]&&(s=1),this[t+n]=(e/o>>0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=X((function(e,t=0){return k(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=X((function(e,t=0){return F(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,r){return M(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return M(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,i){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);const n=i-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,i):Uint8Array.prototype.set.call(e,this.subarray(r,i),t),n},u.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){const t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let n;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{const o=u.isBuffer(e)?e:u.from(e,i),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<r-t;++n)this[n+t]=o[n%s]}return this};const B={};function j(e,t,r){B[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function H(e){let t="",r=e.length;const i="-"===e[0]?1:0;for(;r>=i+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function G(e,t,r,i,n,o){if(e>r||e<t){const i="bigint"==typeof t?"n":"";let n;throw n=o>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${8*(o+1)}${i}`:`>= -(2${i} ** ${8*(o+1)-1}${i}) and < 2 ** ${8*(o+1)-1}${i}`:`>= ${t}${i} and <= ${r}${i}`,new B.ERR_OUT_OF_RANGE("value",n,e)}!function(e,t,r){V(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||q(t,e.length-(r+1))}(i,n,o)}function V(e,t){if("number"!=typeof e)throw new B.ERR_INVALID_ARG_TYPE(t,"number",e)}function q(e,t,r){if(Math.floor(e)!==e)throw V(e,r),new B.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}j("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),j("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),j("ERR_OUT_OF_RANGE",(function(e,t,r){let i=`The value of "${e}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>2**32?n=H(String(r)):"bigint"==typeof r&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=H(n)),n+="n"),i+=` It must be ${t}. Received ${n}`,i}),RangeError);const W=/[^+/0-9A-Za-z-_]/g;function K(e,t){let r;t=t||1/0;const i=e.length;let n=null;const o=[];for(let s=0;s<i;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function z(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $(e,t,r,i){let n;for(n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Z(e){return e!=e}const Y=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const i=16*r;for(let n=0;n<16;++n)t[i+n]=e[r]+e[n]}return t}();function X(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},2784:(e,t,r)=>{!function(e){"use strict";e.defineOption("fullScreen",!1,(function(t,r,i){i==e.Init&&(i=!1),!i!=!r&&(r?function(e){var t=e.getWrapperElement();e.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:t.style.width,height:t.style.height},t.style.width="",t.style.height="auto",t.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",e.refresh()}(t):function(e){var t=e.getWrapperElement();t.className=t.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var r=e.state.fullScreenRestore;t.style.width=r.width,t.style.height=r.height,window.scrollTo(r.scrollLeft,r.scrollTop),e.refresh()}(t))}))}(r(7866))},6076:(e,t,r)=>{!function(e){var t=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),r=e.Pos,i={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function n(e,t,n,s){var a=e.getLineHandle(t.line),u=t.ch-1,l=u>=0&&i[a.text.charAt(u)]||i[a.text.charAt(++u)];if(!l)return null;var c=">"==l.charAt(1)?1:-1;if(n&&c>0!=(u==t.ch))return null;var h=e.getTokenTypeAt(r(t.line,u+1)),p=o(e,r(t.line,u+(c>0?1:0)),c,h||null,s);return null==p?null:{from:r(t.line,u),to:p&&p.pos,match:p&&p.ch==l.charAt(0),forward:c>0}}function o(e,t,n,o,s){for(var a=s&&s.maxScanLineLength||1e4,u=s&&s.maxScanLines||1e3,l=[],c=s&&s.bracketRegex?s.bracketRegex:/[(){}[\]]/,h=n>0?Math.min(t.line+u,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-u),p=t.line;p!=h;p+=n){var d=e.getLine(p);if(d){var f=n>0?0:d.length-1,g=n>0?d.length:-1;if(!(d.length>a))for(p==t.line&&(f=t.ch-(n<0?1:0));f!=g;f+=n){var m=d.charAt(f);if(c.test(m)&&(void 0===o||e.getTokenTypeAt(r(p,f+1))==o))if(">"==i[m].charAt(1)==n>0)l.push(m);else{if(!l.length)return{pos:r(p,f),ch:m};l.pop()}}}}return p-n!=(n>0?e.lastLine():e.firstLine())&&null}function s(e,i,o){for(var s=e.state.matchBrackets.maxHighlightLineLength||1e3,a=[],u=e.listSelections(),l=0;l<u.length;l++){var c=u[l].empty()&&n(e,u[l].head,!1,o);if(c&&e.getLine(c.from.line).length<=s){var h=c.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";a.push(e.markText(c.from,r(c.from.line,c.from.ch+1),{className:h})),c.to&&e.getLine(c.to.line).length<=s&&a.push(e.markText(c.to,r(c.to.line,c.to.ch+1),{className:h}))}}if(a.length){t&&e.state.focused&&e.focus();var p=function(){e.operation((function(){for(var e=0;e<a.length;e++)a[e].clear()}))};if(!i)return p;setTimeout(p,800)}}var a=null;function u(e){e.operation((function(){a&&(a(),a=null),a=s(e,!1,e.state.matchBrackets)}))}e.defineOption("matchBrackets",!1,(function(t,r,i){i&&i!=e.Init&&t.off("cursorActivity",u),r&&(t.state.matchBrackets="object"==typeof r?r:{},t.on("cursorActivity",u))})),e.defineExtension("matchBrackets",(function(){s(this,!0)})),e.defineExtension("findMatchingBracket",(function(e,t,r){return n(this,e,t,r)})),e.defineExtension("scanForBracket",(function(e,t,r,i){return o(this,e,t,r,i)}))}(r(7866))},3828:(e,t,r)=>{!function(e){"use strict";e.registerHelper("fold","brace",(function(t,r){var i,n=r.line,o=t.getLine(n);function s(s){for(var a=r.ch,u=0;;){var l=a<=0?-1:o.lastIndexOf(s,a-1);if(-1!=l){if(1==u&&l<r.ch)break;if(i=t.getTokenTypeAt(e.Pos(n,l+1)),!/^(comment|string)/.test(i))return l+1;a=l-1}else{if(1==u)break;u=1,a=o.length}}}var a="{",u="}",l=s("{");if(null==l&&(a="[",u="]",l=s("[")),null!=l){var c,h,p=1,d=t.lastLine();e:for(var f=n;f<=d;++f)for(var g=t.getLine(f),m=f==n?l:0;;){var v=g.indexOf(a,m),y=g.indexOf(u,m);if(v<0&&(v=g.length),y<0&&(y=g.length),(m=Math.min(v,y))==g.length)break;if(t.getTokenTypeAt(e.Pos(f,m+1))==i)if(m==v)++p;else if(!--p){c=f,h=m;break e}++m}if(null!=c&&(n!=c||h!=l))return{from:e.Pos(n,l),to:e.Pos(c,h)}}})),e.registerHelper("fold","import",(function(t,r){function i(r){if(r<t.firstLine()||r>t.lastLine())return null;var i=t.getTokenAt(e.Pos(r,1));if(/\S/.test(i.string)||(i=t.getTokenAt(e.Pos(r,i.end+1))),"keyword"!=i.type||"import"!=i.string)return null;for(var n=r,o=Math.min(t.lastLine(),r+10);n<=o;++n){var s=t.getLine(n).indexOf(";");if(-1!=s)return{startCh:i.end,end:e.Pos(n,s)}}}var n,o=r.line,s=i(o);if(!s||i(o-1)||(n=i(o-2))&&n.end.line==o-1)return null;for(var a=s.end;;){var u=i(a.line+1);if(null==u)break;a=u.end}return{from:t.clipPos(e.Pos(o,s.startCh+1)),to:a}})),e.registerHelper("fold","include",(function(t,r){function i(r){if(r<t.firstLine()||r>t.lastLine())return null;var i=t.getTokenAt(e.Pos(r,1));return/\S/.test(i.string)||(i=t.getTokenAt(e.Pos(r,i.end+1))),"meta"==i.type&&"#include"==i.string.slice(0,8)?i.start+8:void 0}var n=r.line,o=i(n);if(null==o||null!=i(n-1))return null;for(var s=n;null!=i(s+1);)++s;return{from:e.Pos(n,o+1),to:t.clipPos(e.Pos(s))}}))}(r(7866))},4007:(e,t,r)=>{!function(e){"use strict";function t(t,r,n,o){if(n&&n.call){var s=n;n=null}else s=i(t,n,"rangeFinder");"number"==typeof r&&(r=e.Pos(r,0));var a=i(t,n,"minFoldSize");function u(e){var i=s(t,r);if(!i||i.to.line-i.from.line<a)return null;for(var n=t.findMarksAt(i.from),u=0;u<n.length;++u)if(n[u].__isFold&&"fold"!==o){if(!e)return null;i.cleared=!0,n[u].clear()}return i}var l=u(!0);if(i(t,n,"scanUp"))for(;!l&&r.line>t.firstLine();)r=e.Pos(r.line-1,0),l=u(!1);if(l&&!l.cleared&&"unfold"!==o){var c=function(e,t){var r=i(e,t,"widget");if("string"==typeof r){var n=document.createTextNode(r);(r=document.createElement("span")).appendChild(n),r.className="CodeMirror-foldmarker"}return r}(t,n);e.on(c,"mousedown",(function(t){h.clear(),e.e_preventDefault(t)}));var h=t.markText(l.from,l.to,{replacedWith:c,clearOnEnter:i(t,n,"clearOnEnter"),__isFold:!0});h.on("clear",(function(r,i){e.signal(t,"unfold",t,r,i)})),e.signal(t,"fold",t,l.from,l.to)}}e.newFoldFunction=function(e,r){return function(i,n){t(i,n,{rangeFinder:e,widget:r})}},e.defineExtension("foldCode",(function(e,r,i){t(this,e,r,i)})),e.defineExtension("isFolded",(function(e){for(var t=this.findMarksAt(e),r=0;r<t.length;++r)if(t[r].__isFold)return!0})),e.commands.toggleFold=function(e){e.foldCode(e.getCursor())},e.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")},e.commands.unfold=function(e){e.foldCode(e.getCursor(),null,"unfold")},e.commands.foldAll=function(t){t.operation((function(){for(var r=t.firstLine(),i=t.lastLine();r<=i;r++)t.foldCode(e.Pos(r,0),null,"fold")}))},e.commands.unfoldAll=function(t){t.operation((function(){for(var r=t.firstLine(),i=t.lastLine();r<=i;r++)t.foldCode(e.Pos(r,0),null,"unfold")}))},e.registerHelper("fold","combine",(function(){var e=Array.prototype.slice.call(arguments,0);return function(t,r){for(var i=0;i<e.length;++i){var n=e[i](t,r);if(n)return n}}})),e.registerHelper("fold","auto",(function(e,t){for(var r=e.getHelpers(t,"fold"),i=0;i<r.length;i++){var n=r[i](e,t);if(n)return n}}));var r={rangeFinder:e.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1,clearOnEnter:!0};function i(e,t,i){if(t&&void 0!==t[i])return t[i];var n=e.options.foldOptions;return n&&void 0!==n[i]?n[i]:r[i]}e.defineOption("foldOptions",null),e.defineExtension("foldOption",(function(e,t){return i(this,e,t)}))}(r(7866))},9023:(e,t,r)=>{!function(e){"use strict";e.defineOption("foldGutter",!1,(function(t,i,n){var o;n&&n!=e.Init&&(t.clearGutter(t.state.foldGutter.options.gutter),t.state.foldGutter=null,t.off("gutterClick",a),t.off("change",u),t.off("viewportChange",l),t.off("fold",c),t.off("unfold",c),t.off("swapDoc",u)),i&&(t.state.foldGutter=new r((!0===(o=i)&&(o={}),null==o.gutter&&(o.gutter="CodeMirror-foldgutter"),null==o.indicatorOpen&&(o.indicatorOpen="CodeMirror-foldgutter-open"),null==o.indicatorFolded&&(o.indicatorFolded="CodeMirror-foldgutter-folded"),o)),s(t),t.on("gutterClick",a),t.on("change",u),t.on("viewportChange",l),t.on("fold",c),t.on("unfold",c),t.on("swapDoc",u))}));var t=e.Pos;function r(e){this.options=e,this.from=this.to=0}function i(e,r){for(var i=e.findMarks(t(r,0),t(r+1,0)),n=0;n<i.length;++n)if(i[n].__isFold&&i[n].find().from.line==r)return i[n]}function n(e){if("string"==typeof e){var t=document.createElement("div");return t.className=e+" CodeMirror-guttermarker-subtle",t}return e.cloneNode(!0)}function o(e,r,o){var s=e.state.foldGutter.options,a=r,u=e.foldOption(s,"minFoldSize"),l=e.foldOption(s,"rangeFinder");e.eachLine(r,o,(function(r){var o=null;if(i(e,a))o=n(s.indicatorFolded);else{var c=t(a,0),h=l&&l(e,c);h&&h.to.line-h.from.line>=u&&(o=n(s.indicatorOpen))}e.setGutterMarker(r,s.gutter,o),++a}))}function s(e){var t=e.getViewport(),r=e.state.foldGutter;r&&(e.operation((function(){o(e,t.from,t.to)})),r.from=t.from,r.to=t.to)}function a(e,r,n){var o=e.state.foldGutter;if(o){var s=o.options;if(n==s.gutter){var a=i(e,r);a?a.clear():e.foldCode(t(r,0),s.rangeFinder)}}}function u(e){var t=e.state.foldGutter;if(t){var r=t.options;t.from=t.to=0,clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout((function(){s(e)}),r.foldOnChangeTimeSpan||600)}}function l(e){var t=e.state.foldGutter;if(t){var r=t.options;clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout((function(){var r=e.getViewport();t.from==t.to||r.from-t.to>20||t.from-r.to>20?s(e):e.operation((function(){r.from<t.from&&(o(e,r.from,t.from),t.from=r.from),r.to>t.to&&(o(e,t.to,r.to),t.to=r.to)}))}),r.updateViewportTimeSpan||400)}}function c(e,t){var r=e.state.foldGutter;if(r){var i=t.line;i>=r.from&&i<r.to&&o(e,i,i+1)}}}(r(7866),r(4007))},3141:(e,t,r)=>{!function(e){"use strict";var t=e.Pos;var r="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",i=new RegExp("<(/?)(["+r+"]["+r+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*)","g");function n(e,t,r,i){this.line=t,this.ch=r,this.cm=e,this.text=e.getLine(t),this.min=i?i.from:e.firstLine(),this.max=i?i.to-1:e.lastLine()}function o(e,r){var i=e.cm.getTokenTypeAt(t(e.line,r));return i&&/\btag\b/.test(i)}function s(e){if(!(e.line>=e.max))return e.ch=0,e.text=e.cm.getLine(++e.line),!0}function a(e){if(!(e.line<=e.min))return e.text=e.cm.getLine(--e.line),e.ch=e.text.length,!0}function u(e){for(;;){var t=e.text.indexOf(">",e.ch);if(-1==t){if(s(e))continue;return}if(o(e,t+1)){var r=e.text.lastIndexOf("/",t),i=r>-1&&!/\S/.test(e.text.slice(r+1,t));return e.ch=t+1,i?"selfClose":"regular"}e.ch=t+1}}function l(e){for(;;){var t=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(-1==t){if(a(e))continue;return}if(o(e,t+1)){i.lastIndex=t,e.ch=t;var r=i.exec(e.text);if(r&&r.index==t)return r}else e.ch=t}}function c(e){for(;;){i.lastIndex=e.ch;var t=i.exec(e.text);if(!t){if(s(e))continue;return}if(o(e,t.index+1))return e.ch=t.index+t[0].length,t;e.ch=t.index+1}}function h(e){for(;;){var t=e.ch?e.text.lastIndexOf(">",e.ch-1):-1;if(-1==t){if(a(e))continue;return}if(o(e,t+1)){var r=e.text.lastIndexOf("/",t),i=r>-1&&!/\S/.test(e.text.slice(r+1,t));return e.ch=t+1,i?"selfClose":"regular"}e.ch=t}}function p(e,r){for(var i=[];;){var n,o=c(e),s=e.line,a=e.ch-(o?o[0].length:0);if(!o||!(n=u(e)))return;if("selfClose"!=n)if(o[1]){for(var l=i.length-1;l>=0;--l)if(i[l]==o[2]){i.length=l;break}if(l<0&&(!r||r==o[2]))return{tag:o[2],from:t(s,a),to:t(e.line,e.ch)}}else i.push(o[2])}}function d(e,r){for(var i=[];;){var n=h(e);if(!n)return;if("selfClose"!=n){var o=e.line,s=e.ch,a=l(e);if(!a)return;if(a[1])i.push(a[2]);else{for(var u=i.length-1;u>=0;--u)if(i[u]==a[2]){i.length=u;break}if(u<0&&(!r||r==a[2]))return{tag:a[2],from:t(e.line,e.ch),to:t(o,s)}}}else l(e)}}e.registerHelper("fold","xml",(function(e,r){for(var i=new n(e,r.line,0);;){var o,s=c(i);if(!s||i.line!=r.line||!(o=u(i)))return;if(!s[1]&&"selfClose"!=o){var a=t(i.line,i.ch),l=p(i,s[2]);return l&&{from:a,to:l.from}}}})),e.findMatchingTag=function(e,r,i){var o,s,a=new n(e,r.line,r.ch,i);if(-1!=a.text.indexOf(">")||-1!=a.text.indexOf("<")){var c=u(a),h=c&&t(a.line,a.ch),f=c&&l(a);if(c&&f&&(s=r,!(((o=a).line-s.line||o.ch-s.ch)>0))){var g={from:t(a.line,a.ch),to:h,tag:f[2]};return"selfClose"==c?{open:g,close:null,at:"open"}:f[1]?{open:d(a,f[2]),close:g,at:"close"}:{open:g,close:p(a=new n(e,h.line,h.ch,i),f[2]),at:"open"}}}},e.findEnclosingTag=function(e,t,r){for(var i=new n(e,t.line,t.ch,r);;){var o=d(i);if(!o)break;var s=p(new n(e,t.line,t.ch,r),o.tag);if(s)return{open:o,close:s}}},e.scanForClosingTag=function(e,t,r,i){return p(new n(e,t.line,t.ch,i?{from:0,to:i}:null),r)}}(r(7866))},6861:(e,t,r)=>{!function(e){"use strict";function t(e,t){this.cm=e,this.options=t,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length;var r=this;e.on("cursorActivity",this.activityFunc=function(){r.cursorActivity()})}e.showHint=function(e,t,r){if(!t)return e.showHint(r);r&&r.async&&(t.async=!0);var i={hint:t};if(r)for(var n in r)i[n]=r[n];return e.showHint(i)},e.defineExtension("showHint",(function(r){r=function(e,t,r){var i=e.options.hintOptions,n={};for(var o in u)n[o]=u[o];if(i)for(var o in i)void 0!==i[o]&&(n[o]=i[o]);if(r)for(var o in r)void 0!==r[o]&&(n[o]=r[o]);return n.hint.resolve&&(n.hint=n.hint.resolve(e,t)),n}(this,this.getCursor("start"),r);var i=this.listSelections();if(!(i.length>1)){if(this.somethingSelected()){if(!r.hint.supportsSelection)return;for(var n=0;n<i.length;n++)if(i[n].head.line!=i[n].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var o=this.state.completionActive=new t(this,r);o.options.hint&&(e.signal(this,"startCompletion",this),o.update(!0))}}));var r=window.requestAnimationFrame||function(e){return setTimeout(e,1e3/60)},i=window.cancelAnimationFrame||clearTimeout;function n(e){return"string"==typeof e?e:e.text}function o(e,t){for(;t&&t!=e;){if("LI"===t.nodeName.toUpperCase()&&t.parentNode==e)return t;t=t.parentNode}}function s(t,r){this.completion=t,this.data=r,this.picked=!1;var i=this,s=t.cm,a=this.hints=document.createElement("ul");a.className="CodeMirror-hints",this.selectedHint=r.selectedHint||0;for(var u=r.list,l=0;l<u.length;++l){var c=a.appendChild(document.createElement("li")),h=u[l],p="CodeMirror-hint"+(l!=this.selectedHint?"":" CodeMirror-hint-active");null!=h.className&&(p=h.className+" "+p),c.className=p,h.render?h.render(c,r,h):c.appendChild(document.createTextNode(h.displayText||n(h))),c.hintId=l}var d=s.cursorCoords(t.options.alignWithWord?r.from:null),f=d.left,g=d.bottom,m=!0;a.style.left=f+"px",a.style.top=g+"px";var v=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),y=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(t.options.container||document.body).appendChild(a);var _=a.getBoundingClientRect(),E=_.bottom-y,x=a.scrollHeight>a.clientHeight+1,b=s.getScrollInfo();if(E>0){var S=_.bottom-_.top;if(d.top-(d.bottom-_.top)-S>0)a.style.top=(g=d.top-S)+"px",m=!1;else if(S>y){a.style.height=y-5+"px",a.style.top=(g=d.bottom-_.top)+"px";var w=s.getCursor();r.from.ch!=w.ch&&(d=s.cursorCoords(w),a.style.left=(f=d.left)+"px",_=a.getBoundingClientRect())}}var T,A=_.right-v;if(A>0&&(_.right-_.left>v&&(a.style.width=v-5+"px",A-=_.right-_.left-v),a.style.left=(f=d.left-A)+"px"),x)for(var I=a.firstChild;I;I=I.nextSibling)I.style.paddingRight=s.display.nativeBarWidth+"px";return s.addKeyMap(this.keyMap=function(e,t){var r={Up:function(){t.moveFocus(-1)},Down:function(){t.moveFocus(1)},PageUp:function(){t.moveFocus(1-t.menuSize(),!0)},PageDown:function(){t.moveFocus(t.menuSize()-1,!0)},Home:function(){t.setFocus(0)},End:function(){t.setFocus(t.length-1)},Enter:t.pick,Tab:t.pick,Esc:t.close},i=e.options.customKeys,n=i?{}:r;function o(e,i){var o;o="string"!=typeof i?function(e){return i(e,t)}:r.hasOwnProperty(i)?r[i]:i,n[e]=o}if(i)for(var s in i)i.hasOwnProperty(s)&&o(s,i[s]);var a=e.options.extraKeys;if(a)for(var s in a)a.hasOwnProperty(s)&&o(s,a[s]);return n}(t,{moveFocus:function(e,t){i.changeActive(i.selectedHint+e,t)},setFocus:function(e){i.changeActive(e)},menuSize:function(){return i.screenAmount()},length:u.length,close:function(){t.close()},pick:function(){i.pick()},data:r})),t.options.closeOnUnfocus&&(s.on("blur",this.onBlur=function(){T=setTimeout((function(){t.close()}),100)}),s.on("focus",this.onFocus=function(){clearTimeout(T)})),s.on("scroll",this.onScroll=function(){var e=s.getScrollInfo(),r=s.getWrapperElement().getBoundingClientRect(),i=g+b.top-e.top,n=i-(window.pageYOffset||(document.documentElement||document.body).scrollTop);if(m||(n+=a.offsetHeight),n<=r.top||n>=r.bottom)return t.close();a.style.top=i+"px",a.style.left=f+b.left-e.left+"px"}),e.on(a,"dblclick",(function(e){var t=o(a,e.target||e.srcElement);t&&null!=t.hintId&&(i.changeActive(t.hintId),i.pick())})),e.on(a,"click",(function(e){var r=o(a,e.target||e.srcElement);r&&null!=r.hintId&&(i.changeActive(r.hintId),t.options.completeOnSingleClick&&i.pick())})),e.on(a,"mousedown",(function(){setTimeout((function(){s.focus()}),20)})),e.signal(r,"select",u[0],a.firstChild),!0}function a(e,t,r,i){if(e.async)e(t,i,r);else{var n=e(t,r);n&&n.then?n.then(i):i(n)}}t.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&e.signal(this.data,"close"),this.widget&&this.widget.close(),e.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(t,r){var i=t.list[r];i.hint?i.hint(this.cm,t,i):this.cm.replaceRange(n(i),i.from||t.from,i.to||t.to,"complete"),e.signal(t,"pick",i),this.close()},cursorActivity:function(){this.debounce&&(i(this.debounce),this.debounce=0);var e=this.cm.getCursor(),t=this.cm.getLine(e.line);if(e.line!=this.startPos.line||t.length-e.ch!=this.startLen-this.startPos.ch||e.ch<this.startPos.ch||this.cm.somethingSelected()||e.ch&&this.options.closeCharacters.test(t.charAt(e.ch-1)))this.close();else{var n=this;this.debounce=r((function(){n.update()})),this.widget&&this.widget.disable()}},update:function(e){if(null!=this.tick){var t=this,r=++this.tick;a(this.options.hint,this.cm,this.options,(function(i){t.tick==r&&t.finishUpdate(i,e)}))}},finishUpdate:function(t,r){this.data&&e.signal(this.data,"update");var i,n,o=this.widget&&this.widget.picked||r&&this.options.completeSingle;this.widget&&this.widget.close(),t&&this.data&&(i=this.data,n=t,e.cmpPos(n.from,i.from)>0&&i.to.ch-i.from.ch!=n.to.ch-n.from.ch)||(this.data=t,t&&t.list.length&&(o&&1==t.list.length?this.pick(t,0):(this.widget=new s(this,t),e.signal(t,"shown"))))}},s.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var e=this.completion.cm;this.completion.options.closeOnUnfocus&&(e.off("blur",this.onBlur),e.off("focus",this.onFocus)),e.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var e=this;this.keyMap={Enter:function(){e.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(t,r){if(t>=this.data.list.length?t=r?this.data.list.length-1:0:t<0&&(t=r?0:this.data.list.length-1),this.selectedHint!=t){var i=this.hints.childNodes[this.selectedHint];i.className=i.className.replace(" CodeMirror-hint-active",""),(i=this.hints.childNodes[this.selectedHint=t]).className+=" CodeMirror-hint-active",i.offsetTop<this.hints.scrollTop?this.hints.scrollTop=i.offsetTop-3:i.offsetTop+i.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=i.offsetTop+i.offsetHeight-this.hints.clientHeight+3),e.signal(this.data,"select",this.data.list[this.selectedHint],i)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}},e.registerHelper("hint","auto",{resolve:function(t,r){var i,n=t.getHelpers(r,"hint");if(n.length){var o=function(e,t,r){var i=function(e,t){if(!e.somethingSelected())return t;for(var r=[],i=0;i<t.length;i++)t[i].supportsSelection&&r.push(t[i]);return r}(e,n);!function n(o){if(o==i.length)return t(null);a(i[o],e,r,(function(e){e&&e.list.length>0?t(e):n(o+1)}))}(0)};return o.async=!0,o.supportsSelection=!0,o}return(i=t.getHelper(t.getCursor(),"hintWords"))?function(t){return e.hint.fromList(t,{words:i})}:e.hint.anyword?function(t,r){return e.hint.anyword(t,r)}:function(){}}}),e.registerHelper("hint","fromList",(function(t,r){var i=t.getCursor(),n=t.getTokenAt(i),o=e.Pos(i.line,n.end);if(n.string&&/\w/.test(n.string[n.string.length-1]))var s=n.string,a=e.Pos(i.line,n.start);else s="",a=o;for(var u=[],l=0;l<r.words.length;l++){var c=r.words[l];c.slice(0,s.length)==s&&u.push(c)}if(u.length)return{list:u,from:a,to:o}})),e.commands.autocomplete=e.showHint;var u={hint:e.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null};e.defineOption("hintOptions",null)}(r(7866))},9278:(e,t,r)=>{!function(e){"use strict";e.runMode=function(t,r,i,n){var o=e.getMode(e.defaults,r),s=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<9);if(i.appendChild){var a=n&&n.tabSize||e.defaults.tabSize,u=i,l=0;u.innerHTML="",i=function(e,t){if("\n"==e)return u.appendChild(document.createTextNode(s?"\r":e)),void(l=0);for(var r="",i=0;;){var n=e.indexOf("\t",i);if(-1==n){r+=e.slice(i),l+=e.length-i;break}l+=n-i,r+=e.slice(i,n);var o=a-l%a;l+=o;for(var c=0;c<o;++c)r+=" ";i=n+1}if(t){var h=u.appendChild(document.createElement("span"));h.className="cm-"+t.replace(/ +/g," cm-"),h.appendChild(document.createTextNode(r))}else u.appendChild(document.createTextNode(r))}}for(var c=e.splitLines(t),h=n&&n.state||e.startState(o),p=0,d=c.length;p<d;++p){p&&i("\n");var f=new e.StringStream(c[p]);for(!f.string&&o.blankLine&&o.blankLine(h);!f.eol();){var g=o.token(f,h);i(f.current(),g,p,f.start,h),f.start=f.pos}}}}(r(7866))},4750:(e,t,r)=>{!function(e){"use strict";var t=e.Pos;function r(e,r,n,o){if(this.atOccurrence=!1,this.doc=e,null==o&&"string"==typeof r&&(o=!1),n=n?e.clipPos(n):t(0,0),this.pos={from:n,to:n},"string"!=typeof r)r.global||(r=new RegExp(r.source,r.ignoreCase?"ig":"g")),this.matches=function(i,n){if(i){r.lastIndex=0;for(var o=e.getLine(n.line).slice(0,n.ch),s=0;;){r.lastIndex=s;var a=r.exec(o);if(!a)break;if(l=(u=a).index,(s=u.index+(u[0].length||1))==o.length)break}(c=u&&u[0].length||0)||(0==l&&0==o.length?u=void 0:l!=e.getLine(n.line).length&&c++)}else{r.lastIndex=n.ch,o=e.getLine(n.line);var u,l,c=(u=r.exec(o))&&u[0].length||0;(l=u&&u.index)+c==o.length||c||(c=1)}if(u&&c)return{from:t(n.line,l),to:t(n.line,l+c),match:u}};else{var s=r;o&&(r=r.toLowerCase());var a=o?function(e){return e.toLowerCase()}:function(e){return e},u=r.split("\n");if(1==u.length)r.length?this.matches=function(n,o){if(n){var u=e.getLine(o.line).slice(0,o.ch);if((c=(l=a(u)).lastIndexOf(r))>-1)return c=i(u,l,c),{from:t(o.line,c),to:t(o.line,c+s.length)}}else{var l,c;if(u=e.getLine(o.line).slice(o.ch),(c=(l=a(u)).indexOf(r))>-1)return c=i(u,l,c)+o.ch,{from:t(o.line,c),to:t(o.line,c+s.length)}}}:this.matches=function(){};else{var l=s.split("\n");this.matches=function(r,i){var n,o=u.length-1;if(r){if(i.line-(u.length-1)<e.firstLine())return;if(a(e.getLine(i.line).slice(0,l[o].length))!=u[u.length-1])return;for(var s=t(i.line,l[o].length),c=i.line-1,h=o-1;h>=1;--h,--c)if(u[h]!=a(e.getLine(c)))return;var p=(n=e.getLine(c)).length-l[0].length;if(a(n.slice(p))!=u[0])return;return{from:t(c,p),to:s}}if(!(i.line+(u.length-1)>e.lastLine())&&(p=(n=e.getLine(i.line)).length-l[0].length,a(n.slice(p))==u[0])){var d=t(i.line,p);for(c=i.line+1,h=1;h<o;++h,++c)if(u[h]!=a(e.getLine(c)))return;if(a(e.getLine(c).slice(0,l[o].length))==u[o])return{from:d,to:t(c,l[o].length)}}}}}}function i(e,t,r){if(e.length==t.length)return r;for(var i=Math.min(r,e.length);;){var n=e.slice(0,i).toLowerCase().length;if(n<r)++i;else{if(!(n>r))return i;--i}}}r.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){var r=this,i=this.doc.clipPos(e?this.pos.from:this.pos.to);function n(e){var i=t(e,0);return r.pos={from:i,to:i},r.atOccurrence=!1,!1}for(;;){if(this.pos=this.matches(e,i))return this.atOccurrence=!0,this.pos.match||!0;if(e){if(!i.line)return n(0);i=t(i.line-1,this.doc.getLine(i.line-1).length)}else{var o=this.doc.lineCount();if(i.line==o-1)return n(o);i=t(i.line+1,0)}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(r,i){if(this.atOccurrence){var n=e.splitLines(r);this.doc.replaceRange(n,this.pos.from,this.pos.to,i),this.pos.to=t(this.pos.from.line+n.length-1,n[n.length-1].length+(1==n.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",(function(e,t,i){return new r(this.doc,e,t,i)})),e.defineDocExtension("getSearchCursor",(function(e,t,i){return new r(this,e,t,i)})),e.defineExtension("selectMatches",(function(t,r){for(var i=[],n=this.getSearchCursor(t,this.getCursor("from"),r);n.findNext()&&!(e.cmpPos(n.to(),this.getCursor("to"))>0);)i.push({anchor:n.from(),head:n.to()});i.length&&this.setSelections(i,0)}))}(r(7866))},7866:e=>{e.exports=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,r=/gecko\/\d/i.test(e),i=/MSIE \d/.test(e),n=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),o=i||n,s=o&&(i?document.documentMode||6:n[1]),a=/WebKit\//.test(e),u=a&&/Qt\/\d+\.\d+/.test(e),l=/Chrome\//.test(e),c=/Opera\//.test(e),h=/Apple Computer/.test(navigator.vendor),p=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),d=/PhantomJS/.test(e),f=/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),g=f||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),m=f||/Mac/.test(t),v=/\bCrOS\b/.test(e),y=/win/i.test(t),_=c&&e.match(/Version\/(\d*\.\d*)/);_&&(_=Number(_[1])),_&&_>=15&&(c=!1,a=!0);var E=m&&(u||c&&(null==_||_<12.11)),x=r||o&&s>=9,b=!1,S=!1;function w(e,t){if(!(this instanceof w))return new w(e,t);this.options=t=t?bo(t):{},bo(Qr,t,!1),D(t);var r=t.value;"string"==typeof r&&(r=new vn(r,t.mode,null,t.lineSeparator)),this.doc=r;var i=new w.inputStyles[t.inputStyle](this),n=this.display=new T(e,r,i);n.wrapper.CodeMirror=this,P(this),N(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),t.autofocus&&!g&&n.input.focus(),j(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new co,keySeq:null,specialChars:null};var u=this;for(var l in o&&s<11&&setTimeout((function(){u.display.input.reset(!0)}),20),function(e){var t=e.display;zn(t.scroller,"mousedown",Zt(e,cr)),zn(t.scroller,"dblclick",o&&s<11?Zt(e,(function(t){if(!to(e,t)){var r=lr(e,t);if(r&&!pr(e,t)&&!ur(e.display,t)){Hn(t);var i=e.findWordAt(r);He(e.doc,i.anchor,i.head)}}})):function(t){to(e,t)||Hn(t)}),x||zn(t.scroller,"contextmenu",(function(t){Pr(e,t)}));var r,i={end:0};function n(){t.activeTouch&&(r=setTimeout((function(){t.activeTouch=null}),1e3),(i=t.activeTouch).end=+new Date)}function a(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function u(e,t){if(null==t.left)return!0;var r=t.left-e.left,i=t.top-e.top;return r*r+i*i>400}zn(t.scroller,"touchstart",(function(n){if(!to(e,n)&&!a(n)){clearTimeout(r);var o=+new Date;t.activeTouch={start:o,moved:!1,prev:o-i.end<=300?i:null},1==n.touches.length&&(t.activeTouch.left=n.touches[0].pageX,t.activeTouch.top=n.touches[0].pageY)}})),zn(t.scroller,"touchmove",(function(){t.activeTouch&&(t.activeTouch.moved=!0)})),zn(t.scroller,"touchend",(function(r){var i=t.activeTouch;if(i&&!ur(t,r)&&null!=i.left&&!i.moved&&new Date-i.start<300){var o,s=e.coordsChar(t.activeTouch,"page");o=!i.prev||u(i,i.prev)?new Oe(s,s):!i.prev.prev||u(i,i.prev.prev)?e.findWordAt(s):new Oe(de(s.line,0),Me(e.doc,de(s.line+1,0))),e.setSelection(o.anchor,o.head),e.focus(),Hn(r)}n()})),zn(t.scroller,"touchcancel",n),zn(t.scroller,"scroll",(function(){t.scroller.clientHeight&&(mr(e,t.scroller.scrollTop),vr(e,t.scroller.scrollLeft,!0),Yn(e,"scroll",e))})),zn(t.scroller,"mousewheel",(function(t){xr(e,t)})),zn(t.scroller,"DOMMouseScroll",(function(t){xr(e,t)})),zn(t.wrapper,"scroll",(function(){t.wrapper.scrollTop=t.wrapper.scrollLeft=0})),t.dragFunctions={enter:function(t){to(e,t)||qn(t)},over:function(t){to(e,t)||(function(e,t){var r=lr(e,t);if(r){var i=document.createDocumentFragment();rt(e,r,i),e.display.dragCursor||(e.display.dragCursor=Ro("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),Oo(e.display.dragCursor,i)}}(e,t),qn(t))},start:function(t){!function(e,t){if(o&&(!e.state.draggingText||+new Date-dr<100))qn(t);else if(!to(e,t)&&!ur(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!h)){var r=Ro("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",c&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),c&&r.parentNode.removeChild(r)}}(e,t)},drop:Zt(e,fr),leave:function(t){to(e,t)||gr(e)}};var l=t.input.getField();zn(l,"keyup",(function(t){Lr.call(e,t)})),zn(l,"keydown",Zt(e,Ir)),zn(l,"keypress",Zt(e,Cr)),zn(l,"focus",So(Nr,e)),zn(l,"blur",So(Rr,e))}(this),function(){Ho||(zn(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,jo(ar)}),100))})),zn(window,"blur",(function(){jo(Rr)})),Ho=!0);var e}(),Gt(this),this.curOp.forceUpdate=!0,xn(this,r),t.autofocus&&!g||u.hasFocus()?setTimeout(So(Nr,this),20):Rr(this),ei)ei.hasOwnProperty(l)&&ei[l](this,t[l],ri);W(this),t.finishInit&&t.finishInit(this);for(var p=0;p<si.length;++p)si[p](this);Vt(this),a&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(n.lineDiv).textRendering&&(n.lineDiv.style.textRendering="auto")}function T(e,t,i){var n=this;this.input=i,n.scrollbarFiller=Ro("div",null,"CodeMirror-scrollbar-filler"),n.scrollbarFiller.setAttribute("cm-not-content","true"),n.gutterFiller=Ro("div",null,"CodeMirror-gutter-filler"),n.gutterFiller.setAttribute("cm-not-content","true"),n.lineDiv=Ro("div",null,"CodeMirror-code"),n.selectionDiv=Ro("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=Ro("div",null,"CodeMirror-cursors"),n.measure=Ro("div",null,"CodeMirror-measure"),n.lineMeasure=Ro("div",null,"CodeMirror-measure"),n.lineSpace=Ro("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none"),n.mover=Ro("div",[Ro("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=Ro("div",[n.mover],"CodeMirror-sizer"),n.sizerWidth=null,n.heightForcer=Ro("div",null,null,"position: absolute; height: "+oo+"px; width: 1px;"),n.gutters=Ro("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=Ro("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=Ro("div",[n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),o&&s<8&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),a||r&&g||(n.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(n.wrapper):e(n.wrapper)),n.viewFrom=n.viewTo=t.first,n.reportedViewFrom=n.reportedViewTo=t.first,n.view=[],n.renderedView=null,n.externalMeasured=null,n.viewOffset=0,n.lastWrapHeight=n.lastWrapWidth=0,n.updateLineNumbers=null,n.nativeBarWidth=n.barHeight=n.barWidth=0,n.scrollbarsClipped=!1,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.alignWidgets=!1,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null,n.activeTouch=null,i.init(n)}function A(e){e.doc.mode=w.getMode(e.options,e.doc.modeOption),I(e)}function I(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.frontier=e.doc.first,ot(e,100),e.state.modeGen++,e.curOp&&tr(e)}function L(e){var t=Dt(e.display),r=e.options.lineWrapping,i=r&&Math.max(5,e.display.scroller.clientWidth/Mt(e.display)-3);return function(n){if(Gi(e.doc,n))return 0;var o=0;if(n.widgets)for(var s=0;s<n.widgets.length;s++)n.widgets[s].height&&(o+=n.widgets[s].height);return r?o+(Math.ceil(n.text.length/i)||1)*t:o+t}}function C(e){var t=e.doc,r=L(e);t.iter((function(e){var t=r(e);t!=e.height&&Tn(e,t)}))}function N(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Tt(e)}function R(e){P(e),tr(e),setTimeout((function(){q(e)}),20)}function P(e){var t=e.display.gutters,r=e.options.gutters;Po(t);for(var i=0;i<r.length;++i){var n=r[i],o=t.appendChild(Ro("div",null,"CodeMirror-gutter "+n));"CodeMirror-linenumbers"==n&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=i?"":"none",O(e)}function O(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function k(e){if(0==e.height)return 0;for(var t,r=e.text.length,i=e;t=Di(i);)i=(n=t.find(0,!0)).from.line,r+=n.from.ch-n.to.ch;for(i=e;t=Mi(i);){var n=t.find(0,!0);r-=i.text.length-n.from.ch,r+=(i=n.to.line).text.length-n.to.ch}return r}function F(e){var t=e.display,r=e.doc;t.maxLine=bn(r,r.first),t.maxLineLength=k(t.maxLine),t.maxLineChanged=!0,r.iter((function(e){var r=k(e);r>t.maxLineLength&&(t.maxLineLength=r,t.maxLine=e)}))}function D(e){var t=yo(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function M(e){var t=e.display,r=t.gutters.offsetWidth,i=Math.round(e.doc.height+lt(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?r:0,docHeight:i,scrollHeight:i+ht(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:r}}function U(e,t,r){this.cm=r;var i=this.vert=Ro("div",[Ro("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n=this.horiz=Ro("div",[Ro("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(i),e(n),zn(i,"scroll",(function(){i.clientHeight&&t(i.scrollTop,"vertical")})),zn(n,"scroll",(function(){n.clientWidth&&t(n.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,o&&s<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function B(){}function j(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&Mo(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new w.scrollbarModel[e.options.scrollbarStyle]((function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),zn(t,"mousedown",(function(){e.state.focused&&setTimeout((function(){e.display.input.focus()}),0)})),t.setAttribute("cm-not-content","true")}),(function(t,r){"horizontal"==r?vr(e,t):mr(e,t)}),e),e.display.scrollbars.addClass&&Uo(e.display.wrapper,e.display.scrollbars.addClass)}function H(e,t){t||(t=M(e));var r=e.display.barWidth,i=e.display.barHeight;G(e,t);for(var n=0;n<4&&r!=e.display.barWidth||i!=e.display.barHeight;n++)r!=e.display.barWidth&&e.options.lineWrapping&&Q(e),G(e,M(e)),r=e.display.barWidth,i=e.display.barHeight}function G(e,t){var r=e.display,i=r.scrollbars.update(t);r.sizer.style.paddingRight=(r.barWidth=i.right)+"px",r.sizer.style.paddingBottom=(r.barHeight=i.bottom)+"px",r.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(r.scrollbarFiller.style.display="block",r.scrollbarFiller.style.height=i.bottom+"px",r.scrollbarFiller.style.width=i.right+"px"):r.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(r.gutterFiller.style.display="block",r.gutterFiller.style.height=i.bottom+"px",r.gutterFiller.style.width=t.gutterWidth+"px"):r.gutterFiller.style.display=""}function V(e,t,r){var i=r&&null!=r.top?Math.max(0,r.top):e.scroller.scrollTop;i=Math.floor(i-ut(e));var n=r&&null!=r.bottom?r.bottom:i+e.wrapper.clientHeight,o=In(t,i),s=In(t,n);if(r&&r.ensure){var a=r.ensure.from.line,u=r.ensure.to.line;a<o?(o=a,s=In(t,Ln(bn(t,a))+e.wrapper.clientHeight)):Math.min(u,t.lastLine())>=s&&(o=In(t,Ln(bn(t,u))-e.wrapper.clientHeight),s=u)}return{from:o,to:Math.max(s,o+1)}}function q(e){var t=e.display,r=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=z(t)-t.scroller.scrollLeft+e.doc.scrollLeft,n=t.gutters.offsetWidth,o=i+"px",s=0;s<r.length;s++)if(!r[s].hidden){e.options.fixedGutter&&r[s].gutter&&(r[s].gutter.style.left=o);var a=r[s].alignable;if(a)for(var u=0;u<a.length;u++)a[u].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=i+n+"px")}}function W(e){if(!e.options.lineNumbers)return!1;var t=e.doc,r=K(e.options,t.first+t.size-1),i=e.display;if(r.length!=i.lineNumChars){var n=i.measure.appendChild(Ro("div",[Ro("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=n.firstChild.offsetWidth,s=n.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-s)+1,i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?r.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",O(e),!0}return!1}function K(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function z(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function $(e,t,r){var i=e.display;this.viewport=t,this.visible=V(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=pt(e),this.force=r,this.dims=te(e),this.events=[]}function J(e,t){var r=e.display,i=e.doc;if(t.editorIsHidden)return ir(e),!1;if(!t.force&&t.visible.from>=r.viewFrom&&t.visible.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&0==sr(e))return!1;W(e)&&(ir(e),t.dims=te(e));var n=i.first+i.size,o=Math.max(t.visible.from-e.options.viewportMargin,i.first),s=Math.min(n,t.visible.to+e.options.viewportMargin);r.viewFrom<o&&o-r.viewFrom<20&&(o=Math.max(i.first,r.viewFrom)),r.viewTo>s&&r.viewTo-s<20&&(s=Math.min(n,r.viewTo)),S&&(o=ji(e.doc,o),s=Hi(e.doc,s));var u=o!=r.viewFrom||s!=r.viewTo||r.lastWrapHeight!=t.wrapperHeight||r.lastWrapWidth!=t.wrapperWidth;(function(e,t,r){var i=e.display;0==i.view.length||t>=i.viewTo||r<=i.viewFrom?(i.view=er(e,t,r),i.viewFrom=t):(i.viewFrom>t?i.view=er(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(nr(e,t))),i.viewFrom=t,i.viewTo<r?i.view=i.view.concat(er(e,i.viewTo,r)):i.viewTo>r&&(i.view=i.view.slice(0,nr(e,r)))),i.viewTo=r})(e,o,s),r.viewOffset=Ln(bn(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var l=sr(e);if(!u&&0==l&&!t.force&&r.renderedView==r.view&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo))return!1;var c=Fo();return l>4&&(r.lineDiv.style.display="none"),function(e,t,r){var i=e.display,n=e.options.lineNumbers,o=i.lineDiv,s=o.firstChild;function u(t){var r=t.nextSibling;return a&&m&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),r}for(var l=i.view,c=i.viewFrom,h=0;h<l.length;h++){var p=l[h];if(p.hidden);else if(p.node&&p.node.parentNode==o){for(;s!=p.node;)s=u(s);var d=n&&null!=t&&t<=c&&p.lineNumber;p.changes&&(yo(p.changes,"gutter")>-1&&(d=!1),re(e,p,c,r)),d&&(Po(p.lineNumber),p.lineNumber.appendChild(document.createTextNode(K(e.options,c)))),s=p.node.nextSibling}else{var f=le(e,p,c,r);o.insertBefore(f,s)}c+=p.size}for(;s;)s=u(s)}(e,r.updateLineNumbers,t.dims),l>4&&(r.lineDiv.style.display=""),r.renderedView=r.view,c&&Fo()!=c&&c.offsetHeight&&c.focus(),Po(r.cursorDiv),Po(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,u&&(r.lastWrapHeight=t.wrapperHeight,r.lastWrapWidth=t.wrapperWidth,ot(e,400)),r.updateLineNumbers=null,!0}function Z(e,t){for(var r=t.viewport,i=!0;(i&&e.options.lineWrapping&&t.oldDisplayWidth!=pt(e)||(r&&null!=r.top&&(r={top:Math.min(e.doc.height+lt(e.display)-dt(e),r.top)}),t.visible=V(e.display,e.doc,r),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&J(e,t);i=!1){Q(e);var n=M(e);et(e),H(e,n),X(e,n)}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Y(e,t){var r=new $(e,t);if(J(e,r)){Q(e),Z(e,r);var i=M(e);et(e),H(e,i),X(e,i),r.finish()}}function X(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+ht(e)+"px"}function Q(e){for(var t=e.display,r=t.lineDiv.offsetTop,i=0;i<t.view.length;i++){var n,a=t.view[i];if(!a.hidden){if(o&&s<8){var u=a.node.offsetTop+a.node.offsetHeight;n=u-r,r=u}else{var l=a.node.getBoundingClientRect();n=l.bottom-l.top}var c=a.line.height-n;if(n<2&&(n=Dt(t)),(c>.001||c<-.001)&&(Tn(a.line,n),ee(a.line),a.rest))for(var h=0;h<a.rest.length;h++)ee(a.rest[h])}}}function ee(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.parentNode.offsetHeight}function te(e){for(var t=e.display,r={},i={},n=t.gutters.clientLeft,o=t.gutters.firstChild,s=0;o;o=o.nextSibling,++s)r[e.options.gutters[s]]=o.offsetLeft+o.clientLeft+n,i[e.options.gutters[s]]=o.clientWidth;return{fixedPos:z(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function re(e,t,r,i){for(var n=0;n<t.changes.length;n++){var o=t.changes[n];"text"==o?oe(e,t):"gutter"==o?ae(e,t,r,i):"class"==o?se(t):"widget"==o&&ue(e,t,i)}t.changes=null}function ie(e){return e.node==e.text&&(e.node=Ro("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),o&&s<8&&(e.node.style.zIndex=2)),e.node}function ne(e,t){var r=e.display.externalMeasured;return r&&r.line==t.line?(e.display.externalMeasured=null,t.measure=r.measure,r.built):an(e,t)}function oe(e,t){var r=t.text.className,i=ne(e,t);t.text==t.node&&(t.node=i.pre),t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,se(t)):r&&(t.text.className=r)}function se(e){(function(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var r=ie(e);e.background=r.insertBefore(Ro("div",null,t),r.firstChild)}})(e),e.line.wrapClass?ie(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function ae(e,t,r,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var n=ie(t);t.gutterBackground=Ro("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),n.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){n=ie(t);var s=t.gutter=Ro("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(e.display.input.setUneditable(s),n.insertBefore(s,t.text),t.line.gutterClass&&(s.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=s.appendChild(Ro("div",K(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var a=0;a<e.options.gutters.length;++a){var u=e.options.gutters[a],l=o.hasOwnProperty(u)&&o[u];l&&s.appendChild(Ro("div",[l],"CodeMirror-gutter-elt","left: "+i.gutterLeft[u]+"px; width: "+i.gutterWidth[u]+"px"))}}}function ue(e,t,r){t.alignable&&(t.alignable=null);for(var i=t.node.firstChild;i;i=n){var n=i.nextSibling;"CodeMirror-linewidget"==i.className&&t.node.removeChild(i)}ce(e,t,r)}function le(e,t,r,i){var n=ne(e,t);return t.text=t.node=n.pre,n.bgClass&&(t.bgClass=n.bgClass),n.textClass&&(t.textClass=n.textClass),se(t),ae(e,t,r,i),ce(e,t,i),t.node}function ce(e,t,r){if(he(e,t.line,t,r,!0),t.rest)for(var i=0;i<t.rest.length;i++)he(e,t.rest[i],t,r,!1)}function he(e,t,r,i,n){if(t.widgets)for(var o=ie(r),s=0,a=t.widgets;s<a.length;++s){var u=a[s],l=Ro("div",[u.node],"CodeMirror-linewidget");u.handleMouseEvents||l.setAttribute("cm-ignore-events","true"),pe(u,l,r,i),e.display.input.setUneditable(l),n&&u.above?o.insertBefore(l,r.gutter||r.text):o.appendChild(l),Qn(u,"redraw")}}function pe(e,t,r,i){if(e.noHScroll){(r.alignable||(r.alignable=[])).push(t);var n=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(n-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=n+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}U.prototype=bo({update:function(e){var t=e.scrollWidth>e.clientWidth+1,r=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;if(r){this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0";var n=e.viewHeight-(t?i:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+n)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=r?i+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(r?i:0);this.horiz.firstChild.style.width=e.scrollWidth-e.clientWidth+o+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:r?i:0,bottom:t?i:0}},setScrollLeft:function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz)},setScrollTop:function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert)},zeroWidthHack:function(){var e=m&&!p?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new co,this.disableVert=new co},enableZeroWidthBar:function(e,t){e.style.pointerEvents="auto",t.set(1e3,(function r(){var i=e.getBoundingClientRect();document.elementFromPoint(i.left+1,i.bottom-1)!=e?e.style.pointerEvents="none":t.set(1e3,r)}))},clear:function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)}},U.prototype),B.prototype=bo({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},B.prototype),w.scrollbarModel={native:U,null:B},$.prototype.signal=function(e,t){io(e,t)&&this.events.push(arguments)},$.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Yn.apply(null,this.events[e])};var de=w.Pos=function(e,t){if(!(this instanceof de))return new de(e,t);this.line=e,this.ch=t},fe=w.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch};function ge(e){return de(e.line,e.ch)}function me(e,t){return fe(e,t)<0?t:e}function ve(e,t){return fe(e,t)<0?e:t}function ye(e){e.state.focused||(e.display.input.focus(),Nr(e))}var _e=null;function Ee(e,t,r,i,n){var o=e.doc;e.display.shift=!1,i||(i=o.sel);var s=e.state.pasteIncoming||"paste"==n,a=o.splitLines(t),u=null;if(s&&i.ranges.length>1)if(_e&&_e.text.join("\n")==t){if(i.ranges.length%_e.text.length==0){u=[];for(var l=0;l<_e.text.length;l++)u.push(o.splitLines(_e.text[l]))}}else a.length==i.ranges.length&&(u=_o(a,(function(e){return[e]})));for(l=i.ranges.length-1;l>=0;l--){var c=i.ranges[l],h=c.from(),p=c.to();c.empty()&&(r&&r>0?h=de(h.line,h.ch-r):e.state.overwrite&&!s?p=de(p.line,Math.min(bn(o,p.line).text.length,p.ch+mo(a).length)):_e&&_e.lineWise&&_e.text.join("\n")==t&&(h=p=de(h.line,0)));var d=e.curOp.updateInput,f={from:h,to:p,text:u?u[l%u.length]:a,origin:n||(s?"paste":e.state.cutIncoming?"cut":"+input")};Ur(e.doc,f),Qn(e,"inputRead",e,f)}t&&!s&&be(e,t),Kr(e),e.curOp.updateInput=d,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function xe(e,t){var r=e.clipboardData&&e.clipboardData.getData("text/plain");if(r)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Jt(t,(function(){Ee(t,r,0,null,"paste")})),!0}function be(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var r=e.doc.sel,i=r.ranges.length-1;i>=0;i--){var n=r.ranges[i];if(!(n.head.ch>100||i&&r.ranges[i-1].head.line==n.head.line)){var o=e.getModeAt(n.head),s=!1;if(o.electricChars){for(var a=0;a<o.electricChars.length;a++)if(t.indexOf(o.electricChars.charAt(a))>-1){s=$r(e,n.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(bn(e.doc,n.head.line).text.slice(0,n.head.ch))&&(s=$r(e,n.head.line,"smart"));s&&Qn(e,"electricInput",e,n.head.line)}}}function Se(e){for(var t=[],r=[],i=0;i<e.doc.sel.ranges.length;i++){var n=e.doc.sel.ranges[i].head.line,o={anchor:de(n,0),head:de(n+1,0)};r.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:r}}function we(e){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck","false")}function Te(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new co,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null}function Ae(){var e=Ro("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=Ro("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return a?e.style.width="1000px":e.setAttribute("wrap","off"),f&&(e.style.border="1px solid black"),we(e),t}function Ie(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new co,this.gracePeriod=!1}function Le(e,t){var r=mt(e,t.line);if(!r||r.hidden)return null;var i=bn(e.doc,t.line),n=ft(r,i,t.line),o=Cn(i),s="left";o&&(s=as(o,t.ch)%2?"right":"left");var a=xt(n.map,t.ch,s);return a.offset="right"==a.collapse?a.end:a.start,a}function Ce(e,t){return t&&(e.bad=!0),e}function Ne(e,t,r){var i;if(t==e.display.lineDiv){if(!(i=e.display.lineDiv.childNodes[r]))return Ce(e.clipPos(de(e.display.viewTo-1)),!0);t=null,r=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var n=0;n<e.display.view.length;n++){var o=e.display.view[n];if(o.node==i)return Re(o,t,r)}}function Re(e,t,r){var i=e.text.firstChild,n=!1;if(!t||!ko(i,t))return Ce(de(An(e.line),0),!0);if(t==i&&(n=!0,t=i.childNodes[r],r=0,!t)){var o=e.rest?mo(e.rest):e.line;return Ce(de(An(o),o.text.length),n)}var s=3==t.nodeType?t:null,a=t;for(s||1!=t.childNodes.length||3!=t.firstChild.nodeType||(s=t.firstChild,r&&(r=s.nodeValue.length));a.parentNode!=i;)a=a.parentNode;var u=e.measure,l=u.maps;function c(t,r,i){for(var n=-1;n<(l?l.length:0);n++)for(var o=n<0?u.map:l[n],s=0;s<o.length;s+=3){var a=o[s+2];if(a==t||a==r){var c=An(n<0?e.line:e.rest[n]),h=o[s]+i;return(i<0||a!=t)&&(h=o[s+(i?1:0)]),de(c,h)}}}var h=c(s,a,r);if(h)return Ce(h,n);for(var p=a.nextSibling,d=s?s.nodeValue.length-r:0;p;p=p.nextSibling){if(h=c(p,p.firstChild,0))return Ce(de(h.line,h.ch-d),n);d+=p.textContent.length}var f=a.previousSibling;for(d=r;f;f=f.previousSibling){if(h=c(f,f.firstChild,-1))return Ce(de(h.line,h.ch+d),n);d+=p.textContent.length}}function Pe(e,t){this.ranges=e,this.primIndex=t}function Oe(e,t){this.anchor=e,this.head=t}function ke(e,t){var r=e[t];e.sort((function(e,t){return fe(e.from(),t.from())})),t=yo(e,r);for(var i=1;i<e.length;i++){var n=e[i],o=e[i-1];if(fe(o.to(),n.from())>=0){var s=ve(o.from(),n.from()),a=me(o.to(),n.to()),u=o.empty()?n.from()==n.head:o.from()==o.head;i<=t&&--t,e.splice(--i,2,new Oe(u?a:s,u?s:a))}}return new Pe(e,t)}function Fe(e,t){return new Pe([new Oe(e,t||e)],0)}function De(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Me(e,t){if(t.line<e.first)return de(e.first,0);var r=e.first+e.size-1;return t.line>r?de(r,bn(e,r).text.length):function(e,t){var r=e.ch;return null==r||r>t?de(e.line,t):r<0?de(e.line,0):e}(t,bn(e,t.line).text.length)}function Ue(e,t){return t>=e.first&&t<e.first+e.size}function Be(e,t){for(var r=[],i=0;i<t.length;i++)r[i]=Me(e,t[i]);return r}function je(e,t,r,i){if(e.cm&&e.cm.display.shift||e.extend){var n=t.anchor;if(i){var o=fe(r,n)<0;o!=fe(i,n)<0?(n=r,r=i):o!=fe(r,i)<0&&(r=i)}return new Oe(n,r)}return new Oe(i||r,r)}function He(e,t,r,i){Ke(e,new Pe([je(e,e.sel.primary(),t,r)],0),i)}function Ge(e,t,r){for(var i=[],n=0;n<e.sel.ranges.length;n++)i[n]=je(e,e.sel.ranges[n],t[n],null);Ke(e,ke(i,e.sel.primIndex),r)}function Ve(e,t,r,i){var n=e.sel.ranges.slice(0);n[t]=r,Ke(e,ke(n,e.sel.primIndex),i)}function qe(e,t,r,i){Ke(e,Fe(t,r),i)}function We(e,t,r){var i=e.history.done,n=mo(i);n&&n.ranges?(i[i.length-1]=t,ze(e,t,r)):Ke(e,t,r)}function Ke(e,t,r){ze(e,t,r),function(e,t,r,i){var n=e.history,o=i&&i.origin;r==n.lastSelOp||o&&n.lastSelOrigin==o&&(n.lastModTime==n.lastSelTime&&n.lastOrigin==o||function(e,t,r,i){var n=t.charAt(0);return"*"==n||"+"==n&&r.ranges.length==i.ranges.length&&r.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,o,mo(n.done),t))?n.done[n.done.length-1]=t:kn(t,n.done),n.lastSelTime=+new Date,n.lastSelOrigin=o,n.lastSelOp=r,i&&!1!==i.clearRedo&&Pn(n.undone)}(e,e.sel,e.cm?e.cm.curOp.id:NaN,r)}function ze(e,t,r){(io(e,"beforeSelectionChange")||e.cm&&io(e.cm,"beforeSelectionChange"))&&(t=function(e,t,r){var i={ranges:t.ranges,update:function(t){this.ranges=[];for(var r=0;r<t.length;r++)this.ranges[r]=new Oe(Me(e,t[r].anchor),Me(e,t[r].head))},origin:r&&r.origin};return Yn(e,"beforeSelectionChange",e,i),e.cm&&Yn(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?ke(i.ranges,i.ranges.length-1):t}(e,t,r));var i=r&&r.bias||(fe(t.primary().head,e.sel.primary().head)<0?-1:1);$e(e,Ze(e,t,i,!0)),r&&!1===r.scroll||!e.cm||Kr(e.cm)}function $e(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,ro(e.cm)),Qn(e,"cursorActivity",e))}function Je(e){$e(e,Ze(e,e.sel,null,!1))}function Ze(e,t,r,i){for(var n,o=0;o<t.ranges.length;o++){var s=t.ranges[o],a=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],u=Xe(e,s.anchor,a&&a.anchor,r,i),l=Xe(e,s.head,a&&a.head,r,i);(n||u!=s.anchor||l!=s.head)&&(n||(n=t.ranges.slice(0,o)),n[o]=new Oe(u,l))}return n?ke(n,t.primIndex):t}function Ye(e,t,r,i,n){var o=bn(e,t.line);if(o.markedSpans)for(var s=0;s<o.markedSpans.length;++s){var a=o.markedSpans[s],u=a.marker;if((null==a.from||(u.inclusiveLeft?a.from<=t.ch:a.from<t.ch))&&(null==a.to||(u.inclusiveRight?a.to>=t.ch:a.to>t.ch))){if(n&&(Yn(u,"beforeCursorEnter"),u.explicitlyCleared)){if(o.markedSpans){--s;continue}break}if(!u.atomic)continue;if(r){var l,c=u.find(i<0?1:-1);if((i<0?u.inclusiveRight:u.inclusiveLeft)&&(c=Qe(e,c,-i,c&&c.line==t.line?o:null)),c&&c.line==t.line&&(l=fe(c,r))&&(i<0?l<0:l>0))return Ye(e,c,t,i,n)}var h=u.find(i<0?-1:1);return(i<0?u.inclusiveLeft:u.inclusiveRight)&&(h=Qe(e,h,i,h.line==t.line?o:null)),h?Ye(e,h,t,i,n):null}}return t}function Xe(e,t,r,i,n){var o=i||1;return Ye(e,t,r,o,n)||!n&&Ye(e,t,r,o,!0)||Ye(e,t,r,-o,n)||!n&&Ye(e,t,r,-o,!0)||(e.cantEdit=!0,de(e.first,0))}function Qe(e,t,r,i){return r<0&&0==t.ch?t.line>e.first?Me(e,de(t.line-1)):null:r>0&&t.ch==(i||bn(e,t.line)).text.length?t.line<e.first+e.size-1?de(t.line+1,0):null:new de(t.line,t.ch+r)}function et(e){e.display.input.showSelection(e.display.input.prepareSelection())}function tt(e,t){for(var r=e.doc,i={},n=i.cursors=document.createDocumentFragment(),o=i.selection=document.createDocumentFragment(),s=0;s<r.sel.ranges.length;s++)if(!1!==t||s!=r.sel.primIndex){var a=r.sel.ranges[s];if(!(a.from().line>=e.display.viewTo||a.to().line<e.display.viewFrom)){var u=a.empty();(u||e.options.showCursorWhenSelecting)&&rt(e,a.head,n),u||it(e,a,o)}}return i}function rt(e,t,r){var i=Rt(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),n=r.appendChild(Ro("div"," ","CodeMirror-cursor"));if(n.style.left=i.left+"px",n.style.top=i.top+"px",n.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",i.other){var o=r.appendChild(Ro("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=i.other.left+"px",o.style.top=i.other.top+"px",o.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function it(e,t,r){var i=e.display,n=e.doc,o=document.createDocumentFragment(),s=ct(e.display),a=s.left,u=Math.max(i.sizerWidth,pt(e)-i.sizer.offsetLeft)-s.right;function l(e,t,r,i){t<0&&(t=0),t=Math.round(t),i=Math.round(i),o.appendChild(Ro("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==r?u-e:r)+"px; height: "+(i-t)+"px"))}function c(t,r,i){var o,s,c=bn(n,t),h=c.text.length;function p(r,i){return Nt(e,de(t,r),"div",c,i)}return function(e,t,r,i){if(!e)return i(t,r,"ltr");for(var n=!1,o=0;o<e.length;++o){var s=e[o];(s.from<r&&s.to>t||t==r&&s.to==t)&&(i(Math.max(s.from,t),Math.min(s.to,r),1==s.level?"rtl":"ltr"),n=!0)}n||i(t,r,"ltr")}(Cn(c),r||0,null==i?h:i,(function(e,t,n){var c,d,f,g=p(e,"left");if(e==t)c=g,d=f=g.left;else{if(c=p(t-1,"right"),"rtl"==n){var m=g;g=c,c=m}d=g.left,f=c.right}null==r&&0==e&&(d=a),c.top-g.top>3&&(l(d,g.top,null,g.bottom),d=a,g.bottom<c.top&&l(d,g.bottom,null,c.top)),null==i&&t==h&&(f=u),(!o||g.top<o.top||g.top==o.top&&g.left<o.left)&&(o=g),(!s||c.bottom>s.bottom||c.bottom==s.bottom&&c.right>s.right)&&(s=c),d<a+1&&(d=a),l(d,c.top,f-d,c.bottom)})),{start:o,end:s}}var h=t.from(),p=t.to();if(h.line==p.line)c(h.line,h.ch,p.ch);else{var d=bn(n,h.line),f=bn(n,p.line),g=Bi(d)==Bi(f),m=c(h.line,h.ch,g?d.text.length+1:null).end,v=c(p.line,g?0:null,p.ch).start;g&&(m.top<v.top-2?(l(m.right,m.top,null,m.bottom),l(a,v.top,v.left,v.bottom)):l(m.right,m.top,v.left-m.right,m.bottom)),m.bottom<v.top&&l(a,m.bottom,null,v.top)}r.appendChild(o)}function nt(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval((function(){t.cursorDiv.style.visibility=(r=!r)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function ot(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,So(st,e))}function st(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var r=+new Date+e.options.workTime,i=ui(t.mode,at(e,t.frontier)),n=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),(function(o){if(t.frontier>=e.display.viewFrom){var s=o.styles,a=o.text.length>e.options.maxHighlightLength,u=en(e,o,a?ui(t.mode,i):i,!0);o.styles=u.styles;var l=o.styleClasses,c=u.classes;c?o.styleClasses=c:l&&(o.styleClasses=null);for(var h=!s||s.length!=o.styles.length||l!=c&&(!l||!c||l.bgClass!=c.bgClass||l.textClass!=c.textClass),p=0;!h&&p<s.length;++p)h=s[p]!=o.styles[p];h&&n.push(t.frontier),o.stateAfter=a?i:ui(t.mode,i)}else o.text.length<=e.options.maxHighlightLength&&rn(e,o.text,i),o.stateAfter=t.frontier%5==0?ui(t.mode,i):null;if(++t.frontier,+new Date>r)return ot(e,e.options.workDelay),!0})),n.length&&Jt(e,(function(){for(var t=0;t<n.length;t++)rr(e,n[t],"text")}))}}function at(e,t,r){var i=e.doc,n=e.display;if(!i.mode.startState)return!0;var o=function(e,t,r){for(var i,n,o=e.doc,s=r?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;a>s;--a){if(a<=o.first)return o.first;var u=bn(o,a-1);if(u.stateAfter&&(!r||a<=o.frontier))return a;var l=ho(u.text,null,e.options.tabSize);(null==n||i>l)&&(n=a-1,i=l)}return n}(e,t,r),s=o>i.first&&bn(i,o-1).stateAfter;return s=s?ui(i.mode,s):li(i.mode),i.iter(o,t,(function(r){rn(e,r.text,s);var a=o==t-1||o%5==0||o>=n.viewFrom&&o<n.viewTo;r.stateAfter=a?ui(i.mode,s):null,++o})),r&&(i.frontier=o),s}function ut(e){return e.lineSpace.offsetTop}function lt(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function ct(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=Oo(e.measure,Ro("pre","x")),r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(e.cachedPaddingH=i),i}function ht(e){return oo-e.display.nativeBarWidth}function pt(e){return e.display.scroller.clientWidth-ht(e)-e.display.barWidth}function dt(e){return e.display.scroller.clientHeight-ht(e)-e.display.barHeight}function ft(e,t,r){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(i=0;i<e.rest.length;i++)if(An(e.rest[i])>r)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function gt(e,t,r,i){return yt(e,vt(e,t),r,i)}function mt(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[nr(e,t)];var r=e.display.externalMeasured;return r&&t>=r.lineN&&t<r.lineN+r.size?r:void 0}function vt(e,t){var r=An(t),i=mt(e,r);i&&!i.text?i=null:i&&i.changes&&(re(e,i,r,te(e)),e.curOp.forceUpdate=!0),i||(i=function(e,t){var r=An(t=Bi(t)),i=e.display.externalMeasured=new Qt(e.doc,t,r);i.lineN=r;var n=i.built=an(e,i);return i.text=n.pre,Oo(e.display.lineMeasure,n.pre),i}(e,t));var n=ft(i,t,r);return{line:t,view:i,rect:null,map:n.map,cache:n.cache,before:n.before,hasHeights:!1}}function yt(e,t,r,i,n){t.before&&(r=-1);var a,u=r+(i||"");return t.cache.hasOwnProperty(u)?a=t.cache[u]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,r){var i=e.options.lineWrapping,n=i&&pt(e);if(!t.measure.heights||i&&t.measure.width!=n){var o=t.measure.heights=[];if(i){t.measure.width=n;for(var s=t.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var u=s[a],l=s[a+1];Math.abs(u.bottom-l.bottom)>2&&o.push((u.bottom+l.top)/2-r.top)}}o.push(r.bottom-r.top)}}(e,t.view,t.rect),t.hasHeights=!0),(a=function(e,t,r,i){var n,a=xt(t.map,r,i),u=a.node,l=a.start,c=a.end,h=a.collapse;if(3==u.nodeType){for(var p=0;p<4;p++){for(;l&&No(t.line.text.charAt(a.coverStart+l));)--l;for(;a.coverStart+c<a.coverEnd&&No(t.line.text.charAt(a.coverStart+c));)++c;if((n=o&&s<9&&0==l&&c==a.coverEnd-a.coverStart?u.parentNode.getBoundingClientRect():bt(Lo(u,l,c).getClientRects(),i)).left||n.right||0==l)break;c=l,l-=1,h="right"}o&&s<11&&(n=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Yo)return Yo;var t=Oo(e,Ro("span","x")),r=t.getBoundingClientRect(),i=Lo(t,0,1).getBoundingClientRect();return Yo=Math.abs(r.left-i.left)>1}(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*i,bottom:t.bottom*i}}(e.display.measure,n))}else{var d;l>0&&(h=i="right"),n=e.options.lineWrapping&&(d=u.getClientRects()).length>1?d["right"==i?d.length-1:0]:u.getBoundingClientRect()}if(o&&s<9&&!l&&(!n||!n.left&&!n.right)){var f=u.parentNode.getClientRects()[0];n=f?{left:f.left,right:f.left+Mt(e.display),top:f.top,bottom:f.bottom}:Et}var g=n.top-t.rect.top,m=n.bottom-t.rect.top,v=(g+m)/2,y=t.view.measure.heights;for(p=0;p<y.length-1&&!(v<y[p]);p++);var _=p?y[p-1]:0,E=y[p],x={left:("right"==h?n.right:n.left)-t.rect.left,right:("left"==h?n.left:n.right)-t.rect.left,top:_,bottom:E};return n.left||n.right||(x.bogus=!0),e.options.singleCursorHeightPerLine||(x.rtop=g,x.rbottom=m),x}(e,t,r,i)).bogus||(t.cache[u]=a)),{left:a.left,right:a.right,top:n?a.rtop:a.top,bottom:n?a.rbottom:a.bottom}}Te.prototype=bo({init:function(e){var t=this,r=this.cm,i=this.wrapper=Ae(),n=this.textarea=i.firstChild;function a(e){if(!to(r,e)){if(r.somethingSelected())_e={lineWise:!1,text:r.getSelections()},t.inaccurateSelection&&(t.prevInput="",t.inaccurateSelection=!1,n.value=_e.text.join("\n"),vo(n));else{if(!r.options.lineWiseCopyCut)return;var i=Se(r);_e={lineWise:!0,text:i.text},"cut"==e.type?r.setSelections(i.ranges,null,ao):(t.prevInput="",n.value=i.text.join("\n"),vo(n))}"cut"==e.type&&(r.state.cutIncoming=!0)}}e.wrapper.insertBefore(i,e.wrapper.firstChild),f&&(n.style.width="0px"),zn(n,"input",(function(){o&&s>=9&&t.hasSelection&&(t.hasSelection=null),t.poll()})),zn(n,"paste",(function(e){to(r,e)||xe(e,r)||(r.state.pasteIncoming=!0,t.fastPoll())})),zn(n,"cut",a),zn(n,"copy",a),zn(e.scroller,"paste",(function(i){ur(e,i)||to(r,i)||(r.state.pasteIncoming=!0,t.focus())})),zn(e.lineSpace,"selectstart",(function(t){ur(e,t)||Hn(t)})),zn(n,"compositionstart",(function(){var e=r.getCursor("from");t.composing&&t.composing.range.clear(),t.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}})),zn(n,"compositionend",(function(){t.composing&&(t.poll(),t.composing.range.clear(),t.composing=null)}))},prepareSelection:function(){var e=this.cm,t=e.display,r=e.doc,i=tt(e);if(e.options.moveInputWithCursor){var n=Rt(e,r.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,n.top+s.top-o.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,n.left+s.left-o.left))}return i},showSelection:function(e){var t=this.cm.display;Oo(t.cursorDiv,e.cursors),Oo(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},reset:function(e){if(!this.contextMenuPending){var t,r,i=this.cm,n=i.doc;if(i.somethingSelected()){this.prevInput="";var a=n.sel.primary(),u=(t=Zo&&(a.to().line-a.from().line>100||(r=i.getSelection()).length>1e3))?"-":r||i.getSelection();this.textarea.value=u,i.state.focused&&vo(this.textarea),o&&s>=9&&(this.hasSelection=u)}else e||(this.prevInput=this.textarea.value="",o&&s>=9&&(this.hasSelection=null));this.inaccurateSelection=t}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!g||Fo()!=this.textarea))try{this.textarea.focus()}catch(e){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var e=this;e.pollingFast||e.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},fastPoll:function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,(function r(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,r))}))},poll:function(){var e=this.cm,t=this.textarea,r=this.prevInput;if(this.contextMenuPending||!e.state.focused||Jo(t)&&!r&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var i=t.value;if(i==r&&!e.somethingSelected())return!1;if(o&&s>=9&&this.hasSelection===i||m&&/[\uf700-\uf7ff]/.test(i))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var n=i.charCodeAt(0);if(8203!=n||r||(r="​"),8666==n)return this.reset(),this.cm.execCommand("undo")}for(var a=0,u=Math.min(r.length,i.length);a<u&&r.charCodeAt(a)==i.charCodeAt(a);)++a;var l=this;return Jt(e,(function(){Ee(e,i.slice(a),r.length-a,null,l.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?t.value=l.prevInput="":l.prevInput=i,l.composing&&(l.composing.range.clear(),l.composing.range=e.markText(l.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){o&&s>=9&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(e){var t=this,r=t.cm,i=r.display,n=t.textarea,u=lr(r,e),l=i.scroller.scrollTop;if(u&&!c){r.options.resetSelectionOnContextMenu&&-1==r.doc.sel.contains(u)&&Zt(r,Ke)(r.doc,Fe(u),ao);var h=n.style.cssText,p=t.wrapper.style.cssText;t.wrapper.style.cssText="position: absolute";var d=t.wrapper.getBoundingClientRect();if(n.style.cssText="position: absolute; width: 30px; height: 30px; top: "+(e.clientY-d.top-5)+"px; left: "+(e.clientX-d.left-5)+"px; z-index: 1000; background: "+(o?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",a)var f=window.scrollY;if(i.input.focus(),a&&window.scrollTo(null,f),i.input.reset(),r.somethingSelected()||(n.value=t.prevInput=" "),t.contextMenuPending=!0,i.selForContextMenu=r.doc.sel,clearTimeout(i.detectingSelectAll),o&&s>=9&&m(),x){qn(e);var g=function(){Zn(window,"mouseup",g),setTimeout(v,20)};zn(window,"mouseup",g)}else setTimeout(v,50)}function m(){if(null!=n.selectionStart){var e=r.somethingSelected(),o="​"+(e?n.value:"");n.value="⇚",n.value=o,t.prevInput=e?"":"​",n.selectionStart=1,n.selectionEnd=o.length,i.selForContextMenu=r.doc.sel}}function v(){if(t.contextMenuPending=!1,t.wrapper.style.cssText=p,n.style.cssText=h,o&&s<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=l),null!=n.selectionStart){(!o||o&&s<9)&&m();var e=0,a=function(){i.selForContextMenu==r.doc.sel&&0==n.selectionStart&&n.selectionEnd>0&&"​"==t.prevInput?Zt(r,ci.selectAll)(r):e++<10?i.detectingSelectAll=setTimeout(a,500):i.input.reset()};i.detectingSelectAll=setTimeout(a,200)}}},readOnlyChanged:function(e){e||this.reset()},setUneditable:Eo,needsContentAttribute:!1},Te.prototype),Ie.prototype=bo({init:function(e){var t=this,r=t.cm,i=t.div=e.lineDiv;function n(e){if(!to(r,e)){if(r.somethingSelected())_e={lineWise:!1,text:r.getSelections()},"cut"==e.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var t=Se(r);_e={lineWise:!0,text:t.text},"cut"==e.type&&r.operation((function(){r.setSelections(t.ranges,0,ao),r.replaceSelection("",null,"cut")}))}if(e.clipboardData&&!f)e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/plain",_e.text.join("\n"));else{var i=Ae(),n=i.firstChild;r.display.lineSpace.insertBefore(i,r.display.lineSpace.firstChild),n.value=_e.text.join("\n");var o=document.activeElement;vo(n),setTimeout((function(){r.display.lineSpace.removeChild(i),o.focus()}),50)}}}we(i),zn(i,"paste",(function(e){to(r,e)||xe(e,r)})),zn(i,"compositionstart",(function(e){var i=e.data;if(t.composing={sel:r.doc.sel,data:i,startData:i},i){var n=r.doc.sel.primary(),o=r.getLine(n.head.line).indexOf(i,Math.max(0,n.head.ch-i.length));o>-1&&o<=n.head.ch&&(t.composing.sel=Fe(de(n.head.line,o),de(n.head.line,o+i.length)))}})),zn(i,"compositionupdate",(function(e){t.composing.data=e.data})),zn(i,"compositionend",(function(e){var r=t.composing;r&&(e.data==r.startData||/\u200b/.test(e.data)||(r.data=e.data),setTimeout((function(){r.handled||t.applyComposition(r),t.composing==r&&(t.composing=null)}),50))})),zn(i,"touchstart",(function(){t.forceCompositionEnd()})),zn(i,"input",(function(){t.composing||!r.isReadOnly()&&t.pollContent()||Jt(t.cm,(function(){tr(r)}))})),zn(i,"copy",n),zn(i,"cut",n)},prepareSelection:function(){var e=tt(this.cm,!1);return e.focus=this.cm.state.focused,e},showSelection:function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},showPrimarySelection:function(){var e=window.getSelection(),t=this.cm.doc.sel.primary(),i=Ne(this.cm,e.anchorNode,e.anchorOffset),n=Ne(this.cm,e.focusNode,e.focusOffset);if(!i||i.bad||!n||n.bad||0!=fe(ve(i,n),t.from())||0!=fe(me(i,n),t.to())){var o=Le(this.cm,t.from()),s=Le(this.cm,t.to());if(o||s){var a=this.cm.display.view,u=e.rangeCount&&e.getRangeAt(0);if(o){if(!s){var l=a[a.length-1].measure,c=l.maps?l.maps[l.maps.length-1]:l.map;s={node:c[c.length-1],offset:c[c.length-2]-c[c.length-3]}}}else o={node:a[0].measure.map[2],offset:0};try{var h=Lo(o.node,o.offset,s.offset,s.node)}catch(e){}h&&(!r&&this.cm.state.focused?(e.collapse(o.node,o.offset),h.collapsed||e.addRange(h)):(e.removeAllRanges(),e.addRange(h)),u&&null==e.anchorNode?e.addRange(u):r&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){e.cm.curOp.selectionChanged=!0}))}),20)},showMultipleSelections:function(e){Oo(this.cm.display.cursorDiv,e.cursors),Oo(this.cm.display.selectionDiv,e.selection)},rememberSelection:function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},selectionInEditor:function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return ko(this.div,t)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){var e=this;this.selectionInEditor()?this.pollSelection():Jt(this.cm,(function(){e.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}))},selectionChanged:function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;this.rememberSelection();var r=Ne(t,e.anchorNode,e.anchorOffset),i=Ne(t,e.focusNode,e.focusOffset);r&&i&&Jt(t,(function(){Ke(t.doc,Fe(r,i),ao),(r.bad||i.bad)&&(t.curOp.selectionChanged=!0)}))}},pollContent:function(){var e,t=this.cm,r=t.display,i=t.doc.sel.primary(),n=i.from(),o=i.to();if(n.line<r.viewFrom||o.line>r.viewTo-1)return!1;if(n.line==r.viewFrom||0==(e=nr(t,n.line)))var s=An(r.view[0].line),a=r.view[0].node;else s=An(r.view[e].line),a=r.view[e-1].node.nextSibling;var u=nr(t,o.line);if(u==r.view.length-1)var l=r.viewTo-1,c=r.lineDiv.lastChild;else l=An(r.view[u+1].line)-1,c=r.view[u+1].node.previousSibling;for(var h=t.doc.splitLines(function(e,t,r,i,n){var o="",s=!1,a=e.doc.lineSeparator();function u(t){if(1==t.nodeType){var r=t.getAttribute("cm-text");if(null!=r)return""==r&&(r=t.textContent.replace(/\u200b/g,"")),void(o+=r);var l,c=t.getAttribute("cm-marker");if(c){var h=e.findMarks(de(i,0),de(n+1,0),(f=+c,function(e){return e.id==f}));return void(h.length&&(l=h[0].find())&&(o+=Sn(e.doc,l.from,l.to).join(a)))}if("false"==t.getAttribute("contenteditable"))return;for(var p=0;p<t.childNodes.length;p++)u(t.childNodes[p]);/^(pre|div|p)$/i.test(t.nodeName)&&(s=!0)}else if(3==t.nodeType){var d=t.nodeValue;if(!d)return;s&&(o+=a,s=!1),o+=d}var f}for(;u(t),t!=r;)t=t.nextSibling;return o}(t,a,c,s,l)),p=Sn(t.doc,de(s,0),de(l,bn(t.doc,l).text.length));h.length>1&&p.length>1;)if(mo(h)==mo(p))h.pop(),p.pop(),l--;else{if(h[0]!=p[0])break;h.shift(),p.shift(),s++}for(var d=0,f=0,g=h[0],m=p[0],v=Math.min(g.length,m.length);d<v&&g.charCodeAt(d)==m.charCodeAt(d);)++d;for(var y=mo(h),_=mo(p),E=Math.min(y.length-(1==h.length?d:0),_.length-(1==p.length?d:0));f<E&&y.charCodeAt(y.length-f-1)==_.charCodeAt(_.length-f-1);)++f;h[h.length-1]=y.slice(0,y.length-f),h[0]=h[0].slice(d);var x=de(s,d),b=de(l,p.length?mo(p).length-f:0);return h.length>1||h[0]||fe(x,b)?(Vr(t.doc,h,x,b,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(e){this.cm.isReadOnly()?Zt(this.cm,tr)(this.cm):e.data&&e.data!=e.startData&&Zt(this.cm,Ee)(this.cm,e.data,0,e.sel)},setUneditable:function(e){e.contentEditable="false"},onKeyPress:function(e){e.preventDefault(),this.cm.isReadOnly()||Zt(this.cm,Ee)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)},readOnlyChanged:function(e){this.div.contentEditable=String("nocursor"!=e)},onContextMenu:Eo,resetPosition:Eo,needsContentAttribute:!0},Ie.prototype),w.inputStyles={textarea:Te,contenteditable:Ie},Pe.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var r=this.ranges[t],i=e.ranges[t];if(0!=fe(r.anchor,i.anchor)||0!=fe(r.head,i.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Oe(ge(this.ranges[t].anchor),ge(this.ranges[t].head));return new Pe(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var r=0;r<this.ranges.length;r++){var i=this.ranges[r];if(fe(t,i.from())>=0&&fe(e,i.to())<=0)return r}return-1}},Oe.prototype={from:function(){return ve(this.anchor,this.head)},to:function(){return me(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var _t,Et={left:0,right:0,top:0,bottom:0};function xt(e,t,r){for(var i,n,o,s,a=0;a<e.length;a+=3){var u=e[a],l=e[a+1];if(t<u?(n=0,o=1,s="left"):t<l?o=1+(n=t-u):(a==e.length-3||t==l&&e[a+3]>t)&&(n=(o=l-u)-1,t>=l&&(s="right")),null!=n){if(i=e[a+2],u==l&&r==(i.insertLeft?"left":"right")&&(s=r),"left"==r&&0==n)for(;a&&e[a-2]==e[a-3]&&e[a-1].insertLeft;)i=e[2+(a-=3)],s="left";if("right"==r&&n==l-u)for(;a<e.length-3&&e[a+3]==e[a+4]&&!e[a+5].insertLeft;)i=e[(a+=3)+2],s="right";break}}return{node:i,start:n,end:o,collapse:s,coverStart:u,coverEnd:l}}function bt(e,t){var r=Et;if("left"==t)for(var i=0;i<e.length&&(r=e[i]).left==r.right;i++);else for(i=e.length-1;i>=0&&(r=e[i]).left==r.right;i--);return r}function St(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function wt(e){e.display.externalMeasure=null,Po(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)St(e.display.view[t])}function Tt(e){wt(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function At(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function It(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Lt(e,t,r,i){if(t.widgets)for(var n=0;n<t.widgets.length;++n)if(t.widgets[n].above){var o=Ki(t.widgets[n]);r.top+=o,r.bottom+=o}if("line"==i)return r;i||(i="local");var s=Ln(t);if("local"==i?s+=ut(e.display):s-=e.display.viewOffset,"page"==i||"window"==i){var a=e.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==i?0:It());var u=a.left+("window"==i?0:At());r.left+=u,r.right+=u}return r.top+=s,r.bottom+=s,r}function Ct(e,t,r){if("div"==r)return t;var i=t.left,n=t.top;if("page"==r)i-=At(),n-=It();else if("local"==r||!r){var o=e.display.sizer.getBoundingClientRect();i+=o.left,n+=o.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:i-s.left,top:n-s.top}}function Nt(e,t,r,i,n){return i||(i=bn(e.doc,t.line)),Lt(e,i,gt(e,i,t.ch,n),r)}function Rt(e,t,r,i,n,o){function s(t,s){var a=yt(e,n,t,s?"right":"left",o);return s?a.left=a.right:a.right=a.left,Lt(e,i,a,r)}function a(e,t){var r=u[t],i=r.level%2;return e==es(r)&&t&&r.level<u[t-1].level?(e=ts(r=u[--t])-(r.level%2?0:1),i=!0):e==ts(r)&&t<u.length-1&&r.level<u[t+1].level&&(e=es(r=u[++t])-r.level%2,i=!1),i&&e==r.to&&e>r.from?s(e-1):s(e,i)}i=i||bn(e.doc,t.line),n||(n=vt(e,i));var u=Cn(i),l=t.ch;if(!u)return s(l);var c=a(l,as(u,l));return null!=Xo&&(c.other=a(l,Xo)),c}function Pt(e,t){var r=0;t=Me(e.doc,t),e.options.lineWrapping||(r=Mt(e.display)*t.ch);var i=bn(e.doc,t.line),n=Ln(i)+ut(e.display);return{left:r,right:r,top:n,bottom:n+i.height}}function Ot(e,t,r,i){var n=de(e,t);return n.xRel=i,r&&(n.outside=!0),n}function kt(e,t,r){var i=e.doc;if((r+=e.display.viewOffset)<0)return Ot(i.first,0,!0,-1);var n=In(i,r),o=i.first+i.size-1;if(n>o)return Ot(i.first+i.size-1,bn(i,o).text.length,!0,1);t<0&&(t=0);for(var s=bn(i,n);;){var a=Ft(e,s,n,t,r),u=Mi(s),l=u&&u.find(0,!0);if(!u||!(a.ch>l.from.ch||a.ch==l.from.ch&&a.xRel>0))return a;n=An(s=l.to.line)}}function Ft(e,t,r,i,n){var o=n-Ln(t),s=!1,a=2*e.display.wrapper.clientWidth,u=vt(e,t);function l(i){var n=Rt(e,de(r,i),"line",t,u);return s=!0,o>n.bottom?n.left-a:o<n.top?n.left+a:(s=!1,n.left)}var c=Cn(t),h=t.text.length,p=rs(t),d=is(t),f=l(p),g=s,m=l(d),v=s;if(i>m)return Ot(r,d,v,1);for(;;){if(c?d==p||d==ls(t,p,1):d-p<=1){var y=i<f||i-f<=m-i?p:d,_=y==p?g:v,E=i-(y==p?f:m);if(v&&!c&&!/\s/.test(t.text.charAt(y))&&E>0&&y<t.text.length&&u.view.measure.heights.length>1){var x=yt(e,u,y,"right");o<=x.bottom&&o>=x.top&&Math.abs(i-x.right)<E&&(_=!1,y++,E=i-x.right)}for(;No(t.text.charAt(y));)++y;return Ot(r,y,_,E<-1?-1:E>1?1:0)}var b=Math.ceil(h/2),S=p+b;if(c){S=p;for(var w=0;w<b;++w)S=ls(t,S,1)}var T=l(S);T>i?(d=S,m=T,(v=s)&&(m+=1e3),h=b):(p=S,f=T,g=s,h-=b)}}function Dt(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==_t){_t=Ro("pre");for(var t=0;t<49;++t)_t.appendChild(document.createTextNode("x")),_t.appendChild(Ro("br"));_t.appendChild(document.createTextNode("x"))}Oo(e.measure,_t);var r=_t.offsetHeight/50;return r>3&&(e.cachedTextHeight=r),Po(e.measure),r||1}function Mt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=Ro("span","xxxxxxxxxx"),r=Ro("pre",[t]);Oo(e.measure,r);var i=t.getBoundingClientRect(),n=(i.right-i.left)/10;return n>2&&(e.cachedCharWidth=n),n||10}var Ut,Bt,jt=null,Ht=0;function Gt(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ht},jt?jt.ops.push(e.curOp):e.curOp.ownsGroup=jt={ops:[e.curOp],delayedCallbacks:[]}}function Vt(e){var t=e.curOp.ownsGroup;if(t)try{!function(e){var t=e.delayedCallbacks,r=0;do{for(;r<t.length;r++)t[r].call(null);for(var i=0;i<e.ops.length;i++){var n=e.ops[i];if(n.cursorActivityHandlers)for(;n.cursorActivityCalled<n.cursorActivityHandlers.length;)n.cursorActivityHandlers[n.cursorActivityCalled++].call(null,n.cm)}}while(r<t.length)}(t)}finally{jt=null;for(var r=0;r<t.ops.length;r++)t.ops[r].cm.curOp=null;!function(e){for(var t=e.ops,r=0;r<t.length;r++)qt(t[r]);for(r=0;r<t.length;r++)Wt(t[r]);for(r=0;r<t.length;r++)Kt(t[r]);for(r=0;r<t.length;r++)zt(t[r]);for(r=0;r<t.length;r++)$t(t[r])}(t)}}function qt(e){var t=e.cm,r=t.display;(function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=ht(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=ht(e)+"px",t.scrollbarsClipped=!0)})(t),e.updateMaxLine&&F(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<r.viewFrom||e.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new $(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Wt(e){e.updatedDisplay=e.mustUpdate&&J(e.cm,e.update)}function Kt(e){var t=e.cm,r=t.display;e.updatedDisplay&&Q(t),e.barMeasure=M(t),r.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=gt(t,r.maxLine,r.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+e.adjustWidthTo+ht(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo-pt(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=r.input.prepareSelection(e.focus))}function zt(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&vr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var r=e.focus&&e.focus==Fo()&&(!document.hasFocus||document.hasFocus());e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,r),(e.updatedDisplay||e.startHeight!=t.doc.height)&&H(t,e.barMeasure),e.updatedDisplay&&X(t,e.barMeasure),e.selectionChanged&&nt(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),r&&ye(e.cm)}function $t(e){var t=e.cm,r=t.display,i=t.doc;if(e.updatedDisplay&&Z(t,e.update),null==r.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(r.wheelStartX=r.wheelStartY=null),null==e.scrollTop||r.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(i.scrollTop=Math.max(0,Math.min(r.scroller.scrollHeight-r.scroller.clientHeight,e.scrollTop)),r.scrollbars.setScrollTop(i.scrollTop),r.scroller.scrollTop=i.scrollTop),null==e.scrollLeft||r.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(i.scrollLeft=Math.max(0,Math.min(r.scroller.scrollWidth-r.scroller.clientWidth,e.scrollLeft)),r.scrollbars.setScrollLeft(i.scrollLeft),r.scroller.scrollLeft=i.scrollLeft,q(t)),e.scrollToPos){var n=function(e,t,r,i){null==i&&(i=0);for(var n=0;n<5;n++){var o=!1,s=Rt(e,t),a=r&&r!=t?Rt(e,r):s,u=qr(e,Math.min(s.left,a.left),Math.min(s.top,a.top)-i,Math.max(s.left,a.left),Math.max(s.bottom,a.bottom)+i),l=e.doc.scrollTop,c=e.doc.scrollLeft;if(null!=u.scrollTop&&(mr(e,u.scrollTop),Math.abs(e.doc.scrollTop-l)>1&&(o=!0)),null!=u.scrollLeft&&(vr(e,u.scrollLeft),Math.abs(e.doc.scrollLeft-c)>1&&(o=!0)),!o)break}return s}(t,Me(i,e.scrollToPos.from),Me(i,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&function(e,t){if(!to(e,"scrollCursorIntoView")){var r=e.display,i=r.sizer.getBoundingClientRect(),n=null;if(t.top+i.top<0?n=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(n=!1),null!=n&&!d){var o=Ro("div","​",null,"position: absolute; top: "+(t.top-r.viewOffset-ut(e.display))+"px; height: "+(t.bottom-t.top+ht(e)+r.barHeight)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(n),e.display.lineSpace.removeChild(o)}}}(t,n)}var o=e.maybeHiddenMarkers,s=e.maybeUnhiddenMarkers;if(o)for(var a=0;a<o.length;++a)o[a].lines.length||Yn(o[a],"hide");if(s)for(a=0;a<s.length;++a)s[a].lines.length&&Yn(s[a],"unhide");r.wrapper.offsetHeight&&(i.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Yn(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Jt(e,t){if(e.curOp)return t();Gt(e);try{return t()}finally{Vt(e)}}function Zt(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Gt(e);try{return t.apply(e,arguments)}finally{Vt(e)}}}function Yt(e){return function(){if(this.curOp)return e.apply(this,arguments);Gt(this);try{return e.apply(this,arguments)}finally{Vt(this)}}}function Xt(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Gt(t);try{return e.apply(this,arguments)}finally{Vt(t)}}}function Qt(e,t,r){this.line=t,this.rest=function(e){for(var t,r;t=Mi(e);)e=t.find(1,!0).line,(r||(r=[])).push(e);return r}(t),this.size=this.rest?An(mo(this.rest))-r+1:1,this.node=this.text=null,this.hidden=Gi(e,t)}function er(e,t,r){for(var i,n=[],o=t;o<r;o=i){var s=new Qt(e.doc,bn(e.doc,o),o);i=o+s.size,n.push(s)}return n}function tr(e,t,r,i){null==t&&(t=e.doc.first),null==r&&(r=e.doc.first+e.doc.size),i||(i=0);var n=e.display;if(i&&r<n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>t)&&(n.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=n.viewTo)S&&ji(e.doc,t)<n.viewTo&&ir(e);else if(r<=n.viewFrom)S&&Hi(e.doc,r+i)>n.viewFrom?ir(e):(n.viewFrom+=i,n.viewTo+=i);else if(t<=n.viewFrom&&r>=n.viewTo)ir(e);else if(t<=n.viewFrom)(o=or(e,r,r+i,1))?(n.view=n.view.slice(o.index),n.viewFrom=o.lineN,n.viewTo+=i):ir(e);else if(r>=n.viewTo){var o;(o=or(e,t,t,-1))?(n.view=n.view.slice(0,o.index),n.viewTo=o.lineN):ir(e)}else{var s=or(e,t,t,-1),a=or(e,r,r+i,1);s&&a?(n.view=n.view.slice(0,s.index).concat(er(e,s.lineN,a.lineN)).concat(n.view.slice(a.index)),n.viewTo+=i):ir(e)}var u=n.externalMeasured;u&&(r<u.lineN?u.lineN+=i:t<u.lineN+u.size&&(n.externalMeasured=null))}function rr(e,t,r){e.curOp.viewChanged=!0;var i=e.display,n=e.display.externalMeasured;if(n&&t>=n.lineN&&t<n.lineN+n.size&&(i.externalMeasured=null),!(t<i.viewFrom||t>=i.viewTo)){var o=i.view[nr(e,t)];if(null!=o.node){var s=o.changes||(o.changes=[]);-1==yo(s,r)&&s.push(r)}}}function ir(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function nr(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var r=e.display.view,i=0;i<r.length;i++)if((t-=r[i].size)<0)return i}function or(e,t,r,i){var n,o=nr(e,t),s=e.display.view;if(!S||r==e.doc.first+e.doc.size)return{index:o,lineN:r};for(var a=0,u=e.display.viewFrom;a<o;a++)u+=s[a].size;if(u!=t){if(i>0){if(o==s.length-1)return null;n=u+s[o].size-t,o++}else n=u-t;t+=n,r+=n}for(;ji(e.doc,r)!=r;){if(o==(i<0?0:s.length-1))return null;r+=i*s[o-(i<0?1:0)].size,o+=i}return{index:o,lineN:r}}function sr(e){for(var t=e.display.view,r=0,i=0;i<t.length;i++){var n=t[i];n.hidden||n.node&&!n.changes||++r}return r}function ar(e){var t=e.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function ur(e,t){for(var r=Wn(t);r!=e.wrapper;r=r.parentNode)if(!r||1==r.nodeType&&"true"==r.getAttribute("cm-ignore-events")||r.parentNode==e.sizer&&r!=e.mover)return!0}function lr(e,t,r,i){var n=e.display;if(!r&&"true"==Wn(t).getAttribute("cm-not-content"))return null;var o,s,a=n.lineSpace.getBoundingClientRect();try{o=t.clientX-a.left,s=t.clientY-a.top}catch(t){return null}var u,l=kt(e,o,s);if(i&&1==l.xRel&&(u=bn(e.doc,l.line).text).length==l.ch){var c=ho(u,u.length,e.options.tabSize)-u.length;l=de(l.line,Math.max(0,Math.round((o-ct(e.display).left)/Mt(e.display))-c))}return l}function cr(e){var t=this,r=t.display;if(!(to(t,e)||r.activeTouch&&r.input.supportsTouch()))if(r.shift=e.shiftKey,ur(r,e))a||(r.scroller.draggable=!1,setTimeout((function(){r.scroller.draggable=!0}),100));else if(!pr(t,e)){var i=lr(t,e);switch(window.focus(),Kn(e)){case 1:t.state.selectingText?t.state.selectingText(e):i?function(e,t,r){o?setTimeout(So(ye,e),0):e.curOp.focus=Fo();var i,n=+new Date;Bt&&Bt.time>n-400&&0==fe(Bt.pos,r)?i="triple":Ut&&Ut.time>n-400&&0==fe(Ut.pos,r)?(i="double",Bt={time:n,pos:r}):(i="single",Ut={time:n,pos:r});var u,l=e.doc.sel,c=m?t.metaKey:t.ctrlKey;e.options.dragDrop&&qo&&!e.isReadOnly()&&"single"==i&&(u=l.contains(r))>-1&&(fe((u=l.ranges[u]).from(),r)<0||r.xRel>0)&&(fe(u.to(),r)>0||r.xRel<0)?function(e,t,r,i){var n=e.display,u=+new Date,l=Zt(e,(function(c){a&&(n.scroller.draggable=!1),e.state.draggingText=!1,Zn(document,"mouseup",l),Zn(n.scroller,"drop",l),Math.abs(t.clientX-c.clientX)+Math.abs(t.clientY-c.clientY)<10&&(Hn(c),!i&&+new Date-200<u&&He(e.doc,r),a||o&&9==s?setTimeout((function(){document.body.focus(),n.input.focus()}),20):n.input.focus())}));a&&(n.scroller.draggable=!0),e.state.draggingText=l,l.copy=m?t.altKey:t.ctrlKey,n.scroller.dragDrop&&n.scroller.dragDrop(),zn(document,"mouseup",l),zn(n.scroller,"drop",l)}(e,t,r,c):function(e,t,r,i,n){var o=e.display,s=e.doc;Hn(t);var a,u,l=s.sel,c=l.ranges;if(n&&!t.shiftKey?(u=s.sel.contains(r),a=u>-1?c[u]:new Oe(r,r)):(a=s.sel.primary(),u=s.sel.primIndex),v?t.shiftKey&&t.metaKey:t.altKey)i="rect",n||(a=new Oe(r,r)),r=lr(e,t,!0,!0),u=-1;else if("double"==i){var h=e.findWordAt(r);a=e.display.shift||s.extend?je(s,a,h.anchor,h.head):h}else if("triple"==i){var p=new Oe(de(r.line,0),Me(s,de(r.line+1,0)));a=e.display.shift||s.extend?je(s,a,p.anchor,p.head):p}else a=je(s,a,r);n?-1==u?(u=c.length,Ke(s,ke(c.concat([a]),u),{scroll:!1,origin:"*mouse"})):c.length>1&&c[u].empty()&&"single"==i&&!t.shiftKey?(Ke(s,ke(c.slice(0,u).concat(c.slice(u+1)),0),{scroll:!1,origin:"*mouse"}),l=s.sel):Ve(s,u,a,uo):(u=0,Ke(s,new Pe([a],0),uo),l=s.sel);var d=r;function f(t){if(0!=fe(d,t))if(d=t,"rect"==i){for(var n=[],o=e.options.tabSize,c=ho(bn(s,r.line).text,r.ch,o),h=ho(bn(s,t.line).text,t.ch,o),p=Math.min(c,h),f=Math.max(c,h),g=Math.min(r.line,t.line),m=Math.min(e.lastLine(),Math.max(r.line,t.line));g<=m;g++){var v=bn(s,g).text,y=po(v,p,o);p==f?n.push(new Oe(de(g,y),de(g,y))):v.length>y&&n.push(new Oe(de(g,y),de(g,po(v,f,o))))}n.length||n.push(new Oe(r,r)),Ke(s,ke(l.ranges.slice(0,u).concat(n),u),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var _=a,E=_.anchor,x=t;if("single"!=i){if("double"==i)var b=e.findWordAt(t);else b=new Oe(de(t.line,0),Me(s,de(t.line+1,0)));fe(b.anchor,E)>0?(x=b.head,E=ve(_.from(),b.anchor)):(x=b.anchor,E=me(_.to(),b.head))}(n=l.ranges.slice(0))[u]=new Oe(Me(s,E),x),Ke(s,ke(n,u),uo)}}var g=o.wrapper.getBoundingClientRect(),m=0;function y(t){var r=++m,n=lr(e,t,!0,"rect"==i);if(n)if(0!=fe(n,d)){e.curOp.focus=Fo(),f(n);var a=V(o,s);(n.line>=a.to||n.line<a.from)&&setTimeout(Zt(e,(function(){m==r&&y(t)})),150)}else{var u=t.clientY<g.top?-20:t.clientY>g.bottom?20:0;u&&setTimeout(Zt(e,(function(){m==r&&(o.scroller.scrollTop+=u,y(t))})),50)}}function _(t){e.state.selectingText=!1,m=1/0,Hn(t),o.input.focus(),Zn(document,"mousemove",E),Zn(document,"mouseup",x),s.history.lastSelOrigin=null}var E=Zt(e,(function(e){Kn(e)?y(e):_(e)})),x=Zt(e,_);e.state.selectingText=x,zn(document,"mousemove",E),zn(document,"mouseup",x)}(e,t,r,i,c)}(t,e,i):Wn(e)==r.scroller&&Hn(e);break;case 2:a&&(t.state.lastMiddleDown=+new Date),i&&He(t.doc,i),setTimeout((function(){r.input.focus()}),20),Hn(e);break;case 3:x?Pr(t,e):function(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,Rr(e))}),100)}(t)}}}function hr(e,t,r,i){try{var n=t.clientX,o=t.clientY}catch(t){return!1}if(n>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&Hn(t);var s=e.display,a=s.lineDiv.getBoundingClientRect();if(o>a.bottom||!io(e,r))return Vn(t);o-=a.top-s.viewOffset;for(var u=0;u<e.options.gutters.length;++u){var l=s.gutters.childNodes[u];if(l&&l.getBoundingClientRect().right>=n){var c=In(e.doc,o),h=e.options.gutters[u];return Yn(e,r,e,c,h,t),Vn(t)}}}function pr(e,t){return hr(e,t,"gutterClick",!0)}var dr=0;function fr(e){var t=this;if(gr(t),!to(t,e)&&!ur(t.display,e)){Hn(e),o&&(dr=+new Date);var r=lr(t,e,!0),i=e.dataTransfer.files;if(r&&!t.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var n=i.length,s=Array(n),a=0,u=function(e,i){if(!t.options.allowDropFileTypes||-1!=yo(t.options.allowDropFileTypes,e.type)){var o=new FileReader;o.onload=Zt(t,(function(){var e=o.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),s[i]=e,++a==n){var u={from:r=Me(t.doc,r),to:r,text:t.doc.splitLines(s.join(t.doc.lineSeparator())),origin:"paste"};Ur(t.doc,u),We(t.doc,Fe(r,Or(u)))}})),o.readAsText(e)}},l=0;l<n;++l)u(i[l],l);else{if(t.state.draggingText&&t.doc.sel.contains(r)>-1)return t.state.draggingText(e),void setTimeout((function(){t.display.input.focus()}),20);try{if(s=e.dataTransfer.getData("Text")){if(t.state.draggingText&&!t.state.draggingText.copy)var c=t.listSelections();if(ze(t.doc,Fe(r,r)),c)for(l=0;l<c.length;++l)Vr(t.doc,"",c[l].anchor,c[l].head,"drag");t.replaceSelection(s,"around","paste"),t.display.input.focus()}}catch(e){}}}}function gr(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function mr(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,r||Y(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbars.setScrollTop(t),r&&Y(e),ot(e,100))}function vr(e,t,r){(r?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,q(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}var yr=0,_r=null;o?_r=-.53:r?_r=15:l?_r=-.7:h&&(_r=-1/3);var Er=function(e){var t=e.wheelDeltaX,r=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==r&&e.detail&&e.axis==e.VERTICAL_AXIS?r=e.detail:null==r&&(r=e.wheelDelta),{x:t,y:r}};function xr(e,t){var i=Er(t),n=i.x,o=i.y,s=e.display,u=s.scroller,l=u.scrollWidth>u.clientWidth,h=u.scrollHeight>u.clientHeight;if(n&&l||o&&h){if(o&&m&&a)e:for(var p=t.target,d=s.view;p!=u;p=p.parentNode)for(var f=0;f<d.length;f++)if(d[f].node==p){e.display.currentWheelTarget=p;break e}if(n&&!r&&!c&&null!=_r)return o&&h&&mr(e,Math.max(0,Math.min(u.scrollTop+o*_r,u.scrollHeight-u.clientHeight))),vr(e,Math.max(0,Math.min(u.scrollLeft+n*_r,u.scrollWidth-u.clientWidth))),(!o||o&&h)&&Hn(t),void(s.wheelStartX=null);if(o&&null!=_r){var g=o*_r,v=e.doc.scrollTop,y=v+s.wrapper.clientHeight;g<0?v=Math.max(0,v+g-50):y=Math.min(e.doc.height,y+g+50),Y(e,{top:v,bottom:y})}yr<20&&(null==s.wheelStartX?(s.wheelStartX=u.scrollLeft,s.wheelStartY=u.scrollTop,s.wheelDX=n,s.wheelDY=o,setTimeout((function(){if(null!=s.wheelStartX){var e=u.scrollLeft-s.wheelStartX,t=u.scrollTop-s.wheelStartY,r=t&&s.wheelDY&&t/s.wheelDY||e&&s.wheelDX&&e/s.wheelDX;s.wheelStartX=s.wheelStartY=null,r&&(_r=(_r*yr+r)/(yr+1),++yr)}}),200)):(s.wheelDX+=n,s.wheelDY+=o))}}function br(e,t,r){if("string"==typeof t&&!(t=ci[t]))return!1;e.display.input.ensurePolled();var i=e.display.shift,n=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r&&(e.display.shift=!1),n=t(e)!=so}finally{e.display.shift=i,e.state.suppressEdits=!1}return n}w.wheelEventPixels=function(e){var t=Er(e);return t.x*=_r,t.y*=_r,t};var Sr=new co;function wr(e,t,r,i){var n=e.state.keySeq;if(n){if(fi(t))return"handled";Sr.set(50,(function(){e.state.keySeq==n&&(e.state.keySeq=null,e.display.input.reset())})),t=n+" "+t}var o=function(e,t,r){for(var i=0;i<e.state.keyMaps.length;i++){var n=di(t,e.state.keyMaps[i],r,e);if(n)return n}return e.options.extraKeys&&di(t,e.options.extraKeys,r,e)||di(t,e.options.keyMap,r,e)}(e,t,i);return"multi"==o&&(e.state.keySeq=t),"handled"==o&&Qn(e,"keyHandled",e,t,r),"handled"!=o&&"multi"!=o||(Hn(r),nt(e)),n&&!o&&/\'$/.test(t)?(Hn(r),!0):!!o}function Tr(e,t){var r=gi(t,!0);return!!r&&(t.shiftKey&&!e.state.keySeq?wr(e,"Shift-"+r,t,(function(t){return br(e,t,!0)}))||wr(e,r,t,(function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return br(e,t)})):wr(e,r,t,(function(t){return br(e,t)})))}var Ar=null;function Ir(e){var t=this;if(t.curOp.focus=Fo(),!to(t,e)){o&&s<11&&27==e.keyCode&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=16==r||e.shiftKey;var i=Tr(t,e);c&&(Ar=i?r:null,i||88!=r||Zo||!(m?e.metaKey:e.ctrlKey)||t.replaceSelection("",null,"cut")),18!=r||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function r(e){18!=e.keyCode&&e.altKey||(Mo(t,"CodeMirror-crosshair"),Zn(document,"keyup",r),Zn(document,"mouseover",r))}Uo(t,"CodeMirror-crosshair"),zn(document,"keyup",r),zn(document,"mouseover",r)}(t)}}function Lr(e){16==e.keyCode&&(this.doc.sel.shift=!1),to(this,e)}function Cr(e){var t=this;if(!(ur(t.display,e)||to(t,e)||e.ctrlKey&&!e.altKey||m&&e.metaKey)){var r=e.keyCode,i=e.charCode;if(c&&r==Ar)return Ar=null,void Hn(e);c&&(!e.which||e.which<10)&&Tr(t,e)||function(e,t,r){return wr(e,"'"+r+"'",t,(function(t){return br(e,t,!0)}))}(t,e,String.fromCharCode(null==i?r:i))||t.display.input.onKeyPress(e)}}function Nr(e){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(Yn(e,"focus",e),e.state.focused=!0,Uo(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),a&&setTimeout((function(){e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),nt(e))}function Rr(e){e.state.delayingBlurEvent||(e.state.focused&&(Yn(e,"blur",e),e.state.focused=!1,Mo(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function Pr(e,t){ur(e.display,t)||function(e,t){return!!io(e,"gutterContextMenu")&&hr(e,t,"gutterContextMenu",!1)}(e,t)||to(e,t,"contextmenu")||e.display.input.onContextMenu(t)}var Or=w.changeEnd=function(e){return e.text?de(e.from.line+e.text.length-1,mo(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};function kr(e,t){if(fe(e,t.from)<0)return e;if(fe(e,t.to)<=0)return Or(t);var r=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=Or(t).ch-t.to.ch),de(r,i)}function Fr(e,t){for(var r=[],i=0;i<e.sel.ranges.length;i++){var n=e.sel.ranges[i];r.push(new Oe(kr(n.anchor,t),kr(n.head,t)))}return ke(r,e.sel.primIndex)}function Dr(e,t,r){return e.line==t.line?de(r.line,e.ch-t.ch+r.ch):de(r.line+(e.line-t.line),e.ch)}function Mr(e,t,r){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return r&&(i.update=function(t,r,i,n){t&&(this.from=Me(e,t)),r&&(this.to=Me(e,r)),i&&(this.text=i),void 0!==n&&(this.origin=n)}),Yn(e,"beforeChange",e,i),e.cm&&Yn(e.cm,"beforeChange",e.cm,i),i.canceled?null:{from:i.from,to:i.to,text:i.text,origin:i.origin}}function Ur(e,t,r){if(e.cm){if(!e.cm.curOp)return Zt(e.cm,Ur)(e,t,r);if(e.cm.state.suppressEdits)return}if(!(io(e,"beforeChange")||e.cm&&io(e.cm,"beforeChange"))||(t=Mr(e,t,!0))){var i=b&&!r&&function(e,t,r){var i=null;if(e.iter(t.line,r.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var r=e.markedSpans[t].marker;!r.readOnly||i&&-1!=yo(i,r)||(i||(i=[])).push(r)}})),!i)return null;for(var n=[{from:t,to:r}],o=0;o<i.length;++o)for(var s=i[o],a=s.find(0),u=0;u<n.length;++u){var l=n[u];if(!(fe(l.to,a.from)<0||fe(l.from,a.to)>0)){var c=[u,1],h=fe(l.from,a.from),p=fe(l.to,a.to);(h<0||!s.inclusiveLeft&&!h)&&c.push({from:l.from,to:a.from}),(p>0||!s.inclusiveRight&&!p)&&c.push({from:a.to,to:l.to}),n.splice.apply(n,c),u+=c.length-1}}return n}(e,t.from,t.to);if(i)for(var n=i.length-1;n>=0;--n)Br(e,{from:i[n].from,to:i[n].to,text:n?[""]:t.text});else Br(e,t)}}function Br(e,t){if(1!=t.text.length||""!=t.text[0]||0!=fe(t.from,t.to)){var r=Fr(e,t);On(e,t,r,e.cm?e.cm.curOp.id:NaN),Gr(e,t,r,Ii(e,t));var i=[];En(e,(function(e,r){r||-1!=yo(i,e.history)||(jn(e.history,t),i.push(e.history)),Gr(e,t,null,Ii(e,t))}))}}function jr(e,t,r){if(!e.cm||!e.cm.state.suppressEdits||r){for(var i,n=e.history,o=e.sel,s="undo"==t?n.done:n.undone,a="undo"==t?n.undone:n.done,u=0;u<s.length&&(i=s[u],r?!i.ranges||i.equals(e.sel):i.ranges);u++);if(u!=s.length){for(n.lastOrigin=n.lastSelOrigin=null;(i=s.pop()).ranges;){if(kn(i,a),r&&!i.equals(e.sel))return void Ke(e,i,{clearRedo:!1});o=i}var l=[];kn(o,a),a.push({changes:l,generation:n.generation}),n.generation=i.generation||++n.maxGeneration;var c=io(e,"beforeChange")||e.cm&&io(e.cm,"beforeChange");for(u=i.changes.length-1;u>=0;--u){var h=i.changes[u];if(h.origin=t,c&&!Mr(e,h,!1))return void(s.length=0);l.push(Rn(e,h));var p=u?Fr(e,h):mo(s);Gr(e,h,p,Ci(e,h)),!u&&e.cm&&e.cm.scrollIntoView({from:h.from,to:Or(h)});var d=[];En(e,(function(e,t){t||-1!=yo(d,e.history)||(jn(e.history,h),d.push(e.history)),Gr(e,h,null,Ci(e,h))}))}}}}function Hr(e,t){if(0!=t&&(e.first+=t,e.sel=new Pe(_o(e.sel.ranges,(function(e){return new Oe(de(e.anchor.line+t,e.anchor.ch),de(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){tr(e.cm,e.first,e.first-t,t);for(var r=e.cm.display,i=r.viewFrom;i<r.viewTo;i++)rr(e.cm,i,"gutter")}}function Gr(e,t,r,i){if(e.cm&&!e.cm.curOp)return Zt(e.cm,Gr)(e,t,r,i);if(t.to.line<e.first)Hr(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var n=t.text.length-1-(e.first-t.from.line);Hr(e,n),t={from:de(e.first,0),to:de(t.to.line+n,t.to.ch),text:[mo(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:de(o,bn(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Sn(e,t.from,t.to),r||(r=Fr(e,t)),e.cm?function(e,t,r){var i=e.doc,n=e.display,o=t.from,s=t.to,a=!1,u=o.line;e.options.lineWrapping||(u=An(Bi(bn(i,o.line))),i.iter(u,s.line+1,(function(e){if(e==n.maxLine)return a=!0,!0}))),i.sel.contains(t.from,t.to)>-1&&ro(e),dn(i,t,r,L(e)),e.options.lineWrapping||(i.iter(u,o.line+t.text.length,(function(e){var t=k(e);t>n.maxLineLength&&(n.maxLine=e,n.maxLineLength=t,n.maxLineChanged=!0,a=!1)})),a&&(e.curOp.updateMaxLine=!0)),i.frontier=Math.min(i.frontier,o.line),ot(e,400);var l=t.text.length-(s.line-o.line)-1;t.full?tr(e):o.line!=s.line||1!=t.text.length||pn(e.doc,t)?tr(e,o.line,s.line+1,l):rr(e,o.line,"text");var c=io(e,"changes"),h=io(e,"change");if(h||c){var p={from:o,to:s,text:t.text,removed:t.removed,origin:t.origin};h&&Qn(e,"change",e,p),c&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}(e.cm,t,i):dn(e,t,i),ze(e,r,ao)}}function Vr(e,t,r,i,n){if(i||(i=r),fe(i,r)<0){var o=i;i=r,r=o}"string"==typeof t&&(t=e.splitLines(t)),Ur(e,{from:r,to:i,text:t,origin:n})}function qr(e,t,r,i,n){var o=e.display,s=Dt(e.display);r<0&&(r=0);var a=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:o.scroller.scrollTop,u=dt(e),l={};n-r>u&&(n=r+u);var c=e.doc.height+lt(o),h=r<s,p=n>c-s;if(r<a)l.scrollTop=h?0:r;else if(n>a+u){var d=Math.min(r,(p?c:n)-u);d!=a&&(l.scrollTop=d)}var f=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:o.scroller.scrollLeft,g=pt(e)-(e.options.fixedGutter?o.gutters.offsetWidth:0),m=i-t>g;return m&&(i=t+g),t<10?l.scrollLeft=0:t<f?l.scrollLeft=Math.max(0,t-(m?0:10)):i>g+f-3&&(l.scrollLeft=i+(m?0:10)-g),l}function Wr(e,t,r){null==t&&null==r||zr(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=r&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+r)}function Kr(e){zr(e);var t=e.getCursor(),r=t,i=t;e.options.lineWrapping||(r=t.ch?de(t.line,t.ch-1):t,i=de(t.line,t.ch+1)),e.curOp.scrollToPos={from:r,to:i,margin:e.options.cursorScrollMargin,isCursor:!0}}function zr(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var r=Pt(e,t.from),i=Pt(e,t.to),n=qr(e,Math.min(r.left,i.left),Math.min(r.top,i.top)-t.margin,Math.max(r.right,i.right),Math.max(r.bottom,i.bottom)+t.margin);e.scrollTo(n.scrollLeft,n.scrollTop)}}function $r(e,t,r,i){var n,o=e.doc;null==r&&(r="add"),"smart"==r&&(o.mode.indent?n=at(e,t):r="prev");var s=e.options.tabSize,a=bn(o,t),u=ho(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var l,c=a.text.match(/^\s*/)[0];if(i||/\S/.test(a.text)){if("smart"==r&&((l=o.mode.indent(n,a.text.slice(c.length),a.text))==so||l>150)){if(!i)return;r="prev"}}else l=0,r="not";"prev"==r?l=t>o.first?ho(bn(o,t-1).text,null,s):0:"add"==r?l=u+e.options.indentUnit:"subtract"==r?l=u-e.options.indentUnit:"number"==typeof r&&(l=u+r),l=Math.max(0,l);var h="",p=0;if(e.options.indentWithTabs)for(var d=Math.floor(l/s);d;--d)p+=s,h+="\t";if(p<l&&(h+=go(l-p)),h!=c)return Vr(o,h,de(t,0),de(t,c.length),"+input"),a.stateAfter=null,!0;for(d=0;d<o.sel.ranges.length;d++){var f=o.sel.ranges[d];if(f.head.line==t&&f.head.ch<c.length){Ve(o,d,new Oe(p=de(t,c.length),p));break}}}function Jr(e,t,r,i){var n=t,o=t;return"number"==typeof t?o=bn(e,De(e,t)):n=An(t),null==n?null:(i(o,n)&&e.cm&&rr(e.cm,n,r),o)}function Zr(e,t){for(var r=e.doc.sel.ranges,i=[],n=0;n<r.length;n++){for(var o=t(r[n]);i.length&&fe(o.from,mo(i).to)<=0;){var s=i.pop();if(fe(s.from,o.from)<0){o.from=s.from;break}}i.push(o)}Jt(e,(function(){for(var t=i.length-1;t>=0;t--)Vr(e.doc,"",i[t].from,i[t].to,"+delete");Kr(e)}))}function Yr(e,t,r,i,n){var o=t.line,s=t.ch,a=r,u=bn(e,o);function l(t){var i,a=(n?ls:cs)(u,s,r,!0);if(null==a){if(t||((i=o+r)<e.first||i>=e.first+e.size||(o=i,!(u=bn(e,i)))))return!1;s=n?(r<0?is:rs)(u):r<0?u.text.length:0}else s=a;return!0}if("char"==i)l();else if("column"==i)l(!0);else if("word"==i||"group"==i)for(var c=null,h="group"==i,p=e.cm&&e.cm.getHelper(t,"wordChars"),d=!0;!(r<0)||l(!d);d=!1){var f=u.text.charAt(s)||"\n",g=Ao(f,p)?"w":h&&"\n"==f?"n":!h||/\s/.test(f)?null:"p";if(!h||d||g||(g="s"),c&&c!=g){r<0&&(r=1,l());break}if(g&&(c=g),r>0&&!l(!d))break}var m=Xe(e,de(o,s),t,a,!0);return fe(t,m)||(m.hitSide=!0),m}function Xr(e,t,r,i){var n,o=e.doc,s=t.left;if("page"==i){var a=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);n=t.top+r*(a-(r<0?1.5:.5)*Dt(e.display))}else"line"==i&&(n=r>0?t.bottom+3:t.top-3);for(;;){var u=kt(e,s,n);if(!u.outside)break;if(r<0?n<=0:n>=o.height){u.hitSide=!0;break}n+=5*r}return u}w.prototype={constructor:w,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var r=this.options,i=r[e];r[e]==t&&"mode"!=e||(r[e]=t,ei.hasOwnProperty(e)&&Zt(this,ei[e])(this,t,i))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](mi(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,r=0;r<t.length;++r)if(t[r]==e||t[r].name==e)return t.splice(r,1),!0},addOverlay:Yt((function(e,t){var r=e.token?e:w.getMode(this.options,e);if(r.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:r,modeSpec:e,opaque:t&&t.opaque}),this.state.modeGen++,tr(this)})),removeOverlay:Yt((function(e){for(var t=this.state.overlays,r=0;r<t.length;++r){var i=t[r].modeSpec;if(i==e||"string"==typeof e&&i.name==e)return t.splice(r,1),this.state.modeGen++,void tr(this)}})),indentLine:Yt((function(e,t,r){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Ue(this.doc,e)&&$r(this,e,t,r)})),indentSelection:Yt((function(e){for(var t=this.doc.sel.ranges,r=-1,i=0;i<t.length;i++){var n=t[i];if(n.empty())n.head.line>r&&($r(this,n.head.line,e,!0),r=n.head.line,i==this.doc.sel.primIndex&&Kr(this));else{var o=n.from(),s=n.to(),a=Math.max(r,o.line);r=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var u=a;u<r;++u)$r(this,u,e);var l=this.doc.sel.ranges;0==o.ch&&t.length==l.length&&l[i].from().ch>0&&Ve(this.doc,i,new Oe(o,l[i].to()),ao)}}})),getTokenAt:function(e,t){return Xi(this,e,t)},getLineTokens:function(e,t){return Xi(this,de(e),t,!0)},getTokenTypeAt:function(e){e=Me(this.doc,e);var t,r=tn(this,bn(this.doc,e.line)),i=0,n=(r.length-1)/2,o=e.ch;if(0==o)t=r[2];else for(;;){var s=i+n>>1;if((s?r[2*s-1]:0)>=o)n=s;else{if(!(r[2*s+1]<o)){t=r[2*s+2];break}i=s+1}}var a=t?t.indexOf("cm-overlay "):-1;return a<0?t:0==a?null:t.slice(0,a-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?w.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!ai.hasOwnProperty(t))return r;var i=ai[t],n=this.getModeAt(e);if("string"==typeof n[t])i[n[t]]&&r.push(i[n[t]]);else if(n[t])for(var o=0;o<n[t].length;o++){var s=i[n[t][o]];s&&r.push(s)}else n.helperType&&i[n.helperType]?r.push(i[n.helperType]):i[n.name]&&r.push(i[n.name]);for(o=0;o<i._global.length;o++){var a=i._global[o];a.pred(n,this)&&-1==yo(r,a.val)&&r.push(a.val)}return r},getStateAfter:function(e,t){var r=this.doc;return at(this,(e=De(r,null==e?r.first+r.size-1:e))+1,t)},cursorCoords:function(e,t){var r=this.doc.sel.primary();return Rt(this,null==e?r.head:"object"==typeof e?Me(this.doc,e):e?r.from():r.to(),t||"page")},charCoords:function(e,t){return Nt(this,Me(this.doc,e),t||"page")},coordsChar:function(e,t){return kt(this,(e=Ct(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=Ct(this,{top:e,left:0},t||"page").top,In(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var r,i=!1;if("number"==typeof e){var n=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>n&&(e=n,i=!0),r=bn(this.doc,e)}else r=e;return Lt(this,r,{top:0,left:0},t||"page").top+(i?this.doc.height-Ln(r):0)},defaultTextHeight:function(){return Dt(this.display)},defaultCharWidth:function(){return Mt(this.display)},setGutterMarker:Yt((function(e,t,r){return Jr(this.doc,e,"gutter",(function(e){var i=e.gutterMarkers||(e.gutterMarkers={});return i[t]=r,!r&&Io(i)&&(e.gutterMarkers=null),!0}))})),clearGutter:Yt((function(e){var t=this,r=t.doc,i=r.first;r.iter((function(r){r.gutterMarkers&&r.gutterMarkers[e]&&(r.gutterMarkers[e]=null,rr(t,i,"gutter"),Io(r.gutterMarkers)&&(r.gutterMarkers=null)),++i}))})),lineInfo:function(e){if("number"==typeof e){if(!Ue(this.doc,e))return null;var t=e;if(!(e=bn(this.doc,e)))return null}else if(null==(t=An(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,r,i,n){var o,s,a,u,l,c,h=this.display,p=(e=Rt(this,Me(this.doc,e))).bottom,d=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),h.sizer.appendChild(t),"over"==i)p=e.top;else if("above"==i||"near"==i){var f=Math.max(h.wrapper.clientHeight,this.doc.height),g=Math.max(h.sizer.clientWidth,h.lineSpace.clientWidth);("above"==i||e.bottom+t.offsetHeight>f)&&e.top>t.offsetHeight?p=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=f&&(p=e.bottom),d+t.offsetWidth>g&&(d=g-t.offsetWidth)}t.style.top=p+"px",t.style.left=t.style.right="","right"==n?(d=h.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==n?d=0:"middle"==n&&(d=(h.sizer.clientWidth-t.offsetWidth)/2),t.style.left=d+"px"),r&&(o=this,s=d,a=p,u=d+t.offsetWidth,l=p+t.offsetHeight,null!=(c=qr(o,s,a,u,l)).scrollTop&&mr(o,c.scrollTop),null!=c.scrollLeft&&vr(o,c.scrollLeft))},triggerOnKeyDown:Yt(Ir),triggerOnKeyPress:Yt(Cr),triggerOnKeyUp:Lr,execCommand:function(e){if(ci.hasOwnProperty(e))return ci[e].call(null,this)},triggerElectric:Yt((function(e){be(this,e)})),findPosH:function(e,t,r,i){var n=1;t<0&&(n=-1,t=-t);for(var o=0,s=Me(this.doc,e);o<t&&!(s=Yr(this.doc,s,n,r,i)).hitSide;++o);return s},moveH:Yt((function(e,t){var r=this;r.extendSelectionsBy((function(i){return r.display.shift||r.doc.extend||i.empty()?Yr(r.doc,i.head,e,t,r.options.rtlMoveVisually):e<0?i.from():i.to()}),lo)})),deleteH:Yt((function(e,t){var r=this.doc.sel,i=this.doc;r.somethingSelected()?i.replaceSelection("",null,"+delete"):Zr(this,(function(r){var n=Yr(i,r.head,e,t,!1);return e<0?{from:n,to:r.head}:{from:r.head,to:n}}))})),findPosV:function(e,t,r,i){var n=1,o=i;t<0&&(n=-1,t=-t);for(var s=0,a=Me(this.doc,e);s<t;++s){var u=Rt(this,a,"div");if(null==o?o=u.left:u.left=o,(a=Xr(this,u,n,r)).hitSide)break}return a},moveV:Yt((function(e,t){var r=this,i=this.doc,n=[],o=!r.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy((function(s){if(o)return e<0?s.from():s.to();var a=Rt(r,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),n.push(a.left);var u=Xr(r,a,e,t);return"page"==t&&s==i.sel.primary()&&Wr(r,null,Nt(r,u,"div").top-a.top),u}),lo),n.length)for(var s=0;s<i.sel.ranges.length;s++)i.sel.ranges[s].goalColumn=n[s]})),findWordAt:function(e){var t=bn(this.doc,e.line).text,r=e.ch,i=e.ch;if(t){var n=this.getHelper(e,"wordChars");(e.xRel<0||i==t.length)&&r?--r:++i;for(var o=t.charAt(r),s=Ao(o,n)?function(e){return Ao(e,n)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!Ao(e)};r>0&&s(t.charAt(r-1));)--r;for(;i<t.length&&s(t.charAt(i));)++i}return new Oe(de(e.line,r),de(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Uo(this.display.cursorDiv,"CodeMirror-overwrite"):Mo(this.display.cursorDiv,"CodeMirror-overwrite"),Yn(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Fo()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Yt((function(e,t){null==e&&null==t||zr(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-ht(this)-this.display.barHeight,width:e.scrollWidth-ht(this)-this.display.barWidth,clientHeight:dt(this),clientWidth:pt(this)}},scrollIntoView:Yt((function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:de(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)zr(this),this.curOp.scrollToPos=e;else{var r=qr(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(r.scrollLeft,r.scrollTop)}})),setSize:Yt((function(e,t){var r=this;function i(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}null!=e&&(r.display.wrapper.style.width=i(e)),null!=t&&(r.display.wrapper.style.height=i(t)),r.options.lineWrapping&&wt(this);var n=r.display.viewFrom;r.doc.iter(n,r.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){rr(r,n,"widget");break}++n})),r.curOp.forceUpdate=!0,Yn(r,"refresh",this)})),operation:function(e){return Jt(this,e)},refresh:Yt((function(){var e=this.display.cachedTextHeight;tr(this),this.curOp.forceUpdate=!0,Tt(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),O(this),(null==e||Math.abs(e-Dt(this.display))>.5)&&C(this),Yn(this,"refresh",this)})),swapDoc:Yt((function(e){var t=this.doc;return t.cm=null,xn(this,e),Tt(this),this.display.input.reset(),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,Qn(this,"swapDoc",this,t),t})),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},no(w);var Qr=w.defaults={},ei=w.optionHandlers={};function ti(e,t,r,i){w.defaults[e]=t,r&&(ei[e]=i?function(e,t,i){i!=ri&&r(e,t,i)}:r)}var ri=w.Init={toString:function(){return"CodeMirror.Init"}};ti("value","",(function(e,t){e.setValue(t)}),!0),ti("mode",null,(function(e,t){e.doc.modeOption=t,A(e)}),!0),ti("indentUnit",2,A,!0),ti("indentWithTabs",!1),ti("smartIndent",!0),ti("tabSize",4,(function(e){I(e),Tt(e),tr(e)}),!0),ti("lineSeparator",null,(function(e,t){if(e.doc.lineSep=t,t){var r=[],i=e.doc.first;e.doc.iter((function(e){for(var n=0;;){var o=e.text.indexOf(t,n);if(-1==o)break;n=o+t.length,r.push(de(i,o))}i++}));for(var n=r.length-1;n>=0;n--)Vr(e.doc,t,r[n],de(r[n].line,r[n].ch+t.length))}})),ti("specialChars",/[\u0000-\u001f\u007f\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,(function(e,t,r){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),r!=w.Init&&e.refresh()})),ti("specialCharPlaceholder",(function(e){var t=Ro("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}),(function(e){e.refresh()}),!0),ti("electricChars",!0),ti("inputStyle",g?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),ti("rtlMoveVisually",!y),ti("wholeLineUpdateBefore",!0),ti("theme","default",(function(e){N(e),R(e)}),!0),ti("keyMap","default",(function(e,t,r){var i=mi(t),n=r!=w.Init&&mi(r);n&&n.detach&&n.detach(e,i),i.attach&&i.attach(e,n||null)})),ti("extraKeys",null),ti("lineWrapping",!1,(function(e){e.options.lineWrapping?(Uo(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Mo(e.display.wrapper,"CodeMirror-wrap"),F(e)),C(e),tr(e),Tt(e),setTimeout((function(){H(e)}),100)}),!0),ti("gutters",[],(function(e){D(e.options),R(e)}),!0),ti("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?z(e.display)+"px":"0",e.refresh()}),!0),ti("coverGutterNextToScrollbar",!1,(function(e){H(e)}),!0),ti("scrollbarStyle","native",(function(e){j(e),H(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),ti("lineNumbers",!1,(function(e){D(e.options),R(e)}),!0),ti("firstLineNumber",1,R,!0),ti("lineNumberFormatter",(function(e){return e}),R,!0),ti("showCursorWhenSelecting",!1,et,!0),ti("resetSelectionOnContextMenu",!0),ti("lineWiseCopyCut",!0),ti("readOnly",!1,(function(e,t){"nocursor"==t?(Rr(e),e.display.input.blur(),e.display.disabled=!0):e.display.disabled=!1,e.display.input.readOnlyChanged(t)})),ti("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),ti("dragDrop",!0,(function(e,t,r){if(!t!=!(r&&r!=w.Init)){var i=e.display.dragFunctions,n=t?zn:Zn;n(e.display.scroller,"dragstart",i.start),n(e.display.scroller,"dragenter",i.enter),n(e.display.scroller,"dragover",i.over),n(e.display.scroller,"dragleave",i.leave),n(e.display.scroller,"drop",i.drop)}})),ti("allowDropFileTypes",null),ti("cursorBlinkRate",530),ti("cursorScrollMargin",0),ti("cursorHeight",1,et,!0),ti("singleCursorHeightPerLine",!0,et,!0),ti("workTime",100),ti("workDelay",100),ti("flattenSpans",!0,I,!0),ti("addModeClass",!1,I,!0),ti("pollInterval",100),ti("undoDepth",200,(function(e,t){e.doc.history.undoDepth=t})),ti("historyEventDelay",1250),ti("viewportMargin",10,(function(e){e.refresh()}),!0),ti("maxHighlightLength",1e4,I,!0),ti("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),ti("tabindex",null,(function(e,t){e.display.input.getField().tabIndex=t||""})),ti("autofocus",null);var ii=w.modes={},ni=w.mimeModes={};w.defineMode=function(e,t){w.defaults.mode||"null"==e||(w.defaults.mode=e),arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),ii[e]=t},w.defineMIME=function(e,t){ni[e]=t},w.resolveMode=function(e){if("string"==typeof e&&ni.hasOwnProperty(e))e=ni[e];else if(e&&"string"==typeof e.name&&ni.hasOwnProperty(e.name)){var t=ni[e.name];"string"==typeof t&&(t={name:t}),(e=xo(t,e)).name=t.name}else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return w.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},w.getMode=function(e,t){t=w.resolveMode(t);var r=ii[t.name];if(!r)return w.getMode(e,"text/plain");var i=r(e,t);if(oi.hasOwnProperty(t.name)){var n=oi[t.name];for(var o in n)n.hasOwnProperty(o)&&(i.hasOwnProperty(o)&&(i["_"+o]=i[o]),i[o]=n[o])}if(i.name=t.name,t.helperType&&(i.helperType=t.helperType),t.modeProps)for(var o in t.modeProps)i[o]=t.modeProps[o];return i},w.defineMode("null",(function(){return{token:function(e){e.skipToEnd()}}})),w.defineMIME("text/plain","null");var oi=w.modeExtensions={};w.extendMode=function(e,t){bo(t,oi.hasOwnProperty(e)?oi[e]:oi[e]={})},w.defineExtension=function(e,t){w.prototype[e]=t},w.defineDocExtension=function(e,t){vn.prototype[e]=t},w.defineOption=ti;var si=[];w.defineInitHook=function(e){si.push(e)};var ai=w.helpers={};w.registerHelper=function(e,t,r){ai.hasOwnProperty(e)||(ai[e]=w[e]={_global:[]}),ai[e][t]=r},w.registerGlobalHelper=function(e,t,r,i){w.registerHelper(e,t,i),ai[e]._global.push({pred:r,val:i})};var ui=w.copyState=function(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var r={};for(var i in t){var n=t[i];n instanceof Array&&(n=n.concat([])),r[i]=n}return r},li=w.startState=function(e,t,r){return!e.startState||e.startState(t,r)};w.innerMode=function(e,t){for(;e.innerMode;){var r=e.innerMode(t);if(!r||r.mode==e)break;t=r.state,e=r.mode}return r||{mode:e,state:t}};var ci=w.commands={selectAll:function(e){e.setSelection(de(e.firstLine(),0),de(e.lastLine()),ao)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),ao)},killLine:function(e){Zr(e,(function(t){if(t.empty()){var r=bn(e.doc,t.head.line).text.length;return t.head.ch==r&&t.head.line<e.lastLine()?{from:t.head,to:de(t.head.line+1,0)}:{from:t.head,to:de(t.head.line,r)}}return{from:t.from(),to:t.to()}}))},deleteLine:function(e){Zr(e,(function(t){return{from:de(t.from().line,0),to:Me(e.doc,de(t.to().line+1,0))}}))},delLineLeft:function(e){Zr(e,(function(e){return{from:de(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(e){Zr(e,(function(t){var r=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:r},"div"),to:t.from()}}))},delWrappedLineRight:function(e){Zr(e,(function(t){var r=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div");return{from:t.from(),to:i}}))},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(de(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(de(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy((function(t){return ns(e,t.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy((function(t){return os(e,t.head)}),{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy((function(t){return function(e,t){for(var r,i=bn(e.doc,t);r=Mi(i);)i=r.find(1,!0).line,t=null;var n=Cn(i),o=n?n[0].level%2?rs(i):is(i):i.text.length;return de(null==t?An(i):t,o)}(e,t.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy((function(t){var r=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div")}),lo)},goLineLeft:function(e){e.extendSelectionsBy((function(t){var r=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:r},"div")}),lo)},goLineLeftSmart:function(e){e.extendSelectionsBy((function(t){var r=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:r},"div");return i.ch<e.getLine(i.line).search(/\S/)?os(e,t.head):i}),lo)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],r=e.listSelections(),i=e.options.tabSize,n=0;n<r.length;n++){var o=r[n].from(),s=ho(e.getLine(o.line),o.ch,i);t.push(go(i-s%i))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){Jt(e,(function(){for(var t=e.listSelections(),r=[],i=0;i<t.length;i++){var n=t[i].head,o=bn(e.doc,n.line).text;if(o)if(n.ch==o.length&&(n=new de(n.line,n.ch-1)),n.ch>0)n=new de(n.line,n.ch+1),e.replaceRange(o.charAt(n.ch-1)+o.charAt(n.ch-2),de(n.line,n.ch-2),n,"+transpose");else if(n.line>e.doc.first){var s=bn(e.doc,n.line-1).text;s&&e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+s.charAt(s.length-1),de(n.line-1,s.length-1),de(n.line,1),"+transpose")}r.push(new Oe(n,n))}e.setSelections(r)}))},newlineAndIndent:function(e){Jt(e,(function(){for(var t=e.listSelections().length,r=0;r<t;r++){var i=e.listSelections()[r];e.replaceRange(e.doc.lineSeparator(),i.anchor,i.head,"+input"),e.indentLine(i.from().line+1,null,!0)}Kr(e)}))},openLine:function(e){e.replaceSelection("\n","start")},toggleOverwrite:function(e){e.toggleOverwrite()}},hi=w.keyMap={};function pi(e){for(var t,r,i,n,o=e.split(/-(?!$)/),s=(e=o[o.length-1],0);s<o.length-1;s++){var a=o[s];if(/^(cmd|meta|m)$/i.test(a))n=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))r=!0;else{if(!/^s(hift)$/i.test(a))throw new Error("Unrecognized modifier name: "+a);i=!0}}return t&&(e="Alt-"+e),r&&(e="Ctrl-"+e),n&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}hi.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},hi.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},hi.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},hi.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},hi.default=m?hi.macDefault:hi.pcDefault,w.normalizeKeyMap=function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if("..."==i){delete e[r];continue}for(var n=_o(r.split(" "),pi),o=0;o<n.length;o++){var s,a;o==n.length-1?(a=n.join(" "),s=i):(a=n.slice(0,o+1).join(" "),s="...");var u=t[a];if(u){if(u!=s)throw new Error("Inconsistent bindings for "+a)}else t[a]=s}delete e[r]}for(var l in t)e[l]=t[l];return e};var di=w.lookupKey=function(e,t,r,i){var n=(t=mi(t)).call?t.call(e,i):t[e];if(!1===n)return"nothing";if("..."===n)return"multi";if(null!=n&&r(n))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return di(e,t.fallthrough,r,i);for(var o=0;o<t.fallthrough.length;o++){var s=di(e,t.fallthrough[o],r,i);if(s)return s}}},fi=w.isModifierKey=function(e){var t="string"==typeof e?e:Qo[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},gi=w.keyName=function(e,t){if(c&&34==e.keyCode&&e.char)return!1;var r=Qo[e.keyCode],i=r;return null!=i&&!e.altGraphKey&&(e.altKey&&"Alt"!=r&&(i="Alt-"+i),(E?e.metaKey:e.ctrlKey)&&"Ctrl"!=r&&(i="Ctrl-"+i),(E?e.ctrlKey:e.metaKey)&&"Cmd"!=r&&(i="Cmd-"+i),!t&&e.shiftKey&&"Shift"!=r&&(i="Shift-"+i),i)};function mi(e){return"string"==typeof e?hi[e]:e}w.fromTextArea=function(e,t){if((t=t?bo(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var r=Fo();t.autofocus=r==e||null!=e.getAttribute("autofocus")&&r==document.body}function i(){e.value=a.getValue()}if(e.form&&(zn(e.form,"submit",i),!t.leaveSubmitMethodAlone)){var n=e.form,o=n.submit;try{var s=n.submit=function(){i(),n.submit=o,n.submit(),n.submit=s}}catch(e){}}t.finishInit=function(t){t.save=i,t.getTextArea=function(){return e},t.toTextArea=function(){t.toTextArea=isNaN,i(),e.parentNode.removeChild(t.getWrapperElement()),e.style.display="",e.form&&(Zn(e.form,"submit",i),"function"==typeof e.form.submit&&(e.form.submit=o))}},e.style.display="none";var a=w((function(t){e.parentNode.insertBefore(t,e.nextSibling)}),t);return a};var vi=w.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};vi.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var r=t==e;else r=t&&(e.test?e.test(t):e(t));if(r)return++this.pos,t},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ho(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?ho(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return ho(this.string,null,this.tabSize)-(this.lineStart?ho(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,r){if("string"!=typeof e){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&!1!==t&&(this.pos+=i[0].length),i)}var n=function(e){return r?e.toLowerCase():e};if(n(this.string.substr(this.pos,e.length))==n(e))return!1!==t&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var yi=0,_i=w.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++yi};function Ei(e,t,r,i,n){if(i&&i.shared)return function(e,t,r,i,n){(i=bo(i)).shared=!1;var o=[Ei(e,t,r,i,n)],s=o[0],a=i.widgetNode;return En(e,(function(e){a&&(i.widgetNode=a.cloneNode(!0)),o.push(Ei(e,Me(e,t),Me(e,r),i,n));for(var u=0;u<e.linked.length;++u)if(e.linked[u].isParent)return;s=mo(o)})),new xi(o,s)}(e,t,r,i,n);if(e.cm&&!e.cm.curOp)return Zt(e.cm,Ei)(e,t,r,i,n);var o=new _i(e,n),s=fe(t,r);if(i&&bo(i,o,!1),s>0||0==s&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=Ro("span",[o.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Ui(e,t.line,t,r,o)||t.line!=r.line&&Ui(e,r.line,t,r,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");S=!0}o.addToHistory&&On(e,{from:t,to:r,origin:"markText"},e.sel,NaN);var a,u=t.line,l=e.cm;if(e.iter(u,r.line+1,(function(e){l&&o.collapsed&&!l.options.lineWrapping&&Bi(e)==l.display.maxLine&&(a=!0),o.collapsed&&u!=t.line&&Tn(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new wi(o,u==t.line?t.ch:null,u==r.line?r.ch:null)),++u})),o.collapsed&&e.iter(t.line,r.line+1,(function(t){Gi(e,t)&&Tn(t,0)})),o.clearOnEnter&&zn(o,"beforeCursorEnter",(function(){o.clear()})),o.readOnly&&(b=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++yi,o.atomic=!0),l){if(a&&(l.curOp.updateMaxLine=!0),o.collapsed)tr(l,t.line,r.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var c=t.line;c<=r.line;c++)rr(l,c,"text");o.atomic&&Je(l.doc),Qn(l,"markerAdded",l,o)}return o}no(_i),_i.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Gt(e),io(this,"clear")){var r=this.find();r&&Qn(this,"clear",r.from,r.to)}for(var i=null,n=null,o=0;o<this.lines.length;++o){var s=this.lines[o],a=Ti(s.markedSpans,this);e&&!this.collapsed?rr(e,An(s),"text"):e&&(null!=a.to&&(n=An(s)),null!=a.from&&(i=An(s))),s.markedSpans=Ai(s.markedSpans,a),null==a.from&&this.collapsed&&!Gi(this.doc,s)&&e&&Tn(s,Dt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(o=0;o<this.lines.length;++o){var u=Bi(this.lines[o]),l=k(u);l>e.display.maxLineLength&&(e.display.maxLine=u,e.display.maxLineLength=l,e.display.maxLineChanged=!0)}null!=i&&e&&this.collapsed&&tr(e,i,n+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Je(e.doc)),e&&Qn(e,"markerCleared",e,this),t&&Vt(e),this.parent&&this.parent.clear()}},_i.prototype.find=function(e,t){var r,i;null==e&&"bookmark"==this.type&&(e=1);for(var n=0;n<this.lines.length;++n){var o=this.lines[n],s=Ti(o.markedSpans,this);if(null!=s.from&&(r=de(t?o:An(o),s.from),-1==e))return r;if(null!=s.to&&(i=de(t?o:An(o),s.to),1==e))return i}return r&&{from:r,to:i}},_i.prototype.changed=function(){var e=this.find(-1,!0),t=this,r=this.doc.cm;e&&r&&Jt(r,(function(){var i=e.line,n=An(e.line),o=mt(r,n);if(o&&(St(o),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!Gi(t.doc,i)&&null!=t.height){var s=t.height;t.height=null;var a=Ki(t)-s;a&&Tn(i,i.height+a)}}))},_i.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=yo(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},_i.prototype.detachLine=function(e){if(this.lines.splice(yo(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},yi=0;var xi=w.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var r=0;r<e.length;++r)e[r].parent=this};function bi(e){return e.findMarks(de(e.first,0),e.clipPos(de(e.lastLine())),(function(e){return e.parent}))}function Si(e){for(var t=0;t<e.length;t++){var r=e[t],i=[r.primary.doc];En(r.primary.doc,(function(e){i.push(e)}));for(var n=0;n<r.markers.length;n++){var o=r.markers[n];-1==yo(i,o.doc)&&(o.parent=null,r.markers.splice(n--,1))}}}function wi(e,t,r){this.marker=e,this.from=t,this.to=r}function Ti(e,t){if(e)for(var r=0;r<e.length;++r){var i=e[r];if(i.marker==t)return i}}function Ai(e,t){for(var r,i=0;i<e.length;++i)e[i]!=t&&(r||(r=[])).push(e[i]);return r}function Ii(e,t){if(t.full)return null;var r=Ue(e,t.from.line)&&bn(e,t.from.line).markedSpans,i=Ue(e,t.to.line)&&bn(e,t.to.line).markedSpans;if(!r&&!i)return null;var n=t.from.ch,o=t.to.ch,s=0==fe(t.from,t.to),a=function(e,t,r){if(e)for(var i,n=0;n<e.length;++n){var o=e[n],s=o.marker;if(null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==s.type&&(!r||!o.marker.insertLeft)){var a=null==o.to||(s.inclusiveRight?o.to>=t:o.to>t);(i||(i=[])).push(new wi(s,o.from,a?null:o.to))}}return i}(r,n,s),u=function(e,t,r){if(e)for(var i,n=0;n<e.length;++n){var o=e[n],s=o.marker;if(null==o.to||(s.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==s.type&&(!r||o.marker.insertLeft)){var a=null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t);(i||(i=[])).push(new wi(s,a?null:o.from-t,null==o.to?null:o.to-t))}}return i}(i,o,s),l=1==t.text.length,c=mo(t.text).length+(l?n:0);if(a)for(var h=0;h<a.length;++h)null==(p=a[h]).to&&((d=Ti(u,p.marker))?l&&(p.to=null==d.to?null:d.to+c):p.to=n);if(u)for(h=0;h<u.length;++h){var p,d;null!=(p=u[h]).to&&(p.to+=c),null==p.from?(d=Ti(a,p.marker))||(p.from=c,l&&(a||(a=[])).push(p)):(p.from+=c,l&&(a||(a=[])).push(p))}a&&(a=Li(a)),u&&u!=a&&(u=Li(u));var f=[a];if(!l){var g,m=t.text.length-2;if(m>0&&a)for(h=0;h<a.length;++h)null==a[h].to&&(g||(g=[])).push(new wi(a[h].marker,null,null));for(h=0;h<m;++h)f.push(g);f.push(u)}return f}function Li(e){for(var t=0;t<e.length;++t){var r=e[t];null!=r.from&&r.from==r.to&&!1!==r.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Ci(e,t){var r=function(e,t){var r=t["spans_"+e.id];if(!r)return null;for(var i=0,n=[];i<t.text.length;++i)n.push(Dn(r[i]));return n}(e,t),i=Ii(e,t);if(!r)return i;if(!i)return r;for(var n=0;n<r.length;++n){var o=r[n],s=i[n];if(o&&s)e:for(var a=0;a<s.length;++a){for(var u=s[a],l=0;l<o.length;++l)if(o[l].marker==u.marker)continue e;o.push(u)}else s&&(r[n]=s)}return r}function Ni(e){var t=e.markedSpans;if(t){for(var r=0;r<t.length;++r)t[r].marker.detachLine(e);e.markedSpans=null}}function Ri(e,t){if(t){for(var r=0;r<t.length;++r)t[r].marker.attachLine(e);e.markedSpans=t}}function Pi(e){return e.inclusiveLeft?-1:0}function Oi(e){return e.inclusiveRight?1:0}function ki(e,t){var r=e.lines.length-t.lines.length;if(0!=r)return r;var i=e.find(),n=t.find(),o=fe(i.from,n.from)||Pi(e)-Pi(t);return o?-o:fe(i.to,n.to)||Oi(e)-Oi(t)||t.id-e.id}function Fi(e,t){var r,i=S&&e.markedSpans;if(i)for(var n,o=0;o<i.length;++o)(n=i[o]).marker.collapsed&&null==(t?n.from:n.to)&&(!r||ki(r,n.marker)<0)&&(r=n.marker);return r}function Di(e){return Fi(e,!0)}function Mi(e){return Fi(e,!1)}function Ui(e,t,r,i,n){var o=bn(e,t),s=S&&o.markedSpans;if(s)for(var a=0;a<s.length;++a){var u=s[a];if(u.marker.collapsed){var l=u.marker.find(0),c=fe(l.from,r)||Pi(u.marker)-Pi(n),h=fe(l.to,i)||Oi(u.marker)-Oi(n);if(!(c>=0&&h<=0||c<=0&&h>=0)&&(c<=0&&(u.marker.inclusiveRight&&n.inclusiveLeft?fe(l.to,r)>=0:fe(l.to,r)>0)||c>=0&&(u.marker.inclusiveRight&&n.inclusiveLeft?fe(l.from,i)<=0:fe(l.from,i)<0)))return!0}}}function Bi(e){for(var t;t=Di(e);)e=t.find(-1,!0).line;return e}function ji(e,t){var r=bn(e,t),i=Bi(r);return r==i?t:An(i)}function Hi(e,t){if(t>e.lastLine())return t;var r,i=bn(e,t);if(!Gi(e,i))return t;for(;r=Mi(i);)i=r.find(1,!0).line;return An(i)+1}function Gi(e,t){var r=S&&t.markedSpans;if(r)for(var i,n=0;n<r.length;++n)if((i=r[n]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&Vi(e,t,i))return!0}}function Vi(e,t,r){if(null==r.to){var i=r.marker.find(1,!0);return Vi(e,i.line,Ti(i.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==t.text.length)return!0;for(var n,o=0;o<t.markedSpans.length;++o)if((n=t.markedSpans[o]).marker.collapsed&&!n.marker.widgetNode&&n.from==r.to&&(null==n.to||n.to!=r.from)&&(n.marker.inclusiveLeft||r.marker.inclusiveRight)&&Vi(e,t,n))return!0}no(xi),xi.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Qn(this,"clear")}},xi.prototype.find=function(e,t){return this.primary.find(e,t)};var qi=w.LineWidget=function(e,t,r){if(r)for(var i in r)r.hasOwnProperty(i)&&(this[i]=r[i]);this.doc=e,this.node=t};function Wi(e,t,r){Ln(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Wr(e,null,r)}function Ki(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!ko(document.body,e.node)){var r="position: relative;";e.coverGutter&&(r+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(r+="width: "+t.display.wrapper.clientWidth+"px;"),Oo(t.display.measure,Ro("div",[e.node],null,r))}return e.height=e.node.parentNode.offsetHeight}no(qi),qi.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,r=this.line,i=An(r);if(null!=i&&t){for(var n=0;n<t.length;++n)t[n]==this&&t.splice(n--,1);t.length||(r.widgets=null);var o=Ki(this);Tn(r,Math.max(0,r.height-o)),e&&Jt(e,(function(){Wi(e,r,-o),rr(e,i,"widget")}))}},qi.prototype.changed=function(){var e=this.height,t=this.doc.cm,r=this.line;this.height=null;var i=Ki(this)-e;i&&(Tn(r,r.height+i),t&&Jt(t,(function(){t.curOp.forceUpdate=!0,Wi(t,r,i)})))};var zi=w.Line=function(e,t,r){this.text=e,Ri(this,t),this.height=r?r(this):1};function $i(e){e.parent=null,Ni(e)}function Ji(e,t){if(e)for(;;){var r=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var i=r[1]?"bgClass":"textClass";null==t[i]?t[i]=r[2]:new RegExp("(?:^|s)"+r[2]+"(?:$|s)").test(t[i])||(t[i]+=" "+r[2])}return e}function Zi(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var r=w.innerMode(e,t);return r.mode.blankLine?r.mode.blankLine(r.state):void 0}}function Yi(e,t,r,i){for(var n=0;n<10;n++){i&&(i[0]=w.innerMode(e,r).mode);var o=e.token(t,r);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}function Xi(e,t,r,i){function n(e){return{start:h.start,end:h.pos,string:h.current(),type:o||null,state:e?ui(s.mode,c):c}}var o,s=e.doc,a=s.mode;t=Me(s,t);var u,l=bn(s,t.line),c=at(e,t.line,r),h=new vi(l.text,e.options.tabSize);for(i&&(u=[]);(i||h.pos<t.ch)&&!h.eol();)h.start=h.pos,o=Yi(a,h,c),i&&u.push(n(!0));return i?u:n()}function Qi(e,t,r,i,n,o,s){var a=r.flattenSpans;null==a&&(a=e.options.flattenSpans);var u,l=0,c=null,h=new vi(t,e.options.tabSize),p=e.options.addModeClass&&[null];for(""==t&&Ji(Zi(r,i),o);!h.eol();){if(h.pos>e.options.maxHighlightLength?(a=!1,s&&rn(e,t,i,h.pos),h.pos=t.length,u=null):u=Ji(Yi(r,h,i,p),o),p){var d=p[0].name;d&&(u="m-"+(u?d+" "+u:d))}if(!a||c!=u){for(;l<h.start;)n(l=Math.min(h.start,l+5e4),c);c=u}h.start=h.pos}for(;l<h.pos;){var f=Math.min(h.pos,l+5e4);n(f,c),l=f}}function en(e,t,r,i){var n=[e.state.modeGen],o={};Qi(e,t.text,e.doc.mode,r,(function(e,t){n.push(e,t)}),o,i);for(var s=0;s<e.state.overlays.length;++s){var a=e.state.overlays[s],u=1,l=0;Qi(e,t.text,a.mode,!0,(function(e,t){for(var r=u;l<e;){var i=n[u];i>e&&n.splice(u,1,e,n[u+1],i),u+=2,l=Math.min(e,i)}if(t)if(a.opaque)n.splice(r,u-r,e,"cm-overlay "+t),u=r+2;else for(;r<u;r+=2){var o=n[r+1];n[r+1]=(o?o+" ":"")+"cm-overlay "+t}}),o)}return{styles:n,classes:o.bgClass||o.textClass?o:null}}function tn(e,t,r){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=at(e,An(t)),n=en(e,t,t.text.length>e.options.maxHighlightLength?ui(e.doc.mode,i):i);t.stateAfter=i,t.styles=n.styles,n.classes?t.styleClasses=n.classes:t.styleClasses&&(t.styleClasses=null),r===e.doc.frontier&&e.doc.frontier++}return t.styles}function rn(e,t,r,i){var n=e.doc.mode,o=new vi(t,e.options.tabSize);for(o.start=o.pos=i||0,""==t&&Zi(n,r);!o.eol();)Yi(n,o,r),o.start=o.pos}no(zi),zi.prototype.lineNo=function(){return An(this)};var nn={},on={};function sn(e,t){if(!e||/^\s*$/.test(e))return null;var r=t.addModeClass?on:nn;return r[e]||(r[e]=e.replace(/\S+/g,"cm-$&"))}function an(e,t){var r=Ro("span",null,null,a?"padding-right: .1px":null),i={pre:Ro("pre",[r],"CodeMirror-line"),content:r,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:(o||a)&&e.getOption("lineWrapping")};t.measure={};for(var n=0;n<=(t.rest?t.rest.length:0);n++){var s,u=n?t.rest[n-1]:t.line;i.pos=0,i.addToken=un,Ko(e.display.measure)&&(s=Cn(u))&&(i.addToken=ln(i.addToken,s)),i.map=[],hn(u,i,tn(e,u,t!=e.display.externalMeasured&&An(u))),u.styleClasses&&(u.styleClasses.bgClass&&(i.bgClass=Bo(u.styleClasses.bgClass,i.bgClass||"")),u.styleClasses.textClass&&(i.textClass=Bo(u.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(Wo(e.display.measure))),0==n?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(a){var l=i.content.lastChild;(/\bcm-tab\b/.test(l.className)||l.querySelector&&l.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return Yn(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=Bo(i.pre.className,i.textClass||"")),i}function un(e,t,r,i,n,a,u){if(t){var l=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var r=t,i="",n=0;n<e.length;n++){var o=e.charAt(n);" "!=o||!r||n!=e.length-1&&32!=e.charCodeAt(n+1)||(o=" "),i+=o,r=" "==o}return i}(t,e.trailingSpace):t,c=e.cm.state.specialChars,h=!1;if(c.test(t)){y=document.createDocumentFragment();for(var p=0;;){c.lastIndex=p;var d=c.exec(t),f=d?d.index-p:t.length-p;if(f){var g=document.createTextNode(l.slice(p,p+f));o&&s<9?y.appendChild(Ro("span",[g])):y.appendChild(g),e.map.push(e.pos,e.pos+f,g),e.col+=f,e.pos+=f}if(!d)break;if(p+=f+1,"\t"==d[0]){var m=e.cm.options.tabSize,v=m-e.col%m;(g=y.appendChild(Ro("span",go(v),"cm-tab"))).setAttribute("role","presentation"),g.setAttribute("cm-text","\t"),e.col+=v}else"\r"==d[0]||"\n"==d[0]?((g=y.appendChild(Ro("span","\r"==d[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",d[0]),e.col+=1):((g=e.cm.options.specialCharPlaceholder(d[0])).setAttribute("cm-text",d[0]),o&&s<9?y.appendChild(Ro("span",[g])):y.appendChild(g),e.col+=1);e.map.push(e.pos,e.pos+1,g),e.pos++}}else{e.col+=t.length;var y=document.createTextNode(l);e.map.push(e.pos,e.pos+t.length,y),o&&s<9&&(h=!0),e.pos+=t.length}if(e.trailingSpace=32==l.charCodeAt(t.length-1),r||i||n||h||u){var _=r||"";i&&(_+=i),n&&(_+=n);var E=Ro("span",[y],_,u);return a&&(E.title=a),e.content.appendChild(E)}e.content.appendChild(y)}}function ln(e,t){return function(r,i,n,o,s,a,u){n=n?n+" cm-force-border":"cm-force-border";for(var l=r.pos,c=l+i.length;;){for(var h=0;h<t.length;h++){var p=t[h];if(p.to>l&&p.from<=l)break}if(p.to>=c)return e(r,i,n,o,s,a,u);e(r,i.slice(0,p.to-l),n,o,null,a,u),o=null,i=i.slice(p.to-l),l=p.to}}}function cn(e,t,r,i){var n=!i&&r.widgetNode;n&&e.map.push(e.pos,e.pos+t,n),!i&&e.cm.display.input.needsContentAttribute&&(n||(n=e.content.appendChild(document.createElement("span"))),n.setAttribute("cm-marker",r.id)),n&&(e.cm.display.input.setUneditable(n),e.content.appendChild(n)),e.pos+=t,e.trailingSpace=!1}function hn(e,t,r){var i=e.markedSpans,n=e.text,o=0;if(i)for(var s,a,u,l,c,h,p,d=n.length,f=0,g=(T=1,""),m=0;;){if(m==f){u=l=c=h=a="",p=null,m=1/0;for(var v,y=[],_=0;_<i.length;++_){var E=i[_],x=E.marker;"bookmark"==x.type&&E.from==f&&x.widgetNode?y.push(x):E.from<=f&&(null==E.to||E.to>f||x.collapsed&&E.to==f&&E.from==f)?(null!=E.to&&E.to!=f&&m>E.to&&(m=E.to,l=""),x.className&&(u+=" "+x.className),x.css&&(a=(a?a+";":"")+x.css),x.startStyle&&E.from==f&&(c+=" "+x.startStyle),x.endStyle&&E.to==m&&(v||(v=[])).push(x.endStyle,E.to),x.title&&!h&&(h=x.title),x.collapsed&&(!p||ki(p.marker,x)<0)&&(p=E)):E.from>f&&m>E.from&&(m=E.from)}if(v)for(_=0;_<v.length;_+=2)v[_+1]==m&&(l+=" "+v[_]);if(!p||p.from==f)for(_=0;_<y.length;++_)cn(t,0,y[_]);if(p&&(p.from||0)==f){if(cn(t,(null==p.to?d+1:p.to)-f,p.marker,null==p.from),null==p.to)return;p.to==f&&(p=!1)}}if(f>=d)break;for(var b=Math.min(d,m);;){if(g){var S=f+g.length;if(!p){var w=S>b?g.slice(0,b-f):g;t.addToken(t,w,s?s+u:u,c,f+w.length==m?l:"",h,a)}if(S>=b){g=g.slice(b-f),f=b;break}f=S,c=""}g=n.slice(o,o=r[T++]),s=sn(r[T++],t.cm.options)}}else for(var T=1;T<r.length;T+=2)t.addToken(t,n.slice(o,o=r[T]),sn(r[T+1],t.cm.options))}function pn(e,t){return 0==t.from.ch&&0==t.to.ch&&""==mo(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function dn(e,t,r,i){function n(e){return r?r[e]:null}function o(e,r,n){(function(e,t,r,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Ni(e),Ri(e,r);var n=i?i(e):1;n!=e.height&&Tn(e,n)})(e,r,n,i),Qn(e,"change",e,t)}function s(e,t){for(var r=e,o=[];r<t;++r)o.push(new zi(l[r],n(r),i));return o}var a=t.from,u=t.to,l=t.text,c=bn(e,a.line),h=bn(e,u.line),p=mo(l),d=n(l.length-1),f=u.line-a.line;if(t.full)e.insert(0,s(0,l.length)),e.remove(l.length,e.size-l.length);else if(pn(e,t)){var g=s(0,l.length-1);o(h,h.text,d),f&&e.remove(a.line,f),g.length&&e.insert(a.line,g)}else c==h?1==l.length?o(c,c.text.slice(0,a.ch)+p+c.text.slice(u.ch),d):((g=s(1,l.length-1)).push(new zi(p+c.text.slice(u.ch),d,i)),o(c,c.text.slice(0,a.ch)+l[0],n(0)),e.insert(a.line+1,g)):1==l.length?(o(c,c.text.slice(0,a.ch)+l[0]+h.text.slice(u.ch),n(0)),e.remove(a.line+1,f)):(o(c,c.text.slice(0,a.ch)+l[0],n(0)),o(h,p+h.text.slice(u.ch),d),g=s(1,l.length-1),f>1&&e.remove(a.line+1,f-1),e.insert(a.line+1,g));Qn(e,"change",e,t)}function fn(e){this.lines=e,this.parent=null;for(var t=0,r=0;t<e.length;++t)e[t].parent=this,r+=e[t].height;this.height=r}function gn(e){this.children=e;for(var t=0,r=0,i=0;i<e.length;++i){var n=e[i];t+=n.chunkSize(),r+=n.height,n.parent=this}this.size=t,this.height=r,this.parent=null}fn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r=e,i=e+t;r<i;++r){var n=this.lines[r];this.height-=n.height,$i(n),Qn(n,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,r){for(var i=e+t;e<i;++e)if(r(this.lines[e]))return!0}},gn.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var r=0;r<this.children.length;++r){var i=this.children[r],n=i.chunkSize();if(e<n){var o=Math.min(t,n-e),s=i.height;if(i.removeInner(e,o),this.height-=s-i.height,n==o&&(this.children.splice(r--,1),i.parent=null),0==(t-=o))break;e=0}else e-=n}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof fn))){var a=[];this.collapse(a),this.children=[new fn(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,r){this.size+=t.length,this.height+=r;for(var i=0;i<this.children.length;++i){var n=this.children[i],o=n.chunkSize();if(e<=o){if(n.insertInner(e,t,r),n.lines&&n.lines.length>50){for(var s=n.lines.length%25+25,a=s;a<n.lines.length;){var u=new fn(n.lines.slice(a,a+=25));n.height-=u.height,this.children.splice(++i,0,u),u.parent=this}n.lines=n.lines.slice(0,s),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new gn(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var r=yo(e.parent.children,e);e.parent.children.splice(r+1,0,t)}else{var i=new gn(e.children);i.parent=e,e.children=[i,t],e=i}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,r){for(var i=0;i<this.children.length;++i){var n=this.children[i],o=n.chunkSize();if(e<o){var s=Math.min(t,o-e);if(n.iterN(e,s,r))return!0;if(0==(t-=s))break;e=0}else e-=o}}};var mn=0,vn=w.Doc=function(e,t,r,i){if(!(this instanceof vn))return new vn(e,t,r,i);null==r&&(r=0),gn.call(this,[new fn([new zi("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=r;var n=de(r,0);this.sel=Fe(n),this.history=new Nn(null),this.id=++mn,this.modeOption=t,this.lineSep=i,this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),dn(this,{from:n,to:n,text:e}),Ke(this,Fe(n),ao)};vn.prototype=xo(gn.prototype,{constructor:vn,iter:function(e,t,r){r?this.iterN(e-this.first,t-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var r=0,i=0;i<t.length;++i)r+=t[i].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=wn(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Xt((function(e){var t=de(this.first,0),r=this.first+this.size-1;Ur(this,{from:t,to:de(r,bn(this,r).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),Ke(this,Fe(t))})),replaceRange:function(e,t,r,i){Vr(this,e,t=Me(this,t),r=r?Me(this,r):t,i)},getRange:function(e,t,r){var i=Sn(this,Me(this,e),Me(this,t));return!1===r?i:i.join(r||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Ue(this,e))return bn(this,e)},getLineNumber:function(e){return An(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=bn(this,e)),Bi(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Me(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Xt((function(e,t,r){qe(this,Me(this,"number"==typeof e?de(e,t||0):e),null,r)})),setSelection:Xt((function(e,t,r){qe(this,Me(this,e),Me(this,t||e),r)})),extendSelection:Xt((function(e,t,r){He(this,Me(this,e),t&&Me(this,t),r)})),extendSelections:Xt((function(e,t){Ge(this,Be(this,e),t)})),extendSelectionsBy:Xt((function(e,t){Ge(this,Be(this,_o(this.sel.ranges,e)),t)})),setSelections:Xt((function(e,t,r){if(e.length){for(var i=0,n=[];i<e.length;i++)n[i]=new Oe(Me(this,e[i].anchor),Me(this,e[i].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Ke(this,ke(n,t),r)}})),addSelection:Xt((function(e,t,r){var i=this.sel.ranges.slice(0);i.push(new Oe(Me(this,e),Me(this,t||e))),Ke(this,ke(i,i.length-1),r)})),getSelection:function(e){for(var t,r=this.sel.ranges,i=0;i<r.length;i++){var n=Sn(this,r[i].from(),r[i].to());t=t?t.concat(n):n}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],r=this.sel.ranges,i=0;i<r.length;i++){var n=Sn(this,r[i].from(),r[i].to());!1!==e&&(n=n.join(e||this.lineSeparator())),t[i]=n}return t},replaceSelection:function(e,t,r){for(var i=[],n=0;n<this.sel.ranges.length;n++)i[n]=e;this.replaceSelections(i,t,r||"+input")},replaceSelections:Xt((function(e,t,r){for(var i=[],n=this.sel,o=0;o<n.ranges.length;o++){var s=n.ranges[o];i[o]={from:s.from(),to:s.to(),text:this.splitLines(e[o]),origin:r}}var a=t&&"end"!=t&&function(e,t,r){for(var i=[],n=de(e.first,0),o=n,s=0;s<t.length;s++){var a=t[s],u=Dr(a.from,n,o),l=Dr(Or(a),n,o);if(n=a.to,o=l,"around"==r){var c=e.sel.ranges[s],h=fe(c.head,c.anchor)<0;i[s]=new Oe(h?l:u,h?u:l)}else i[s]=new Oe(u,u)}return new Pe(i,e.sel.primIndex)}(this,i,t);for(o=i.length-1;o>=0;o--)Ur(this,i[o]);a?We(this,a):this.cm&&Kr(this.cm)})),undo:Xt((function(){jr(this,"undo")})),redo:Xt((function(){jr(this,"redo")})),undoSelection:Xt((function(){jr(this,"undo",!0)})),redoSelection:Xt((function(){jr(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,r=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(i=0;i<e.undone.length;i++)e.undone[i].ranges||++r;return{undo:t,redo:r}},clearHistory:function(){this.history=new Nn(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Mn(this.history.done),undone:Mn(this.history.undone)}},setHistory:function(e){var t=this.history=new Nn(this.history.maxGeneration);t.done=Mn(e.done.slice(0),null,!0),t.undone=Mn(e.undone.slice(0),null,!0)},addLineClass:Xt((function(e,t,r){return Jr(this,e,"gutter"==t?"gutter":"class",(function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[i]){if(Do(r).test(e[i]))return!1;e[i]+=" "+r}else e[i]=r;return!0}))})),removeLineClass:Xt((function(e,t,r){return Jr(this,e,"gutter"==t?"gutter":"class",(function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",n=e[i];if(!n)return!1;if(null==r)e[i]=null;else{var o=n.match(Do(r));if(!o)return!1;var s=o.index+o[0].length;e[i]=n.slice(0,o.index)+(o.index&&s!=n.length?" ":"")+n.slice(s)||null}return!0}))})),addLineWidget:Xt((function(e,t,r){return function(e,t,r,i){var n=new qi(e,r,i),o=e.cm;return o&&n.noHScroll&&(o.display.alignWidgets=!0),Jr(e,t,"widget",(function(t){var r=t.widgets||(t.widgets=[]);if(null==n.insertAt?r.push(n):r.splice(Math.min(r.length-1,Math.max(0,n.insertAt)),0,n),n.line=t,o&&!Gi(e,t)){var i=Ln(t)<e.scrollTop;Tn(t,t.height+Ki(n)),i&&Wr(o,null,n.height),o.curOp.forceUpdate=!0}return!0})),n}(this,e,t,r)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,r){return Ei(this,Me(this,e),Me(this,t),r,r&&r.type||"range")},setBookmark:function(e,t){var r={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return Ei(this,e=Me(this,e),e,r,"bookmark")},findMarksAt:function(e){var t=[],r=bn(this,(e=Me(this,e)).line).markedSpans;if(r)for(var i=0;i<r.length;++i){var n=r[i];(null==n.from||n.from<=e.ch)&&(null==n.to||n.to>=e.ch)&&t.push(n.marker.parent||n.marker)}return t},findMarks:function(e,t,r){e=Me(this,e),t=Me(this,t);var i=[],n=e.line;return this.iter(e.line,t.line+1,(function(o){var s=o.markedSpans;if(s)for(var a=0;a<s.length;a++){var u=s[a];null!=u.to&&n==e.line&&e.ch>=u.to||null==u.from&&n!=e.line||null!=u.from&&n==t.line&&u.from>=t.ch||r&&!r(u.marker)||i.push(u.marker.parent||u.marker)}++n})),i},getAllMarks:function(){var e=[];return this.iter((function(t){var r=t.markedSpans;if(r)for(var i=0;i<r.length;++i)null!=r[i].from&&e.push(r[i].marker)})),e},posFromIndex:function(e){var t,r=this.first,i=this.lineSeparator().length;return this.iter((function(n){var o=n.text.length+i;if(o>e)return t=e,!0;e-=o,++r})),Me(this,de(r,t))},indexFromPos:function(e){var t=(e=Me(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var r=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+r})),t},copy:function(e){var t=new vn(wn(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,r=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<r&&(r=e.to);var i=new vn(wn(this,t,r),e.mode||this.modeOption,t,this.lineSep);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var r=0;r<t.length;r++){var i=t[r],n=i.find(),o=e.clipPos(n.from),s=e.clipPos(n.to);if(fe(o,s)){var a=Ei(e,o,s,i.primary,i.primary.type);i.markers.push(a),a.parent=i}}}(i,bi(this)),i},unlinkDoc:function(e){if(e instanceof w&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Si(bi(this));break}if(e.history==this.history){var r=[e.id];En(e,(function(e){r.push(e.id)}),!0),e.history=new Nn(null),e.history.done=Mn(this.history.done,r),e.history.undone=Mn(this.history.undone,r)}},iterLinkedDocs:function(e){En(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):$o(e)},lineSeparator:function(){return this.lineSep||"\n"}}),vn.prototype.eachLine=vn.prototype.iter;var yn="iter insert remove copy getEditor constructor".split(" ");for(var _n in vn.prototype)vn.prototype.hasOwnProperty(_n)&&yo(yn,_n)<0&&(w.prototype[_n]=function(e){return function(){return e.apply(this.doc,arguments)}}(vn.prototype[_n]));function En(e,t,r){!function e(i,n,o){if(i.linked)for(var s=0;s<i.linked.length;++s){var a=i.linked[s];if(a.doc!=n){var u=o&&a.sharedHist;r&&!u||(t(a.doc,u),e(a.doc,i,u))}}}(e,null,!0)}function xn(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,C(e),A(e),e.options.lineWrapping||F(e),e.options.mode=t.modeOption,tr(e)}function bn(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var r=e;!r.lines;)for(var i=0;;++i){var n=r.children[i],o=n.chunkSize();if(t<o){r=n;break}t-=o}return r.lines[t]}function Sn(e,t,r){var i=[],n=t.line;return e.iter(t.line,r.line+1,(function(e){var o=e.text;n==r.line&&(o=o.slice(0,r.ch)),n==t.line&&(o=o.slice(t.ch)),i.push(o),++n})),i}function wn(e,t,r){var i=[];return e.iter(t,r,(function(e){i.push(e.text)})),i}function Tn(e,t){var r=t-e.height;if(r)for(var i=e;i;i=i.parent)i.height+=r}function An(e){if(null==e.parent)return null;for(var t=e.parent,r=yo(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var n=0;i.children[n]!=t;++n)r+=i.children[n].chunkSize();return r+t.first}function In(e,t){var r=e.first;e:do{for(var i=0;i<e.children.length;++i){var n=e.children[i],o=n.height;if(t<o){e=n;continue e}t-=o,r+=n.chunkSize()}return r}while(!e.lines);for(i=0;i<e.lines.length;++i){var s=e.lines[i].height;if(t<s)break;t-=s}return r+i}function Ln(e){for(var t=0,r=(e=Bi(e)).parent,i=0;i<r.lines.length;++i){var n=r.lines[i];if(n==e)break;t+=n.height}for(var o=r.parent;o;o=(r=o).parent)for(i=0;i<o.children.length;++i){var s=o.children[i];if(s==r)break;t+=s.height}return t}function Cn(e){var t=e.order;return null==t&&(t=e.order=hs(e.text)),t}function Nn(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Rn(e,t){var r={from:ge(t.from),to:Or(t),text:Sn(e,t.from,t.to)};return Fn(e,r,t.from.line,t.to.line+1),En(e,(function(e){Fn(e,r,t.from.line,t.to.line+1)}),!0),r}function Pn(e){for(;e.length&&mo(e).ranges;)e.pop()}function On(e,t,r,i){var n=e.history;n.undone.length=0;var o,s=+new Date;if((n.lastOp==i||n.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&n.lastModTime>s-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=function(e,t){return t?(Pn(e.done),mo(e.done)):e.done.length&&!mo(e.done).ranges?mo(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),mo(e.done)):void 0}(n,n.lastOp==i))){var a=mo(o.changes);0==fe(t.from,t.to)&&0==fe(t.from,a.to)?a.to=Or(t):o.changes.push(Rn(e,t))}else{var u=mo(n.done);for(u&&u.ranges||kn(e.sel,n.done),o={changes:[Rn(e,t)],generation:n.generation},n.done.push(o);n.done.length>n.undoDepth;)n.done.shift(),n.done[0].ranges||n.done.shift()}n.done.push(r),n.generation=++n.maxGeneration,n.lastModTime=n.lastSelTime=s,n.lastOp=n.lastSelOp=i,n.lastOrigin=n.lastSelOrigin=t.origin,a||Yn(e,"historyAdded")}function kn(e,t){var r=mo(t);r&&r.ranges&&r.equals(e)||t.push(e)}function Fn(e,t,r,i){var n=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,r),Math.min(e.first+e.size,i),(function(r){r.markedSpans&&((n||(n=t["spans_"+e.id]={}))[o]=r.markedSpans),++o}))}function Dn(e){if(!e)return null;for(var t,r=0;r<e.length;++r)e[r].marker.explicitlyCleared?t||(t=e.slice(0,r)):t&&t.push(e[r]);return t?t.length?t:null:e}function Mn(e,t,r){for(var i=0,n=[];i<e.length;++i){var o=e[i];if(o.ranges)n.push(r?Pe.prototype.deepCopy.call(o):o);else{var s=o.changes,a=[];n.push({changes:a});for(var u=0;u<s.length;++u){var l,c=s[u];if(a.push({from:c.from,to:c.to,text:c.text}),t)for(var h in c)(l=h.match(/^spans_(\d+)$/))&&yo(t,Number(l[1]))>-1&&(mo(a)[h]=c[h],delete c[h])}}}return n}function Un(e,t,r,i){r<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function Bn(e,t,r,i){for(var n=0;n<e.length;++n){var o=e[n],s=!0;if(o.ranges){o.copied||((o=e[n]=o.deepCopy()).copied=!0);for(var a=0;a<o.ranges.length;a++)Un(o.ranges[a].anchor,t,r,i),Un(o.ranges[a].head,t,r,i)}else{for(a=0;a<o.changes.length;++a){var u=o.changes[a];if(r<u.from.line)u.from=de(u.from.line+i,u.from.ch),u.to=de(u.to.line+i,u.to.ch);else if(t<=u.to.line){s=!1;break}}s||(e.splice(0,n+1),n=0)}}}function jn(e,t){var r=t.from.line,i=t.to.line,n=t.text.length-(i-r)-1;Bn(e.done,r,i,n),Bn(e.undone,r,i,n)}no(vn);var Hn=w.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},Gn=w.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0};function Vn(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}var qn=w.e_stop=function(e){Hn(e),Gn(e)};function Wn(e){return e.target||e.srcElement}function Kn(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),m&&e.ctrlKey&&1==t&&(t=3),t}var zn=w.on=function(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var i=e._handlers||(e._handlers={});(i[t]||(i[t]=[])).push(r)}},$n=[];function Jn(e,t,r){var i=e._handlers&&e._handlers[t];return r?i&&i.length>0?i.slice():$n:i||$n}var Zn=w.off=function(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent("on"+t,r);else for(var i=Jn(e,t,!1),n=0;n<i.length;++n)if(i[n]==r){i.splice(n,1);break}},Yn=w.signal=function(e,t){var r=Jn(e,t,!0);if(r.length)for(var i=Array.prototype.slice.call(arguments,2),n=0;n<r.length;++n)r[n].apply(null,i)},Xn=null;function Qn(e,t){var r=Jn(e,t,!1);if(r.length){var i,n=Array.prototype.slice.call(arguments,2);jt?i=jt.delayedCallbacks:Xn?i=Xn:(i=Xn=[],setTimeout(eo,0));for(var o=0;o<r.length;++o)i.push(s(r[o]))}function s(e){return function(){e.apply(null,n)}}}function eo(){var e=Xn;Xn=null;for(var t=0;t<e.length;++t)e[t]()}function to(e,t,r){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Yn(e,r||t.type,e,t),Vn(t)||t.codemirrorIgnore}function ro(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)-1==yo(r,t[i])&&r.push(t[i])}function io(e,t){return Jn(e,t).length>0}function no(e){e.prototype.on=function(e,t){zn(this,e,t)},e.prototype.off=function(e,t){Zn(this,e,t)}}var oo=30,so=w.Pass={toString:function(){return"CodeMirror.Pass"}},ao={scroll:!1},uo={origin:"*mouse"},lo={origin:"+move"};function co(){this.id=null}co.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var ho=w.countColumn=function(e,t,r,i,n){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=i||0,s=n||0;;){var a=e.indexOf("\t",o);if(a<0||a>=t)return s+(t-o);s+=a-o,s+=r-s%r,o=a+1}},po=w.findColumn=function(e,t,r){for(var i=0,n=0;;){var o=e.indexOf("\t",i);-1==o&&(o=e.length);var s=o-i;if(o==e.length||n+s>=t)return i+Math.min(s,t-n);if(n+=o-i,i=o+1,(n+=r-n%r)>=t)return i}},fo=[""];function go(e){for(;fo.length<=e;)fo.push(mo(fo)+" ");return fo[e]}function mo(e){return e[e.length-1]}var vo=function(e){e.select()};function yo(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}function _o(e,t){for(var r=[],i=0;i<e.length;i++)r[i]=t(e[i],i);return r}function Eo(){}function xo(e,t){var r;return Object.create?r=Object.create(e):(Eo.prototype=e,r=new Eo),t&&bo(t,r),r}function bo(e,t,r){for(var i in t||(t={}),e)!e.hasOwnProperty(i)||!1===r&&t.hasOwnProperty(i)||(t[i]=e[i]);return t}function So(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}f?vo=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:o&&(vo=function(e){try{e.select()}catch(e){}});var wo=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,To=w.isWordChar=function(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||wo.test(e))};function Ao(e,t){return t?!!(t.source.indexOf("\\w")>-1&&To(e))||t.test(e):To(e)}function Io(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var Lo,Co=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function No(e){return e.charCodeAt(0)>=768&&Co.test(e)}function Ro(e,t,r,i){var n=document.createElement(e);if(r&&(n.className=r),i&&(n.style.cssText=i),"string"==typeof t)n.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)n.appendChild(t[o]);return n}function Po(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function Oo(e,t){return Po(e).appendChild(t)}Lo=document.createRange?function(e,t,r,i){var n=document.createRange();return n.setEnd(i||e,r),n.setStart(e,t),n}:function(e,t,r){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch(e){return i}return i.collapse(!0),i.moveEnd("character",r),i.moveStart("character",t),i};var ko=w.contains=function(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)};function Fo(){for(var e=document.activeElement;e&&e.root&&e.root.activeElement;)e=e.root.activeElement;return e}function Do(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}o&&s<11&&(Fo=function(){try{return document.activeElement}catch(e){return document.body}});var Mo=w.rmClass=function(e,t){var r=e.className,i=Do(t).exec(r);if(i){var n=r.slice(i.index+i[0].length);e.className=r.slice(0,i.index)+(n?i[1]+n:"")}},Uo=w.addClass=function(e,t){var r=e.className;Do(t).test(r)||(e.className+=(r?" ":"")+t)};function Bo(e,t){for(var r=e.split(" "),i=0;i<r.length;i++)r[i]&&!Do(r[i]).test(t)&&(t+=" "+r[i]);return t}function jo(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),r=0;r<t.length;r++){var i=t[r].CodeMirror;i&&e(i)}}var Ho=!1;var Go,Vo,qo=function(){if(o&&s<9)return!1;var e=Ro("div");return"draggable"in e||"dragDrop"in e}();function Wo(e){if(null==Go){var t=Ro("span","​");Oo(e,Ro("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Go=t.offsetWidth<=1&&t.offsetHeight>2&&!(o&&s<8))}var r=Go?Ro("span","​"):Ro("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return r.setAttribute("cm-text",""),r}function Ko(e){if(null!=Vo)return Vo;var t=Oo(e,document.createTextNode("AخA")),r=Lo(t,0,1).getBoundingClientRect(),i=Lo(t,1,2).getBoundingClientRect();return Po(e),!(!r||r.left==r.right)&&(Vo=i.right-r.right<3)}var zo,$o=w.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,r=[],i=e.length;t<=i;){var n=e.indexOf("\n",t);-1==n&&(n=e.length);var o=e.slice(t,"\r"==e.charAt(n-1)?n-1:n),s=o.indexOf("\r");-1!=s?(r.push(o.slice(0,s)),t+=s+1):(r.push(o),t=n+1)}return r}:function(e){return e.split(/\r\n?|\n/)},Jo=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Zo="oncopy"in(zo=Ro("div"))||(zo.setAttribute("oncopy","return;"),"function"==typeof zo.oncopy),Yo=null;var Xo,Qo=w.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};function es(e){return e.level%2?e.to:e.from}function ts(e){return e.level%2?e.from:e.to}function rs(e){var t=Cn(e);return t?es(t[0]):0}function is(e){var t=Cn(e);return t?ts(mo(t)):e.text.length}function ns(e,t){var r=bn(e.doc,t),i=Bi(r);i!=r&&(t=An(i));var n=Cn(i),o=n?n[0].level%2?is(i):rs(i):0;return de(t,o)}function os(e,t){var r=ns(e,t.line),i=bn(e.doc,r.line),n=Cn(i);if(!n||0==n[0].level){var o=Math.max(0,i.text.search(/\S/)),s=t.line==r.line&&t.ch<=o&&t.ch;return de(r.line,s?0:o)}return r}function ss(e,t,r){var i=e[0].level;return t==i||r!=i&&t<r}function as(e,t){Xo=null;for(var r,i=0;i<e.length;++i){var n=e[i];if(n.from<t&&n.to>t)return i;if(n.from==t||n.to==t){if(null!=r)return ss(e,n.level,e[r].level)?(n.from!=n.to&&(Xo=r),i):(n.from!=n.to&&(Xo=i),r);r=i}}return r}function us(e,t,r,i){if(!i)return t+r;do{t+=r}while(t>0&&No(e.text.charAt(t)));return t}function ls(e,t,r,i){var n=Cn(e);if(!n)return cs(e,t,r,i);for(var o=as(n,t),s=n[o],a=us(e,t,s.level%2?-r:r,i);;){if(a>s.from&&a<s.to)return a;if(a==s.from||a==s.to)return as(n,a)==o?a:r>0==(s=n[o+=r]).level%2?s.to:s.from;if(!(s=n[o+=r]))return null;a=r>0==s.level%2?us(e,s.to,-1,i):us(e,s.from,1,i)}}function cs(e,t,r,i){var n=t+r;if(i)for(;n>0&&No(e.text.charAt(n));)n+=r;return n<0||n>e.text.length?null:n}!function(){for(var e=0;e<10;e++)Qo[e+48]=Qo[e+96]=String(e);for(e=65;e<=90;e++)Qo[e]=String.fromCharCode(e);for(e=1;e<=12;e++)Qo[e+111]=Qo[e+63235]="F"+e}();var hs=function(){var e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,t=/[stwN]/,r=/[LRr]/,i=/[Lb1n]/,n=/[1n]/,o="L";function s(e,t,r){this.level=e,this.from=t,this.to=r}return function(a){if(!e.test(a))return!1;for(var u=a.length,l=[],c=0;c<u;++c)l.push(v=(h=a.charCodeAt(c))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(h):1424<=h&&h<=1524?"R":1536<=h&&h<=1773?"rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm".charAt(h-1536):1774<=h&&h<=2220?"r":8192<=h&&h<=8203?"w":8204==h?"b":"L");var h;c=0;for(var p=o;c<u;++c)"m"==(v=l[c])?l[c]=p:p=v;c=0;for(var d=o;c<u;++c)"1"==(v=l[c])&&"r"==d?l[c]="n":r.test(v)&&(d=v,"r"==v&&(l[c]="R"));for(c=1,p=l[0];c<u-1;++c)"+"==(v=l[c])&&"1"==p&&"1"==l[c+1]?l[c]="1":","!=v||p!=l[c+1]||"1"!=p&&"n"!=p||(l[c]=p),p=v;for(c=0;c<u;++c)if(","==(v=l[c]))l[c]="N";else if("%"==v){for(var f=c+1;f<u&&"%"==l[f];++f);for(var g=c&&"!"==l[c-1]||f<u&&"1"==l[f]?"1":"N",m=c;m<f;++m)l[m]=g;c=f-1}for(c=0,d=o;c<u;++c){var v=l[c];"L"==d&&"1"==v?l[c]="L":r.test(v)&&(d=v)}for(c=0;c<u;++c)if(t.test(l[c])){for(f=c+1;f<u&&t.test(l[f]);++f);var y="L"==(c?l[c-1]:o),_="L"==(f<u?l[f]:o);for(g=y||_?"L":"R",m=c;m<f;++m)l[m]=g;c=f-1}var E,x=[];for(c=0;c<u;)if(i.test(l[c])){var b=c;for(++c;c<u&&i.test(l[c]);++c);x.push(new s(0,b,c))}else{var S=c,w=x.length;for(++c;c<u&&"L"!=l[c];++c);for(m=S;m<c;)if(n.test(l[m])){S<m&&x.splice(w,0,new s(1,S,m));var T=m;for(++m;m<c&&n.test(l[m]);++m);x.splice(w,0,new s(2,T,m)),S=m}else++m;S<c&&x.splice(w,0,new s(1,S,c))}return 1==x[0].level&&(E=a.match(/^\s+/))&&(x[0].from=E[0].length,x.unshift(new s(0,0,E[0].length))),1==mo(x).level&&(E=a.match(/\s+$/))&&(mo(x).to-=E[0].length,x.push(new s(0,u-E[0].length,u))),2==x[0].level&&x.unshift(new s(1,x[0].to,x[0].to)),x[0].level!=mo(x).level&&x.push(new s(x[0].level,u,u)),x}}();return w.version="5.17.0",w}()},9640:function(e,t){var r="undefined"!=typeof self?self:this,i=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var r="URLSearchParams"in e,i="Symbol"in e&&"iterator"in Symbol,n="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in e,s="ArrayBuffer"in e;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function c(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function d(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function g(e){var t=new FileReader,r=f(t);return t.readAsArrayBuffer(e),r}function m(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:n&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&n&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=m(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e,t,r,i=d(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,r=f(t=new FileReader),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),i=0;i<t.length;i++)r[i]=String.fromCharCode(t[i]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(E)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=l(e),t=c(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},p.prototype.delete=function(e){delete this.map[l(e)]},p.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},p.prototype.set=function(e,t){this.map[l(e)]=c(t)},p.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),h(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),h(e)},i&&(p.prototype[Symbol.iterator]=p.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function _(e,t){var r,i,n=(t=t||{}).body;if(e instanceof _){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(i=(r=t.method||this.method||"GET").toUpperCase(),y.indexOf(i)>-1?i:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function E(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),i=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(n))}})),t}function x(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},v.call(_.prototype),v.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},x.error=function(){var e=new x(null,{status:0,statusText:""});return e.type="error",e};var b=[301,302,303,307,308];x.redirect=function(e,t){if(-1===b.indexOf(t))throw new RangeError("Invalid status code");return new x(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function S(e,r){return new Promise((function(i,o){var s=new _(e,r);if(s.signal&&s.signal.aborted)return o(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),i=r.shift().trim();if(i){var n=r.join(":").trim();t.append(i,n)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var n="response"in a?a.response:a.responseText;i(new x(n,r))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.onabort=function(){o(new t.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&n&&(a.responseType="blob"),s.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",u)}),a.send(void 0===s._bodyInit?null:s._bodyInit)}))}S.polyfill=!0,e.fetch||(e.fetch=S,e.Headers=p,e.Request=_,e.Response=x),t.Headers=p,t.Request=_,t.Response=x,t.fetch=S,Object.defineProperty(t,"__esModule",{value:!0})}({})}(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var n=i;(t=n.fetch).default=n.fetch,t.fetch=n.fetch,t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response,e.exports=t},536:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(r,i){function n(r){e.removeListener(t,o),i(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",n),r([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,n)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,r,i){var n,o,s,l;if(a(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=i?[r,s]:[s,r]:i?s.unshift(r):s.push(r),(n=u(e))>0&&s.length>n&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,l=c,console&&console.warn&&console.warn(l)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=c.bind(i);return n.listener=r,i.wrapFn=n,n}function p(e,t,r){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):f(n,n.length)}function d(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}function g(e,t,r,i){if("function"==typeof e.on)i.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function n(o){i.once&&e.removeEventListener(t,n),r(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=o[e];if(void 0===u)return!1;if("function"==typeof u)i(u,this,t);else{var l=u.length,c=f(u,l);for(r=0;r<l;++r)i(c[r],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,i,n,o,s;if(a(t),void 0===(i=this._events))return this;if(void 0===(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,n=o;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var n,o=Object.keys(r);for(i=0;i<o.length;++i)"removeListener"!==(n=o[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},o.prototype.listenerCount=d,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},9818:(e,t)=>{t.read=function(e,t,r,i,n){var o,s,a=8*n-i-1,u=(1<<a)-1,l=u>>1,c=-7,h=r?n-1:0,p=r?-1:1,d=e[t+h];for(h+=p,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+e[t+h],h+=p,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=256*s+e[t+h],h+=p,c-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,i),o-=l}return(d?-1:1)*s*Math.pow(2,o-i)},t.write=function(e,t,r,i,n,o){var s,a,u,l=8*o-n-1,c=(1<<l)-1,h=c>>1,p=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,f=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+h>=1?p/u:p*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(t*u-1)*Math.pow(2,n),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,n),s=0));n>=8;e[r+d]=255&a,d+=f,a/=256,n-=8);for(s=s<<n|a,l+=n;l>0;e[r+d]=255&s,d+=f,s/=256,l-=8);e[r+d-f]|=128*g}},7840:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},3848:(e,t,r)=>{"use strict";r.r(t),r.d(t,{CompactEncrypt:()=>et,CompactSign:()=>rt,EmbeddedJWK:()=>ht,EncryptJWT:()=>at,FlattenedEncrypt:()=>Be,FlattenedSign:()=>tt,GeneralEncrypt:()=>He,GeneralSign:()=>nt,SignJWT:()=>st,UnsecuredJWT:()=>yt,base64url:()=>n,calculateJwkThumbprint:()=>lt,calculateJwkThumbprintUri:()=>ct,compactDecrypt:()=>Pe,compactVerify:()=>We,createLocalJWKSet:()=>gt,createRemoteJWKSet:()=>vt,decodeJwt:()=>bt,decodeProtectedHeader:()=>xt,errors:()=>i,exportJWK:()=>De,exportPKCS8:()=>Fe,exportSPKI:()=>ke,flattenedDecrypt:()=>Re,flattenedVerify:()=>qe,generalDecrypt:()=>Oe,generalVerify:()=>Ke,generateKeyPair:()=>wt,generateSecret:()=>Tt,importJWK:()=>Ae,importPKCS8:()=>Te,importSPKI:()=>Se,importX509:()=>we,jwtDecrypt:()=>Qe,jwtVerify:()=>Xe});var i={};r.r(i),r.d(i,{JOSEAlgNotAllowed:()=>S,JOSEError:()=>E,JOSENotSupported:()=>w,JWEDecryptionFailed:()=>T,JWEInvalid:()=>A,JWKInvalid:()=>C,JWKSInvalid:()=>N,JWKSMultipleMatchingKeys:()=>P,JWKSNoMatchingKey:()=>R,JWKSTimeout:()=>O,JWSInvalid:()=>I,JWSSignatureVerificationFailed:()=>k,JWTClaimValidationFailed:()=>x,JWTExpired:()=>b,JWTInvalid:()=>L});var n={};r.r(n),r.d(n,{decode:()=>Et,encode:()=>_t});const o=crypto,s=e=>e instanceof CryptoKey,a=async(e,t)=>{const r=`SHA-${e.slice(-3)}`;return new Uint8Array(await o.subtle.digest(r,t))},u=new TextEncoder,l=new TextDecoder,c=2**32;function h(...e){const t=e.reduce(((e,{length:t})=>e+t),0),r=new Uint8Array(t);let i=0;return e.forEach((e=>{r.set(e,i),i+=e.length})),r}function p(e,t,r){if(t<0||t>=c)throw new RangeError(`value must be >= 0 and <= 4294967295. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],r)}function d(e){const t=Math.floor(e/c),r=e%c,i=new Uint8Array(8);return p(i,t,0),p(i,r,4),i}function f(e){const t=new Uint8Array(4);return p(t,e),t}function g(e){return h(f(e.length),e)}const m=e=>{let t=e;"string"==typeof t&&(t=u.encode(t));const r=[];for(let e=0;e<t.length;e+=32768)r.push(String.fromCharCode.apply(null,t.subarray(e,e+32768)));return btoa(r.join(""))},v=e=>m(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),y=e=>{const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r},_=e=>{let t=e;t instanceof Uint8Array&&(t=l.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return y(t)}catch(e){throw new TypeError("The input to be decoded is not correctly encoded.")}};class E extends Error{constructor(e){var t;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null===(t=Error.captureStackTrace)||void 0===t||t.call(Error,this,this.constructor)}static get code(){return"ERR_JOSE_GENERIC"}}class x extends E{constructor(e,t="unspecified",r="unspecified"){super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=t,this.reason=r}static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}}class b extends E{constructor(e,t="unspecified",r="unspecified"){super(e),this.code="ERR_JWT_EXPIRED",this.claim=t,this.reason=r}static get code(){return"ERR_JWT_EXPIRED"}}class S extends E{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class w extends E{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class T extends E{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class A extends E{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class I extends E{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class L extends E{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class C extends E{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class N extends E{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class R extends E{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class P extends E{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class O extends E{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class k extends E{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}const F=o.getRandomValues.bind(o);function D(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new w(`Unsupported JWE Algorithm: ${e}`)}}const M=e=>F(new Uint8Array(D(e)>>3)),U=(e,t)=>{if(t.length<<3!==D(e))throw new A("Invalid Initialization Vector length")},B=(e,t)=>{const r=e.byteLength<<3;if(r!==t)throw new A(`Invalid Content Encryption Key length. Expected ${t} bits, got ${r} bits`)};function j(){return"undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime}function H(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function G(e,t){return e.name===t}function V(e){return parseInt(e.name.slice(4),10)}function q(e,t){if(t.length&&!t.some((t=>e.usages.includes(t)))){let e="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const r=t.pop();e+=`one of ${t.join(", ")}, or ${r}.`}else 2===t.length?e+=`one of ${t[0]} or ${t[1]}.`:e+=`${t[0]}.`;throw new TypeError(e)}}function W(e,t,...r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!G(e.algorithm,"AES-GCM"))throw H("AES-GCM");const r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw H(r,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!G(e.algorithm,"AES-KW"))throw H("AES-KW");const r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw H(r,"algorithm.length");break}case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw H("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!G(e.algorithm,"PBKDF2"))throw H("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!G(e.algorithm,"RSA-OAEP"))throw H("RSA-OAEP");const r=parseInt(t.slice(9),10)||1;if(V(e.algorithm.hash)!==r)throw H(`SHA-${r}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}q(e,r)}function K(e,t,...r){if(r.length>2){const t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor&&t.constructor.name&&(e+=` Received an instance of ${t.constructor.name}`),e}const z=(e,...t)=>K("Key must be ",e,...t);function $(e,t,...r){return K(`Key for the ${e} algorithm must be `,t,...r)}const J=e=>s(e),Z=["CryptoKey"],Y=async(e,t,r,i,n,a)=>{if(!(s(t)||t instanceof Uint8Array))throw new TypeError(z(t,...Z,"Uint8Array"));switch(U(e,i),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&B(t,parseInt(e.slice(-3),10)),async function(e,t,r,i,n,s){if(!(t instanceof Uint8Array))throw new TypeError(z(t,"Uint8Array"));const a=parseInt(e.slice(1,4),10),u=await o.subtle.importKey("raw",t.subarray(a>>3),"AES-CBC",!1,["decrypt"]),l=await o.subtle.importKey("raw",t.subarray(0,a>>3),{hash:"SHA-"+(a<<1),name:"HMAC"},!1,["sign"]),c=h(s,i,r,d(s.length<<3)),p=new Uint8Array((await o.subtle.sign("HMAC",l,c)).slice(0,a>>3));let f,g;try{f=((e,t)=>{if(!(e instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(e.length!==t.length)throw new TypeError("Input buffers must have the same length");const r=e.length;let i=0,n=-1;for(;++n<r;)i|=e[n]^t[n];return 0===i})(n,p)}catch(e){}if(!f)throw new T;try{g=new Uint8Array(await o.subtle.decrypt({iv:i,name:"AES-CBC"},u,r))}catch(e){}if(!g)throw new T;return g}(e,t,r,i,n,a);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&B(t,parseInt(e.slice(1,4),10)),async function(e,t,r,i,n,s){let a;t instanceof Uint8Array?a=await o.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(W(t,e,"decrypt"),a=t);try{return new Uint8Array(await o.subtle.decrypt({additionalData:s,iv:i,name:"AES-GCM",tagLength:128},a,h(r,n)))}catch(e){throw new T}}(e,t,r,i,n,a);default:throw new w("Unsupported JWE Content Encryption Algorithm")}},X=async()=>{throw new w('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.')},Q=async()=>{throw new w('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.')},ee=(...e)=>{const t=e.filter(Boolean);if(0===t.length||1===t.length)return!0;let r;for(const e of t){const t=Object.keys(e);if(r&&0!==r.size)for(const e of t){if(r.has(e))return!1;r.add(e)}else r=new Set(t)}return!0};function te(e){if("object"!=typeof(t=e)||null===t||"[object Object]"!==Object.prototype.toString.call(e))return!1;var t;if(null===Object.getPrototypeOf(e))return!0;let r=e;for(;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}const re=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function ie(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${t}`)}function ne(e,t,r){if(s(e))return W(e,t,r),e;if(e instanceof Uint8Array)return o.subtle.importKey("raw",e,"AES-KW",!0,[r]);throw new TypeError(z(e,...Z,"Uint8Array"))}const oe=async(e,t,r)=>{const i=await ne(t,e,"wrapKey");ie(i,e);const n=await o.subtle.importKey("raw",r,...re);return new Uint8Array(await o.subtle.wrapKey("raw",n,i,"AES-KW"))},se=async(e,t,r)=>{const i=await ne(t,e,"unwrapKey");ie(i,e);const n=await o.subtle.unwrapKey("raw",r,i,"AES-KW",...re);return new Uint8Array(await o.subtle.exportKey("raw",n))};async function ae(e,t,r,i,n=new Uint8Array(0),l=new Uint8Array(0)){if(!s(e))throw new TypeError(z(e,...Z));if(W(e,"ECDH"),!s(t))throw new TypeError(z(t,...Z));W(t,"ECDH","deriveBits");const c=h(g(u.encode(r)),g(n),g(l),f(i));let p;return p="X25519"===e.algorithm.name?256:"X448"===e.algorithm.name?448:Math.ceil(parseInt(e.algorithm.namedCurve.substr(-3),10)/8)<<3,async function(e,t,r){const i=Math.ceil((t>>3)/32),n=new Uint8Array(32*i);for(let t=0;t<i;t++){const i=new Uint8Array(4+e.length+r.length);i.set(f(t+1)),i.set(e,4),i.set(r,4+e.length),n.set(await a("sha256",i),32*t)}return n.slice(0,t>>3)}(new Uint8Array(await o.subtle.deriveBits({name:e.algorithm.name,public:e},t,p)),i,c)}function ue(e){if(!s(e))throw new TypeError(z(e,...Z));return["P-256","P-384","P-521"].includes(e.algorithm.namedCurve)||"X25519"===e.algorithm.name||"X448"===e.algorithm.name}async function le(e,t,r,i){!function(e){if(!(e instanceof Uint8Array)||e.length<8)throw new A("PBES2 Salt Input must be 8 or more octets")}(e);const n=function(e,t){return h(u.encode(e),new Uint8Array([0]),t)}(t,e),a=parseInt(t.slice(13,16),10),l={hash:`SHA-${t.slice(8,11)}`,iterations:r,name:"PBKDF2",salt:n},c={length:a,name:"AES-KW"},p=await function(e,t){if(e instanceof Uint8Array)return o.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]);if(s(e))return W(e,t,"deriveBits","deriveKey"),e;throw new TypeError(z(e,...Z,"Uint8Array"))}(i,t);if(p.usages.includes("deriveBits"))return new Uint8Array(await o.subtle.deriveBits(l,p,a));if(p.usages.includes("deriveKey"))return o.subtle.deriveKey(l,p,c,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}function ce(e){switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new w(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}const he=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:r}=t.algorithm;if("number"!=typeof r||r<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}};function pe(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new w(`Unsupported JWE Algorithm: ${e}`)}}const de=e=>F(new Uint8Array(pe(e)>>3)),fe=(e,t)=>`-----BEGIN ${t}-----\n${(e.match(/.{1,64}/g)||[]).join("\n")}\n-----END ${t}-----`,ge=async(e,t,r)=>{if(!s(r))throw new TypeError(z(r,...Z));if(!r.extractable)throw new TypeError("CryptoKey is not extractable");if(r.type!==e)throw new TypeError(`key is not a ${e} key`);return fe(m(new Uint8Array(await o.subtle.exportKey(t,r))),`${e.toUpperCase()} KEY`)},me=(e,t,r=0)=>{0===r&&(t.unshift(t.length),t.unshift(6));let i=e.indexOf(t[0],r);if(-1===i)return!1;const n=e.subarray(i,i+t.length);return n.length===t.length&&(n.every(((e,r)=>e===t[r]))||me(e,t,i+1))},ve=e=>{switch(!0){case me(e,[42,134,72,206,61,3,1,7]):return"P-256";case me(e,[43,129,4,0,34]):return"P-384";case me(e,[43,129,4,0,35]):return"P-521";case me(e,[43,101,110]):return"X25519";case me(e,[43,101,111]):return"X448";case me(e,[43,101,112]):return"Ed25519";case me(e,[43,101,113]):return"Ed448";default:throw new w("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},ye=async(e,t,r,i,n)=>{var s;let a,u;const l=new Uint8Array(atob(r.replace(e,"")).split("").map((e=>e.charCodeAt(0)))),c="spki"===t;switch(i){case"PS256":case"PS384":case"PS512":a={name:"RSA-PSS",hash:`SHA-${i.slice(-3)}`},u=c?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":a={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${i.slice(-3)}`},u=c?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":a={name:"RSA-OAEP",hash:`SHA-${parseInt(i.slice(-3),10)||1}`},u=c?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":a={name:"ECDSA",namedCurve:"P-256"},u=c?["verify"]:["sign"];break;case"ES384":a={name:"ECDSA",namedCurve:"P-384"},u=c?["verify"]:["sign"];break;case"ES512":a={name:"ECDSA",namedCurve:"P-521"},u=c?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{const e=ve(l);a=e.startsWith("P-")?{name:"ECDH",namedCurve:e}:{name:e},u=c?[]:["deriveBits"];break}case j()&&"EdDSA":{const e=ve(l).toUpperCase();a={name:`NODE-${e}`,namedCurve:`NODE-${e}`},u=c?["verify"]:["sign"];break}case"EdDSA":a={name:ve(l)},u=c?["verify"]:["sign"];break;default:throw new w('Invalid or unsupported "alg" (Algorithm) value')}return o.subtle.importKey(t,l,a,null!==(s=null==n?void 0:n.extractable)&&void 0!==s&&s,u)},_e=(e,t,r)=>ye(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",e,t,r),Ee=async e=>{var t,r;const{algorithm:i,keyUsages:n}=function(e){let t,r;switch(e.kty){case"oct":switch(e.alg){case"HS256":case"HS384":case"HS512":t={name:"HMAC",hash:`SHA-${e.alg.slice(-3)}`},r=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new w(`${e.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":t={name:"AES-GCM"},r=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":t={name:"AES-KW"},r=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":t={name:"PBKDF2"},r=["deriveBits"];break;default:throw new w('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new w('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new w('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case j()&&"OKP":if("EdDSA"!==e.alg)throw new w('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');if("Ed25519"!==e.crv)throw new w('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');t={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},r=e.d?["sign"]:["verify"];break;case"OKP":switch(e.alg){case"EdDSA":t={name:e.crv},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new w('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new w('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}(e),s=[i,null!==(t=e.ext)&&void 0!==t&&t,null!==(r=e.key_ops)&&void 0!==r?r:n];if("PBKDF2"===i.name)return o.subtle.importKey("raw",_(e.k),...s);const a={...e};return delete a.alg,delete a.use,o.subtle.importKey("jwk",a,...s)};function xe(e){let t=[],r=0;for(;r<e.length;){let i=be(e.subarray(r));t.push(i),r+=i.byteLength}return t}function be(e){let t=0,r=31&e[0];if(t++,31===r){for(r=0;e[t]>=128;)r=128*r+e[t]-128,t++;r=128*r+e[t]-128,t++}let i=0;if(e[t]<128)i=e[t],t++;else{if(128===i){for(i=0;0!==e[t+i]||0!==e[t+i+1];){if(i>e.byteLength)throw new TypeError("invalid indefinite form length");i++}const r=t+i+2;return{byteLength:r,contents:e.subarray(t,t+i),raw:e.subarray(0,r)}}{let r=127&e[t];t++,i=0;for(let n=0;n<r;n++)i=256*i+e[t],t++}}const n=t+i;return{byteLength:n,contents:e.subarray(t,n),raw:e.subarray(0,n)}}async function Se(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PUBLIC KEY-----"))throw new TypeError('"spki" must be SPKI formatted string');return _e(e,t,r)}async function we(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN CERTIFICATE-----"))throw new TypeError('"x509" must be X.509 formatted string');let i;try{i=function(e){const t=e.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),r=y(t);return fe(function(e){const t=xe(xe(be(e).contents)[0].contents);return m(t[160===t[0].raw[0]?6:5].raw)}(r),"PUBLIC KEY")}(e)}catch(e){throw new TypeError("failed to parse the X.509 certificate",{cause:e})}return _e(i,t,r)}async function Te(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PRIVATE KEY-----"))throw new TypeError('"pkcs8" must be PKCS8 formatted string');return((e,t,r)=>ye(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",e,t,r))(e,t,r)}async function Ae(e,t,r){var i;if(!te(e))throw new TypeError("JWK must be an object");if(t||(t=e.alg),"string"!=typeof t||!t)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');switch(e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return null!=r||(r=!0!==e.ext),r?Ee({...e,alg:t,ext:null!==(i=e.ext)&&void 0!==i&&i}):_(e.k);case"RSA":if(void 0!==e.oth)throw new w('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Ee({...e,alg:t});default:throw new w('Unsupported "kty" (Key Type) Parameter value')}}const Ie=(e,t,r)=>{e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?((e,t)=>{if(!(t instanceof Uint8Array)){if(!J(t))throw new TypeError($(e,t,...Z,"Uint8Array"));if("secret"!==t.type)throw new TypeError(`${Z.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}})(e,t):((e,t,r)=>{if(!J(t))throw new TypeError($(e,t,...Z));if("secret"===t.type)throw new TypeError(`${Z.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===r&&"public"===t.type)throw new TypeError(`${Z.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===r&&"public"===t.type)throw new TypeError(`${Z.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===r&&"private"===t.type)throw new TypeError(`${Z.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===r&&"private"===t.type)throw new TypeError(`${Z.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)})(e,t,r)},Le=async(e,t,r,i,n)=>{if(!(s(r)||r instanceof Uint8Array))throw new TypeError(z(r,...Z,"Uint8Array"));switch(U(e,i),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&B(r,parseInt(e.slice(-3),10)),async function(e,t,r,i,n){if(!(r instanceof Uint8Array))throw new TypeError(z(r,"Uint8Array"));const s=parseInt(e.slice(1,4),10),a=await o.subtle.importKey("raw",r.subarray(s>>3),"AES-CBC",!1,["encrypt"]),u=await o.subtle.importKey("raw",r.subarray(0,s>>3),{hash:"SHA-"+(s<<1),name:"HMAC"},!1,["sign"]),l=new Uint8Array(await o.subtle.encrypt({iv:i,name:"AES-CBC"},a,t)),c=h(n,i,l,d(n.length<<3));return{ciphertext:l,tag:new Uint8Array((await o.subtle.sign("HMAC",u,c)).slice(0,s>>3))}}(e,t,r,i,n);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&B(r,parseInt(e.slice(1,4),10)),async function(e,t,r,i,n){let s;r instanceof Uint8Array?s=await o.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]):(W(r,e,"encrypt"),s=r);const a=new Uint8Array(await o.subtle.encrypt({additionalData:n,iv:i,name:"AES-GCM",tagLength:128},s,t)),u=a.slice(-16);return{ciphertext:a.slice(0,-16),tag:u}}(e,t,r,i,n);default:throw new w("Unsupported JWE Content Encryption Algorithm")}},Ce=function(e,t,r,i,n){if(void 0!==n.crit&&void 0===i.crit)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!i||void 0===i.crit)return new Set;if(!Array.isArray(i.crit)||0===i.crit.length||i.crit.some((e=>"string"!=typeof e||0===e.length)))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let o;o=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t;for(const t of i.crit){if(!o.has(t))throw new w(`Extension Header Parameter "${t}" is not recognized`);if(void 0===n[t])throw new e(`Extension Header Parameter "${t}" is missing`);if(o.get(t)&&void 0===i[t])throw new e(`Extension Header Parameter "${t}" MUST be integrity protected`)}return new Set(i.crit)},Ne=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some((e=>"string"!=typeof e))))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};async function Re(e,t,r){var i;if(!te(e))throw new A("Flattened JWE must be an object");if(void 0===e.protected&&void 0===e.header&&void 0===e.unprotected)throw new A("JOSE Header missing");if("string"!=typeof e.iv)throw new A("JWE Initialization Vector missing or incorrect type");if("string"!=typeof e.ciphertext)throw new A("JWE Ciphertext missing or incorrect type");if("string"!=typeof e.tag)throw new A("JWE Authentication Tag missing or incorrect type");if(void 0!==e.protected&&"string"!=typeof e.protected)throw new A("JWE Protected Header incorrect type");if(void 0!==e.encrypted_key&&"string"!=typeof e.encrypted_key)throw new A("JWE Encrypted Key incorrect type");if(void 0!==e.aad&&"string"!=typeof e.aad)throw new A("JWE AAD incorrect type");if(void 0!==e.header&&!te(e.header))throw new A("JWE Shared Unprotected Header incorrect type");if(void 0!==e.unprotected&&!te(e.unprotected))throw new A("JWE Per-Recipient Unprotected Header incorrect type");let n;if(e.protected)try{const t=_(e.protected);n=JSON.parse(l.decode(t))}catch(e){throw new A("JWE Protected Header is invalid")}if(!ee(n,e.header,e.unprotected))throw new A("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const a={...n,...e.header,...e.unprotected};if(Ce(A,new Map,null==r?void 0:r.crit,n,a),void 0!==a.zip){if(!n||!n.zip)throw new A('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==a.zip)throw new w('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:c,enc:p}=a;if("string"!=typeof c||!c)throw new A("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof p||!p)throw new A("missing JWE Encryption Algorithm (enc) in JWE Header");const d=r&&Ne("keyManagementAlgorithms",r.keyManagementAlgorithms),f=r&&Ne("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(d&&!d.has(c))throw new S('"alg" (Algorithm) Header Parameter not allowed');if(f&&!f.has(p))throw new S('"enc" (Encryption Algorithm) Header Parameter not allowed');let g;void 0!==e.encrypted_key&&(g=_(e.encrypted_key));let m,v=!1;"function"==typeof t&&(t=await t(n,e),v=!0);try{m=await async function(e,t,r,i,n){switch(Ie(e,t,"decrypt"),e){case"dir":if(void 0!==r)throw new A("Encountered unexpected JWE Encrypted Key");return t;case"ECDH-ES":if(void 0!==r)throw new A("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!te(i.epk))throw new A('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!ue(t))throw new w("ECDH with the provided key is not allowed or not supported by your javascript runtime");const n=await Ae(i.epk,e);let o,s;if(void 0!==i.apu){if("string"!=typeof i.apu)throw new A('JOSE Header "apu" (Agreement PartyUInfo) invalid');o=_(i.apu)}if(void 0!==i.apv){if("string"!=typeof i.apv)throw new A('JOSE Header "apv" (Agreement PartyVInfo) invalid');s=_(i.apv)}const a=await ae(n,t,"ECDH-ES"===e?i.enc:e,"ECDH-ES"===e?pe(i.enc):parseInt(e.slice(-5,-2),10),o,s);if("ECDH-ES"===e)return a;if(void 0===r)throw new A("JWE Encrypted Key missing");return se(e.slice(-6),a,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===r)throw new A("JWE Encrypted Key missing");return(async(e,t,r)=>{if(!s(t))throw new TypeError(z(t,...Z));if(W(t,e,"decrypt","unwrapKey"),he(e,t),t.usages.includes("decrypt"))return new Uint8Array(await o.subtle.decrypt(ce(e),t,r));if(t.usages.includes("unwrapKey")){const i=await o.subtle.unwrapKey("raw",r,t,ce(e),...re);return new Uint8Array(await o.subtle.exportKey("raw",i))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')})(e,t,r);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(void 0===r)throw new A("JWE Encrypted Key missing");if("number"!=typeof i.p2c)throw new A('JOSE Header "p2c" (PBES2 Count) missing or invalid');const o=(null==n?void 0:n.maxPBES2Count)||1e4;if(i.p2c>o)throw new A('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof i.p2s)throw new A('JOSE Header "p2s" (PBES2 Salt) missing or invalid');return(async(e,t,r,i,n)=>{const o=await le(n,e,i,t);return se(e.slice(-6),o,r)})(e,t,r,i.p2c,_(i.p2s))}case"A128KW":case"A192KW":case"A256KW":if(void 0===r)throw new A("JWE Encrypted Key missing");return se(e,t,r);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":if(void 0===r)throw new A("JWE Encrypted Key missing");if("string"!=typeof i.iv)throw new A('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof i.tag)throw new A('JOSE Header "tag" (Authentication Tag) missing or invalid');return async function(e,t,r,i,n){const o=e.slice(0,7);return Y(o,t,r,i,n,new Uint8Array(0))}(e,t,r,_(i.iv),_(i.tag));default:throw new w('Invalid or unsupported "alg" (JWE Algorithm) header value')}}(c,t,g,a,r)}catch(e){if(e instanceof TypeError||e instanceof A||e instanceof w)throw e;m=de(p)}const y=_(e.iv),E=_(e.tag),x=u.encode(null!==(i=e.protected)&&void 0!==i?i:"");let b;b=void 0!==e.aad?h(x,u.encode("."),u.encode(e.aad)):x;let T=await Y(p,m,_(e.ciphertext),y,E,b);"DEF"===a.zip&&(T=await((null==r?void 0:r.inflateRaw)||X)(T));const I={plaintext:T};return void 0!==e.protected&&(I.protectedHeader=n),void 0!==e.aad&&(I.additionalAuthenticatedData=_(e.aad)),void 0!==e.unprotected&&(I.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(I.unprotectedHeader=e.header),v?{...I,key:t}:I}async function Pe(e,t,r){if(e instanceof Uint8Array&&(e=l.decode(e)),"string"!=typeof e)throw new A("Compact JWE must be a string or Uint8Array");const{0:i,1:n,2:o,3:s,4:a,length:u}=e.split(".");if(5!==u)throw new A("Invalid Compact JWE");const c=await Re({ciphertext:s,iv:o||void 0,protected:i||void 0,tag:a||void 0,encrypted_key:n||void 0},t,r),h={plaintext:c.plaintext,protectedHeader:c.protectedHeader};return"function"==typeof t?{...h,key:c.key}:h}async function Oe(e,t,r){if(!te(e))throw new A("General JWE must be an object");if(!Array.isArray(e.recipients)||!e.recipients.every(te))throw new A("JWE Recipients missing or incorrect type");if(!e.recipients.length)throw new A("JWE Recipients has no members");for(const i of e.recipients)try{return await Re({aad:e.aad,ciphertext:e.ciphertext,encrypted_key:i.encrypted_key,header:i.header,iv:e.iv,protected:e.protected,tag:e.tag,unprotected:e.unprotected},t,r)}catch(e){}throw new T}async function ke(e){return(e=>ge("public","spki",e))(e)}async function Fe(e){return(e=>ge("private","pkcs8",e))(e)}async function De(e){return(async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:v(e)};if(!s(e))throw new TypeError(z(e,...Z,"Uint8Array"));if(!e.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:t,key_ops:r,alg:i,use:n,...a}=await o.subtle.exportKey("jwk",e);return a})(e)}const Me=async function(e,t,r,i,n={}){let a,u,l;switch(Ie(e,r,"encrypt"),e){case"dir":l=r;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!ue(r))throw new w("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:c,apv:h}=n;let{epk:p}=n;p||(p=(await async function(e){if(!s(e))throw new TypeError(z(e,...Z));return o.subtle.generateKey(e.algorithm,!0,["deriveBits"])}(r)).privateKey);const{x:d,y:f,crv:g,kty:m}=await De(p),y=await ae(r,p,"ECDH-ES"===e?t:e,"ECDH-ES"===e?pe(t):parseInt(e.slice(-5,-2),10),c,h);if(u={epk:{x:d,crv:g,kty:m}},"EC"===m&&(u.epk.y=f),c&&(u.apu=v(c)),h&&(u.apv=v(h)),"ECDH-ES"===e){l=y;break}l=i||de(t);const _=e.slice(-6);a=await oe(_,y,l);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":l=i||de(t),a=await(async(e,t,r)=>{if(!s(t))throw new TypeError(z(t,...Z));if(W(t,e,"encrypt","wrapKey"),he(e,t),t.usages.includes("encrypt"))return new Uint8Array(await o.subtle.encrypt(ce(e),t,r));if(t.usages.includes("wrapKey")){const i=await o.subtle.importKey("raw",r,...re);return new Uint8Array(await o.subtle.wrapKey("raw",i,t,ce(e)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')})(e,r,l);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{l=i||de(t);const{p2c:o,p2s:s}=n;({encryptedKey:a,...u}=await(async(e,t,r,i=2048,n=F(new Uint8Array(16)))=>{const o=await le(n,e,i,t);return{encryptedKey:await oe(e.slice(-6),o,r),p2c:i,p2s:v(n)}})(e,r,l,o,s));break}case"A128KW":case"A192KW":case"A256KW":l=i||de(t),a=await oe(e,r,l);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{l=i||de(t);const{iv:o}=n;({encryptedKey:a,...u}=await async function(e,t,r,i){const n=e.slice(0,7);i||(i=M(n));const{ciphertext:o,tag:s}=await Le(n,r,t,i,new Uint8Array(0));return{encryptedKey:o,iv:v(i),tag:v(s)}}(e,r,l,o));break}default:throw new w('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:l,encryptedKey:a,parameters:u}},Ue=Symbol();class Be{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}async encrypt(e,t){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new A("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!ee(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new A("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const r={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(Ce(A,new Map,null==t?void 0:t.crit,this._protectedHeader,r),void 0!==r.zip){if(!this._protectedHeader||!this._protectedHeader.zip)throw new A('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==r.zip)throw new w('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:i,enc:n}=r;if("string"!=typeof i||!i)throw new A('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof n||!n)throw new A('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let o,s,a,c,p,d,f;if("dir"===i){if(this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if("ECDH-ES"===i&&this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");{let r;({cek:s,encryptedKey:o,parameters:r}=await Me(i,n,e,this._cek,this._keyManagementParameters)),r&&(t&&Ue in t?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...r}:this.setUnprotectedHeader(r):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...r}:this.setProtectedHeader(r))}if(this._iv||(this._iv=M(n)),c=this._protectedHeader?u.encode(v(JSON.stringify(this._protectedHeader))):u.encode(""),this._aad?(p=v(this._aad),a=h(c,u.encode("."),u.encode(p))):a=c,"DEF"===r.zip){const e=await((null==t?void 0:t.deflateRaw)||Q)(this._plaintext);({ciphertext:d,tag:f}=await Le(n,e,s,this._iv,a))}else({ciphertext:d,tag:f}=await Le(n,this._plaintext,s,this._iv,a));const g={ciphertext:v(d),iv:v(this._iv),tag:v(f)};return o&&(g.encrypted_key=v(o)),p&&(g.aad=p),this._protectedHeader&&(g.protected=l.decode(c)),this._sharedUnprotectedHeader&&(g.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(g.header=this._unprotectedHeader),g}}class je{constructor(e,t,r){this.parent=e,this.key=t,this.options=r}setUnprotectedHeader(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addRecipient(...e){return this.parent.addRecipient(...e)}encrypt(...e){return this.parent.encrypt(...e)}done(){return this.parent}}class He{constructor(e){this._recipients=[],this._plaintext=e}addRecipient(e,t){const r=new je(this,e,{crit:null==t?void 0:t.crit});return this._recipients.push(r),r}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}async encrypt(e){var t,r,i;if(!this._recipients.length)throw new A("at least one recipient must be added");if(e={deflateRaw:null==e?void 0:e.deflateRaw},1===this._recipients.length){const[t]=this._recipients,r=await new Be(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(t.unprotectedHeader).encrypt(t.key,{...t.options,...e});let i={ciphertext:r.ciphertext,iv:r.iv,recipients:[{}],tag:r.tag};return r.aad&&(i.aad=r.aad),r.protected&&(i.protected=r.protected),r.unprotected&&(i.unprotected=r.unprotected),r.encrypted_key&&(i.recipients[0].encrypted_key=r.encrypted_key),r.header&&(i.recipients[0].header=r.header),i}let n;for(let e=0;e<this._recipients.length;e++){const t=this._recipients[e];if(!ee(this._protectedHeader,this._unprotectedHeader,t.unprotectedHeader))throw new A("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const r={...this._protectedHeader,...this._unprotectedHeader,...t.unprotectedHeader},{alg:i}=r;if("string"!=typeof i||!i)throw new A('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("dir"===i||"ECDH-ES"===i)throw new A('"dir" and "ECDH-ES" alg may only be used with a single recipient');if("string"!=typeof r.enc||!r.enc)throw new A('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(n){if(n!==r.enc)throw new A('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients')}else n=r.enc;if(Ce(A,new Map,t.options.crit,this._protectedHeader,r),!(void 0===r.zip||this._protectedHeader&&this._protectedHeader.zip))throw new A('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}const o=de(n);let s={ciphertext:"",iv:"",recipients:[],tag:""};for(let a=0;a<this._recipients.length;a++){const u=this._recipients[a],l={};s.recipients.push(l);const c={...this._protectedHeader,...this._unprotectedHeader,...u.unprotectedHeader}.alg.startsWith("PBES2")?2048+a:void 0;if(0===a){const t=await new Be(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(o).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(u.unprotectedHeader).setKeyManagementParameters({p2c:c}).encrypt(u.key,{...u.options,...e,[Ue]:!0});s.ciphertext=t.ciphertext,s.iv=t.iv,s.tag=t.tag,t.aad&&(s.aad=t.aad),t.protected&&(s.protected=t.protected),t.unprotected&&(s.unprotected=t.unprotected),l.encrypted_key=t.encrypted_key,t.header&&(l.header=t.header);continue}const{encryptedKey:h,parameters:p}=await Me((null===(t=u.unprotectedHeader)||void 0===t?void 0:t.alg)||(null===(r=this._protectedHeader)||void 0===r?void 0:r.alg)||(null===(i=this._unprotectedHeader)||void 0===i?void 0:i.alg),n,u.key,o,{p2c:c});l.encrypted_key=v(h),(u.unprotectedHeader||p)&&(l.header={...u.unprotectedHeader,...p})}return s}}function Ge(e,t){const r=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:t.namedCurve};case j()&&"EdDSA":const{namedCurve:i}=t;return{name:i,namedCurve:i};case"EdDSA":return{name:t.name};default:throw new w(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}function Ve(e,t,r){if(s(t))return function(e,t,...r){switch(t){case"HS256":case"HS384":case"HS512":{if(!G(e.algorithm,"HMAC"))throw H("HMAC");const r=parseInt(t.slice(2),10);if(V(e.algorithm.hash)!==r)throw H(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!G(e.algorithm,"RSASSA-PKCS1-v1_5"))throw H("RSASSA-PKCS1-v1_5");const r=parseInt(t.slice(2),10);if(V(e.algorithm.hash)!==r)throw H(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!G(e.algorithm,"RSA-PSS"))throw H("RSA-PSS");const r=parseInt(t.slice(2),10);if(V(e.algorithm.hash)!==r)throw H(`SHA-${r}`,"algorithm.hash");break}case j()&&"EdDSA":if(!G(e.algorithm,"NODE-ED25519"))throw H("NODE-ED25519");break;case"EdDSA":if("Ed25519"!==e.algorithm.name&&"Ed448"!==e.algorithm.name)throw H("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!G(e.algorithm,"ECDSA"))throw H("ECDSA");const r=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}(t);if(e.algorithm.namedCurve!==r)throw H(r,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}q(e,r)}(t,e,r),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(z(t,...Z));return o.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[r])}throw new TypeError(z(t,...Z,"Uint8Array"))}async function qe(e,t,r){var i;if(!te(e))throw new I("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new I('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new I("JWS Protected Header incorrect type");if(void 0===e.payload)throw new I("JWS Payload missing");if("string"!=typeof e.signature)throw new I("JWS Signature missing or incorrect type");if(void 0!==e.header&&!te(e.header))throw new I("JWS Unprotected Header incorrect type");let n={};if(e.protected)try{const t=_(e.protected);n=JSON.parse(l.decode(t))}catch(e){throw new I("JWS Protected Header is invalid")}if(!ee(n,e.header))throw new I("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const s={...n,...e.header};let a=!0;if(Ce(I,new Map([["b64",!0]]),null==r?void 0:r.crit,n,s).has("b64")&&(a=n.b64,"boolean"!=typeof a))throw new I('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:c}=s;if("string"!=typeof c||!c)throw new I('JWS "alg" (Algorithm) Header Parameter missing or invalid');const p=r&&Ne("algorithms",r.algorithms);if(p&&!p.has(c))throw new S('"alg" (Algorithm) Header Parameter not allowed');if(a){if("string"!=typeof e.payload)throw new I("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new I("JWS Payload must be a string or an Uint8Array instance");let d=!1;"function"==typeof t&&(t=await t(n,e),d=!0),Ie(c,t,"verify");const f=h(u.encode(null!==(i=e.protected)&&void 0!==i?i:""),u.encode("."),"string"==typeof e.payload?u.encode(e.payload):e.payload),g=_(e.signature);if(!await(async(e,t,r,i)=>{const n=await Ve(e,t,"verify");he(e,n);const s=Ge(e,n.algorithm);try{return await o.subtle.verify(s,n,r,i)}catch(e){return!1}})(c,t,g,f))throw new k;let m;m=a?_(e.payload):"string"==typeof e.payload?u.encode(e.payload):e.payload;const v={payload:m};return void 0!==e.protected&&(v.protectedHeader=n),void 0!==e.header&&(v.unprotectedHeader=e.header),d?{...v,key:t}:v}async function We(e,t,r){if(e instanceof Uint8Array&&(e=l.decode(e)),"string"!=typeof e)throw new I("Compact JWS must be a string or Uint8Array");const{0:i,1:n,2:o,length:s}=e.split(".");if(3!==s)throw new I("Invalid Compact JWS");const a=await qe({payload:n,protected:i,signature:o},t,r),u={payload:a.payload,protectedHeader:a.protectedHeader};return"function"==typeof t?{...u,key:a.key}:u}async function Ke(e,t,r){if(!te(e))throw new I("General JWS must be an object");if(!Array.isArray(e.signatures)||!e.signatures.every(te))throw new I("JWS Signatures missing or incorrect type");for(const i of e.signatures)try{return await qe({header:i.header,payload:e.payload,protected:i.protected,signature:i.signature},t,r)}catch(e){}throw new k}const ze=e=>Math.floor(e.getTime()/1e3),$e=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,Je=e=>{const t=$e.exec(e);if(!t)throw new TypeError("Invalid time period format");const r=parseFloat(t[1]);switch(t[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(r);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*r);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*r);case"day":case"days":case"d":return Math.round(86400*r);case"week":case"weeks":case"w":return Math.round(604800*r);default:return Math.round(31557600*r)}},Ze=e=>e.toLowerCase().replace(/^application\//,""),Ye=(e,t,r={})=>{const{typ:i}=r;if(i&&("string"!=typeof e.typ||Ze(e.typ)!==Ze(i)))throw new x('unexpected "typ" JWT header value',"typ","check_failed");let n;try{n=JSON.parse(l.decode(t))}catch(e){}if(!te(n))throw new L("JWT Claims Set must be a top-level JSON object");const{issuer:o}=r;if(o&&!(Array.isArray(o)?o:[o]).includes(n.iss))throw new x('unexpected "iss" claim value',"iss","check_failed");const{subject:s}=r;if(s&&n.sub!==s)throw new x('unexpected "sub" claim value',"sub","check_failed");const{audience:a}=r;if(a&&(c="string"==typeof a?[a]:a,!("string"==typeof(u=n.aud)?c.includes(u):Array.isArray(u)&&c.some(Set.prototype.has.bind(new Set(u))))))throw new x('unexpected "aud" claim value',"aud","check_failed");var u,c;let h;switch(typeof r.clockTolerance){case"string":h=Je(r.clockTolerance);break;case"number":h=r.clockTolerance;break;case"undefined":h=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:p}=r,d=ze(p||new Date);if((void 0!==n.iat||r.maxTokenAge)&&"number"!=typeof n.iat)throw new x('"iat" claim must be a number',"iat","invalid");if(void 0!==n.nbf){if("number"!=typeof n.nbf)throw new x('"nbf" claim must be a number',"nbf","invalid");if(n.nbf>d+h)throw new x('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==n.exp){if("number"!=typeof n.exp)throw new x('"exp" claim must be a number',"exp","invalid");if(n.exp<=d-h)throw new b('"exp" claim timestamp check failed',"exp","check_failed")}if(r.maxTokenAge){const e=d-n.iat;if(e-h>("number"==typeof r.maxTokenAge?r.maxTokenAge:Je(r.maxTokenAge)))throw new b('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(e<0-h)throw new x('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return n};async function Xe(e,t,r){var i;const n=await We(e,t,r);if((null===(i=n.protectedHeader.crit)||void 0===i?void 0:i.includes("b64"))&&!1===n.protectedHeader.b64)throw new L("JWTs MUST NOT use unencoded payload");const o={payload:Ye(n.protectedHeader,n.payload,r),protectedHeader:n.protectedHeader};return"function"==typeof t?{...o,key:n.key}:o}async function Qe(e,t,r){const i=await Pe(e,t,r),n=Ye(i.protectedHeader,i.plaintext,r),{protectedHeader:o}=i;if(void 0!==o.iss&&o.iss!==n.iss)throw new x('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(void 0!==o.sub&&o.sub!==n.sub)throw new x('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(void 0!==o.aud&&JSON.stringify(o.aud)!==JSON.stringify(n.aud))throw new x('replicated "aud" claim header parameter mismatch',"aud","mismatch");const s={payload:n,protectedHeader:o};return"function"==typeof t?{...s,key:i.key}:s}class et{constructor(e){this._flattened=new Be(e)}setContentEncryptionKey(e){return this._flattened.setContentEncryptionKey(e),this}setInitializationVector(e){return this._flattened.setInitializationVector(e),this}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}setKeyManagementParameters(e){return this._flattened.setKeyManagementParameters(e),this}async encrypt(e,t){const r=await this._flattened.encrypt(e,t);return[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join(".")}}class tt{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,t){if(!this._protectedHeader&&!this._unprotectedHeader)throw new I("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!ee(this._protectedHeader,this._unprotectedHeader))throw new I("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const r={...this._protectedHeader,...this._unprotectedHeader};let i=!0;if(Ce(I,new Map([["b64",!0]]),null==t?void 0:t.crit,this._protectedHeader,r).has("b64")&&(i=this._protectedHeader.b64,"boolean"!=typeof i))throw new I('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:n}=r;if("string"!=typeof n||!n)throw new I('JWS "alg" (Algorithm) Header Parameter missing or invalid');Ie(n,e,"sign");let s,a=this._payload;i&&(a=u.encode(v(a))),s=this._protectedHeader?u.encode(v(JSON.stringify(this._protectedHeader))):u.encode("");const c=h(s,u.encode("."),a),p=await(async(e,t,r)=>{const i=await Ve(e,t,"sign");he(e,i);const n=await o.subtle.sign(Ge(e,i.algorithm),i,r);return new Uint8Array(n)})(n,e,c),d={signature:v(p),payload:""};return i&&(d.payload=l.decode(a)),this._unprotectedHeader&&(d.header=this._unprotectedHeader),this._protectedHeader&&(d.protected=l.decode(s)),d}}class rt{constructor(e){this._flattened=new tt(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,t){const r=await this._flattened.sign(e,t);if(void 0===r.payload)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}class it{constructor(e,t,r){this.parent=e,this.key=t,this.options=r}setProtectedHeader(e){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=e,this}setUnprotectedHeader(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addSignature(...e){return this.parent.addSignature(...e)}sign(...e){return this.parent.sign(...e)}done(){return this.parent}}class nt{constructor(e){this._signatures=[],this._payload=e}addSignature(e,t){const r=new it(this,e,t);return this._signatures.push(r),r}async sign(){if(!this._signatures.length)throw new I("at least one signature must be added");const e={signatures:[],payload:""};for(let t=0;t<this._signatures.length;t++){const r=this._signatures[t],i=new tt(this._payload);i.setProtectedHeader(r.protectedHeader),i.setUnprotectedHeader(r.unprotectedHeader);const{payload:n,...o}=await i.sign(r.key,r.options);if(0===t)e.payload=n;else if(e.payload!==n)throw new I("inconsistent use of JWS Unencoded Payload Option (RFC7797)");e.signatures.push(o)}return e}}class ot{constructor(e){if(!te(e))throw new TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return this._payload="number"==typeof e?{...this._payload,nbf:e}:{...this._payload,nbf:ze(new Date)+Je(e)},this}setExpirationTime(e){return this._payload="number"==typeof e?{...this._payload,exp:e}:{...this._payload,exp:ze(new Date)+Je(e)},this}setIssuedAt(e){return this._payload=void 0===e?{...this._payload,iat:ze(new Date)}:{...this._payload,iat:e},this}}class st extends ot{setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,t){var r;const i=new rt(u.encode(JSON.stringify(this._payload)));if(i.setProtectedHeader(this._protectedHeader),Array.isArray(null===(r=this._protectedHeader)||void 0===r?void 0:r.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new L("JWTs MUST NOT use unencoded payload");return i.sign(e,t)}}class at extends ot{setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(e,t){const r=new et(u.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),r.setProtectedHeader(this._protectedHeader),this._iv&&r.setInitializationVector(this._iv),this._cek&&r.setContentEncryptionKey(this._cek),this._keyManagementParameters&&r.setKeyManagementParameters(this._keyManagementParameters),r.encrypt(e,t)}}const ut=(e,t)=>{if("string"!=typeof e||!e)throw new C(`${t} missing or invalid`)};async function lt(e,t){if(!te(e))throw new TypeError("JWK must be an object");if(null!=t||(t="sha256"),"sha256"!==t&&"sha384"!==t&&"sha512"!==t)throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let r;switch(e.kty){case"EC":ut(e.crv,'"crv" (Curve) Parameter'),ut(e.x,'"x" (X Coordinate) Parameter'),ut(e.y,'"y" (Y Coordinate) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":ut(e.crv,'"crv" (Subtype of Key Pair) Parameter'),ut(e.x,'"x" (Public Key) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":ut(e.e,'"e" (Exponent) Parameter'),ut(e.n,'"n" (Modulus) Parameter'),r={e:e.e,kty:e.kty,n:e.n};break;case"oct":ut(e.k,'"k" (Key Value) Parameter'),r={k:e.k,kty:e.kty};break;default:throw new w('"kty" (Key Type) Parameter missing or unsupported')}const i=u.encode(JSON.stringify(r));return v(await a(t,i))}async function ct(e,t){null!=t||(t="sha256");const r=await lt(e,t);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${t.slice(-3)}:${r}`}async function ht(e,t){const r={...e,...t.header};if(!te(r.jwk))throw new I('"jwk" (JSON Web Key) Header Parameter must be a JSON object');const i=await Ae({...r.jwk,ext:!0},r.alg,!0);if(i instanceof Uint8Array||"public"!==i.type)throw new I('"jwk" (JSON Web Key) Header Parameter must be a public key');return i}function pt(e){return e&&"object"==typeof e&&Array.isArray(e.keys)&&e.keys.every(dt)}function dt(e){return te(e)}class ft{constructor(e){if(this._cached=new WeakMap,!pt(e))throw new N("JSON Web Key Set malformed");var t;this._jwks=(t=e,"function"==typeof structuredClone?structuredClone(t):JSON.parse(JSON.stringify(t)))}async getKey(e,t){const{alg:r,kid:i}={...e,...t.header},n=function(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new w('Unsupported "alg" value for a JSON Web Key Set')}}(r),o=this._jwks.keys.filter((e=>{let t=n===e.kty;if(t&&"string"==typeof i&&(t=i===e.kid),t&&"string"==typeof e.alg&&(t=r===e.alg),t&&"string"==typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t&&"EdDSA"===r&&(t="Ed25519"===e.crv||"Ed448"===e.crv),t)switch(r){case"ES256":t="P-256"===e.crv;break;case"ES256K":t="secp256k1"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv}return t})),{0:s,length:a}=o;if(0===a)throw new R;if(1!==a)throw new P;const u=this._cached.get(s)||this._cached.set(s,{}).get(s);if(void 0===u[r]){const e=await Ae({...s,ext:!0},r);if(e instanceof Uint8Array||"public"!==e.type)throw new N("JSON Web Key Set members must be public keys");u[r]=e}return u[r]}}function gt(e){return ft.prototype.getKey.bind(new ft(e))}class mt extends ft{constructor(e,t){if(super({keys:[]}),this._jwks=void 0,!(e instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:null==t?void 0:t.agent,headers:null==t?void 0:t.headers},this._timeoutDuration="number"==typeof(null==t?void 0:t.timeoutDuration)?null==t?void 0:t.timeoutDuration:5e3,this._cooldownDuration="number"==typeof(null==t?void 0:t.cooldownDuration)?null==t?void 0:t.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof(null==t?void 0:t.cacheMaxAge)?null==t?void 0:t.cacheMaxAge:6e5}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(e,t){this._jwks&&this.fresh()||await this.reload();try{return await super.getKey(e,t)}catch(r){if(r instanceof R&&!1===this.coolingDown())return await this.reload(),super.getKey(e,t);throw r}}async reload(){if(this._pendingFetch&&j())return new Promise((e=>{const t=()=>{void 0===this._pendingFetch?e():setTimeout(t,5)};t()}));this._pendingFetch||(this._pendingFetch=(async(e,t,r)=>{let i,n,o=!1;"function"==typeof AbortController&&(i=new AbortController,n=setTimeout((()=>{o=!0,i.abort()}),t));const s=await fetch(e.href,{signal:i?i.signal:void 0,redirect:"manual",headers:r.headers}).catch((e=>{if(o)throw new O;throw e}));if(void 0!==n&&clearTimeout(n),200!==s.status)throw new E("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await s.json()}catch(e){throw new E("Failed to parse the JSON Web Key Set HTTP response as JSON")}})(this._url,this._timeoutDuration,this._options).then((e=>{if(!pt(e))throw new N("JSON Web Key Set malformed");this._jwks={keys:e.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0})).catch((e=>{throw this._pendingFetch=void 0,e}))),await this._pendingFetch}}function vt(e,t){return mt.prototype.getKey.bind(new mt(e,t))}class yt extends ot{encode(){return`${v(JSON.stringify({alg:"none"}))}.${v(JSON.stringify(this._payload))}.`}static decode(e,t){if("string"!=typeof e)throw new L("Unsecured JWT must be a string");const{0:r,1:i,2:n,length:o}=e.split(".");if(3!==o||""!==n)throw new L("Invalid Unsecured JWT");let s;try{if(s=JSON.parse(l.decode(_(r))),"none"!==s.alg)throw new Error}catch(e){throw new L("Invalid Unsecured JWT")}return{payload:Ye(s,_(i),t),header:s}}}const _t=v,Et=_;function xt(e){let t;if("string"==typeof e){const r=e.split(".");3!==r.length&&5!==r.length||([t]=r)}else if("object"==typeof e&&e){if(!("protected"in e))throw new TypeError("Token does not contain a Protected Header");t=e.protected}try{if("string"!=typeof t||!t)throw new Error;const e=JSON.parse(l.decode(Et(t)));if(!te(e))throw new Error;return e}catch(e){throw new TypeError("Invalid Token or Protected Header formatting")}}function bt(e){if("string"!=typeof e)throw new L("JWTs must use Compact JWS serialization, JWT must be a string");const{1:t,length:r}=e.split(".");if(5===r)throw new L("Only JWTs using Compact JWS serialization can be decoded");if(3!==r)throw new L("Invalid JWT");if(!t)throw new L("JWTs must contain a payload");let i,n;try{i=Et(t)}catch(e){throw new L("Failed to parse the base64url encoded payload")}try{n=JSON.parse(l.decode(i))}catch(e){throw new L("Failed to parse the decoded payload as JSON")}if(!te(n))throw new L("Invalid JWT Claims Set");return n}function St(e){var t;const r=null!==(t=null==e?void 0:e.modulusLength)&&void 0!==t?t:2048;if("number"!=typeof r||r<2048)throw new w("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return r}async function wt(e,t){return async function(e,t){var r,i,n;let s,a;switch(e){case"PS256":case"PS384":case"PS512":s={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:St(t)},a=["sign","verify"];break;case"RS256":case"RS384":case"RS512":s={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:St(t)},a=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":s={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:St(t)},a=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":s={name:"ECDSA",namedCurve:"P-256"},a=["sign","verify"];break;case"ES384":s={name:"ECDSA",namedCurve:"P-384"},a=["sign","verify"];break;case"ES512":s={name:"ECDSA",namedCurve:"P-521"},a=["sign","verify"];break;case j()&&"EdDSA":switch(null==t?void 0:t.crv){case void 0:case"Ed25519":s={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},a=["sign","verify"];break;default:throw new w("Invalid or unsupported crv option provided")}break;case"EdDSA":a=["sign","verify"];const n=null!==(r=null==t?void 0:t.crv)&&void 0!==r?r:"Ed25519";switch(n){case"Ed25519":case"Ed448":s={name:n};break;default:throw new w("Invalid or unsupported crv option provided")}break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{a=["deriveKey","deriveBits"];const e=null!==(i=null==t?void 0:t.crv)&&void 0!==i?i:"P-256";switch(e){case"P-256":case"P-384":case"P-521":s={name:"ECDH",namedCurve:e};break;case"X25519":case"X448":s={name:e};break;default:throw new w("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new w('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return o.subtle.generateKey(s,null!==(n=null==t?void 0:t.extractable)&&void 0!==n&&n,a)}(e,t)}async function Tt(e,t){return async function(e,t){var r;let i,n,s;switch(e){case"HS256":case"HS384":case"HS512":i=parseInt(e.slice(-3),10),n={name:"HMAC",hash:`SHA-${i}`,length:i},s=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return i=parseInt(e.slice(-3),10),F(new Uint8Array(i>>3));case"A128KW":case"A192KW":case"A256KW":i=parseInt(e.slice(1,4),10),n={name:"AES-KW",length:i},s=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":i=parseInt(e.slice(1,4),10),n={name:"AES-GCM",length:i},s=["encrypt","decrypt"];break;default:throw new w('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return o.subtle.generateKey(n,null!==(r=null==t?void 0:t.extractable)&&void 0!==r&&r,s)}(e,t)}},8734:function(e,t){var r,i,n;i="undefined"!=typeof window?window:this,n=function(i,n){var o=[],s=i.document,a=o.slice,u=o.concat,l=o.push,c=o.indexOf,h={},p=h.toString,d=h.hasOwnProperty,f={},g="2.2.4",m=function(e,t){return new m.fn.init(e,t)},v=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,y=/^-ms-/,_=/-([\da-z])/gi,E=function(e,t){return t.toUpperCase()};function x(e){var t=!!e&&"length"in e&&e.length,r=m.type(e);return"function"!==r&&!m.isWindow(e)&&("array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}m.fn=m.prototype={jquery:g,constructor:m,selector:"",length:0,toArray:function(){return a.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:a.call(this)},pushStack:function(e){var t=m.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return m.each(this,e)},map:function(e){return this.pushStack(m.map(this,(function(t,r){return e.call(t,r,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:o.sort,splice:o.splice},m.extend=m.fn.extend=function(){var e,t,r,i,n,o,s=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||m.isFunction(s)||(s={}),a===u&&(s=this,a--);a<u;a++)if(null!=(e=arguments[a]))for(t in e)r=s[t],s!==(i=e[t])&&(l&&i&&(m.isPlainObject(i)||(n=m.isArray(i)))?(n?(n=!1,o=r&&m.isArray(r)?r:[]):o=r&&m.isPlainObject(r)?r:{},s[t]=m.extend(l,o,i)):void 0!==i&&(s[t]=i));return s},m.extend({expando:"jQuery"+(g+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===m.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!m.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==m.type(e)||e.nodeType||m.isWindow(e))return!1;if(e.constructor&&!d.call(e,"constructor")&&!d.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||d.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[p.call(e)]||"object":typeof e},globalEval:function(e){var t,r=eval;(e=m.trim(e))&&(1===e.indexOf("use strict")?((t=s.createElement("script")).text=e,s.head.appendChild(t).parentNode.removeChild(t)):r(e))},camelCase:function(e){return e.replace(y,"ms-").replace(_,E)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var r,i=0;if(x(e))for(r=e.length;i<r&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(v,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(x(Object(e))?m.merge(r,"string"==typeof e?[e]:e):l.call(r,e)),r},inArray:function(e,t,r){return null==t?-1:c.call(t,e,r)},merge:function(e,t){for(var r=+t.length,i=0,n=e.length;i<r;i++)e[n++]=t[i];return e.length=n,e},grep:function(e,t,r){for(var i=[],n=0,o=e.length,s=!r;n<o;n++)!t(e[n],n)!==s&&i.push(e[n]);return i},map:function(e,t,r){var i,n,o=0,s=[];if(x(e))for(i=e.length;o<i;o++)null!=(n=t(e[o],o,r))&&s.push(n);else for(o in e)null!=(n=t(e[o],o,r))&&s.push(n);return u.apply([],s)},guid:1,proxy:function(e,t){var r,i,n;if("string"==typeof t&&(r=e[t],t=e,e=r),m.isFunction(e))return i=a.call(arguments,2),n=function(){return e.apply(t||this,i.concat(a.call(arguments)))},n.guid=e.guid=e.guid||m.guid++,n},now:Date.now,support:f}),"function"==typeof Symbol&&(m.fn[Symbol.iterator]=o[Symbol.iterator]),m.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){h["[object "+t+"]"]=t.toLowerCase()}));var b=function(e){var t,r,i,n,o,s,a,u,l,c,h,p,d,f,g,m,v,y,_,E="sizzle"+1*new Date,x=e.document,b=0,S=0,w=oe(),T=oe(),A=oe(),I=function(e,t){return e===t&&(h=!0),0},L=1<<31,C={}.hasOwnProperty,N=[],R=N.pop,P=N.push,O=N.push,k=N.slice,F=function(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},D="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",U="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",B="\\[[\\x20\\t\\r\\n\\f]*("+U+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+U+"))|)"+M+"*\\]",j=":("+U+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",H=new RegExp(M+"+","g"),G=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),V=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),q=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),W=new RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),K=new RegExp(j),z=new RegExp("^"+U+"$"),$={ID:new RegExp("^#("+U+")"),CLASS:new RegExp("^\\.("+U+")"),TAG:new RegExp("^("+U+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+D+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},J=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,ee=/'|\\/g,te=new RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),re=function(e,t,r){var i="0x"+t-65536;return i!=i||r?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ie=function(){p()};try{O.apply(N=k.call(x.childNodes),x.childNodes),N[x.childNodes.length].nodeType}catch(e){O={apply:N.length?function(e,t){P.apply(e,k.call(t))}:function(e,t){for(var r=e.length,i=0;e[r++]=t[i++];);e.length=r-1}}}function ne(e,t,i,n){var o,a,l,c,h,f,v,y,b=t&&t.ownerDocument,S=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==S&&9!==S&&11!==S)return i;if(!n&&((t?t.ownerDocument||t:x)!==d&&p(t),t=t||d,g)){if(11!==S&&(f=X.exec(e)))if(o=f[1]){if(9===S){if(!(l=t.getElementById(o)))return i;if(l.id===o)return i.push(l),i}else if(b&&(l=b.getElementById(o))&&_(t,l)&&l.id===o)return i.push(l),i}else{if(f[2])return O.apply(i,t.getElementsByTagName(e)),i;if((o=f[3])&&r.getElementsByClassName&&t.getElementsByClassName)return O.apply(i,t.getElementsByClassName(o)),i}if(r.qsa&&!A[e+" "]&&(!m||!m.test(e))){if(1!==S)b=t,y=e;else if("object"!==t.nodeName.toLowerCase()){for((c=t.getAttribute("id"))?c=c.replace(ee,"\\$&"):t.setAttribute("id",c=E),a=(v=s(e)).length,h=z.test(c)?"#"+c:"[id='"+c+"']";a--;)v[a]=h+" "+ge(v[a]);y=v.join(","),b=Q.test(e)&&de(t.parentNode)||t}if(y)try{return O.apply(i,b.querySelectorAll(y)),i}catch(e){}finally{c===E&&t.removeAttribute("id")}}}return u(e.replace(G,"$1"),t,i,n)}function oe(){var e=[];return function t(r,n){return e.push(r+" ")>i.cacheLength&&delete t[e.shift()],t[r+" "]=n}}function se(e){return e[E]=!0,e}function ae(e){var t=d.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var r=e.split("|"),n=r.length;n--;)i.attrHandle[r[n]]=t}function le(e,t){var r=t&&e,i=r&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||L)-(~e.sourceIndex||L);if(i)return i;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function ce(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}function pe(e){return se((function(t){return t=+t,se((function(r,i){for(var n,o=e([],r.length,t),s=o.length;s--;)r[n=o[s]]&&(r[n]=!(i[n]=r[n]))}))}))}function de(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in r=ne.support={},o=ne.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},p=ne.setDocument=function(e){var t,n,s=e?e.ownerDocument||e:x;return s!==d&&9===s.nodeType&&s.documentElement?(f=(d=s).documentElement,g=!o(d),(n=d.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",ie,!1):n.attachEvent&&n.attachEvent("onunload",ie)),r.attributes=ae((function(e){return e.className="i",!e.getAttribute("className")})),r.getElementsByTagName=ae((function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length})),r.getElementsByClassName=Y.test(d.getElementsByClassName),r.getById=ae((function(e){return f.appendChild(e).id=E,!d.getElementsByName||!d.getElementsByName(E).length})),r.getById?(i.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var r=t.getElementById(e);return r?[r]:[]}},i.filter.ID=function(e){var t=e.replace(te,re);return function(e){return e.getAttribute("id")===t}}):(delete i.find.ID,i.filter.ID=function(e){var t=e.replace(te,re);return function(e){var r=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}}),i.find.TAG=r.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):r.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,i=[],n=0,o=t.getElementsByTagName(e);if("*"===e){for(;r=o[n++];)1===r.nodeType&&i.push(r);return i}return o},i.find.CLASS=r.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],m=[],(r.qsa=Y.test(d.querySelectorAll))&&(ae((function(e){f.appendChild(e).innerHTML="<a id='"+E+"'></a><select id='"+E+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+D+")"),e.querySelectorAll("[id~="+E+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+E+"+*").length||m.push(".#.+[+~]")})),ae((function(e){var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(r.matchesSelector=Y.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ae((function(e){r.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),v.push("!=",j)})),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),t=Y.test(f.compareDocumentPosition),_=t||Y.test(f.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},I=t?function(e,t){if(e===t)return h=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!r.sortDetached&&t.compareDocumentPosition(e)===i?e===d||e.ownerDocument===x&&_(x,e)?-1:t===d||t.ownerDocument===x&&_(x,t)?1:c?F(c,e)-F(c,t):0:4&i?-1:1)}:function(e,t){if(e===t)return h=!0,0;var r,i=0,n=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!n||!o)return e===d?-1:t===d?1:n?-1:o?1:c?F(c,e)-F(c,t):0;if(n===o)return le(e,t);for(r=e;r=r.parentNode;)s.unshift(r);for(r=t;r=r.parentNode;)a.unshift(r);for(;s[i]===a[i];)i++;return i?le(s[i],a[i]):s[i]===x?-1:a[i]===x?1:0},d):d},ne.matches=function(e,t){return ne(e,null,null,t)},ne.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&p(e),t=t.replace(W,"='$1']"),r.matchesSelector&&g&&!A[t+" "]&&(!v||!v.test(t))&&(!m||!m.test(t)))try{var i=y.call(e,t);if(i||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return ne(t,d,null,[e]).length>0},ne.contains=function(e,t){return(e.ownerDocument||e)!==d&&p(e),_(e,t)},ne.attr=function(e,t){(e.ownerDocument||e)!==d&&p(e);var n=i.attrHandle[t.toLowerCase()],o=n&&C.call(i.attrHandle,t.toLowerCase())?n(e,t,!g):void 0;return void 0!==o?o:r.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},ne.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ne.uniqueSort=function(e){var t,i=[],n=0,o=0;if(h=!r.detectDuplicates,c=!r.sortStable&&e.slice(0),e.sort(I),h){for(;t=e[o++];)t===e[o]&&(n=i.push(o));for(;n--;)e.splice(i[n],1)}return c=null,e},n=ne.getText=function(e){var t,r="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=n(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)r+=n(t);return r},i=ne.selectors={cacheLength:50,createPseudo:se,match:$,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,re),e[3]=(e[3]||e[4]||e[5]||"").replace(te,re),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ne.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ne.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return $.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&K.test(r)&&(t=s(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,re).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=w[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+M+"|$)"))&&w(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,r){return function(i){var n=ne.attr(i,e);return null==n?"!="===t:!t||(n+="","="===t?n===r:"!="===t?n!==r:"^="===t?r&&0===n.indexOf(r):"*="===t?r&&n.indexOf(r)>-1:"$="===t?r&&n.slice(-r.length)===r:"~="===t?(" "+n.replace(H," ")+" ").indexOf(r)>-1:"|="===t&&(n===r||n.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,r,i,n){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===n?function(e){return!!e.parentNode}:function(t,r,u){var l,c,h,p,d,f,g=o!==s?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!u&&!a,_=!1;if(m){if(o){for(;g;){for(p=t;p=p[g];)if(a?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&y){for(_=(d=(l=(c=(h=(p=m)[E]||(p[E]={}))[p.uniqueID]||(h[p.uniqueID]={}))[e]||[])[0]===b&&l[1])&&l[2],p=d&&m.childNodes[d];p=++d&&p&&p[g]||(_=d=0)||f.pop();)if(1===p.nodeType&&++_&&p===t){c[e]=[b,d,_];break}}else if(y&&(_=d=(l=(c=(h=(p=t)[E]||(p[E]={}))[p.uniqueID]||(h[p.uniqueID]={}))[e]||[])[0]===b&&l[1]),!1===_)for(;(p=++d&&p&&p[g]||(_=d=0)||f.pop())&&((a?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++_||(y&&((c=(h=p[E]||(p[E]={}))[p.uniqueID]||(h[p.uniqueID]={}))[e]=[b,_]),p!==t)););return(_-=n)===i||_%i==0&&_/i>=0}}},PSEUDO:function(e,t){var r,n=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ne.error("unsupported pseudo: "+e);return n[E]?n(t):n.length>1?(r=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?se((function(e,r){for(var i,o=n(e,t),s=o.length;s--;)e[i=F(e,o[s])]=!(r[i]=o[s])})):function(e){return n(e,0,r)}):n}},pseudos:{not:se((function(e){var t=[],r=[],i=a(e.replace(G,"$1"));return i[E]?se((function(e,t,r,n){for(var o,s=i(e,null,n,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))})):function(e,n,o){return t[0]=e,i(t,null,o,r),t[0]=null,!r.pop()}})),has:se((function(e){return function(t){return ne(e,t).length>0}})),contains:se((function(e){return e=e.replace(te,re),function(t){return(t.textContent||t.innerText||n(t)).indexOf(e)>-1}})),lang:se((function(e){return z.test(e||"")||ne.error("unsupported lang: "+e),e=e.replace(te,re).toLowerCase(),function(t){var r;do{if(r=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return J.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pe((function(){return[0]})),last:pe((function(e,t){return[t-1]})),eq:pe((function(e,t,r){return[r<0?r+t:r]})),even:pe((function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e})),odd:pe((function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e})),lt:pe((function(e,t,r){for(var i=r<0?r+t:r;--i>=0;)e.push(i);return e})),gt:pe((function(e,t,r){for(var i=r<0?r+t:r;++i<t;)e.push(i);return e}))}},i.pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=ce(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=he(t);function fe(){}function ge(e){for(var t=0,r=e.length,i="";t<r;t++)i+=e[t].value;return i}function me(e,t,r){var i=t.dir,n=r&&"parentNode"===i,o=S++;return t.first?function(t,r,o){for(;t=t[i];)if(1===t.nodeType||n)return e(t,r,o)}:function(t,r,s){var a,u,l,c=[b,o];if(s){for(;t=t[i];)if((1===t.nodeType||n)&&e(t,r,s))return!0}else for(;t=t[i];)if(1===t.nodeType||n){if((a=(u=(l=t[E]||(t[E]={}))[t.uniqueID]||(l[t.uniqueID]={}))[i])&&a[0]===b&&a[1]===o)return c[2]=a[2];if(u[i]=c,c[2]=e(t,r,s))return!0}}}function ve(e){return e.length>1?function(t,r,i){for(var n=e.length;n--;)if(!e[n](t,r,i))return!1;return!0}:e[0]}function ye(e,t,r,i,n){for(var o,s=[],a=0,u=e.length,l=null!=t;a<u;a++)(o=e[a])&&(r&&!r(o,i,n)||(s.push(o),l&&t.push(a)));return s}function _e(e,t,r,i,n,o){return i&&!i[E]&&(i=_e(i)),n&&!n[E]&&(n=_e(n,o)),se((function(o,s,a,u){var l,c,h,p=[],d=[],f=s.length,g=o||function(e,t,r){for(var i=0,n=t.length;i<n;i++)ne(e,t[i],r);return r}(t||"*",a.nodeType?[a]:a,[]),m=!e||!o&&t?g:ye(g,p,e,a,u),v=r?n||(o?e:f||i)?[]:s:m;if(r&&r(m,v,a,u),i)for(l=ye(v,d),i(l,[],a,u),c=l.length;c--;)(h=l[c])&&(v[d[c]]=!(m[d[c]]=h));if(o){if(n||e){if(n){for(l=[],c=v.length;c--;)(h=v[c])&&l.push(m[c]=h);n(null,v=[],l,u)}for(c=v.length;c--;)(h=v[c])&&(l=n?F(o,h):p[c])>-1&&(o[l]=!(s[l]=h))}}else v=ye(v===s?v.splice(f,v.length):v),n?n(null,s,v,u):O.apply(s,v)}))}function Ee(e){for(var t,r,n,o=e.length,s=i.relative[e[0].type],a=s||i.relative[" "],u=s?1:0,c=me((function(e){return e===t}),a,!0),h=me((function(e){return F(t,e)>-1}),a,!0),p=[function(e,r,i){var n=!s&&(i||r!==l)||((t=r).nodeType?c(e,r,i):h(e,r,i));return t=null,n}];u<o;u++)if(r=i.relative[e[u].type])p=[me(ve(p),r)];else{if((r=i.filter[e[u].type].apply(null,e[u].matches))[E]){for(n=++u;n<o&&!i.relative[e[n].type];n++);return _e(u>1&&ve(p),u>1&&ge(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(G,"$1"),r,u<n&&Ee(e.slice(u,n)),n<o&&Ee(e=e.slice(n)),n<o&&ge(e))}p.push(r)}return ve(p)}return fe.prototype=i.filters=i.pseudos,i.setFilters=new fe,s=ne.tokenize=function(e,t){var r,n,o,s,a,u,l,c=T[e+" "];if(c)return t?0:c.slice(0);for(a=e,u=[],l=i.preFilter;a;){for(s in r&&!(n=V.exec(a))||(n&&(a=a.slice(n[0].length)||a),u.push(o=[])),r=!1,(n=q.exec(a))&&(r=n.shift(),o.push({value:r,type:n[0].replace(G," ")}),a=a.slice(r.length)),i.filter)!(n=$[s].exec(a))||l[s]&&!(n=l[s](n))||(r=n.shift(),o.push({value:r,type:s,matches:n}),a=a.slice(r.length));if(!r)break}return t?a.length:a?ne.error(e):T(e,u).slice(0)},a=ne.compile=function(e,t){var r,n=[],o=[],a=A[e+" "];if(!a){for(t||(t=s(e)),r=t.length;r--;)(a=Ee(t[r]))[E]?n.push(a):o.push(a);a=A(e,function(e,t){var r=t.length>0,n=e.length>0,o=function(o,s,a,u,c){var h,f,m,v=0,y="0",_=o&&[],E=[],x=l,S=o||n&&i.find.TAG("*",c),w=b+=null==x?1:Math.random()||.1,T=S.length;for(c&&(l=s===d||s||c);y!==T&&null!=(h=S[y]);y++){if(n&&h){for(f=0,s||h.ownerDocument===d||(p(h),a=!g);m=e[f++];)if(m(h,s||d,a)){u.push(h);break}c&&(b=w)}r&&((h=!m&&h)&&v--,o&&_.push(h))}if(v+=y,r&&y!==v){for(f=0;m=t[f++];)m(_,E,s,a);if(o){if(v>0)for(;y--;)_[y]||E[y]||(E[y]=R.call(u));E=ye(E)}O.apply(u,E),c&&!o&&E.length>0&&v+t.length>1&&ne.uniqueSort(u)}return c&&(b=w,l=x),_};return r?se(o):o}(o,n)),a.selector=e}return a},u=ne.select=function(e,t,n,o){var u,l,c,h,p,d="function"==typeof e&&e,f=!o&&s(e=d.selector||e);if(n=n||[],1===f.length){if((l=f[0]=f[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&r.getById&&9===t.nodeType&&g&&i.relative[l[1].type]){if(!(t=(i.find.ID(c.matches[0].replace(te,re),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(u=$.needsContext.test(e)?0:l.length;u--&&(c=l[u],!i.relative[h=c.type]);)if((p=i.find[h])&&(o=p(c.matches[0].replace(te,re),Q.test(l[0].type)&&de(t.parentNode)||t))){if(l.splice(u,1),!(e=o.length&&ge(l)))return O.apply(n,o),n;break}}return(d||a(e,f))(o,t,!g,n,!t||Q.test(e)&&de(t.parentNode)||t),n},r.sortStable=E.split("").sort(I).join("")===E,r.detectDuplicates=!!h,p(),r.sortDetached=ae((function(e){return 1&e.compareDocumentPosition(d.createElement("div"))})),ae((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||ue("type|href|height|width",(function(e,t,r){if(!r)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),r.attributes&&ae((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||ue("value",(function(e,t,r){if(!r&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ae((function(e){return null==e.getAttribute("disabled")}))||ue(D,(function(e,t,r){var i;if(!r)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null})),ne}(i);m.find=b,m.expr=b.selectors,m.expr[":"]=m.expr.pseudos,m.uniqueSort=m.unique=b.uniqueSort,m.text=b.getText,m.isXMLDoc=b.isXML,m.contains=b.contains;var S=function(e,t,r){for(var i=[],n=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(n&&m(e).is(r))break;i.push(e)}return i},w=function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r},T=m.expr.match.needsContext,A=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,I=/^.[^:#\[\.,]*$/;function L(e,t,r){if(m.isFunction(t))return m.grep(e,(function(e,i){return!!t.call(e,i,e)!==r}));if(t.nodeType)return m.grep(e,(function(e){return e===t!==r}));if("string"==typeof t){if(I.test(t))return m.filter(t,e,r);t=m.filter(t,e)}return m.grep(e,(function(e){return c.call(t,e)>-1!==r}))}m.filter=function(e,t,r){var i=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?m.find.matchesSelector(i,e)?[i]:[]:m.find.matches(e,m.grep(t,(function(e){return 1===e.nodeType})))},m.fn.extend({find:function(e){var t,r=this.length,i=[],n=this;if("string"!=typeof e)return this.pushStack(m(e).filter((function(){for(t=0;t<r;t++)if(m.contains(n[t],this))return!0})));for(t=0;t<r;t++)m.find(e,n[t],i);return(i=this.pushStack(r>1?m.unique(i):i)).selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(L(this,e||[],!1))},not:function(e){return this.pushStack(L(this,e||[],!0))},is:function(e){return!!L(this,"string"==typeof e&&T.test(e)?m(e):e||[],!1).length}});var C,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(m.fn.init=function(e,t,r){var i,n;if(!e)return this;if(r=r||C,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:N.exec(e))||!i[1]&&t)return!t||t.jquery?(t||r).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof m?t[0]:t,m.merge(this,m.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:s,!0)),A.test(i[1])&&m.isPlainObject(t))for(i in t)m.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(n=s.getElementById(i[2]))&&n.parentNode&&(this.length=1,this[0]=n),this.context=s,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):m.isFunction(e)?void 0!==r.ready?r.ready(e):e(m):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),m.makeArray(e,this))}).prototype=m.fn,C=m(s);var R=/^(?:parents|prev(?:Until|All))/,P={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}m.fn.extend({has:function(e){var t=m(e,this),r=t.length;return this.filter((function(){for(var e=0;e<r;e++)if(m.contains(this,t[e]))return!0}))},closest:function(e,t){for(var r,i=0,n=this.length,o=[],s=T.test(e)||"string"!=typeof e?m(e,t||this.context):0;i<n;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(s?s.index(r)>-1:1===r.nodeType&&m.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(o.length>1?m.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?c.call(m(e),this[0]):c.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(m.uniqueSort(m.merge(this.get(),m(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),m.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return S(e,"parentNode")},parentsUntil:function(e,t,r){return S(e,"parentNode",r)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return S(e,"nextSibling")},prevAll:function(e){return S(e,"previousSibling")},nextUntil:function(e,t,r){return S(e,"nextSibling",r)},prevUntil:function(e,t,r){return S(e,"previousSibling",r)},siblings:function(e){return w((e.parentNode||{}).firstChild,e)},children:function(e){return w(e.firstChild)},contents:function(e){return e.contentDocument||m.merge([],e.childNodes)}},(function(e,t){m.fn[e]=function(r,i){var n=m.map(this,t,r);return"Until"!==e.slice(-5)&&(i=r),i&&"string"==typeof i&&(n=m.filter(i,n)),this.length>1&&(P[e]||m.uniqueSort(n),R.test(e)&&n.reverse()),this.pushStack(n)}}));var k,F=/\S+/g;function D(){s.removeEventListener("DOMContentLoaded",D),i.removeEventListener("load",D),m.ready()}m.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return m.each(e.match(F)||[],(function(e,r){t[r]=!0})),t}(e):m.extend({},e);var t,r,i,n,o=[],s=[],a=-1,u=function(){for(n=e.once,i=t=!0;s.length;a=-1)for(r=s.shift();++a<o.length;)!1===o[a].apply(r[0],r[1])&&e.stopOnFalse&&(a=o.length,r=!1);e.memory||(r=!1),t=!1,n&&(o=r?[]:"")},l={add:function(){return o&&(r&&!t&&(a=o.length-1,s.push(r)),function t(r){m.each(r,(function(r,i){m.isFunction(i)?e.unique&&l.has(i)||o.push(i):i&&i.length&&"string"!==m.type(i)&&t(i)}))}(arguments),r&&!t&&u()),this},remove:function(){return m.each(arguments,(function(e,t){for(var r;(r=m.inArray(t,o,r))>-1;)o.splice(r,1),r<=a&&a--})),this},has:function(e){return e?m.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return n=s=[],o=r="",this},disabled:function(){return!o},lock:function(){return n=s=[],r||(o=r=""),this},locked:function(){return!!n},fireWith:function(e,r){return n||(r=[e,(r=r||[]).slice?r.slice():r],s.push(r),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!i}};return l},m.extend({Deferred:function(e){var t=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],r="pending",i={state:function(){return r},always:function(){return n.done(arguments).fail(arguments),this},then:function(){var e=arguments;return m.Deferred((function(r){m.each(t,(function(t,o){var s=m.isFunction(e[t])&&e[t];n[o[1]]((function(){var e=s&&s.apply(this,arguments);e&&m.isFunction(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[o[0]+"With"](this===i?r.promise():this,s?[e]:arguments)}))})),e=null})).promise()},promise:function(e){return null!=e?m.extend(e,i):i}},n={};return i.pipe=i.then,m.each(t,(function(e,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add((function(){r=a}),t[1^e][2].disable,t[2][2].lock),n[o[0]]=function(){return n[o[0]+"With"](this===n?i:this,arguments),this},n[o[0]+"With"]=s.fireWith})),i.promise(n),e&&e.call(n,n),n},when:function(e){var t,r,i,n=0,o=a.call(arguments),s=o.length,u=1!==s||e&&m.isFunction(e.promise)?s:0,l=1===u?e:m.Deferred(),c=function(e,r,i){return function(n){r[e]=this,i[e]=arguments.length>1?a.call(arguments):n,i===t?l.notifyWith(r,i):--u||l.resolveWith(r,i)}};if(s>1)for(t=new Array(s),r=new Array(s),i=new Array(s);n<s;n++)o[n]&&m.isFunction(o[n].promise)?o[n].promise().progress(c(n,r,t)).done(c(n,i,o)).fail(l.reject):--u;return u||l.resolveWith(i,o),l.promise()}}),m.fn.ready=function(e){return m.ready.promise().done(e),this},m.extend({isReady:!1,readyWait:1,holdReady:function(e){e?m.readyWait++:m.ready(!0)},ready:function(e){(!0===e?--m.readyWait:m.isReady)||(m.isReady=!0,!0!==e&&--m.readyWait>0||(k.resolveWith(s,[m]),m.fn.triggerHandler&&(m(s).triggerHandler("ready"),m(s).off("ready"))))}}),m.ready.promise=function(e){return k||(k=m.Deferred(),"complete"===s.readyState||"loading"!==s.readyState&&!s.documentElement.doScroll?i.setTimeout(m.ready):(s.addEventListener("DOMContentLoaded",D),i.addEventListener("load",D))),k.promise(e)},m.ready.promise();var M=function(e,t,r,i,n,o,s){var a=0,u=e.length,l=null==r;if("object"===m.type(r))for(a in n=!0,r)M(e,t,a,r[a],!0,o,s);else if(void 0!==i&&(n=!0,m.isFunction(i)||(s=!0),l&&(s?(t.call(e,i),t=null):(l=t,t=function(e,t,r){return l.call(m(e),r)})),t))for(;a<u;a++)t(e[a],r,s?i:i.call(e[a],a,t(e[a],r)));return n?e:l?t.call(e):u?t(e[0],r):o},U=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function B(){this.expando=m.expando+B.uid++}B.uid=1,B.prototype={register:function(e,t){var r=t||{};return e.nodeType?e[this.expando]=r:Object.defineProperty(e,this.expando,{value:r,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!U(e))return{};var t=e[this.expando];return t||(t={},U(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var i,n=this.cache(e);if("string"==typeof t)n[t]=r;else for(i in t)n[i]=t[i];return n},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,r){var i;return void 0===t||t&&"string"==typeof t&&void 0===r?void 0!==(i=this.get(e,t))?i:this.get(e,m.camelCase(t)):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i,n,o=e[this.expando];if(void 0!==o){if(void 0===t)this.register(e);else{m.isArray(t)?i=t.concat(t.map(m.camelCase)):(n=m.camelCase(t),i=t in o?[t,n]:(i=n)in o?[i]:i.match(F)||[]),r=i.length;for(;r--;)delete o[i[r]]}(void 0===t||m.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!m.isEmptyObject(t)}};var j=new B,H=new B,G=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,V=/[A-Z]/g;function q(e,t,r){var i;if(void 0===r&&1===e.nodeType)if(i="data-"+t.replace(V,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(i))){try{r="true"===r||"false"!==r&&("null"===r?null:+r+""===r?+r:G.test(r)?m.parseJSON(r):r)}catch(e){}H.set(e,t,r)}else r=void 0;return r}m.extend({hasData:function(e){return H.hasData(e)||j.hasData(e)},data:function(e,t,r){return H.access(e,t,r)},removeData:function(e,t){H.remove(e,t)},_data:function(e,t,r){return j.access(e,t,r)},_removeData:function(e,t){j.remove(e,t)}}),m.fn.extend({data:function(e,t){var r,i,n,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(n=H.get(o),1===o.nodeType&&!j.get(o,"hasDataAttrs"))){for(r=s.length;r--;)s[r]&&0===(i=s[r].name).indexOf("data-")&&(i=m.camelCase(i.slice(5)),q(o,i,n[i]));j.set(o,"hasDataAttrs",!0)}return n}return"object"==typeof e?this.each((function(){H.set(this,e)})):M(this,(function(t){var r,i;if(o&&void 0===t)return void 0!==(r=H.get(o,e)||H.get(o,e.replace(V,"-$&").toLowerCase()))?r:(i=m.camelCase(e),void 0!==(r=H.get(o,i))||void 0!==(r=q(o,i,void 0))?r:void 0);i=m.camelCase(e),this.each((function(){var r=H.get(this,i);H.set(this,i,t),e.indexOf("-")>-1&&void 0!==r&&H.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){H.remove(this,e)}))}}),m.extend({queue:function(e,t,r){var i;if(e)return t=(t||"fx")+"queue",i=j.get(e,t),r&&(!i||m.isArray(r)?i=j.access(e,t,m.makeArray(r)):i.push(r)),i||[]},dequeue:function(e,t){t=t||"fx";var r=m.queue(e,t),i=r.length,n=r.shift(),o=m._queueHooks(e,t);"inprogress"===n&&(n=r.shift(),i--),n&&("fx"===t&&r.unshift("inprogress"),delete o.stop,n.call(e,(function(){m.dequeue(e,t)}),o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return j.get(e,r)||j.access(e,r,{empty:m.Callbacks("once memory").add((function(){j.remove(e,[t+"queue",r])}))})}}),m.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?m.queue(this[0],e):void 0===t?this:this.each((function(){var r=m.queue(this,e,t);m._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&m.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){m.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,n=m.Deferred(),o=this,s=this.length,a=function(){--i||n.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(r=j.get(o[s],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(a));return a(),n.promise(t)}});var W=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,K=new RegExp("^(?:([+-])=|)("+W+")([a-z%]*)$","i"),z=["Top","Right","Bottom","Left"],$=function(e,t){return e=t||e,"none"===m.css(e,"display")||!m.contains(e.ownerDocument,e)};function J(e,t,r,i){var n,o=1,s=20,a=i?function(){return i.cur()}:function(){return m.css(e,t,"")},u=a(),l=r&&r[3]||(m.cssNumber[t]?"":"px"),c=(m.cssNumber[t]||"px"!==l&&+u)&&K.exec(m.css(e,t));if(c&&c[3]!==l){l=l||c[3],r=r||[],c=+u||1;do{c/=o=o||".5",m.style(e,t,c+l)}while(o!==(o=a()/u)&&1!==o&&--s)}return r&&(c=+c||+u||0,n=r[1]?c+(r[1]+1)*r[2]:+r[2],i&&(i.unit=l,i.start=c,i.end=n)),n}var Z=/^(?:checkbox|radio)$/i,Y=/<([\w:-]+)/,X=/^$|\/(?:java|ecma)script/i,Q={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ee(e,t){var r=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&m.nodeName(e,t)?m.merge([e],r):r}function te(e,t){for(var r=0,i=e.length;r<i;r++)j.set(e[r],"globalEval",!t||j.get(t[r],"globalEval"))}Q.optgroup=Q.option,Q.tbody=Q.tfoot=Q.colgroup=Q.caption=Q.thead,Q.th=Q.td;var re,ie,ne=/<|&#?\w+;/;function oe(e,t,r,i,n){for(var o,s,a,u,l,c,h=t.createDocumentFragment(),p=[],d=0,f=e.length;d<f;d++)if((o=e[d])||0===o)if("object"===m.type(o))m.merge(p,o.nodeType?[o]:o);else if(ne.test(o)){for(s=s||h.appendChild(t.createElement("div")),a=(Y.exec(o)||["",""])[1].toLowerCase(),u=Q[a]||Q._default,s.innerHTML=u[1]+m.htmlPrefilter(o)+u[2],c=u[0];c--;)s=s.lastChild;m.merge(p,s.childNodes),(s=h.firstChild).textContent=""}else p.push(t.createTextNode(o));for(h.textContent="",d=0;o=p[d++];)if(i&&m.inArray(o,i)>-1)n&&n.push(o);else if(l=m.contains(o.ownerDocument,o),s=ee(h.appendChild(o),"script"),l&&te(s),r)for(c=0;o=s[c++];)X.test(o.type||"")&&r.push(o);return h}re=s.createDocumentFragment().appendChild(s.createElement("div")),(ie=s.createElement("input")).setAttribute("type","radio"),ie.setAttribute("checked","checked"),ie.setAttribute("name","t"),re.appendChild(ie),f.checkClone=re.cloneNode(!0).cloneNode(!0).lastChild.checked,re.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!re.cloneNode(!0).lastChild.defaultValue;var se=/^key/,ae=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ue=/^([^.]*)(?:\.(.+)|)/;function le(){return!0}function ce(){return!1}function he(){try{return s.activeElement}catch(e){}}function pe(e,t,r,i,n,o){var s,a;if("object"==typeof t){for(a in"string"!=typeof r&&(i=i||r,r=void 0),t)pe(e,a,r,i,t[a],o);return e}if(null==i&&null==n?(n=r,i=r=void 0):null==n&&("string"==typeof r?(n=i,i=void 0):(n=i,i=r,r=void 0)),!1===n)n=ce;else if(!n)return e;return 1===o&&(s=n,n=function(e){return m().off(e),s.apply(this,arguments)},n.guid=s.guid||(s.guid=m.guid++)),e.each((function(){m.event.add(this,t,n,i,r)}))}m.event={global:{},add:function(e,t,r,i,n){var o,s,a,u,l,c,h,p,d,f,g,v=j.get(e);if(v)for(r.handler&&(r=(o=r).handler,n=o.selector),r.guid||(r.guid=m.guid++),(u=v.events)||(u=v.events={}),(s=v.handle)||(s=v.handle=function(t){return void 0!==m&&m.event.triggered!==t.type?m.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(F)||[""]).length;l--;)d=g=(a=ue.exec(t[l])||[])[1],f=(a[2]||"").split(".").sort(),d&&(h=m.event.special[d]||{},d=(n?h.delegateType:h.bindType)||d,h=m.event.special[d]||{},c=m.extend({type:d,origType:g,data:i,handler:r,guid:r.guid,selector:n,needsContext:n&&m.expr.match.needsContext.test(n),namespace:f.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,i,f,s)||e.addEventListener&&e.addEventListener(d,s)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),n?p.splice(p.delegateCount++,0,c):p.push(c),m.event.global[d]=!0)},remove:function(e,t,r,i,n){var o,s,a,u,l,c,h,p,d,f,g,v=j.hasData(e)&&j.get(e);if(v&&(u=v.events)){for(l=(t=(t||"").match(F)||[""]).length;l--;)if(d=g=(a=ue.exec(t[l])||[])[1],f=(a[2]||"").split(".").sort(),d){for(h=m.event.special[d]||{},p=u[d=(i?h.delegateType:h.bindType)||d]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;o--;)c=p[o],!n&&g!==c.origType||r&&r.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,h.remove&&h.remove.call(e,c));s&&!p.length&&(h.teardown&&!1!==h.teardown.call(e,f,v.handle)||m.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)m.event.remove(e,d+t[l],r,i,!0);m.isEmptyObject(u)&&j.remove(e,"handle events")}},dispatch:function(e){e=m.event.fix(e);var t,r,i,n,o,s=[],u=a.call(arguments),l=(j.get(this,"events")||{})[e.type]||[],c=m.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(s=m.event.handlers.call(this,e,l),t=0;(n=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=n.elem,r=0;(o=n.handlers[r++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,void 0!==(i=((m.event.special[o.origType]||{}).handle||o.handler).apply(n.elem,u))&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,i,n,o,s=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&(!0!==u.disabled||"click"!==e.type)){for(i=[],r=0;r<a;r++)void 0===i[n=(o=t[r]).selector+" "]&&(i[n]=o.needsContext?m(n,this).index(u)>-1:m.find(n,this,null,[u]).length),i[n]&&i.push(o);i.length&&s.push({elem:u,handlers:i})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var r,i,n,o=t.button;return null==e.pageX&&null!=t.clientX&&(i=(r=e.target.ownerDocument||s).documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[m.expando])return e;var t,r,i,n=e.type,o=e,a=this.fixHooks[n];for(a||(this.fixHooks[n]=a=ae.test(n)?this.mouseHooks:se.test(n)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new m.Event(o),t=i.length;t--;)e[r=i[t]]=o[r];return e.target||(e.target=s),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==he()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===he()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&m.nodeName(this,"input"))return this.click(),!1},_default:function(e){return m.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},m.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},m.Event=function(e,t){if(!(this instanceof m.Event))return new m.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?le:ce):this.type=e,t&&m.extend(this,t),this.timeStamp=e&&e.timeStamp||m.now(),this[m.expando]=!0},m.Event.prototype={constructor:m.Event,isDefaultPrevented:ce,isPropagationStopped:ce,isImmediatePropagationStopped:ce,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=le,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=le,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=le,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){m.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=this,n=e.relatedTarget,o=e.handleObj;return n&&(n===i||m.contains(i,n))||(e.type=o.origType,r=o.handler.apply(this,arguments),e.type=t),r}}})),m.fn.extend({on:function(e,t,r,i){return pe(this,e,t,r,i)},one:function(e,t,r,i){return pe(this,e,t,r,i,1)},off:function(e,t,r){var i,n;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,m(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(n in e)this.off(n,t,e[n]);return this}return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=ce),this.each((function(){m.event.remove(this,e,r,t)}))}});var de=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,fe=/<script|<style|<link/i,ge=/checked\s*(?:[^=]|=\s*.checked.)/i,me=/^true\/(.*)/,ve=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function ye(e,t){return m.nodeName(e,"table")&&m.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function _e(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ee(e){var t=me.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function xe(e,t){var r,i,n,o,s,a,u,l;if(1===t.nodeType){if(j.hasData(e)&&(o=j.access(e),s=j.set(t,o),l=o.events))for(n in delete s.handle,s.events={},l)for(r=0,i=l[n].length;r<i;r++)m.event.add(t,n,l[n][r]);H.hasData(e)&&(a=H.access(e),u=m.extend({},a),H.set(t,u))}}function be(e,t,r,i){t=u.apply([],t);var n,o,s,a,l,c,h=0,p=e.length,d=p-1,g=t[0],v=m.isFunction(g);if(v||p>1&&"string"==typeof g&&!f.checkClone&&ge.test(g))return e.each((function(n){var o=e.eq(n);v&&(t[0]=g.call(this,n,o.html())),be(o,t,r,i)}));if(p&&(o=(n=oe(t,e[0].ownerDocument,!1,e,i)).firstChild,1===n.childNodes.length&&(n=o),o||i)){for(a=(s=m.map(ee(n,"script"),_e)).length;h<p;h++)l=n,h!==d&&(l=m.clone(l,!0,!0),a&&m.merge(s,ee(l,"script"))),r.call(e[h],l,h);if(a)for(c=s[s.length-1].ownerDocument,m.map(s,Ee),h=0;h<a;h++)l=s[h],X.test(l.type||"")&&!j.access(l,"globalEval")&&m.contains(c,l)&&(l.src?m._evalUrl&&m._evalUrl(l.src):m.globalEval(l.textContent.replace(ve,"")))}return e}function Se(e,t,r){for(var i,n=t?m.filter(t,e):e,o=0;null!=(i=n[o]);o++)r||1!==i.nodeType||m.cleanData(ee(i)),i.parentNode&&(r&&m.contains(i.ownerDocument,i)&&te(ee(i,"script")),i.parentNode.removeChild(i));return e}m.extend({htmlPrefilter:function(e){return e.replace(de,"<$1></$2>")},clone:function(e,t,r){var i,n,o,s,a,u,l,c=e.cloneNode(!0),h=m.contains(e.ownerDocument,e);if(!(f.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||m.isXMLDoc(e)))for(s=ee(c),i=0,n=(o=ee(e)).length;i<n;i++)a=o[i],void 0,"input"===(l=(u=s[i]).nodeName.toLowerCase())&&Z.test(a.type)?u.checked=a.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=a.defaultValue);if(t)if(r)for(o=o||ee(e),s=s||ee(c),i=0,n=o.length;i<n;i++)xe(o[i],s[i]);else xe(e,c);return(s=ee(c,"script")).length>0&&te(s,!h&&ee(e,"script")),c},cleanData:function(e){for(var t,r,i,n=m.event.special,o=0;void 0!==(r=e[o]);o++)if(U(r)){if(t=r[j.expando]){if(t.events)for(i in t.events)n[i]?m.event.remove(r,i):m.removeEvent(r,i,t.handle);r[j.expando]=void 0}r[H.expando]&&(r[H.expando]=void 0)}}}),m.fn.extend({domManip:be,detach:function(e){return Se(this,e,!0)},remove:function(e){return Se(this,e)},text:function(e){return M(this,(function(e){return void 0===e?m.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return be(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ye(this,e).appendChild(e)}))},prepend:function(){return be(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ye(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return be(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return be(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(m.cleanData(ee(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return m.clone(this,e,t)}))},html:function(e){return M(this,(function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!fe.test(e)&&!Q[(Y.exec(e)||["",""])[1].toLowerCase()]){e=m.htmlPrefilter(e);try{for(;r<i;r++)1===(t=this[r]||{}).nodeType&&(m.cleanData(ee(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return be(this,arguments,(function(t){var r=this.parentNode;m.inArray(this,e)<0&&(m.cleanData(ee(this)),r&&r.replaceChild(t,this))}),e)}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){m.fn[e]=function(e){for(var r,i=[],n=m(e),o=n.length-1,s=0;s<=o;s++)r=s===o?this:this.clone(!0),m(n[s])[t](r),l.apply(i,r.get());return this.pushStack(i)}}));var we,Te={HTML:"block",BODY:"block"};function Ae(e,t){var r=m(t.createElement(e)).appendTo(t.body),i=m.css(r[0],"display");return r.detach(),i}function Ie(e){var t=s,r=Te[e];return r||("none"!==(r=Ae(e,t))&&r||((t=(we=(we||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),r=Ae(e,t),we.detach()),Te[e]=r),r}var Le=/^margin/,Ce=new RegExp("^("+W+")(?!px)[a-z%]+$","i"),Ne=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=i),t.getComputedStyle(e)},Re=function(e,t,r,i){var n,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];for(o in n=r.apply(e,i||[]),t)e.style[o]=s[o];return n},Pe=s.documentElement;function Oe(e,t,r){var i,n,o,s,a=e.style;return""!==(s=(r=r||Ne(e))?r.getPropertyValue(t)||r[t]:void 0)&&void 0!==s||m.contains(e.ownerDocument,e)||(s=m.style(e,t)),r&&!f.pixelMarginRight()&&Ce.test(s)&&Le.test(t)&&(i=a.width,n=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=r.width,a.width=i,a.minWidth=n,a.maxWidth=o),void 0!==s?s+"":s}function ke(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){var e,t,r,n,o=s.createElement("div"),a=s.createElement("div");function u(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Pe.appendChild(o);var s=i.getComputedStyle(a);e="1%"!==s.top,n="2px"===s.marginLeft,t="4px"===s.width,a.style.marginRight="50%",r="4px"===s.marginRight,Pe.removeChild(o)}a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(a),m.extend(f,{pixelPosition:function(){return u(),e},boxSizingReliable:function(){return null==t&&u(),t},pixelMarginRight:function(){return null==t&&u(),r},reliableMarginLeft:function(){return null==t&&u(),n},reliableMarginRight:function(){var e,t=a.appendChild(s.createElement("div"));return t.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",a.style.width="1px",Pe.appendChild(o),e=!parseFloat(i.getComputedStyle(t).marginRight),Pe.removeChild(o),a.removeChild(t),e}}))}();var Fe=/^(none|table(?!-c[ea]).+)/,De={position:"absolute",visibility:"hidden",display:"block"},Me={letterSpacing:"0",fontWeight:"400"},Ue=["Webkit","O","Moz","ms"],Be=s.createElement("div").style;function je(e){if(e in Be)return e;for(var t=e[0].toUpperCase()+e.slice(1),r=Ue.length;r--;)if((e=Ue[r]+t)in Be)return e}function He(e,t,r){var i=K.exec(t);return i?Math.max(0,i[2]-(r||0))+(i[3]||"px"):t}function Ge(e,t,r,i,n){for(var o=r===(i?"border":"content")?4:"width"===t?1:0,s=0;o<4;o+=2)"margin"===r&&(s+=m.css(e,r+z[o],!0,n)),i?("content"===r&&(s-=m.css(e,"padding"+z[o],!0,n)),"margin"!==r&&(s-=m.css(e,"border"+z[o]+"Width",!0,n))):(s+=m.css(e,"padding"+z[o],!0,n),"padding"!==r&&(s+=m.css(e,"border"+z[o]+"Width",!0,n)));return s}function Ve(e,t,r){var i=!0,n="width"===t?e.offsetWidth:e.offsetHeight,o=Ne(e),s="border-box"===m.css(e,"boxSizing",!1,o);if(n<=0||null==n){if(((n=Oe(e,t,o))<0||null==n)&&(n=e.style[t]),Ce.test(n))return n;i=s&&(f.boxSizingReliable()||n===e.style[t]),n=parseFloat(n)||0}return n+Ge(e,t,r||(s?"border":"content"),i,o)+"px"}function qe(e,t){for(var r,i,n,o=[],s=0,a=e.length;s<a;s++)(i=e[s]).style&&(o[s]=j.get(i,"olddisplay"),r=i.style.display,t?(o[s]||"none"!==r||(i.style.display=""),""===i.style.display&&$(i)&&(o[s]=j.access(i,"olddisplay",Ie(i.nodeName)))):(n=$(i),"none"===r&&n||j.set(i,"olddisplay",n?r:m.css(i,"display"))));for(s=0;s<a;s++)(i=e[s]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[s]||"":"none"));return e}function We(e,t,r,i,n){return new We.prototype.init(e,t,r,i,n)}m.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=Oe(e,"opacity");return""===r?"1":r}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,o,s,a=m.camelCase(t),u=e.style;if(t=m.cssProps[a]||(m.cssProps[a]=je(a)||a),s=m.cssHooks[t]||m.cssHooks[a],void 0===r)return s&&"get"in s&&void 0!==(n=s.get(e,!1,i))?n:u[t];"string"==(o=typeof r)&&(n=K.exec(r))&&n[1]&&(r=J(e,t,n),o="number"),null!=r&&r==r&&("number"===o&&(r+=n&&n[3]||(m.cssNumber[a]?"":"px")),f.clearCloneStyle||""!==r||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(r=s.set(e,r,i))||(u[t]=r))}},css:function(e,t,r,i){var n,o,s,a=m.camelCase(t);return t=m.cssProps[a]||(m.cssProps[a]=je(a)||a),(s=m.cssHooks[t]||m.cssHooks[a])&&"get"in s&&(n=s.get(e,!0,r)),void 0===n&&(n=Oe(e,t,i)),"normal"===n&&t in Me&&(n=Me[t]),""===r||r?(o=parseFloat(n),!0===r||isFinite(o)?o||0:n):n}}),m.each(["height","width"],(function(e,t){m.cssHooks[t]={get:function(e,r,i){if(r)return Fe.test(m.css(e,"display"))&&0===e.offsetWidth?Re(e,De,(function(){return Ve(e,t,i)})):Ve(e,t,i)},set:function(e,r,i){var n,o=i&&Ne(e),s=i&&Ge(e,t,i,"border-box"===m.css(e,"boxSizing",!1,o),o);return s&&(n=K.exec(r))&&"px"!==(n[3]||"px")&&(e.style[t]=r,r=m.css(e,t)),He(0,r,s)}}})),m.cssHooks.marginLeft=ke(f.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Oe(e,"marginLeft"))||e.getBoundingClientRect().left-Re(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),m.cssHooks.marginRight=ke(f.reliableMarginRight,(function(e,t){if(t)return Re(e,{display:"inline-block"},Oe,[e,"marginRight"])})),m.each({margin:"",padding:"",border:"Width"},(function(e,t){m.cssHooks[e+t]={expand:function(r){for(var i=0,n={},o="string"==typeof r?r.split(" "):[r];i<4;i++)n[e+z[i]+t]=o[i]||o[i-2]||o[0];return n}},Le.test(e)||(m.cssHooks[e+t].set=He)})),m.fn.extend({css:function(e,t){return M(this,(function(e,t,r){var i,n,o={},s=0;if(m.isArray(t)){for(i=Ne(e),n=t.length;s<n;s++)o[t[s]]=m.css(e,t[s],!1,i);return o}return void 0!==r?m.style(e,t,r):m.css(e,t)}),e,t,arguments.length>1)},show:function(){return qe(this,!0)},hide:function(){return qe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){$(this)?m(this).show():m(this).hide()}))}}),m.Tween=We,We.prototype={constructor:We,init:function(e,t,r,i,n,o){this.elem=e,this.prop=r,this.easing=n||m.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(m.cssNumber[r]?"":"px")},cur:function(){var e=We.propHooks[this.prop];return e&&e.get?e.get(this):We.propHooks._default.get(this)},run:function(e){var t,r=We.propHooks[this.prop];return this.options.duration?this.pos=t=m.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):We.propHooks._default.set(this),this}},We.prototype.init.prototype=We.prototype,We.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=m.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){m.fx.step[e.prop]?m.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[m.cssProps[e.prop]]&&!m.cssHooks[e.prop]?e.elem[e.prop]=e.now:m.style(e.elem,e.prop,e.now+e.unit)}}},We.propHooks.scrollTop=We.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},m.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},m.fx=We.prototype.init,m.fx.step={};var Ke,ze,$e=/^(?:toggle|show|hide)$/,Je=/queueHooks$/;function Ze(){return i.setTimeout((function(){Ke=void 0})),Ke=m.now()}function Ye(e,t){var r,i=0,n={height:e};for(t=t?1:0;i<4;i+=2-t)n["margin"+(r=z[i])]=n["padding"+r]=e;return t&&(n.opacity=n.width=e),n}function Xe(e,t,r){for(var i,n=(Qe.tweeners[t]||[]).concat(Qe.tweeners["*"]),o=0,s=n.length;o<s;o++)if(i=n[o].call(r,t,e))return i}function Qe(e,t,r){var i,n,o=0,s=Qe.prefilters.length,a=m.Deferred().always((function(){delete u.elem})),u=function(){if(n)return!1;for(var t=Ke||Ze(),r=Math.max(0,l.startTime+l.duration-t),i=1-(r/l.duration||0),o=0,s=l.tweens.length;o<s;o++)l.tweens[o].run(i);return a.notifyWith(e,[l,i,r]),i<1&&s?r:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:m.extend({},t),opts:m.extend(!0,{specialEasing:{},easing:m.easing._default},r),originalProperties:t,originalOptions:r,startTime:Ke||Ze(),duration:r.duration,tweens:[],createTween:function(t,r){var i=m.Tween(e,l.opts,t,r,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var r=0,i=t?l.tweens.length:0;if(n)return this;for(n=!0;r<i;r++)l.tweens[r].run(1);return t?(a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l,t])):a.rejectWith(e,[l,t]),this}}),c=l.props;for(function(e,t){var r,i,n,o,s;for(r in e)if(n=t[i=m.camelCase(r)],o=e[r],m.isArray(o)&&(n=o[1],o=e[r]=o[0]),r!==i&&(e[i]=o,delete e[r]),(s=m.cssHooks[i])&&"expand"in s)for(r in o=s.expand(o),delete e[i],o)r in e||(e[r]=o[r],t[r]=n);else t[i]=n}(c,l.opts.specialEasing);o<s;o++)if(i=Qe.prefilters[o].call(l,e,c,l.opts))return m.isFunction(i.stop)&&(m._queueHooks(l.elem,l.opts.queue).stop=m.proxy(i.stop,i)),i;return m.map(c,Xe,l),m.isFunction(l.opts.start)&&l.opts.start.call(e,l),m.fx.timer(m.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}m.Animation=m.extend(Qe,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);return J(r.elem,e,K.exec(t),r),r}]},tweener:function(e,t){m.isFunction(e)?(t=e,e=["*"]):e=e.match(F);for(var r,i=0,n=e.length;i<n;i++)r=e[i],Qe.tweeners[r]=Qe.tweeners[r]||[],Qe.tweeners[r].unshift(t)},prefilters:[function(e,t,r){var i,n,o,s,a,u,l,c=this,h={},p=e.style,d=e.nodeType&&$(e),f=j.get(e,"fxshow");for(i in r.queue||(null==(a=m._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,c.always((function(){c.always((function(){a.unqueued--,m.queue(e,"fx").length||a.empty.fire()}))}))),1===e.nodeType&&("height"in t||"width"in t)&&(r.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===("none"===(l=m.css(e,"display"))?j.get(e,"olddisplay")||Ie(e.nodeName):l)&&"none"===m.css(e,"float")&&(p.display="inline-block")),r.overflow&&(p.overflow="hidden",c.always((function(){p.overflow=r.overflow[0],p.overflowX=r.overflow[1],p.overflowY=r.overflow[2]}))),t)if(n=t[i],$e.exec(n)){if(delete t[i],o=o||"toggle"===n,n===(d?"hide":"show")){if("show"!==n||!f||void 0===f[i])continue;d=!0}h[i]=f&&f[i]||m.style(e,i)}else l=void 0;if(m.isEmptyObject(h))"inline"===("none"===l?Ie(e.nodeName):l)&&(p.display=l);else for(i in f?"hidden"in f&&(d=f.hidden):f=j.access(e,"fxshow",{}),o&&(f.hidden=!d),d?m(e).show():c.done((function(){m(e).hide()})),c.done((function(){var t;for(t in j.remove(e,"fxshow"),h)m.style(e,t,h[t])})),h)s=Xe(d?f[i]:0,i,c),i in f||(f[i]=s.start,d&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}],prefilter:function(e,t){t?Qe.prefilters.unshift(e):Qe.prefilters.push(e)}}),m.speed=function(e,t,r){var i=e&&"object"==typeof e?m.extend({},e):{complete:r||!r&&t||m.isFunction(e)&&e,duration:e,easing:r&&t||t&&!m.isFunction(t)&&t};return i.duration=m.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in m.fx.speeds?m.fx.speeds[i.duration]:m.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){m.isFunction(i.old)&&i.old.call(this),i.queue&&m.dequeue(this,i.queue)},i},m.fn.extend({fadeTo:function(e,t,r,i){return this.filter($).css("opacity",0).show().end().animate({opacity:t},e,r,i)},animate:function(e,t,r,i){var n=m.isEmptyObject(e),o=m.speed(t,r,i),s=function(){var t=Qe(this,m.extend({},e),o);(n||j.get(this,"finish"))&&t.stop(!0)};return s.finish=s,n||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(e,t,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,n=null!=e&&e+"queueHooks",o=m.timers,s=j.get(this);if(n)s[n]&&s[n].stop&&i(s[n]);else for(n in s)s[n]&&s[n].stop&&Je.test(n)&&i(s[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));!t&&r||m.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,r=j.get(this),i=r[e+"queue"],n=r[e+"queueHooks"],o=m.timers,s=i?i.length:0;for(r.finish=!0,m.queue(this,e,[]),n&&n.stop&&n.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<s;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete r.finish}))}}),m.each(["toggle","show","hide"],(function(e,t){var r=m.fn[t];m.fn[t]=function(e,i,n){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(Ye(t,!0),e,i,n)}})),m.each({slideDown:Ye("show"),slideUp:Ye("hide"),slideToggle:Ye("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){m.fn[e]=function(e,r,i){return this.animate(t,e,r,i)}})),m.timers=[],m.fx.tick=function(){var e,t=0,r=m.timers;for(Ke=m.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||m.fx.stop(),Ke=void 0},m.fx.timer=function(e){m.timers.push(e),e()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){ze||(ze=i.setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){i.clearInterval(ze),ze=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(e,t){return e=m.fx&&m.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,r){var n=i.setTimeout(t,e);r.stop=function(){i.clearTimeout(n)}}))},function(){var e=s.createElement("input"),t=s.createElement("select"),r=t.appendChild(s.createElement("option"));e.type="checkbox",f.checkOn=""!==e.value,f.optSelected=r.selected,t.disabled=!0,f.optDisabled=!r.disabled,(e=s.createElement("input")).value="t",e.type="radio",f.radioValue="t"===e.value}();var et,tt=m.expr.attrHandle;m.fn.extend({attr:function(e,t){return M(this,m.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){m.removeAttr(this,e)}))}}),m.extend({attr:function(e,t,r){var i,n,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?m.prop(e,t,r):(1===o&&m.isXMLDoc(e)||(t=t.toLowerCase(),n=m.attrHooks[t]||(m.expr.match.bool.test(t)?et:void 0)),void 0!==r?null===r?void m.removeAttr(e,t):n&&"set"in n&&void 0!==(i=n.set(e,r,t))?i:(e.setAttribute(t,r+""),r):n&&"get"in n&&null!==(i=n.get(e,t))?i:null==(i=m.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!f.radioValue&&"radio"===t&&m.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}},removeAttr:function(e,t){var r,i,n=0,o=t&&t.match(F);if(o&&1===e.nodeType)for(;r=o[n++];)i=m.propFix[r]||r,m.expr.match.bool.test(r)&&(e[i]=!1),e.removeAttribute(r)}}),et={set:function(e,t,r){return!1===t?m.removeAttr(e,r):e.setAttribute(r,r),r}},m.each(m.expr.match.bool.source.match(/\w+/g),(function(e,t){var r=tt[t]||m.find.attr;tt[t]=function(e,t,i){var n,o;return i||(o=tt[t],tt[t]=n,n=null!=r(e,t,i)?t.toLowerCase():null,tt[t]=o),n}}));var rt=/^(?:input|select|textarea|button)$/i,it=/^(?:a|area)$/i;m.fn.extend({prop:function(e,t){return M(this,m.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[m.propFix[e]||e]}))}}),m.extend({prop:function(e,t,r){var i,n,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&m.isXMLDoc(e)||(t=m.propFix[t]||t,n=m.propHooks[t]),void 0!==r?n&&"set"in n&&void 0!==(i=n.set(e,r,t))?i:e[t]=r:n&&"get"in n&&null!==(i=n.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=m.find.attr(e,"tabindex");return t?parseInt(t,10):rt.test(e.nodeName)||it.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||(m.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){m.propFix[this.toLowerCase()]=this}));var nt=/[\t\r\n\f]/g;function ot(e){return e.getAttribute&&e.getAttribute("class")||""}m.fn.extend({addClass:function(e){var t,r,i,n,o,s,a,u=0;if(m.isFunction(e))return this.each((function(t){m(this).addClass(e.call(this,t,ot(this)))}));if("string"==typeof e&&e)for(t=e.match(F)||[];r=this[u++];)if(n=ot(r),i=1===r.nodeType&&(" "+n+" ").replace(nt," ")){for(s=0;o=t[s++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");n!==(a=m.trim(i))&&r.setAttribute("class",a)}return this},removeClass:function(e){var t,r,i,n,o,s,a,u=0;if(m.isFunction(e))return this.each((function(t){m(this).removeClass(e.call(this,t,ot(this)))}));if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(F)||[];r=this[u++];)if(n=ot(r),i=1===r.nodeType&&(" "+n+" ").replace(nt," ")){for(s=0;o=t[s++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");n!==(a=m.trim(i))&&r.setAttribute("class",a)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):m.isFunction(e)?this.each((function(r){m(this).toggleClass(e.call(this,r,ot(this),t),t)})):this.each((function(){var t,i,n,o;if("string"===r)for(i=0,n=m(this),o=e.match(F)||[];t=o[i++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else void 0!==e&&"boolean"!==r||((t=ot(this))&&j.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":j.get(this,"__className__")||""))}))},hasClass:function(e){var t,r,i=0;for(t=" "+e+" ";r=this[i++];)if(1===r.nodeType&&(" "+ot(r)+" ").replace(nt," ").indexOf(t)>-1)return!0;return!1}});var st=/\r/g,at=/[\x20\t\r\n\f]+/g;m.fn.extend({val:function(e){var t,r,i,n=this[0];return arguments.length?(i=m.isFunction(e),this.each((function(r){var n;1===this.nodeType&&(null==(n=i?e.call(this,r,m(this).val()):e)?n="":"number"==typeof n?n+="":m.isArray(n)&&(n=m.map(n,(function(e){return null==e?"":e+""}))),(t=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,n,"value")||(this.value=n))}))):n?(t=m.valHooks[n.type]||m.valHooks[n.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(n,"value"))?r:"string"==typeof(r=n.value)?r.replace(st,""):null==r?"":r:void 0}}),m.extend({valHooks:{option:{get:function(e){var t=m.find.attr(e,"value");return null!=t?t:m.trim(m.text(e)).replace(at," ")}},select:{get:function(e){for(var t,r,i=e.options,n=e.selectedIndex,o="select-one"===e.type||n<0,s=o?null:[],a=o?n+1:i.length,u=n<0?a:o?n:0;u<a;u++)if(((r=i[u]).selected||u===n)&&(f.optDisabled?!r.disabled:null===r.getAttribute("disabled"))&&(!r.parentNode.disabled||!m.nodeName(r.parentNode,"optgroup"))){if(t=m(r).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var r,i,n=e.options,o=m.makeArray(t),s=n.length;s--;)((i=n[s]).selected=m.inArray(m.valHooks.option.get(i),o)>-1)&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),m.each(["radio","checkbox"],(function(){m.valHooks[this]={set:function(e,t){if(m.isArray(t))return e.checked=m.inArray(m(e).val(),t)>-1}},f.checkOn||(m.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var ut=/^(?:focusinfocus|focusoutblur)$/;m.extend(m.event,{trigger:function(e,t,r,n){var o,a,u,l,c,h,p,f=[r||s],g=d.call(e,"type")?e.type:e,v=d.call(e,"namespace")?e.namespace.split("."):[];if(a=u=r=r||s,3!==r.nodeType&&8!==r.nodeType&&!ut.test(g+m.event.triggered)&&(g.indexOf(".")>-1&&(v=g.split("."),g=v.shift(),v.sort()),c=g.indexOf(":")<0&&"on"+g,(e=e[m.expando]?e:new m.Event(g,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:m.makeArray(t,[e]),p=m.event.special[g]||{},n||!p.trigger||!1!==p.trigger.apply(r,t))){if(!n&&!p.noBubble&&!m.isWindow(r)){for(l=p.delegateType||g,ut.test(l+g)||(a=a.parentNode);a;a=a.parentNode)f.push(a),u=a;u===(r.ownerDocument||s)&&f.push(u.defaultView||u.parentWindow||i)}for(o=0;(a=f[o++])&&!e.isPropagationStopped();)e.type=o>1?l:p.bindType||g,(h=(j.get(a,"events")||{})[e.type]&&j.get(a,"handle"))&&h.apply(a,t),(h=c&&a[c])&&h.apply&&U(a)&&(e.result=h.apply(a,t),!1===e.result&&e.preventDefault());return e.type=g,n||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(f.pop(),t)||!U(r)||c&&m.isFunction(r[g])&&!m.isWindow(r)&&((u=r[c])&&(r[c]=null),m.event.triggered=g,r[g](),m.event.triggered=void 0,u&&(r[c]=u)),e.result}},simulate:function(e,t,r){var i=m.extend(new m.Event,r,{type:e,isSimulated:!0});m.event.trigger(i,null,t)}}),m.fn.extend({trigger:function(e,t){return this.each((function(){m.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var r=this[0];if(r)return m.event.trigger(e,t,r,!0)}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(e,t){m.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}})),m.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),f.focusin="onfocusin"in i,f.focusin||m.each({focus:"focusin",blur:"focusout"},(function(e,t){var r=function(e){m.event.simulate(t,e.target,m.event.fix(e))};m.event.special[t]={setup:function(){var i=this.ownerDocument||this,n=j.access(i,t);n||i.addEventListener(e,r,!0),j.access(i,t,(n||0)+1)},teardown:function(){var i=this.ownerDocument||this,n=j.access(i,t)-1;n?j.access(i,t,n):(i.removeEventListener(e,r,!0),j.remove(i,t))}}}));var lt=i.location,ct=m.now(),ht=/\?/;m.parseJSON=function(e){return JSON.parse(e+"")},m.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new i.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+e),t};var pt=/#.*$/,dt=/([?&])_=[^&]*/,ft=/^(.*?):[ \t]*([^\r\n]*)$/gm,gt=/^(?:GET|HEAD)$/,mt=/^\/\//,vt={},yt={},_t="*/".concat("*"),Et=s.createElement("a");function xt(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var i,n=0,o=t.toLowerCase().match(F)||[];if(m.isFunction(r))for(;i=o[n++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(r)):(e[i]=e[i]||[]).push(r)}}function bt(e,t,r,i){var n={},o=e===yt;function s(a){var u;return n[a]=!0,m.each(e[a]||[],(function(e,a){var l=a(t,r,i);return"string"!=typeof l||o||n[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),s(l),!1)})),u}return s(t.dataTypes[0])||!n["*"]&&s("*")}function St(e,t){var r,i,n=m.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((n[r]?e:i||(i={}))[r]=t[r]);return i&&m.extend(!0,e,i),e}Et.href=lt.href,m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:lt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(lt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":_t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?St(St(e,m.ajaxSettings),t):St(m.ajaxSettings,e)},ajaxPrefilter:xt(vt),ajaxTransport:xt(yt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,n,o,a,u,l,c,h,p=m.ajaxSetup({},t),d=p.context||p,f=p.context&&(d.nodeType||d.jquery)?m(d):m.event,g=m.Deferred(),v=m.Callbacks("once memory"),y=p.statusCode||{},_={},E={},x=0,b="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!a)for(a={};t=ft.exec(o);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?o:null},setRequestHeader:function(e,t){var r=e.toLowerCase();return x||(e=E[r]=E[r]||e,_[e]=t),this},overrideMimeType:function(e){return x||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(x<2)for(t in e)y[t]=[y[t],e[t]];else S.always(e[S.status]);return this},abort:function(e){var t=e||b;return r&&r.abort(t),w(0,t),this}};if(g.promise(S).complete=v.add,S.success=S.done,S.error=S.fail,p.url=((e||p.url||lt.href)+"").replace(pt,"").replace(mt,lt.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=m.trim(p.dataType||"*").toLowerCase().match(F)||[""],null==p.crossDomain){l=s.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=Et.protocol+"//"+Et.host!=l.protocol+"//"+l.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=m.param(p.data,p.traditional)),bt(vt,p,t,S),2===x)return S;for(h in(c=m.event&&p.global)&&0==m.active++&&m.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!gt.test(p.type),n=p.url,p.hasContent||(p.data&&(n=p.url+=(ht.test(n)?"&":"?")+p.data,delete p.data),!1===p.cache&&(p.url=dt.test(n)?n.replace(dt,"$1_="+ct++):n+(ht.test(n)?"&":"?")+"_="+ct++)),p.ifModified&&(m.lastModified[n]&&S.setRequestHeader("If-Modified-Since",m.lastModified[n]),m.etag[n]&&S.setRequestHeader("If-None-Match",m.etag[n])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&S.setRequestHeader("Content-Type",p.contentType),S.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+_t+"; q=0.01":""):p.accepts["*"]),p.headers)S.setRequestHeader(h,p.headers[h]);if(p.beforeSend&&(!1===p.beforeSend.call(d,S,p)||2===x))return S.abort();for(h in b="abort",{success:1,error:1,complete:1})S[h](p[h]);if(r=bt(yt,p,t,S)){if(S.readyState=1,c&&f.trigger("ajaxSend",[S,p]),2===x)return S;p.async&&p.timeout>0&&(u=i.setTimeout((function(){S.abort("timeout")}),p.timeout));try{x=1,r.send(_,w)}catch(e){if(!(x<2))throw e;w(-1,e)}}else w(-1,"No Transport");function w(e,t,s,a){var l,h,_,E,b,w=t;2!==x&&(x=2,u&&i.clearTimeout(u),r=void 0,o=a||"",S.readyState=e>0?4:0,l=e>=200&&e<300||304===e,s&&(E=function(e,t,r){for(var i,n,o,s,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(n in a)if(a[n]&&a[n].test(i)){u.unshift(n);break}if(u[0]in r)o=u[0];else{for(n in r){if(!u[0]||e.converters[n+" "+u[0]]){o=n;break}s||(s=n)}o=o||s}if(o)return o!==u[0]&&u.unshift(o),r[o]}(p,S,s)),E=function(e,t,r,i){var n,o,s,a,u,l={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(r[e.responseFields[o]]=t),!u&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(s=l[u+" "+o]||l["* "+o]))for(n in l)if((a=n.split(" "))[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){!0===s?s=l[n]:!0!==l[n]&&(o=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(p,E,S,l),l?(p.ifModified&&((b=S.getResponseHeader("Last-Modified"))&&(m.lastModified[n]=b),(b=S.getResponseHeader("etag"))&&(m.etag[n]=b)),204===e||"HEAD"===p.type?w="nocontent":304===e?w="notmodified":(w=E.state,h=E.data,l=!(_=E.error))):(_=w,!e&&w||(w="error",e<0&&(e=0))),S.status=e,S.statusText=(t||w)+"",l?g.resolveWith(d,[h,w,S]):g.rejectWith(d,[S,w,_]),S.statusCode(y),y=void 0,c&&f.trigger(l?"ajaxSuccess":"ajaxError",[S,p,l?h:_]),v.fireWith(d,[S,w]),c&&(f.trigger("ajaxComplete",[S,p]),--m.active||m.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,r){return m.get(e,t,r,"json")},getScript:function(e,t){return m.get(e,void 0,t,"script")}}),m.each(["get","post"],(function(e,t){m[t]=function(e,r,i,n){return m.isFunction(r)&&(n=n||i,i=r,r=void 0),m.ajax(m.extend({url:e,type:t,dataType:n,data:r,success:i},m.isPlainObject(e)&&e))}})),m._evalUrl=function(e){return m.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},m.fn.extend({wrapAll:function(e){var t;return m.isFunction(e)?this.each((function(t){m(this).wrapAll(e.call(this,t))})):(this[0]&&(t=m(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this)},wrapInner:function(e){return m.isFunction(e)?this.each((function(t){m(this).wrapInner(e.call(this,t))})):this.each((function(){var t=m(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)}))},wrap:function(e){var t=m.isFunction(e);return this.each((function(r){m(this).wrapAll(t?e.call(this,r):e)}))},unwrap:function(){return this.parent().each((function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)})).end()}}),m.expr.filters.hidden=function(e){return!m.expr.filters.visible(e)},m.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var wt=/%20/g,Tt=/\[\]$/,At=/\r?\n/g,It=/^(?:submit|button|image|reset|file)$/i,Lt=/^(?:input|select|textarea|keygen)/i;function Ct(e,t,r,i){var n;if(m.isArray(t))m.each(t,(function(t,n){r||Tt.test(e)?i(e,n):Ct(e+"["+("object"==typeof n&&null!=n?t:"")+"]",n,r,i)}));else if(r||"object"!==m.type(t))i(e,t);else for(n in t)Ct(e+"["+n+"]",t[n],r,i)}m.param=function(e,t){var r,i=[],n=function(e,t){t=m.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(e)||e.jquery&&!m.isPlainObject(e))m.each(e,(function(){n(this.name,this.value)}));else for(r in e)Ct(r,e[r],t,n);return i.join("&").replace(wt,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=m.prop(this,"elements");return e?m.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!m(this).is(":disabled")&&Lt.test(this.nodeName)&&!It.test(e)&&(this.checked||!Z.test(e))})).map((function(e,t){var r=m(this).val();return null==r?null:m.isArray(r)?m.map(r,(function(e){return{name:t.name,value:e.replace(At,"\r\n")}})):{name:t.name,value:r.replace(At,"\r\n")}})).get()}}),m.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(e){}};var Nt={0:200,1223:204},Rt=m.ajaxSettings.xhr();f.cors=!!Rt&&"withCredentials"in Rt,f.ajax=Rt=!!Rt,m.ajaxTransport((function(e){var t,r;if(f.cors||Rt&&!e.crossDomain)return{send:function(n,o){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];for(s in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)a.setRequestHeader(s,n[s]);t=function(e){return function(){t&&(t=r=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Nt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),r=a.onerror=t("error"),void 0!==a.onabort?a.onabort=r:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout((function(){t&&r()}))},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return m.globalEval(e),e}}}),m.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),m.ajaxTransport("script",(function(e){var t,r;if(e.crossDomain)return{send:function(i,n){t=m("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&n("error"===e.type?404:200,e.type)}),s.head.appendChild(t[0])},abort:function(){r&&r()}}}));var Pt=[],Ot=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Pt.pop()||m.expando+"_"+ct++;return this[e]=!0,e}}),m.ajaxPrefilter("json jsonp",(function(e,t,r){var n,o,s,a=!1!==e.jsonp&&(Ot.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ot.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=m.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ot,"$1"+n):!1!==e.jsonp&&(e.url+=(ht.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return s||m.error(n+" was not called"),s[0]},e.dataTypes[0]="json",o=i[n],i[n]=function(){s=arguments},r.always((function(){void 0===o?m(i).removeProp(n):i[n]=o,e[n]&&(e.jsonpCallback=t.jsonpCallback,Pt.push(n)),s&&m.isFunction(o)&&o(s[0]),s=o=void 0})),"script"})),m.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||s;var i=A.exec(e),n=!r&&[];return i?[t.createElement(i[1])]:(i=oe([e],t,n),n&&n.length&&m(n).remove(),m.merge([],i.childNodes))};var kt=m.fn.load;function Ft(e){return m.isWindow(e)?e:9===e.nodeType&&e.defaultView}m.fn.load=function(e,t,r){if("string"!=typeof e&&kt)return kt.apply(this,arguments);var i,n,o,s=this,a=e.indexOf(" ");return a>-1&&(i=m.trim(e.slice(a)),e=e.slice(0,a)),m.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(n="POST"),s.length>0&&m.ajax({url:e,type:n||"GET",dataType:"html",data:t}).done((function(e){o=arguments,s.html(i?m("<div>").append(m.parseHTML(e)).find(i):e)})).always(r&&function(e,t){s.each((function(){r.apply(this,o||[e.responseText,t,e])}))}),this},m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){m.fn[t]=function(e){return this.on(t,e)}})),m.expr.filters.animated=function(e){return m.grep(m.timers,(function(t){return e===t.elem})).length},m.offset={setOffset:function(e,t,r){var i,n,o,s,a,u,l=m.css(e,"position"),c=m(e),h={};"static"===l&&(e.style.position="relative"),a=c.offset(),o=m.css(e,"top"),u=m.css(e,"left"),("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1?(s=(i=c.position()).top,n=i.left):(s=parseFloat(o)||0,n=parseFloat(u)||0),m.isFunction(t)&&(t=t.call(e,r,m.extend({},a))),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+n),"using"in t?t.using.call(e,h):c.css(h)}},m.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){m.offset.setOffset(this,e,t)}));var t,r,i=this[0],n={top:0,left:0},o=i&&i.ownerDocument;return o?(t=o.documentElement,m.contains(t,i)?(n=i.getBoundingClientRect(),r=Ft(o),{top:n.top+r.pageYOffset-t.clientTop,left:n.left+r.pageXOffset-t.clientLeft}):n):void 0},position:function(){if(this[0]){var e,t,r=this[0],i={top:0,left:0};return"fixed"===m.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),m.nodeName(e[0],"html")||(i=e.offset()),i.top+=m.css(e[0],"borderTopWidth",!0),i.left+=m.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-m.css(r,"marginTop",!0),left:t.left-i.left-m.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===m.css(e,"position");)e=e.offsetParent;return e||Pe}))}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var r="pageYOffset"===t;m.fn[e]=function(i){return M(this,(function(e,i,n){var o=Ft(e);if(void 0===n)return o?o[t]:e[i];o?o.scrollTo(r?o.pageXOffset:n,r?n:o.pageYOffset):e[i]=n}),e,i,arguments.length)}})),m.each(["top","left"],(function(e,t){m.cssHooks[t]=ke(f.pixelPosition,(function(e,r){if(r)return r=Oe(e,t),Ce.test(r)?m(e).position()[t]+"px":r}))})),m.each({Height:"height",Width:"width"},(function(e,t){m.each({padding:"inner"+e,content:t,"":"outer"+e},(function(r,i){m.fn[i]=function(i,n){var o=arguments.length&&(r||"boolean"!=typeof i),s=r||(!0===i||!0===n?"margin":"border");return M(this,(function(t,r,i){var n;return m.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(n=t.documentElement,Math.max(t.body["scroll"+e],n["scroll"+e],t.body["offset"+e],n["offset"+e],n["client"+e])):void 0===i?m.css(t,r,s):m.style(t,r,i,s)}),t,o?i:void 0,o,null)}}))})),m.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,i){return this.on(t,e,r,i)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)},size:function(){return this.length}}),m.fn.andSelf=m.fn.addBack,void 0===(r=function(){return m}.apply(t,[]))||(e.exports=r);var Dt=i.jQuery,Mt=i.$;return m.noConflict=function(e){return i.$===m&&(i.$=Mt),e&&i.jQuery===m&&(i.jQuery=Dt),m},n||(i.jQuery=i.$=m),m},"object"==typeof e.exports?e.exports=i.document?n(i,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(i)},5587:function(e,t){!function(e){"use strict";function t(e){var t,r,i,n;for(r=1,i=arguments.length;r<i;r++)for(t in n=arguments[r])e[t]=n[t];return e}var r=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function i(e,t){var r=Array.prototype.slice;if(e.bind)return e.bind.apply(e,r.call(arguments,1));var i=r.call(arguments,2);return function(){return e.apply(t,i.length?i.concat(r.call(arguments)):arguments)}}var n=0;function o(e){return"_leaflet_id"in e||(e._leaflet_id=++n),e._leaflet_id}function s(e,t,r){var i,n,o,s;return s=function(){i=!1,n&&(o.apply(r,n),n=!1)},o=function(){i?n=arguments:(e.apply(r,arguments),setTimeout(s,t),i=!0)},o}function a(e,t,r){var i=t[1],n=t[0],o=i-n;return e===i&&r?e:((e-n)%o+o)%o+n}function u(){return!1}function l(e,t){if(!1===t)return e;var r=Math.pow(10,void 0===t?6:t);return Math.round(e*r)/r}function c(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function h(e){return c(e).split(/\s+/)}function p(e,t){for(var i in Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?r(e.options):{}),t)e.options[i]=t[i];return e.options}function d(e,t,r){var i=[];for(var n in e)i.push(encodeURIComponent(r?n.toUpperCase():n)+"="+encodeURIComponent(e[n]));return(t&&-1!==t.indexOf("?")?"&":"?")+i.join("&")}var f=/\{ *([\w_ -]+) *\}/g;function g(e,t){return e.replace(f,(function(e,r){var i=t[r];if(void 0===i)throw new Error("No value provided for variable "+e);return"function"==typeof i&&(i=i(t)),i}))}var m=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function v(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function _(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var E=0;function x(e){var t=+new Date,r=Math.max(0,16-(t-E));return E=t+r,window.setTimeout(e,r)}var b=window.requestAnimationFrame||_("RequestAnimationFrame")||x,S=window.cancelAnimationFrame||_("CancelAnimationFrame")||_("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function w(e,t,r){if(!r||b!==x)return b.call(window,i(e,t));e.call(t)}function T(e){e&&S.call(window,e)}var A={__proto__:null,extend:t,create:r,bind:i,get lastId(){return n},stamp:o,throttle:s,wrapNum:a,falseFn:u,formatNum:l,trim:c,splitWords:h,setOptions:p,getParamString:d,template:g,isArray:m,indexOf:v,emptyImageUrl:y,requestFn:b,cancelFn:S,requestAnimFrame:w,cancelAnimFrame:T};function I(){}I.extend=function(e){var i=function(){p(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=i.__super__=this.prototype,o=r(n);for(var s in o.constructor=i,i.prototype=o,this)Object.prototype.hasOwnProperty.call(this,s)&&"prototype"!==s&&"__super__"!==s&&(i[s]=this[s]);return e.statics&&t(i,e.statics),e.includes&&(function(e){if("undefined"!=typeof L&&L&&L.Mixin){e=m(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(e.includes),t.apply(null,[o].concat(e.includes))),t(o,e),delete o.statics,delete o.includes,o.options&&(o.options=n.options?r(n.options):{},t(o.options,e.options)),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=o._initHooks.length;e<t;e++)o._initHooks[e].call(this)}},i},I.include=function(e){var r=this.prototype.options;return t(this.prototype,e),e.options&&(this.prototype.options=r,this.mergeOptions(e.options)),this},I.mergeOptions=function(e){return t(this.prototype.options,e),this},I.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),r="function"==typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(r),this};var C={on:function(e,t,r){if("object"==typeof e)for(var i in e)this._on(i,e[i],t);else for(var n=0,o=(e=h(e)).length;n<o;n++)this._on(e[n],t,r);return this},off:function(e,t,r){if(arguments.length)if("object"==typeof e)for(var i in e)this._off(i,e[i],t);else{e=h(e);for(var n=1===arguments.length,o=0,s=e.length;o<s;o++)n?this._off(e[o]):this._off(e[o],t,r)}else delete this._events;return this},_on:function(e,t,r,i){if("function"==typeof t){if(!1===this._listens(e,t,r)){r===this&&(r=void 0);var n={fn:t,ctx:r};i&&(n.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(n)}}else console.warn("wrong listener type: "+typeof t)},_off:function(e,t,r){var i,n,o;if(this._events&&(i=this._events[e]))if(1!==arguments.length)if("function"==typeof t){var s=this._listens(e,t,r);if(!1!==s){var a=i[s];this._firingCount&&(a.fn=u,this._events[e]=i=i.slice()),i.splice(s,1)}}else console.warn("wrong listener type: "+typeof t);else{if(this._firingCount)for(n=0,o=i.length;n<o;n++)i[n].fn=u;delete this._events[e]}},fire:function(e,r,i){if(!this.listens(e,i))return this;var n=t({},r,{type:e,target:this,sourceTarget:r&&r.sourceTarget||this});if(this._events){var o=this._events[e];if(o){this._firingCount=this._firingCount+1||1;for(var s=0,a=o.length;s<a;s++){var u=o[s],l=u.fn;u.once&&this.off(e,l,u.ctx),l.call(u.ctx||this,n)}this._firingCount--}}return i&&this._propagateEvent(n),this},listens:function(e,t,r,i){"string"!=typeof e&&console.warn('"string" type argument expected');var n=t;"function"!=typeof t&&(i=!!t,n=void 0,r=void 0);var o=this._events&&this._events[e];if(o&&o.length&&!1!==this._listens(e,n,r))return!0;if(i)for(var s in this._eventParents)if(this._eventParents[s].listens(e,t,r,i))return!0;return!1},_listens:function(e,t,r){if(!this._events)return!1;var i=this._events[e]||[];if(!t)return!!i.length;r===this&&(r=void 0);for(var n=0,o=i.length;n<o;n++)if(i[n].fn===t&&i[n].ctx===r)return n;return!1},once:function(e,t,r){if("object"==typeof e)for(var i in e)this._on(i,e[i],t,!0);else for(var n=0,o=(e=h(e)).length;n<o;n++)this._on(e[n],t,r,!0);return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[o(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[o(e)],this},_propagateEvent:function(e){for(var r in this._eventParents)this._eventParents[r].fire(e.type,t({layer:e.target,propagatedFrom:e.target},e),!0)}};C.addEventListener=C.on,C.removeEventListener=C.clearAllEventListeners=C.off,C.addOneTimeEventListener=C.once,C.fireEvent=C.fire,C.hasEventListeners=C.listens;var N=I.extend(C);function R(e,t,r){this.x=r?Math.round(e):e,this.y=r?Math.round(t):t}var P=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};function O(e,t,r){return e instanceof R?e:m(e)?new R(e[0],e[1]):null==e?e:"object"==typeof e&&"x"in e&&"y"in e?new R(e.x,e.y):new R(e,t,r)}function k(e,t){if(e)for(var r=t?[e,t]:e,i=0,n=r.length;i<n;i++)this.extend(r[i])}function F(e,t){return!e||e instanceof k?e:new k(e,t)}function D(e,t){if(e)for(var r=t?[e,t]:e,i=0,n=r.length;i<n;i++)this.extend(r[i])}function M(e,t){return e instanceof D?e:new D(e,t)}function U(e,t,r){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==r&&(this.alt=+r)}function B(e,t,r){return e instanceof U?e:m(e)&&"object"!=typeof e[0]?3===e.length?new U(e[0],e[1],e[2]):2===e.length?new U(e[0],e[1]):null:null==e?e:"object"==typeof e&&"lat"in e?new U(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new U(e,t,r)}R.prototype={clone:function(){return new R(this.x,this.y)},add:function(e){return this.clone()._add(O(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(O(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new R(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new R(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=P(this.x),this.y=P(this.y),this},distanceTo:function(e){var t=(e=O(e)).x-this.x,r=e.y-this.y;return Math.sqrt(t*t+r*r)},equals:function(e){return(e=O(e)).x===this.x&&e.y===this.y},contains:function(e){return e=O(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+l(this.x)+", "+l(this.y)+")"}},k.prototype={extend:function(e){var t,r;if(!e)return this;if(e instanceof R||"number"==typeof e[0]||"x"in e)t=r=O(e);else if(t=(e=F(e)).min,r=e.max,!t||!r)return this;return this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(r.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(r.y,this.max.y)):(this.min=t.clone(),this.max=r.clone()),this},getCenter:function(e){return O((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return O(this.min.x,this.max.y)},getTopRight:function(){return O(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,r;return(e="number"==typeof e[0]||e instanceof R?O(e):F(e))instanceof k?(t=e.min,r=e.max):t=r=e,t.x>=this.min.x&&r.x<=this.max.x&&t.y>=this.min.y&&r.y<=this.max.y},intersects:function(e){e=F(e);var t=this.min,r=this.max,i=e.min,n=e.max,o=n.x>=t.x&&i.x<=r.x,s=n.y>=t.y&&i.y<=r.y;return o&&s},overlaps:function(e){e=F(e);var t=this.min,r=this.max,i=e.min,n=e.max,o=n.x>t.x&&i.x<r.x,s=n.y>t.y&&i.y<r.y;return o&&s},isValid:function(){return!(!this.min||!this.max)},pad:function(e){var t=this.min,r=this.max,i=Math.abs(t.x-r.x)*e,n=Math.abs(t.y-r.y)*e;return F(O(t.x-i,t.y-n),O(r.x+i,r.y+n))},equals:function(e){return!!e&&(e=F(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight()))}},D.prototype={extend:function(e){var t,r,i=this._southWest,n=this._northEast;if(e instanceof U)t=e,r=e;else{if(!(e instanceof D))return e?this.extend(B(e)||M(e)):this;if(t=e._southWest,r=e._northEast,!t||!r)return this}return i||n?(i.lat=Math.min(t.lat,i.lat),i.lng=Math.min(t.lng,i.lng),n.lat=Math.max(r.lat,n.lat),n.lng=Math.max(r.lng,n.lng)):(this._southWest=new U(t.lat,t.lng),this._northEast=new U(r.lat,r.lng)),this},pad:function(e){var t=this._southWest,r=this._northEast,i=Math.abs(t.lat-r.lat)*e,n=Math.abs(t.lng-r.lng)*e;return new D(new U(t.lat-i,t.lng-n),new U(r.lat+i,r.lng+n))},getCenter:function(){return new U((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new U(this.getNorth(),this.getWest())},getSouthEast:function(){return new U(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"==typeof e[0]||e instanceof U||"lat"in e?B(e):M(e);var t,r,i=this._southWest,n=this._northEast;return e instanceof D?(t=e.getSouthWest(),r=e.getNorthEast()):t=r=e,t.lat>=i.lat&&r.lat<=n.lat&&t.lng>=i.lng&&r.lng<=n.lng},intersects:function(e){e=M(e);var t=this._southWest,r=this._northEast,i=e.getSouthWest(),n=e.getNorthEast(),o=n.lat>=t.lat&&i.lat<=r.lat,s=n.lng>=t.lng&&i.lng<=r.lng;return o&&s},overlaps:function(e){e=M(e);var t=this._southWest,r=this._northEast,i=e.getSouthWest(),n=e.getNorthEast(),o=n.lat>t.lat&&i.lat<r.lat,s=n.lng>t.lng&&i.lng<r.lng;return o&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=M(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!(!this._southWest||!this._northEast)}},U.prototype={equals:function(e,t){return!!e&&(e=B(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(void 0===t?1e-9:t))},toString:function(e){return"LatLng("+l(this.lat,e)+", "+l(this.lng,e)+")"},distanceTo:function(e){return G.distance(this,B(e))},wrap:function(){return G.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,r=t/Math.cos(Math.PI/180*this.lat);return M([this.lat-t,this.lng-r],[this.lat+t,this.lng+r])},clone:function(){return new U(this.lat,this.lng,this.alt)}};var j,H={latLngToPoint:function(e,t){var r=this.projection.project(e),i=this.scale(t);return this.transformation._transform(r,i)},pointToLatLng:function(e,t){var r=this.scale(t),i=this.transformation.untransform(e,r);return this.projection.unproject(i)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,r=this.scale(e);return new k(this.transformation.transform(t.min,r),this.transformation.transform(t.max,r))},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?a(e.lng,this.wrapLng,!0):e.lng;return new U(this.wrapLat?a(e.lat,this.wrapLat,!0):e.lat,t,e.alt)},wrapLatLngBounds:function(e){var t=e.getCenter(),r=this.wrapLatLng(t),i=t.lat-r.lat,n=t.lng-r.lng;if(0===i&&0===n)return e;var o=e.getSouthWest(),s=e.getNorthEast();return new D(new U(o.lat-i,o.lng-n),new U(s.lat-i,s.lng-n))}},G=t({},H,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var r=Math.PI/180,i=e.lat*r,n=t.lat*r,o=Math.sin((t.lat-e.lat)*r/2),s=Math.sin((t.lng-e.lng)*r/2),a=o*o+Math.cos(i)*Math.cos(n)*s*s,u=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*u}}),V=6378137,q={R:V,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,r=this.MAX_LATITUDE,i=Math.max(Math.min(r,e.lat),-r),n=Math.sin(i*t);return new R(this.R*e.lng*t,this.R*Math.log((1+n)/(1-n))/2)},unproject:function(e){var t=180/Math.PI;return new U((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:(j=V*Math.PI,new k([-j,-j],[j,j]))};function W(e,t,r,i){if(m(e))return this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3]);this._a=e,this._b=t,this._c=r,this._d=i}function K(e,t,r,i){return new W(e,t,r,i)}W.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new R((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var z=t({},G,{code:"EPSG:3857",projection:q,transformation:function(){var e=.5/(Math.PI*q.R);return K(e,.5,-e,.5)}()}),$=t({},z,{code:"EPSG:900913"});function J(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Z(e,t){var r,i,n,o,s,a,u="";for(r=0,n=e.length;r<n;r++){for(i=0,o=(s=e[r]).length;i<o;i++)u+=(i?"L":"M")+(a=s[i]).x+" "+a.y;u+=t?ke.svg?"z":"x":""}return u||"M0 0"}var Y,X=document.documentElement.style,Q="ActiveXObject"in window,ee=Q&&!document.addEventListener,te="msLaunchUri"in navigator&&!("documentMode"in document),re=Oe("webkit"),ie=Oe("android"),ne=Oe("android 2")||Oe("android 3"),oe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),se=ie&&Oe("Google")&&oe<537&&!("AudioNode"in window),ae=!!window.opera,ue=!te&&Oe("chrome"),le=Oe("gecko")&&!re&&!ae&&!Q,ce=!ue&&Oe("safari"),he=Oe("phantom"),pe="OTransition"in X,de=0===navigator.platform.indexOf("Win"),fe=Q&&"transition"in X,ge="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ne,me="MozPerspective"in X,ve=!window.L_DISABLE_3D&&(fe||ge||me)&&!pe&&!he,ye="undefined"!=typeof orientation||Oe("mobile"),_e=ye&&re,Ee=ye&&ge,xe=!window.PointerEvent&&window.MSPointerEvent,be=!(!window.PointerEvent&&!xe),Se="ontouchstart"in window||!!window.TouchEvent,we=!window.L_NO_TOUCH&&(Se||be),Te=ye&&ae,Ae=ye&&le,Ie=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Le=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",u,t),window.removeEventListener("testPassiveEventSupport",u,t)}catch(e){}return e}(),Ce=!!document.createElement("canvas").getContext,Ne=!(!document.createElementNS||!J("svg").createSVGRect),Re=!!Ne&&((Y=document.createElement("div")).innerHTML="<svg/>","http://www.w3.org/2000/svg"===(Y.firstChild&&Y.firstChild.namespaceURI)),Pe=!Ne&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"==typeof t.adj}catch(e){return!1}}();function Oe(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var ke={ie:Q,ielt9:ee,edge:te,webkit:re,android:ie,android23:ne,androidStock:se,opera:ae,chrome:ue,gecko:le,safari:ce,phantom:he,opera12:pe,win:de,ie3d:fe,webkit3d:ge,gecko3d:me,any3d:ve,mobile:ye,mobileWebkit:_e,mobileWebkit3d:Ee,msPointer:xe,pointer:be,touch:we,touchNative:Se,mobileOpera:Te,mobileGecko:Ae,retina:Ie,passiveEvents:Le,canvas:Ce,svg:Ne,vml:Pe,inlineSvg:Re,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},Fe=ke.msPointer?"MSPointerDown":"pointerdown",De=ke.msPointer?"MSPointerMove":"pointermove",Me=ke.msPointer?"MSPointerUp":"pointerup",Ue=ke.msPointer?"MSPointerCancel":"pointercancel",Be={touchstart:Fe,touchmove:De,touchend:Me,touchcancel:Ue},je={touchstart:function(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Mt(t),ze(e,t)},touchmove:ze,touchend:ze,touchcancel:ze},He={},Ge=!1;function Ve(e,t,r){return"touchstart"===t&&(Ge||(document.addEventListener(Fe,qe,!0),document.addEventListener(De,We,!0),document.addEventListener(Me,Ke,!0),document.addEventListener(Ue,Ke,!0),Ge=!0)),je[t]?(r=je[t].bind(this,r),e.addEventListener(Be[t],r,!1),r):(console.warn("wrong event specified:",t),L.Util.falseFn)}function qe(e){He[e.pointerId]=e}function We(e){He[e.pointerId]&&(He[e.pointerId]=e)}function Ke(e){delete He[e.pointerId]}function ze(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){for(var r in t.touches=[],He)t.touches.push(He[r]);t.changedTouches=[t],e(t)}}var $e,Je,Ze,Ye,Xe,Qe=gt(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),et=gt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),tt="webkitTransition"===et||"OTransition"===et?et+"End":"transitionend";function rt(e){return"string"==typeof e?document.getElementById(e):e}function it(e,t){var r=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!r||"auto"===r)&&document.defaultView){var i=document.defaultView.getComputedStyle(e,null);r=i?i[t]:null}return"auto"===r?null:r}function nt(e,t,r){var i=document.createElement(e);return i.className=t||"",r&&r.appendChild(i),i}function ot(e){var t=e.parentNode;t&&t.removeChild(e)}function st(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function at(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function ut(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function lt(e,t){if(void 0!==e.classList)return e.classList.contains(t);var r=dt(e);return r.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(r)}function ct(e,t){if(void 0!==e.classList)for(var r=h(t),i=0,n=r.length;i<n;i++)e.classList.add(r[i]);else if(!lt(e,t)){var o=dt(e);pt(e,(o?o+" ":"")+t)}}function ht(e,t){void 0!==e.classList?e.classList.remove(t):pt(e,c((" "+dt(e)+" ").replace(" "+t+" "," ")))}function pt(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function dt(e){return e.correspondingElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function ft(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&function(e,t){var r=!1,i="DXImageTransform.Microsoft.Alpha";try{r=e.filters.item(i)}catch(e){if(1===t)return}t=Math.round(100*t),r?(r.Enabled=100!==t,r.Opacity=t):e.style.filter+=" progid:"+i+"(opacity="+t+")"}(e,t)}function gt(e){for(var t=document.documentElement.style,r=0;r<e.length;r++)if(e[r]in t)return e[r];return!1}function mt(e,t,r){var i=t||new R(0,0);e.style[Qe]=(ke.ie3d?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(r?" scale("+r+")":"")}function vt(e,t){e._leaflet_pos=t,ke.any3d?mt(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function yt(e){return e._leaflet_pos||new R(0,0)}if("onselectstart"in document)$e=function(){It(window,"selectstart",Mt)},Je=function(){Ct(window,"selectstart",Mt)};else{var _t=gt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);$e=function(){if(_t){var e=document.documentElement.style;Ze=e[_t],e[_t]="none"}},Je=function(){_t&&(document.documentElement.style[_t]=Ze,Ze=void 0)}}function Et(){It(window,"dragstart",Mt)}function xt(){Ct(window,"dragstart",Mt)}function bt(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(St(),Ye=e,Xe=e.style.outline,e.style.outline="none",It(window,"keydown",St))}function St(){Ye&&(Ye.style.outline=Xe,Ye=void 0,Xe=void 0,Ct(window,"keydown",St))}function wt(e){do{e=e.parentNode}while(!(e.offsetWidth&&e.offsetHeight||e===document.body));return e}function Tt(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var At={__proto__:null,TRANSFORM:Qe,TRANSITION:et,TRANSITION_END:tt,get:rt,getStyle:it,create:nt,remove:ot,empty:st,toFront:at,toBack:ut,hasClass:lt,addClass:ct,removeClass:ht,setClass:pt,getClass:dt,setOpacity:ft,testProp:gt,setTransform:mt,setPosition:vt,getPosition:yt,get disableTextSelection(){return $e},get enableTextSelection(){return Je},disableImageDrag:Et,enableImageDrag:xt,preventOutline:bt,restoreOutline:St,getSizedParentNode:wt,getScale:Tt};function It(e,t,r,i){if(t&&"object"==typeof t)for(var n in t)Pt(e,n,t[n],r);else for(var o=0,s=(t=h(t)).length;o<s;o++)Pt(e,t[o],r,i);return this}var Lt="_leaflet_events";function Ct(e,t,r,i){if(1===arguments.length)Nt(e),delete e[Lt];else if(t&&"object"==typeof t)for(var n in t)Ot(e,n,t[n],r);else if(t=h(t),2===arguments.length)Nt(e,(function(e){return-1!==v(t,e)}));else for(var o=0,s=t.length;o<s;o++)Ot(e,t[o],r,i);return this}function Nt(e,t){for(var r in e[Lt]){var i=r.split(/\d/)[0];t&&!t(i)||Ot(e,i,null,null,r)}}var Rt={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Pt(e,t,r,i){var n=t+o(r)+(i?"_"+o(i):"");if(e[Lt]&&e[Lt][n])return this;var s=function(t){return r.call(i||e,t||window.event)},a=s;!ke.touchNative&&ke.pointer&&0===t.indexOf("touch")?s=Ve(e,t,s):ke.touch&&"dblclick"===t?s=function(e,t){e.addEventListener("dblclick",t);var r,i=0;function n(e){if(1===e.detail){if("mouse"!==e.pointerType&&(!e.sourceCapabilities||e.sourceCapabilities.firesTouchEvents)){var n=Bt(e);if(!n.some((function(e){return e instanceof HTMLLabelElement&&e.attributes.for}))||n.some((function(e){return e instanceof HTMLInputElement||e instanceof HTMLSelectElement}))){var o=Date.now();o-i<=200?2==++r&&t(function(e){var t,r,i={};for(r in e)t=e[r],i[r]=t&&t.bind?t.bind(e):t;return e=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}(e)):r=1,i=o}}}else r=e.detail}return e.addEventListener("click",n),{dblclick:t,simDblclick:n}}(e,s):"addEventListener"in e?"touchstart"===t||"touchmove"===t||"wheel"===t||"mousewheel"===t?e.addEventListener(Rt[t]||t,s,!!ke.passiveEvents&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(s=function(t){t=t||window.event,Vt(e,t)&&a(t)},e.addEventListener(Rt[t],s,!1)):e.addEventListener(t,a,!1):e.attachEvent("on"+t,s),e[Lt]=e[Lt]||{},e[Lt][n]=s}function Ot(e,t,r,i,n){n=n||t+o(r)+(i?"_"+o(i):"");var s=e[Lt]&&e[Lt][n];if(!s)return this;!ke.touchNative&&ke.pointer&&0===t.indexOf("touch")?function(e,t,r){Be[t]?e.removeEventListener(Be[t],r,!1):console.warn("wrong event specified:",t)}(e,t,s):ke.touch&&"dblclick"===t?function(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}(e,s):"removeEventListener"in e?e.removeEventListener(Rt[t]||t,s,!1):e.detachEvent("on"+t,s),e[Lt][n]=null}function kt(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Ft(e){return Pt(e,"wheel",kt),this}function Dt(e){return It(e,"mousedown touchstart dblclick contextmenu",kt),e._leaflet_disable_click=!0,this}function Mt(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Ut(e){return Mt(e),kt(e),this}function Bt(e){if(e.composedPath)return e.composedPath();for(var t=[],r=e.target;r;)t.push(r),r=r.parentNode;return t}function jt(e,t){if(!t)return new R(e.clientX,e.clientY);var r=Tt(t),i=r.boundingClientRect;return new R((e.clientX-i.left)/r.x-t.clientLeft,(e.clientY-i.top)/r.y-t.clientTop)}var Ht=ke.linux&&ke.chrome?window.devicePixelRatio:ke.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Gt(e){return ke.edge?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/Ht:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}function Vt(e,t){var r=t.relatedTarget;if(!r)return!0;try{for(;r&&r!==e;)r=r.parentNode}catch(e){return!1}return r!==e}var qt={__proto__:null,on:It,off:Ct,stopPropagation:kt,disableScrollPropagation:Ft,disableClickPropagation:Dt,preventDefault:Mt,stop:Ut,getPropagationPath:Bt,getMousePosition:jt,getWheelDelta:Gt,isExternalTarget:Vt,addListener:It,removeListener:Ct},Wt=N.extend({run:function(e,t,r,i){this.stop(),this._el=e,this._inProgress=!0,this._duration=r||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=yt(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=w(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,r=1e3*this._duration;t<r?this._runFrame(this._easeOut(t/r),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var r=this._startPos.add(this._offset.multiplyBy(e));t&&r._round(),vt(this._el,r),this.fire("step")},_complete:function(){T(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),Kt=N.extend({options:{crs:z,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=p(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(B(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=et&&ke.any3d&&!ke.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),It(this._proxy,tt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,r,i){return r=void 0===r?this._zoom:this._limitZoom(r),e=this._limitCenter(B(e),r,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=t({animate:i.animate},i.zoom),i.pan=t({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==r?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,r,i.zoom):this._tryAnimatedPan(e,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(e,r,i.pan&&i.pan.noMoveStart),this)},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(ke.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(ke.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,r){var i=this.getZoomScale(t),n=this.getSize().divideBy(2),o=(e instanceof R?e:this.latLngToContainerPoint(e)).subtract(n).multiplyBy(1-1/i),s=this.containerPointToLatLng(n.add(o));return this.setView(s,t,{zoom:r})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():M(e);var r=O(t.paddingTopLeft||t.padding||[0,0]),i=O(t.paddingBottomRight||t.padding||[0,0]),n=this.getBoundsZoom(e,!1,r.add(i));if((n="number"==typeof t.maxZoom?Math.min(t.maxZoom,n):n)===1/0)return{center:e.getCenter(),zoom:n};var o=i.subtract(r).divideBy(2),s=this.project(e.getSouthWest(),n),a=this.project(e.getNorthEast(),n);return{center:this.unproject(s.add(a).divideBy(2).add(o),n),zoom:n}},fitBounds:function(e,t){if(!(e=M(e)).isValid())throw new Error("Bounds are not valid.");var r=this._getBoundsCenterZoom(e,t);return this.setView(r.center,r.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(t=t||{},!(e=O(e).round()).x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Wt,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){ct(this._mapPane,"leaflet-pan-anim");var r=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,r,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,r){if(!1===(r=r||{}).animate||!ke.any3d)return this.setView(e,t,r);this._stop();var i=this.project(this.getCenter()),n=this.project(e),o=this.getSize(),s=this._zoom;e=B(e),t=void 0===t?s:t;var a=Math.max(o.x,o.y),u=a*this.getZoomScale(s,t),l=n.distanceTo(i)||1,c=1.42,h=2.0164;function p(e){var t=(u*u-a*a+(e?-1:1)*h*h*l*l)/(2*(e?u:a)*h*l),r=Math.sqrt(t*t+1)-t;return r<1e-9?-18:Math.log(r)}function d(e){return(Math.exp(e)-Math.exp(-e))/2}function f(e){return(Math.exp(e)+Math.exp(-e))/2}var g=p(0);function m(e){return a*(f(g)*(d(t=g+c*e)/f(t))-d(g))/h;var t}var v=Date.now(),y=(p(1)-g)/c,_=r.duration?1e3*r.duration:1e3*y*.8;return this._moveStart(!0,r.noMoveStart),function r(){var o=(Date.now()-v)/_,u=function(e){return 1-Math.pow(1-e,1.5)}(o)*y;o<=1?(this._flyToFrame=w(r,this),this._move(this.unproject(i.add(n.subtract(i).multiplyBy(m(u)/l)),s),this.getScaleZoom(a/function(e){return a*(f(g)/f(g+c*e))}(u),s),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}.call(this),this},flyToBounds:function(e,t){var r=this._getBoundsCenterZoom(e,t);return this.flyTo(r.center,r.zoom,t)},setMaxBounds:function(e){return e=M(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var r=this.getCenter(),i=this._limitCenter(r,this._zoom,M(e));return r.equals(i)||this.panTo(i,t),this._enforcingBounds=!1,this},panInside:function(e,t){var r=O((t=t||{}).paddingTopLeft||t.padding||[0,0]),i=O(t.paddingBottomRight||t.padding||[0,0]),n=this.project(this.getCenter()),o=this.project(e),s=this.getPixelBounds(),a=F([s.min.add(r),s.max.subtract(i)]),u=a.getSize();if(!a.contains(o)){this._enforcingBounds=!0;var l=o.subtract(a.getCenter()),c=a.extend(o).getSize().subtract(u);n.x+=l.x<0?-c.x:c.x,n.y+=l.y<0?-c.y:c.y,this.panTo(this.unproject(n),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=t({animate:!1,pan:!0},!0===e?{animate:!0}:e);var r=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),o=r.divideBy(2).round(),s=n.divideBy(2).round(),a=o.subtract(s);return a.x||a.y?(e.animate&&e.pan?this.panBy(a):(e.pan&&this._rawPanBy(a),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:r,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=t({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var r=i(this._handleGeolocationResponse,this),n=i(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(r,n,e):navigator.geolocation.getCurrentPosition(r,n,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,r=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+r+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=new U(e.coords.latitude,e.coords.longitude),r=t.toBounds(2*e.coords.accuracy),i=this._locateOptions;if(i.setView){var n=this.getBoundsZoom(r);this.setView(t,i.maxZoom?Math.min(n,i.maxZoom):n)}var o={latlng:t,bounds:r,timestamp:e.timestamp};for(var s in e.coords)"number"==typeof e.coords[s]&&(o[s]=e.coords[s]);this.fire("locationfound",o)}},addHandler:function(e,t){if(!t)return this;var r=this[e]=new t(this);return this._handlers.push(r),this.options[e]&&r.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=void 0,this._containerId=void 0}var e;for(e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ot(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(T(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)ot(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var r=nt("div","leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),t||this._mapPane);return e&&(this._panes[e]=r),r},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new D(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,r){e=M(e),r=O(r||[0,0]);var i=this.getZoom()||0,n=this.getMinZoom(),o=this.getMaxZoom(),s=e.getNorthWest(),a=e.getSouthEast(),u=this.getSize().subtract(r),l=F(this.project(a,i),this.project(s,i)).getSize(),c=ke.any3d?this.options.zoomSnap:1,h=u.x/l.x,p=u.y/l.y,d=t?Math.max(h,p):Math.min(h,p);return i=this.getScaleZoom(d,i),c&&(i=Math.round(i/(c/100))*(c/100),i=t?Math.ceil(i/c)*c:Math.floor(i/c)*c),Math.max(n,Math.min(o,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new R(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var r=this._getTopLeftPoint(e,t);return new k(r,r.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"==typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var r=this.options.crs;return t=void 0===t?this._zoom:t,r.scale(e)/r.scale(t)},getScaleZoom:function(e,t){var r=this.options.crs;t=void 0===t?this._zoom:t;var i=r.zoom(e*r.scale(t));return isNaN(i)?1/0:i},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(B(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(O(e),t)},layerPointToLatLng:function(e){var t=O(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(B(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(B(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(M(e))},distance:function(e,t){return this.options.crs.distance(B(e),B(t))},containerPointToLayerPoint:function(e){return O(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return O(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(O(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(B(e)))},mouseEventToContainerPoint:function(e){return jt(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=rt(e);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");It(t,"scroll",this._onScroll,this),this._containerId=o(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&ke.any3d,ct(e,"leaflet-container"+(ke.touch?" leaflet-touch":"")+(ke.retina?" leaflet-retina":"")+(ke.ielt9?" leaflet-oldie":"")+(ke.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=it(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),vt(this._mapPane,new R(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ct(e.markerPane,"leaflet-zoom-hide"),ct(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,r){vt(this._mapPane,new R(0,0));var i=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var n=this._zoom!==t;this._moveStart(n,r)._move(e,t)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,r,i){void 0===t&&(t=this._zoom);var n=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),i?r&&r.pinch&&this.fire("zoom",r):((n||r&&r.pinch)&&this.fire("zoom",r),this.fire("move",r)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return T(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){vt(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[o(this._container)]=this;var t=e?Ct:It;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),ke.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){T(this._resizeRequest),this._resizeRequest=w((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var r,i=[],n="mouseout"===t||"mouseover"===t,s=e.target||e.srcElement,a=!1;s;){if((r=this._targets[o(s)])&&("click"===t||"preclick"===t)&&this._draggableMoved(r)){a=!0;break}if(r&&r.listens(t,!0)){if(n&&!Vt(s,e))break;if(i.push(r),n)break}if(s===this._container)break;s=s.parentNode}return i.length||a||n||!this.listens(t,!0)||(i=[this]),i},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||"click"===e.type&&this._isClickDisabled(t))){var r=e.type;"mousedown"===r&&bt(t),this._fireDOMEvent(e,r)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,r,i){if("click"===e.type){var n=t({},e);n.type="preclick",this._fireDOMEvent(n,n.type,i)}var o=this._findEventTargets(e,r);if(i){for(var s=[],a=0;a<i.length;a++)i[a].listens(r,!0)&&s.push(i[a]);o=s.concat(o)}if(o.length){"contextmenu"===r&&Mt(e);var u=o[0],l={originalEvent:e};if("keypress"!==e.type&&"keydown"!==e.type&&"keyup"!==e.type){var c=u.getLatLng&&(!u._radius||u._radius<=10);l.containerPoint=c?this.latLngToContainerPoint(u.getLatLng()):this.mouseEventToContainerPoint(e),l.layerPoint=this.containerPointToLayerPoint(l.containerPoint),l.latlng=c?u.getLatLng():this.layerPointToLatLng(l.layerPoint)}for(a=0;a<o.length;a++)if(o[a].fire(r,l,!0),l.originalEvent._stopped||!1===o[a].options.bubblingMouseEvents&&-1!==v(this._mouseEvents,r))return}},_draggableMoved:function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return yt(this._mapPane)||new R(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var r=this.getSize()._divideBy(2);return this.project(e,t)._subtract(r)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,r){var i=this._getNewPixelOrigin(r,t);return this.project(e,t)._subtract(i)},_latLngBoundsToNewLayerBounds:function(e,t,r){var i=this._getNewPixelOrigin(r,t);return F([this.project(e.getSouthWest(),t)._subtract(i),this.project(e.getNorthWest(),t)._subtract(i),this.project(e.getSouthEast(),t)._subtract(i),this.project(e.getNorthEast(),t)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,r){if(!r)return e;var i=this.project(e,t),n=this.getSize().divideBy(2),o=new k(i.subtract(n),i.add(n)),s=this._getBoundsOffset(o,r,t);return s.round().equals([0,0])?e:this.unproject(i.add(s),t)},_limitOffset:function(e,t){if(!t)return e;var r=this.getPixelBounds(),i=new k(r.min.add(e),r.max.add(e));return e.add(this._getBoundsOffset(i,t))},_getBoundsOffset:function(e,t,r){var i=F(this.project(t.getNorthEast(),r),this.project(t.getSouthWest(),r)),n=i.min.subtract(e.min),o=i.max.subtract(e.max);return new R(this._rebound(n.x,-o.x),this._rebound(n.y,-o.y))},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),r=this.getMaxZoom(),i=ke.any3d?this.options.zoomSnap:1;return i&&(e=Math.round(e/i)*i),Math.max(t,Math.min(r,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ht(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var r=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(r)||(this.panBy(r,t),0))},_createAnimProxy:function(){var e=this._proxy=nt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",(function(e){var t=Qe,r=this._proxy.style[t];mt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),r===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ot(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();mt(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,r){if(this._animatingZoom)return!0;if(r=r||{},!this._zoomAnimated||!1===r.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(t),n=this._getCenterOffset(e)._divideBy(1-1/i);return!(!0!==r.animate&&!this.getSize().contains(n)||(w((function(){this._moveStart(!0,!1)._animateZoom(e,t,!0)}),this),0))},_animateZoom:function(e,t,r,n){this._mapPane&&(r&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,ct(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:n}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ht(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});var zt=I.extend({options:{position:"topright"},initialize:function(e){p(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),r=this.getPosition(),i=e._controlCorners[r];return ct(t,"leaflet-control"),-1!==r.indexOf("bottom")?i.insertBefore(t,i.firstChild):i.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ot(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),$t=function(e){return new zt(e)};Kt.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",r=this._controlContainer=nt("div",t+"control-container",this._container);function i(i,n){var o=t+i+" "+t+n;e[i+n]=nt("div",o,r)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)ot(this._controlCorners[e]);ot(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Jt=zt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,r,i){return r<i?-1:i<r?1:0}},initialize:function(e,t,r){for(var i in p(this,r),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,e)this._addLayer(e[i],i);for(i in t)this._addLayer(t[i],i,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return zt.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(o(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){ct(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(ct(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):ht(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ht(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=nt("div",e),r=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Dt(t),Ft(t);var i=this._section=nt("section",e+"-list");r&&(this._map.on("click",this.collapse,this),It(t,{mouseenter:function(){It(i,"click",Mt),this.expand(),setTimeout((function(){Ct(i,"click",Mt)}))},mouseleave:this.collapse},this));var n=this._layersLink=nt("a",e+"-toggle",t);n.href="#",n.title="Layers",n.setAttribute("role","button"),It(n,"click",Mt),It(n,"focus",this.expand,this),r||this.expand(),this._baseLayersList=nt("div",e+"-base",i),this._separator=nt("div",e+"-separator",i),this._overlaysList=nt("div",e+"-overlays",i),t.appendChild(i)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&o(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,r){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:r}),this.options.sortLayers&&this._layers.sort(i((function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)}),this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;st(this._baseLayersList),st(this._overlaysList),this._layerControlInputs=[];var e,t,r,i,n=0;for(r=0;r<this._layers.length;r++)i=this._layers[r],this._addItem(i),t=t||i.overlay,e=e||!i.overlay,n+=i.overlay?0:1;return this.options.hideSingleBase&&(e=e&&n>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(o(e.target)),r=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;r&&this._map.fire(r,t)},_createRadioElement:function(e,t){var r='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=r,i.firstChild},_addItem:function(e){var t,r=document.createElement("label"),i=this._map.hasLayer(e.layer);e.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=i):t=this._createRadioElement("leaflet-base-layers_"+o(this),i),this._layerControlInputs.push(t),t.layerId=o(e.layer),It(t,"click",this._onInputClick,this);var n=document.createElement("span");n.innerHTML=" "+e.name;var s=document.createElement("span");return r.appendChild(s),s.appendChild(t),s.appendChild(n),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(r),this._checkDisabledLayers(),r},_onInputClick:function(){var e,t,r=this._layerControlInputs,i=[],n=[];this._handlingClick=!0;for(var o=r.length-1;o>=0;o--)e=r[o],t=this._getLayer(e.layerId).layer,e.checked?i.push(t):e.checked||n.push(t);for(o=0;o<n.length;o++)this._map.hasLayer(n[o])&&this._map.removeLayer(n[o]);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])||this._map.addLayer(i[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var e,t,r=this._layerControlInputs,i=this._map.getZoom(),n=r.length-1;n>=0;n--)e=r[n],t=this._getLayer(e.layerId).layer,e.disabled=void 0!==t.options.minZoom&&i<t.options.minZoom||void 0!==t.options.maxZoom&&i>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this}}),Zt=zt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",r=nt("div",t+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,t+"-in",r,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,t+"-out",r,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),r},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,r,i,n){var o=nt("a",r,i);return o.innerHTML=e,o.href="#",o.title=t,o.setAttribute("role","button"),o.setAttribute("aria-label",t),Dt(o),It(o,"click",Ut),It(o,"click",n,this),It(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";ht(this._zoomInButton,t),ht(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(ct(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(ct(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});Kt.mergeOptions({zoomControl:!0}),Kt.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new Zt,this.addControl(this.zoomControl))}));var Yt=zt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",r=nt("div",t),i=this.options;return this._addScales(i,t+"-line",r),e.on(i.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),r},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,r){e.metric&&(this._mScale=nt("div",t,r)),e.imperial&&(this._iScale=nt("div",t,r))},_update:function(){var e=this._map,t=e.getSize().y/2,r=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(r)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),r=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,r,t/e)},_updateImperial:function(e){var t,r,i,n=3.2808399*e;n>5280?(t=n/5280,r=this._getRoundNum(t),this._updateScale(this._iScale,r+" mi",r/t)):(i=this._getRoundNum(n),this._updateScale(this._iScale,i+" ft",i/n))},_updateScale:function(e,t,r){e.style.width=Math.round(this.options.maxWidth*r)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),r=e/t;return t*(r>=10?10:r>=5?5:r>=3?3:r>=2?2:1)}}),Xt=zt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ke.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(e){p(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=nt("div","leaflet-control-attribution"),Dt(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",(function(){this.removeAttribution(e.layer.getAttribution())}),this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var r=[];this.options.prefix&&r.push(this.options.prefix),e.length&&r.push(e.join(", ")),this._container.innerHTML=r.join(' <span aria-hidden="true">|</span> ')}}});Kt.mergeOptions({attributionControl:!0}),Kt.addInitHook((function(){this.options.attributionControl&&(new Xt).addTo(this)}));zt.Layers=Jt,zt.Zoom=Zt,zt.Scale=Yt,zt.Attribution=Xt,$t.layers=function(e,t,r){return new Jt(e,t,r)},$t.zoom=function(e){return new Zt(e)},$t.scale=function(e){return new Yt(e)},$t.attribution=function(e){return new Xt(e)};var Qt=I.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Qt.addTo=function(e,t){return e.addHandler(t,this),this};var er,tr={Events:C},rr=ke.touch?"touchstart mousedown":"mousedown",ir=N.extend({options:{clickTolerance:3},initialize:function(e,t,r,i){p(this,i),this._element=e,this._dragStartTarget=t||e,this._preventOutline=r},enable:function(){this._enabled||(It(this._dragStartTarget,rr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ir._dragging===this&&this.finishDrag(!0),Ct(this._dragStartTarget,rr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!lt(this._element,"leaflet-zoom-anim")))if(e.touches&&1!==e.touches.length)ir._dragging===this&&this.finishDrag();else if(!(ir._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches||(ir._dragging=this,this._preventOutline&&bt(this._element),Et(),$e(),this._moving))){this.fire("down");var t=e.touches?e.touches[0]:e,r=wt(this._element);this._startPoint=new R(t.clientX,t.clientY),this._startPos=yt(this._element),this._parentScale=Tt(r);var i="mousedown"===e.type;It(document,i?"mousemove":"touchmove",this._onMove,this),It(document,i?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(e){if(this._enabled)if(e.touches&&e.touches.length>1)this._moved=!0;else{var t=e.touches&&1===e.touches.length?e.touches[0]:e,r=new R(t.clientX,t.clientY)._subtract(this._startPoint);(r.x||r.y)&&(Math.abs(r.x)+Math.abs(r.y)<this.options.clickTolerance||(r.x/=this._parentScale.x,r.y/=this._parentScale.y,Mt(e),this._moved||(this.fire("dragstart"),this._moved=!0,ct(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ct(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(r),this._moving=!0,this._lastEvent=e,this._updatePosition()))}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),vt(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){ht(document.body,"leaflet-dragging"),this._lastTarget&&(ht(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ct(document,"mousemove touchmove",this._onMove,this),Ct(document,"mouseup touchend touchcancel",this._onUp,this),xt(),Je(),this._moved&&this._moving&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,ir._dragging=!1}});function nr(e,t){if(!t||!e.length)return e.slice();var r=t*t;return function(e,t){var r=e.length,i=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(r);i[0]=i[r-1]=1,sr(e,i,t,0,r-1);var n,o=[];for(n=0;n<r;n++)i[n]&&o.push(e[n]);return o}(e=function(e,t){for(var r=[e[0]],i=1,n=0,o=e.length;i<o;i++)cr(e[i],e[n])>t&&(r.push(e[i]),n=i);return n<o-1&&r.push(e[o-1]),r}(e,r),r)}function or(e,t,r){return Math.sqrt(hr(e,t,r,!0))}function sr(e,t,r,i,n){var o,s,a,u=0;for(s=i+1;s<=n-1;s++)(a=hr(e[s],e[i],e[n],!0))>u&&(o=s,u=a);u>r&&(t[o]=1,sr(e,t,r,i,o),sr(e,t,r,o,n))}function ar(e,t,r,i,n){var o,s,a,u=i?er:lr(e,r),l=lr(t,r);for(er=l;;){if(!(u|l))return[e,t];if(u&l)return!1;a=lr(s=ur(e,t,o=u||l,r,n),r),o===u?(e=s,u=a):(t=s,l=a)}}function ur(e,t,r,i,n){var o,s,a=t.x-e.x,u=t.y-e.y,l=i.min,c=i.max;return 8&r?(o=e.x+a*(c.y-e.y)/u,s=c.y):4&r?(o=e.x+a*(l.y-e.y)/u,s=l.y):2&r?(o=c.x,s=e.y+u*(c.x-e.x)/a):1&r&&(o=l.x,s=e.y+u*(l.x-e.x)/a),new R(o,s,n)}function lr(e,t){var r=0;return e.x<t.min.x?r|=1:e.x>t.max.x&&(r|=2),e.y<t.min.y?r|=4:e.y>t.max.y&&(r|=8),r}function cr(e,t){var r=t.x-e.x,i=t.y-e.y;return r*r+i*i}function hr(e,t,r,i){var n,o=t.x,s=t.y,a=r.x-o,u=r.y-s,l=a*a+u*u;return l>0&&((n=((e.x-o)*a+(e.y-s)*u)/l)>1?(o=r.x,s=r.y):n>0&&(o+=a*n,s+=u*n)),a=e.x-o,u=e.y-s,i?a*a+u*u:new R(o,s)}function pr(e){return!m(e[0])||"object"!=typeof e[0][0]&&void 0!==e[0][0]}function dr(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),pr(e)}function fr(e,t){var r,i,n,o,s,a,u,l;if(!e||0===e.length)throw new Error("latlngs not passed");pr(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var c=[];for(var h in e)c.push(t.project(B(e[h])));var p=c.length;for(r=0,i=0;r<p-1;r++)i+=c[r].distanceTo(c[r+1])/2;if(0===i)l=c[0];else for(r=0,o=0;r<p-1;r++)if(s=c[r],a=c[r+1],(o+=n=s.distanceTo(a))>i){u=(o-i)/n,l=[a.x-u*(a.x-s.x),a.y-u*(a.y-s.y)];break}return t.unproject(O(l))}var gr={__proto__:null,simplify:nr,pointToSegmentDistance:or,closestPointOnSegment:function(e,t,r){return hr(e,t,r)},clipSegment:ar,_getEdgeIntersection:ur,_getBitCode:lr,_sqClosestPointOnSegment:hr,isFlat:pr,_flat:dr,polylineCenter:fr};function mr(e,t,r){var i,n,o,s,a,u,l,c,h,p=[1,4,2,8];for(n=0,l=e.length;n<l;n++)e[n]._code=lr(e[n],t);for(s=0;s<4;s++){for(c=p[s],i=[],n=0,o=(l=e.length)-1;n<l;o=n++)a=e[n],u=e[o],a._code&c?u._code&c||((h=ur(u,a,c,t,r))._code=lr(h,t),i.push(h)):(u._code&c&&((h=ur(u,a,c,t,r))._code=lr(h,t),i.push(h)),i.push(a));e=i}return e}function vr(e,t){var r,i,n,o,s,a,u,l,c;if(!e||0===e.length)throw new Error("latlngs not passed");pr(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var h=[];for(var p in e)h.push(t.project(B(e[p])));var d=h.length;for(a=u=l=0,r=0,i=d-1;r<d;i=r++)n=h[r],o=h[i],s=n.y*o.x-o.y*n.x,u+=(n.x+o.x)*s,l+=(n.y+o.y)*s,a+=3*s;return c=0===a?h[0]:[u/a,l/a],t.unproject(O(c))}var yr={__proto__:null,clipPolygon:mr,polygonCenter:vr},_r={project:function(e){return new R(e.lng,e.lat)},unproject:function(e){return new U(e.y,e.x)},bounds:new k([-180,-90],[180,90])},Er={R:6378137,R_MINOR:6356752.314245179,bounds:new k([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,r=this.R,i=e.lat*t,n=this.R_MINOR/r,o=Math.sqrt(1-n*n),s=o*Math.sin(i),a=Math.tan(Math.PI/4-i/2)/Math.pow((1-s)/(1+s),o/2);return i=-r*Math.log(Math.max(a,1e-10)),new R(e.lng*t*r,i)},unproject:function(e){for(var t,r=180/Math.PI,i=this.R,n=this.R_MINOR/i,o=Math.sqrt(1-n*n),s=Math.exp(-e.y/i),a=Math.PI/2-2*Math.atan(s),u=0,l=.1;u<15&&Math.abs(l)>1e-7;u++)t=o*Math.sin(a),t=Math.pow((1-t)/(1+t),o/2),a+=l=Math.PI/2-2*Math.atan(s*t)-a;return new U(a*r,e.x*r/i)}},xr={__proto__:null,LonLat:_r,Mercator:Er,SphericalMercator:q},br=t({},G,{code:"EPSG:3395",projection:Er,transformation:function(){var e=.5/(Math.PI*Er.R);return K(e,.5,-e,.5)}()}),Sr=t({},G,{code:"EPSG:4326",projection:_r,transformation:K(1/180,1,-1/180,.5)}),wr=t({},H,{projection:_r,transformation:K(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var r=t.lng-e.lng,i=t.lat-e.lat;return Math.sqrt(r*r+i*i)},infinite:!0});H.Earth=G,H.EPSG3395=br,H.EPSG3857=z,H.EPSG900913=$,H.EPSG4326=Sr,H.Simple=wr;var Tr=N.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[o(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[o(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var r=this.getEvents();t.on(r,this),this.once("remove",(function(){t.off(r,this)}),this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});Kt.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=o(e);return this._layers[t]||(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e)),this},removeLayer:function(e){var t=o(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return o(e)in this._layers},eachLayer:function(e,t){for(var r in this._layers)e.call(t,this._layers[r]);return this},_addLayers:function(e){for(var t=0,r=(e=e?m(e)?e:[e]:[]).length;t<r;t++)this.addLayer(e[t])},_addZoomLimit:function(e){isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[o(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=o(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,r=this._getZoomSpan();for(var i in this._zoomBoundLayers){var n=this._zoomBoundLayers[i].options;e=void 0===n.minZoom?e:Math.min(e,n.minZoom),t=void 0===n.maxZoom?t:Math.max(t,n.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,r!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ar=Tr.extend({initialize:function(e,t){var r,i;if(p(this,t),this._layers={},e)for(r=0,i=e.length;r<i;r++)this.addLayer(e[r])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return("number"==typeof e?e:this.getLayerId(e))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t,r,i=Array.prototype.slice.call(arguments,1);for(t in this._layers)(r=this._layers[t])[e]&&r[e].apply(r,i);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var r in this._layers)e.call(t,this._layers[r]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return o(e)}}),Ir=Ar.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Ar.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),Ar.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new D;for(var t in this._layers){var r=this._layers[t];e.extend(r.getBounds?r.getBounds():r.getLatLng())}return e}}),Lr=I.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){p(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var r=this._getIconUrl(e);if(!r){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(r,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(i,e),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i},_setIconStyles:function(e,t){var r=this.options,i=r[t+"Size"];"number"==typeof i&&(i=[i,i]);var n=O(i),o=O("shadow"===t&&r.shadowAnchor||r.iconAnchor||n&&n.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(r.className||""),o&&(e.style.marginLeft=-o.x+"px",e.style.marginTop=-o.y+"px"),n&&(e.style.width=n.x+"px",e.style.height=n.y+"px")},_createImg:function(e,t){return(t=t||document.createElement("img")).src=e,t},_getIconUrl:function(e){return ke.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});var Cr=Lr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return"string"!=typeof Cr.imagePath&&(Cr.imagePath=this._detectIconPath()),(this.options.imagePath||Cr.imagePath)+Lr.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(e,t,r){var i=t.exec(e);return i&&i[r]};return(e=t(e,/^url\((['"])?(.+)\1\)$/,2))&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=nt("div","leaflet-default-icon-path",document.body),t=it(e,"background-image")||it(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t))return t;var r=document.querySelector('link[href$="leaflet.css"]');return r?r.href.substring(0,r.href.length-"leaflet.css".length-1):""}}),Nr=Qt.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new ir(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ct(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ht(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,r=t._map,i=this._marker.options.autoPanSpeed,n=this._marker.options.autoPanPadding,o=yt(t._icon),s=r.getPixelBounds(),a=r.getPixelOrigin(),u=F(s.min._subtract(a).add(n),s.max._subtract(a).subtract(n));if(!u.contains(o)){var l=O((Math.max(u.max.x,o.x)-u.max.x)/(s.max.x-u.max.x)-(Math.min(u.min.x,o.x)-u.min.x)/(s.min.x-u.min.x),(Math.max(u.max.y,o.y)-u.max.y)/(s.max.y-u.max.y)-(Math.min(u.min.y,o.y)-u.min.y)/(s.min.y-u.min.y)).multiplyBy(i);r.panBy(l,{animate:!1}),this._draggable._newPos._add(l),this._draggable._startPos._add(l),vt(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=w(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(T(this._panRequest),this._panRequest=w(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,r=t._shadow,i=yt(t._icon),n=t._map.layerPointToLatLng(i);r&&vt(r,i),t._latlng=n,e.latlng=n,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){T(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),Rr=Tr.extend({options:{icon:new Cr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){p(this,t),this._latlng=B(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=B(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),r=e.icon.createIcon(this._icon),i=!1;r!==this._icon&&(this._icon&&this._removeIcon(),i=!0,e.title&&(r.title=e.title),"IMG"===r.tagName&&(r.alt=e.alt||"")),ct(r,t),e.keyboard&&(r.tabIndex="0",r.setAttribute("role","button")),this._icon=r,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&It(r,"focus",this._panOnFocus,this);var n=e.icon.createShadow(this._shadow),o=!1;n!==this._shadow&&(this._removeShadow(),o=!0),n&&(ct(n,t),n.alt=""),this._shadow=n,e.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),n&&o&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ct(this._icon,"focus",this._panOnFocus,this),ot(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ot(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&vt(this._icon,e),this._shadow&&vt(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(ct(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Nr)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Nr(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&ft(this._icon,e),this._shadow&&ft(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,r=t.iconSize?O(t.iconSize):O(0,0),i=t.iconAnchor?O(t.iconAnchor):O(0,0);e.panInside(this._latlng,{paddingTopLeft:i,paddingBottomRight:r.subtract(i)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var Pr=Tr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return p(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Or=Pr.extend({options:{fill:!0,radius:10},initialize:function(e,t){p(this,t),this._latlng=B(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=B(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return Pr.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,r=this._clickTolerance(),i=[e+r,t+r];this._pxBounds=new k(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var kr=Or.extend({initialize:function(e,r,i){if("number"==typeof r&&(r=t({},i,{radius:r})),p(this,r),this._latlng=B(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new D(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:Pr.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,r=this._map,i=r.options.crs;if(i.distance===G.distance){var n=Math.PI/180,o=this._mRadius/G.R/n,s=r.project([t+o,e]),a=r.project([t-o,e]),u=s.add(a).divideBy(2),l=r.unproject(u).lat,c=Math.acos((Math.cos(o*n)-Math.sin(t*n)*Math.sin(l*n))/(Math.cos(t*n)*Math.cos(l*n)))/n;(isNaN(c)||0===c)&&(c=o/Math.cos(Math.PI/180*t)),this._point=u.subtract(r.getPixelOrigin()),this._radius=isNaN(c)?0:u.x-r.project([l,e-c]).x,this._radiusY=u.y-s.y}else{var h=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=r.latLngToLayerPoint(this._latlng),this._radius=this._point.x-r.latLngToLayerPoint(h).x}this._updateBounds()}});var Fr=Pr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){p(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,r,i=1/0,n=null,o=hr,s=0,a=this._parts.length;s<a;s++)for(var u=this._parts[s],l=1,c=u.length;l<c;l++){var h=o(e,t=u[l-1],r=u[l],!0);h<i&&(i=h,n=o(e,t,r))}return n&&(n.distance=Math.sqrt(i)),n},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=B(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new D,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return pr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],r=pr(e),i=0,n=e.length;i<n;i++)r?(t[i]=B(e[i]),this._bounds.extend(t[i])):t[i]=this._convertLatLngs(e[i]);return t},_project:function(){var e=new k;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new R(e,e);this._rawPxBounds&&(this._pxBounds=new k([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,r){var i,n,o=e[0]instanceof U,s=e.length;if(o){for(n=[],i=0;i<s;i++)n[i]=this._map.latLngToLayerPoint(e[i]),r.extend(n[i]);t.push(n)}else for(i=0;i<s;i++)this._projectLatlngs(e[i],t,r)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else{var t,r,i,n,o,s,a,u=this._parts;for(t=0,i=0,n=this._rings.length;t<n;t++)for(r=0,o=(a=this._rings[t]).length;r<o-1;r++)(s=ar(a[r],a[r+1],e,r,!0))&&(u[i]=u[i]||[],u[i].push(s[0]),s[1]===a[r+1]&&r!==o-2||(u[i].push(s[1]),i++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,r=0,i=e.length;r<i;r++)e[r]=nr(e[r],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var r,i,n,o,s,a,u=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(r=0,o=this._parts.length;r<o;r++)for(i=0,n=(s=(a=this._parts[r]).length)-1;i<s;n=i++)if((t||0!==i)&&or(e,a[n],a[i])<=u)return!0;return!1}});Fr._flat=dr;var Dr=Fr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vr(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=Fr.prototype._convertLatLngs.call(this,e),r=t.length;return r>=2&&t[0]instanceof U&&t[0].equals(t[r-1])&&t.pop(),t},_setLatLngs:function(e){Fr.prototype._setLatLngs.call(this,e),pr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return pr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,r=new R(t,t);if(e=new k(e.min.subtract(r),e.max.add(r)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var i,n=0,o=this._rings.length;n<o;n++)(i=mr(this._rings[n],e,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t,r,i,n,o,s,a,u,l=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,a=this._parts.length;n<a;n++)for(o=0,s=(u=(t=this._parts[n]).length)-1;o<u;s=o++)r=t[o],i=t[s],r.y>e.y!=i.y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(l=!l);return l||Fr.prototype._containsPoint.call(this,e,!0)}});var Mr=Ir.extend({initialize:function(e,t){p(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,r,i,n=m(e)?e:e.features;if(n){for(t=0,r=n.length;t<r;t++)((i=n[t]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var o=this.options;if(o.filter&&!o.filter(e))return this;var s=Ur(e,o);return s?(s.feature=Wr(e),s.defaultOptions=s.options,this.resetStyle(s),o.onEachFeature&&o.onEachFeature(e,s),this.addLayer(s)):this},resetStyle:function(e){return void 0===e?this.eachLayer(this.resetStyle,this):(e.options=t({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer((function(t){this._setLayerStyle(t,e)}),this)},_setLayerStyle:function(e,t){e.setStyle&&("function"==typeof t&&(t=t(e.feature)),e.setStyle(t))}});function Ur(e,t){var r,i,n,o,s="Feature"===e.type?e.geometry:e,a=s?s.coordinates:null,u=[],l=t&&t.pointToLayer,c=t&&t.coordsToLatLng||jr;if(!a&&!s)return null;switch(s.type){case"Point":return Br(l,e,r=c(a),t);case"MultiPoint":for(n=0,o=a.length;n<o;n++)r=c(a[n]),u.push(Br(l,e,r,t));return new Ir(u);case"LineString":case"MultiLineString":return i=Hr(a,"LineString"===s.type?0:1,c),new Fr(i,t);case"Polygon":case"MultiPolygon":return i=Hr(a,"Polygon"===s.type?1:2,c),new Dr(i,t);case"GeometryCollection":for(n=0,o=s.geometries.length;n<o;n++){var h=Ur({geometry:s.geometries[n],type:"Feature",properties:e.properties},t);h&&u.push(h)}return new Ir(u);case"FeatureCollection":for(n=0,o=s.features.length;n<o;n++){var p=Ur(s.features[n],t);p&&u.push(p)}return new Ir(u);default:throw new Error("Invalid GeoJSON object.")}}function Br(e,t,r,i){return e?e(t,r):new Rr(r,i&&i.markersInheritOptions&&i)}function jr(e){return new U(e[1],e[0],e[2])}function Hr(e,t,r){for(var i,n=[],o=0,s=e.length;o<s;o++)i=t?Hr(e[o],t-1,r):(r||jr)(e[o]),n.push(i);return n}function Gr(e,t){return void 0!==(e=B(e)).alt?[l(e.lng,t),l(e.lat,t),l(e.alt,t)]:[l(e.lng,t),l(e.lat,t)]}function Vr(e,t,r,i){for(var n=[],o=0,s=e.length;o<s;o++)n.push(t?Vr(e[o],pr(e[o])?0:t-1,r,i):Gr(e[o],i));return!t&&r&&n.push(n[0]),n}function qr(e,r){return e.feature?t({},e.feature,{geometry:r}):Wr(r)}function Wr(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}var Kr={toGeoJSON:function(e){return qr(this,{type:"Point",coordinates:Gr(this.getLatLng(),e)})}};function zr(e,t){return new Mr(e,t)}Rr.include(Kr),kr.include(Kr),Or.include(Kr),Fr.include({toGeoJSON:function(e){var t=!pr(this._latlngs);return qr(this,{type:(t?"Multi":"")+"LineString",coordinates:Vr(this._latlngs,t?1:0,!1,e)})}}),Dr.include({toGeoJSON:function(e){var t=!pr(this._latlngs),r=t&&!pr(this._latlngs[0]),i=Vr(this._latlngs,r?2:t?1:0,!0,e);return t||(i=[i]),qr(this,{type:(r?"Multi":"")+"Polygon",coordinates:i})}}),Ar.include({toMultiPoint:function(e){var t=[];return this.eachLayer((function(r){t.push(r.toGeoJSON(e).geometry.coordinates)})),qr(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var r="GeometryCollection"===t,i=[];return this.eachLayer((function(t){if(t.toGeoJSON){var n=t.toGeoJSON(e);if(r)i.push(n.geometry);else{var o=Wr(n);"FeatureCollection"===o.type?i.push.apply(i,o.features):i.push(o)}}})),r?qr(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var $r=zr,Jr=Tr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,r){this._url=e,this._bounds=M(t),p(this,r)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ct(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ot(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&at(this._image),this},bringToBack:function(){return this._map&&ut(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=M(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:nt("img");ct(t,"leaflet-image-layer"),this._zoomAnimated&&ct(t,"leaflet-zoom-animated"),this.options.className&&ct(t,this.options.className),t.onselectstart=u,t.onmousemove=u,t.onload=i(this.fire,this,"load"),t.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),r=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;mt(this._image,r,t)},_reset:function(){var e=this._image,t=new k(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),r=t.getSize();vt(e,t.min),e.style.width=r.x+"px",e.style.height=r.y+"px"},_updateOpacity:function(){ft(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),Zr=Jr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:nt("video");if(ct(t,"leaflet-image-layer"),this._zoomAnimated&&ct(t,"leaflet-zoom-animated"),this.options.className&&ct(t,this.options.className),t.onselectstart=u,t.onmousemove=u,t.onloadeddata=i(this.fire,this,"load"),e){for(var r=t.getElementsByTagName("source"),n=[],o=0;o<r.length;o++)n.push(r[o].src);this._url=r.length>0?n:[t.src]}else{m(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var s=0;s<this._url.length;s++){var a=nt("source");a.src=this._url[s],t.appendChild(a)}}}});var Yr=Jr.extend({_initImage:function(){var e=this._image=this._url;ct(e,"leaflet-image-layer"),this._zoomAnimated&&ct(e,"leaflet-zoom-animated"),this.options.className&&ct(e,this.options.className),e.onselectstart=u,e.onmousemove=u}});var Xr=Tr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof L.LatLng||m(e))?(this._latlng=B(e),p(this,t)):(p(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return(e=arguments.length?e:this._source._map).hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&ft(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&ft(this._container,1),this.bringToFront(),this.options.interactive&&(ct(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(ft(this._container,0),this._removeTimeout=setTimeout(i(ot,void 0,this._container),200)):ot(this._container),this.options.interactive&&(ht(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=B(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&at(this._container),this},bringToBack:function(){return this._map&&ut(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof Ir){t=null;var r=this._source._layers;for(var i in r)if(r[i]._map){t=r[i];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else{if(!t.getBounds)throw new Error("Unable to get source layer LatLng.");e=t.getBounds().getCenter()}return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=O(this.options.offset),r=this._getAnchor();this._zoomAnimated?vt(this._container,e.add(r)):t=t.add(e).add(r);var i=this._containerBottom=-t.y,n=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=i+"px",this._container.style.left=n+"px"}},_getAnchor:function(){return[0,0]}});Kt.include({_initOverlay:function(e,t,r,i){var n=t;return n instanceof e||(n=new e(i).setContent(t)),r&&n.setLatLng(r),n}}),Tr.include({_initOverlay:function(e,t,r,i){var n=r;return n instanceof e?(p(n,i),n._source=this):(n=t&&!i?t:new e(i,this)).setContent(r),n}});var Qr=Xr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return!(e=arguments.length?e:this._source._map).hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,Xr.prototype.openOn.call(this,e)},onAdd:function(e){Xr.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Pr||this._source.on("preclick",kt))},onRemove:function(e){Xr.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Pr||this._source.off("preclick",kt))},getEvents:function(){var e=Xr.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=nt("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),r=this._wrapper=nt("div",e+"-content-wrapper",t);if(this._contentNode=nt("div",e+"-content",r),Dt(t),Ft(this._contentNode),It(t,"contextmenu",kt),this._tipContainer=nt("div",e+"-tip-container",t),this._tip=nt("div",e+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=nt("a",e+"-close-button",t);i.setAttribute("role","button"),i.setAttribute("aria-label","Close popup"),i.href="#close",i.innerHTML='<span aria-hidden="true">&#215;</span>',It(i,"click",(function(e){Mt(e),this.close()}),this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var r=e.offsetWidth;r=Math.min(r,this.options.maxWidth),r=Math.max(r,this.options.minWidth),t.width=r+1+"px",t.whiteSpace="",t.height="";var i=e.offsetHeight,n=this.options.maxHeight,o="leaflet-popup-scrolled";n&&i>n?(t.height=n+"px",ct(e,o)):ht(e,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),r=this._getAnchor();vt(this._container,t.add(r))},_adjustPan:function(e){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,r=parseInt(it(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+r,n=this._containerWidth,o=new R(this._containerLeft,-i-this._containerBottom);o._add(yt(this._container));var s=t.layerPointToContainerPoint(o),a=O(this.options.autoPanPadding),u=O(this.options.autoPanPaddingTopLeft||a),l=O(this.options.autoPanPaddingBottomRight||a),c=t.getSize(),h=0,p=0;s.x+n+l.x>c.x&&(h=s.x+n-c.x+l.x),s.x-h-u.x<0&&(h=s.x-u.x),s.y+i+l.y>c.y&&(p=s.y+i-c.y+l.y),s.y-p-u.y<0&&(p=s.y-u.y),(h||p)&&t.fire("autopanstart").panBy([h,p],{animate:e&&"moveend"===e.type})}},_getAnchor:function(){return O(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Kt.mergeOptions({closePopupOnClick:!0}),Kt.include({openPopup:function(e,t,r){return this._initOverlay(Qr,e,t,r).openOn(this),this},closePopup:function(e){return(e=arguments.length?e:this._popup)&&e.close(),this}}),Tr.include({bindPopup:function(e,t){return this._popup=this._initOverlay(Qr,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(this._popup&&this._map){Ut(e);var t=e.layer||e.target;this._popup._source!==t||t instanceof Pr?(this._popup._source=t,this.openPopup(e.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}});var ei=Xr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){Xr.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){Xr.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=Xr.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=nt("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+o(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,r,i=this._map,n=this._container,o=i.latLngToContainerPoint(i.getCenter()),s=i.layerPointToContainerPoint(e),a=this.options.direction,u=n.offsetWidth,l=n.offsetHeight,c=O(this.options.offset),h=this._getAnchor();"top"===a?(t=u/2,r=l):"bottom"===a?(t=u/2,r=0):"center"===a?(t=u/2,r=l/2):"right"===a?(t=0,r=l/2):"left"===a?(t=u,r=l/2):s.x<o.x?(a="right",t=0,r=l/2):(a="left",t=u+2*(c.x+h.x),r=l/2),e=e.subtract(O(t,r,!0)).add(c).add(h),ht(n,"leaflet-tooltip-right"),ht(n,"leaflet-tooltip-left"),ht(n,"leaflet-tooltip-top"),ht(n,"leaflet-tooltip-bottom"),ct(n,"leaflet-tooltip-"+a),vt(n,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&ft(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return O(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Kt.include({openTooltip:function(e,t,r){return this._initOverlay(ei,e,t,r).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),Tr.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ei,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",r={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?r.add=this._openTooltip:(r.mouseover=this._openTooltip,r.mouseout=this.closeTooltip,r.click=this._openTooltip,this._map?this._addFocusListeners():r.add=this._addFocusListeners),this._tooltip.options.sticky&&(r.mousemove=this._moveTooltip),this[t](r),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this)),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t=e.getElement();t&&(It(t,"focus",(function(){this._tooltip._source=e,this.openTooltip()}),this),It(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t=e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0))},_moveTooltip:function(e){var t,r,i=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(t=this._map.mouseEventToContainerPoint(e.originalEvent),r=this._map.containerPointToLayerPoint(t),i=this._map.layerPointToLatLng(r)),this._tooltip.setLatLng(i)}});var ti=Lr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),r=this.options;if(r.html instanceof Element?(st(t),t.appendChild(r.html)):t.innerHTML=!1!==r.html?r.html:"",r.bgPos){var i=O(r.bgPos);t.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});Lr.Default=Cr;var ri=Tr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ke.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){p(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),ot(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(at(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ut(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof R?e:new R(e,e)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,r=this.getPane().children,i=-e(-1/0,1/0),n=0,o=r.length;n<o;n++)t=r[n].style.zIndex,r[n]!==this._container&&t&&(i=e(i,+t));isFinite(i)&&(this.options.zIndex=i+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ke.ielt9){ft(this._container,this.options.opacity);var e=+new Date,t=!1,r=!1;for(var i in this._tiles){var n=this._tiles[i];if(n.current&&n.loaded){var o=Math.min(1,(e-n.loaded)/200);ft(n.el,o),o<1?t=!0:(n.active?r=!0:this._onOpaqueTile(n),n.active=!0)}}r&&!this._noPrune&&this._pruneTiles(),t&&(T(this._fadeFrame),this._fadeFrame=w(this._updateOpacity,this))}},_onOpaqueTile:u,_initContainer:function(){this._container||(this._container=nt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var r in this._levels)r=Number(r),this._levels[r].el.children.length||r===e?(this._levels[r].el.style.zIndex=t-Math.abs(e-r),this._onUpdateLevel(r)):(ot(this._levels[r].el),this._removeTilesAtZoom(r),this._onRemoveLevel(r),delete this._levels[r]);var i=this._levels[e],n=this._map;return i||((i=this._levels[e]={}).el=nt("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=t,i.origin=n.project(n.unproject(n.getPixelOrigin()),e).round(),i.zoom=e,this._setZoomTransform(i,n.getCenter(),n.getZoom()),i.el.offsetWidth,this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:u,_onRemoveLevel:u,_onCreateLevel:u,_pruneTiles:function(){if(this._map){var e,t,r=this._map.getZoom();if(r>this.options.maxZoom||r<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)(t=this._tiles[e]).retain=t.current;for(e in this._tiles)if((t=this._tiles[e]).current&&!t.active){var i=t.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)ot(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,r,i){var n=Math.floor(e/2),o=Math.floor(t/2),s=r-1,a=new R(+n,+o);a.z=+s;var u=this._tileCoordsToKey(a),l=this._tiles[u];return l&&l.active?(l.retain=!0,!0):(l&&l.loaded&&(l.retain=!0),s>i&&this._retainParent(n,o,s,i))},_retainChildren:function(e,t,r,i){for(var n=2*e;n<2*e+2;n++)for(var o=2*t;o<2*t+2;o++){var s=new R(n,o);s.z=r+1;var a=this._tileCoordsToKey(s),u=this._tiles[a];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),r+1<i&&this._retainChildren(n,o,r+1,i))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,r,i){var n=Math.round(t);n=void 0!==this.options.maxZoom&&n>this.options.maxZoom||void 0!==this.options.minZoom&&n<this.options.minZoom?void 0:this._clampZoom(n);var o=this.options.updateWhenZooming&&n!==this._tileZoom;i&&!o||(this._tileZoom=n,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==n&&this._update(e),r||this._pruneTiles(),this._noPrune=!!r),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var r in this._levels)this._setZoomTransform(this._levels[r],e,t)},_setZoomTransform:function(e,t,r){var i=this._map.getZoomScale(r,e.zoom),n=e.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(t,r)).round();ke.any3d?mt(e.el,n,i):vt(e.el,n)},_resetGrid:function(){var e=this._map,t=e.options.crs,r=this._tileSize=this.getTileSize(),i=this._tileZoom,n=this._map.getPixelWorldBounds(this._tileZoom);n&&(this._globalTileRange=this._pxBoundsToTileRange(n)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],i).x/r.x),Math.ceil(e.project([0,t.wrapLng[1]],i).x/r.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],i).y/r.x),Math.ceil(e.project([t.wrapLat[1],0],i).y/r.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(e){var t=this._map,r=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),i=t.getZoomScale(r,this._tileZoom),n=t.project(e,this._tileZoom).floor(),o=t.getSize().divideBy(2*i);return new k(n.subtract(o),n.add(o))},_update:function(e){var t=this._map;if(t){var r=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(e),n=this._pxBoundsToTileRange(i),o=n.getCenter(),s=[],a=this.options.keepBuffer,u=new k(n.getBottomLeft().subtract([a,-a]),n.getTopRight().add([a,-a]));if(!(isFinite(n.min.x)&&isFinite(n.min.y)&&isFinite(n.max.x)&&isFinite(n.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var l in this._tiles){var c=this._tiles[l].coords;c.z===this._tileZoom&&u.contains(new R(c.x,c.y))||(this._tiles[l].current=!1)}if(Math.abs(r-this._tileZoom)>1)this._setView(e,r);else{for(var h=n.min.y;h<=n.max.y;h++)for(var p=n.min.x;p<=n.max.x;p++){var d=new R(p,h);if(d.z=this._tileZoom,this._isValidTile(d)){var f=this._tiles[this._tileCoordsToKey(d)];f?f.current=!0:s.push(d)}}if(s.sort((function(e,t){return e.distanceTo(o)-t.distanceTo(o)})),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var g=document.createDocumentFragment();for(p=0;p<s.length;p++)this._addTile(s[p],g);this._level.el.appendChild(g)}}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var r=this._globalTileRange;if(!t.wrapLng&&(e.x<r.min.x||e.x>r.max.x)||!t.wrapLat&&(e.y<r.min.y||e.y>r.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(e);return M(this.options.bounds).overlaps(i)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,r=this.getTileSize(),i=e.scaleBy(r),n=i.add(r);return[t.unproject(i,e.z),t.unproject(n,e.z)]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),r=new D(t[0],t[1]);return this.options.noWrap||(r=this._map.wrapLatLngBounds(r)),r},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),r=new R(+t[0],+t[1]);return r.z=+t[2],r},_removeTile:function(e){var t=this._tiles[e];t&&(ot(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){ct(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=u,e.onmousemove=u,ke.ielt9&&this.options.opacity<1&&ft(e,this.options.opacity)},_addTile:function(e,t){var r=this._getTilePos(e),n=this._tileCoordsToKey(e),o=this.createTile(this._wrapCoords(e),i(this._tileReady,this,e));this._initTile(o),this.createTile.length<2&&w(i(this._tileReady,this,e,null,o)),vt(o,r),this._tiles[n]={el:o,coords:e,current:!0},t.appendChild(o),this.fire("tileloadstart",{tile:o,coords:e})},_tileReady:function(e,t,r){t&&this.fire("tileerror",{error:t,tile:r,coords:e});var n=this._tileCoordsToKey(e);(r=this._tiles[n])&&(r.loaded=+new Date,this._map._fadeAnimated?(ft(r.el,0),T(this._fadeFrame),this._fadeFrame=w(this._updateOpacity,this)):(r.active=!0,this._pruneTiles()),t||(ct(r.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:r.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ke.ielt9||!this._map._fadeAnimated?w(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new R(this._wrapX?a(e.x,this._wrapX):e.x,this._wrapY?a(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new k(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});var ii=ri.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,(t=p(this,t)).detectRetina&&ke.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),"string"==typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&void 0===t&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var r=document.createElement("img");return It(r,"load",i(this._tileOnLoad,this,t,r)),It(r,"error",i(this._tileOnError,this,t,r)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(r.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(r.referrerPolicy=this.options.referrerPolicy),r.alt="",r.src=this.getTileUrl(e),r},getTileUrl:function(e){var r={r:ke.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-e.y;this.options.tms&&(r.y=i),r["-y"]=i}return g(this._url,t(r,this.options))},_tileOnLoad:function(e,t){ke.ielt9?setTimeout(i(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,r){var i=this.options.errorTileUrl;i&&t.getAttribute("src")!==i&&(t.src=i),e(r,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom;return this.options.zoomReverse&&(e=t-e),e+this.options.zoomOffset},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&((t=this._tiles[e].el).onload=u,t.onerror=u,!t.complete)){t.src=y;var r=this._tiles[e].coords;ot(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:r})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",y),ri.prototype._removeTile.call(this,e)},_tileReady:function(e,t,r){if(this._map&&(!r||r.getAttribute("src")!==y))return ri.prototype._tileReady.call(this,e,t,r)}});function ni(e,t){return new ii(e,t)}var oi=ii.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,r){this._url=e;var i=t({},this.defaultWmsParams);for(var n in r)n in this.options||(i[n]=r[n]);var o=(r=p(this,r)).detectRetina&&ke.retina?2:1,s=this.getTileSize();i.width=s.x*o,i.height=s.y*o,this.wmsParams=i},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,ii.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),r=this._crs,i=F(r.project(t[0]),r.project(t[1])),n=i.min,o=i.max,s=(this._wmsVersion>=1.3&&this._crs===Sr?[n.y,n.x,o.y,o.x]:[n.x,n.y,o.x,o.y]).join(","),a=ii.prototype.getTileUrl.call(this,e);return a+d(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(e,r){return t(this.wmsParams,e),r||this.redraw(),this}});ii.WMS=oi,ni.wms=function(e,t){return new oi(e,t)};var si=Tr.extend({options:{padding:.1},initialize:function(e){p(this,e),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&ct(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var r=this._map.getZoomScale(t,this._zoom),i=this._map.getSize().multiplyBy(.5+this.options.padding),n=this._map.project(this._center,t),o=i.multiplyBy(-r).add(n).subtract(this._map._getNewPixelOrigin(e,t));ke.any3d?mt(this._container,o,r):vt(this._container,o)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),r=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new k(r,r.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ai=si.extend({options:{tolerance:0},getEvents:function(){var e=si.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){si.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");It(e,"mousemove",this._onMouseMove,this),It(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),It(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){T(this._redrawRequest),delete this._ctx,ot(this._container),Ct(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){si.prototype._update.call(this);var e=this._bounds,t=this._container,r=e.getSize(),i=ke.retina?2:1;vt(t,e.min),t.width=i*r.x,t.height=i*r.y,t.style.width=r.x+"px",t.style.height=r.y+"px",ke.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){si.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[o(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,r=t.next,i=t.prev;r?r.prev=i:this._drawLast=i,i?i.next=r:this._drawFirst=r,delete e._order,delete this._layers[o(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if("string"==typeof e.options.dashArray){var t,r,i=e.options.dashArray.split(/[, ]+/),n=[];for(r=0;r<i.length;r++){if(t=Number(i[r]),isNaN(t))return;n.push(t)}e.options._dashArray=n}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||w(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new k,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var r=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,r.x,r.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)e=i.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var r,i,n,o,s=e._parts,a=s.length,u=this._ctx;if(a){for(u.beginPath(),r=0;r<a;r++){for(i=0,n=s[r].length;i<n;i++)o=s[r][i],u[i?"lineTo":"moveTo"](o.x,o.y);t&&u.closePath()}this._fillStroke(u,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,r=this._ctx,i=Math.max(Math.round(e._radius),1),n=(Math.max(Math.round(e._radiusY),1)||i)/i;1!==n&&(r.save(),r.scale(1,n)),r.beginPath(),r.arc(t.x,t.y/n,i,0,2*Math.PI,!1),1!==n&&r.restore(),this._fillStroke(r,e)}},_fillStroke:function(e,t){var r=t.options;r.fill&&(e.globalAlpha=r.fillOpacity,e.fillStyle=r.fillColor||r.color,e.fill(r.fillRule||"evenodd")),r.stroke&&0!==r.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=r.opacity,e.lineWidth=r.weight,e.strokeStyle=r.color,e.lineCap=r.lineCap,e.lineJoin=r.lineJoin,e.stroke())},_onClick:function(e){for(var t,r,i=this._map.mouseEventToLayerPoint(e),n=this._drawFirst;n;n=n.next)(t=n.layer).options.interactive&&t._containsPoint(i)&&("click"!==e.type&&"preclick"!==e.type||!this._map._draggableMoved(t))&&(r=t);this._fireEvent(!!r&&[r],e)},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(ht(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var r,n,o=this._drawFirst;o;o=o.next)(r=o.layer).options.interactive&&r._containsPoint(t)&&(n=r);n!==this._hoveredLayer&&(this._handleMouseOut(e),n&&(ct(this._container,"leaflet-interactive"),this._fireEvent([n],e,"mouseover"),this._hoveredLayer=n)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],e),this._mouseHoverThrottled=!0,setTimeout(i((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(e,t,r){this._map._fireDOMEvent(t,r||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var r=t.next,i=t.prev;r&&(r.prev=i,i?i.next=r:r&&(this._drawFirst=r),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e))}},_bringToBack:function(e){var t=e._order;if(t){var r=t.next,i=t.prev;i&&(i.next=r,r?r.prev=i:i&&(this._drawLast=i),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e))}}});function ui(e){return ke.canvas?new ai(e):null}var li=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ci={_initContainer:function(){this._container=nt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(si.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=li("shape");ct(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=li("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[o(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;ot(t),e.removeInteractiveTarget(t),delete this._layers[o(e)]},_updateStyle:function(e){var t=e._stroke,r=e._fill,i=e.options,n=e._container;n.stroked=!!i.stroke,n.filled=!!i.fill,i.stroke?(t||(t=e._stroke=li("stroke")),n.appendChild(t),t.weight=i.weight+"px",t.color=i.color,t.opacity=i.opacity,i.dashArray?t.dashStyle=m(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=i.lineCap.replace("butt","flat"),t.joinstyle=i.lineJoin):t&&(n.removeChild(t),e._stroke=null),i.fill?(r||(r=e._fill=li("fill")),n.appendChild(r),r.color=i.fillColor||i.color,r.opacity=i.fillOpacity):r&&(n.removeChild(r),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),r=Math.round(e._radius),i=Math.round(e._radiusY||r);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+r+","+i+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){at(e._container)},_bringToBack:function(e){ut(e._container)}},hi=ke.vml?li:J,pi=si.extend({_initContainer:function(){this._container=hi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=hi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ot(this._container),Ct(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){si.prototype._update.call(this);var e=this._bounds,t=e.getSize(),r=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,r.setAttribute("width",t.x),r.setAttribute("height",t.y)),vt(r,e.min),r.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=hi("path");e.options.className&&ct(t,e.options.className),e.options.interactive&&ct(t,"leaflet-interactive"),this._updateStyle(e),this._layers[o(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){ot(e._path),e.removeInteractiveTarget(e._path),delete this._layers[o(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,r=e.options;t&&(r.stroke?(t.setAttribute("stroke",r.color),t.setAttribute("stroke-opacity",r.opacity),t.setAttribute("stroke-width",r.weight),t.setAttribute("stroke-linecap",r.lineCap),t.setAttribute("stroke-linejoin",r.lineJoin),r.dashArray?t.setAttribute("stroke-dasharray",r.dashArray):t.removeAttribute("stroke-dasharray"),r.dashOffset?t.setAttribute("stroke-dashoffset",r.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),r.fill?(t.setAttribute("fill",r.fillColor||r.color),t.setAttribute("fill-opacity",r.fillOpacity),t.setAttribute("fill-rule",r.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,Z(e._parts,t))},_updateCircle:function(e){var t=e._point,r=Math.max(Math.round(e._radius),1),i="a"+r+","+(Math.max(Math.round(e._radiusY),1)||r)+" 0 1,0 ",n=e._empty()?"M0 0":"M"+(t.x-r)+","+t.y+i+2*r+",0 "+i+2*-r+",0 ";this._setPath(e,n)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){at(e._path)},_bringToBack:function(e){ut(e._path)}});function di(e){return ke.svg||ke.vml?new pi(e):null}ke.vml&&pi.include(ci),Kt.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&ui(e)||di(e)}});var fi=Dr.extend({initialize:function(e,t){Dr.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=M(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});pi.create=hi,pi.pointsToPath=Z,Mr.geometryToLayer=Ur,Mr.coordsToLatLng=jr,Mr.coordsToLatLngs=Hr,Mr.latLngToCoords=Gr,Mr.latLngsToCoords=Vr,Mr.getFeature=qr,Mr.asFeature=Wr,Kt.mergeOptions({boxZoom:!0});var gi=Qt.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){It(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ct(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ot(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),$e(),Et(),this._startPoint=this._map.mouseEventToContainerPoint(e),It(document,{contextmenu:Ut,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=nt("div","leaflet-zoom-box",this._container),ct(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new k(this._point,this._startPoint),r=t.getSize();vt(this._box,t.min),this._box.style.width=r.x+"px",this._box.style.height=r.y+"px"},_finish:function(){this._moved&&(ot(this._box),ht(this._container,"leaflet-crosshair")),Je(),xt(),Ct(document,{contextmenu:Ut,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var t=new D(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Kt.addInitHook("addHandler","boxZoom",gi),Kt.mergeOptions({doubleClickZoom:!0});var mi=Qt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,r=t.getZoom(),i=t.options.zoomDelta,n=e.originalEvent.shiftKey?r-i:r+i;"center"===t.options.doubleClickZoom?t.setZoom(n):t.setZoomAround(e.containerPoint,n)}});Kt.addInitHook("addHandler","doubleClickZoom",mi),Kt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var vi=Qt.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new ir(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}ct(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ht(this._map._container,"leaflet-grab"),ht(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=M(this._map.options.maxBounds);this._offsetLimit=F(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,r=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(r),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),r=this._initialWorldOffset,i=this._draggable._newPos.x,n=(i-t+r)%e+t-r,o=(i+t+r)%e-t-r,s=Math.abs(n+r)<Math.abs(o+r)?n:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(e){var t=this._map,r=t.options,i=!r.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),i)t.fire("moveend");else{this._prunePositions(+new Date);var n=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,s=r.easeLinearity,a=n.multiplyBy(s/o),u=a.distanceTo([0,0]),l=Math.min(r.inertiaMaxSpeed,u),c=a.multiplyBy(l/u),h=l/(r.inertiaDeceleration*s),p=c.multiplyBy(-h/2).round();p.x||p.y?(p=t._limitOffset(p,t.options.maxBounds),w((function(){t.panBy(p,{duration:h,easeLinearity:s,noMoveStart:!0,animate:!0})}))):t.fire("moveend")}}});Kt.addInitHook("addHandler","dragging",vi),Kt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var yi=Qt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),It(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ct(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,r=e.scrollTop||t.scrollTop,i=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(i,r)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t,r,i=this._panKeys={},n=this.keyCodes;for(t=0,r=n.left.length;t<r;t++)i[n.left[t]]=[-1*e,0];for(t=0,r=n.right.length;t<r;t++)i[n.right[t]]=[e,0];for(t=0,r=n.down.length;t<r;t++)i[n.down[t]]=[0,e];for(t=0,r=n.up.length;t<r;t++)i[n.up[t]]=[0,-1*e]},_setZoomDelta:function(e){var t,r,i=this._zoomKeys={},n=this.keyCodes;for(t=0,r=n.zoomIn.length;t<r;t++)i[n.zoomIn[t]]=e;for(t=0,r=n.zoomOut.length;t<r;t++)i[n.zoomOut[t]]=-e},_addHooks:function(){It(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ct(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,r=e.keyCode,i=this._map;if(r in this._panKeys)i._panAnim&&i._panAnim._inProgress||(t=this._panKeys[r],e.shiftKey&&(t=O(t).multiplyBy(3)),i.panBy(t),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds));else if(r in this._zoomKeys)i.setZoom(i.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[r]);else{if(27!==r||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}Ut(e)}}});Kt.addInitHook("addHandler","keyboard",yi),Kt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var _i=Qt.extend({addHooks:function(){It(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ct(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=Gt(e),r=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var n=Math.max(r-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),n),Ut(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),r=this._map.options.zoomSnap||0;e._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),n=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,o=r?Math.ceil(n/r)*r:n,s=e._limitZoom(t+(this._delta>0?o:-o))-t;this._delta=0,this._startTime=null,s&&("center"===e.options.scrollWheelZoom?e.setZoom(t+s):e.setZoomAround(this._lastMousePos,t+s))}});Kt.addInitHook("addHandler","scrollWheelZoom",_i);Kt.mergeOptions({tapHold:ke.touchNative&&ke.safari&&ke.mobile,tapTolerance:15});var Ei=Qt.extend({addHooks:function(){It(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ct(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),1===e.touches.length){var t=e.touches[0];this._startPos=this._newPos=new R(t.clientX,t.clientY),this._holdTimeout=setTimeout(i((function(){this._cancel(),this._isTapValid()&&(It(document,"touchend",Mt),It(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))}),this),600),It(document,"touchend touchcancel contextmenu",this._cancel,this),It(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){Ct(document,"touchend",Mt),Ct(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),Ct(document,"touchend touchcancel contextmenu",this._cancel,this),Ct(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new R(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var r=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});r._simulated=!0,t.target.dispatchEvent(r)}});Kt.addInitHook("addHandler","tapHold",Ei),Kt.mergeOptions({touchZoom:ke.touch,bounceAtZoomLimits:!0});var xi=Qt.extend({addHooks:function(){ct(this._map._container,"leaflet-touch-zoom"),It(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ht(this._map._container,"leaflet-touch-zoom"),Ct(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var r=t.mouseEventToContainerPoint(e.touches[0]),i=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(r.add(i)._divideBy(2))),this._startDist=r.distanceTo(i),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),It(document,"touchmove",this._onTouchMove,this),It(document,"touchend touchcancel",this._onTouchEnd,this),Mt(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,r=t.mouseEventToContainerPoint(e.touches[0]),n=t.mouseEventToContainerPoint(e.touches[1]),o=r.distanceTo(n)/this._startDist;if(this._zoom=t.getScaleZoom(o,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&o<1||this._zoom>t.getMaxZoom()&&o>1)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var s=r._add(n)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===s.x&&0===s.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),T(this._animRequest);var a=i(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=w(a,this,!0),Mt(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,T(this._animRequest),Ct(document,"touchmove",this._onTouchMove,this),Ct(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Kt.addInitHook("addHandler","touchZoom",xi),Kt.BoxZoom=gi,Kt.DoubleClickZoom=mi,Kt.Drag=vi,Kt.Keyboard=yi,Kt.ScrollWheelZoom=_i,Kt.TapHold=Ei,Kt.TouchZoom=xi,e.Bounds=k,e.Browser=ke,e.CRS=H,e.Canvas=ai,e.Circle=kr,e.CircleMarker=Or,e.Class=I,e.Control=zt,e.DivIcon=ti,e.DivOverlay=Xr,e.DomEvent=qt,e.DomUtil=At,e.Draggable=ir,e.Evented=N,e.FeatureGroup=Ir,e.GeoJSON=Mr,e.GridLayer=ri,e.Handler=Qt,e.Icon=Lr,e.ImageOverlay=Jr,e.LatLng=U,e.LatLngBounds=D,e.Layer=Tr,e.LayerGroup=Ar,e.LineUtil=gr,e.Map=Kt,e.Marker=Rr,e.Mixin=tr,e.Path=Pr,e.Point=R,e.PolyUtil=yr,e.Polygon=Dr,e.Polyline=Fr,e.Popup=Qr,e.PosAnimation=Wt,e.Projection=xr,e.Rectangle=fi,e.Renderer=si,e.SVG=pi,e.SVGOverlay=Yr,e.TileLayer=ii,e.Tooltip=ei,e.Transformation=W,e.Util=A,e.VideoOverlay=Zr,e.bind=i,e.bounds=F,e.canvas=ui,e.circle=function(e,t,r){return new kr(e,t,r)},e.circleMarker=function(e,t){return new Or(e,t)},e.control=$t,e.divIcon=function(e){return new ti(e)},e.extend=t,e.featureGroup=function(e,t){return new Ir(e,t)},e.geoJSON=zr,e.geoJson=$r,e.gridLayer=function(e){return new ri(e)},e.icon=function(e){return new Lr(e)},e.imageOverlay=function(e,t,r){return new Jr(e,t,r)},e.latLng=B,e.latLngBounds=M,e.layerGroup=function(e,t){return new Ar(e,t)},e.map=function(e,t){return new Kt(e,t)},e.marker=function(e,t){return new Rr(e,t)},e.point=O,e.polygon=function(e,t){return new Dr(e,t)},e.polyline=function(e,t){return new Fr(e,t)},e.popup=function(e,t){return new Qr(e,t)},e.rectangle=function(e,t){return new fi(e,t)},e.setOptions=p,e.stamp=o,e.svg=di,e.svgOverlay=function(e,t,r){return new Yr(e,t,r)},e.tileLayer=ni,e.tooltip=function(e,t){return new ei(e,t)},e.transformation=K,e.version="1.9.2",e.videoOverlay=function(e,t,r){return new Zr(e,t,r)};var bi=window.L;e.noConflict=function(){return window.L=bi,this},window.L=e}(t)},5443:e=>{"use strict";var t={};function r(e,r,i){i||(i=Error);var n=function(e){var t,i;function n(t,i,n){return e.call(this,function(e,t,i){return"string"==typeof r?r:r(e,t,i)}(t,i,n))||this}return i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,n}(i);n.prototype.name=i.name,n.prototype.code=e,t[e]=n}function i(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}r("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,o,s,a,u;if("string"==typeof t&&(o="not ",t.substr(0,o.length)===o)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))s="The ".concat(e," ").concat(n," ").concat(i(t,"type"));else{var l=("number"!=typeof u&&(u=0),u+".".length>(a=e).length||-1===a.indexOf(".",u)?"argument":"property");s='The "'.concat(e,'" ').concat(l," ").concat(n," ").concat(i(t,"type"))}return s+". Received type ".concat(typeof r)}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},7029:(e,t,r)=>{"use strict";var i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=l;var n=r(6625),o=r(5329);r(7840)(l,n);for(var s=i(o.prototype),a=0;a<s.length;a++){var u=s[a];l.prototype[u]||(l.prototype[u]=o.prototype[u])}function l(e){if(!(this instanceof l))return new l(e);n.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||process.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},9012:(e,t,r)=>{"use strict";e.exports=n;var i=r(9413);function n(e){if(!(this instanceof n))return new n(e);i.call(this,e)}r(7840)(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},6625:(e,t,r)=>{"use strict";var i;e.exports=w,w.ReadableState=S,r(536).EventEmitter;var n,o=function(e,t){return e.listeners(t).length},s=r(3863),a=r(7871).Buffer,u=r.g.Uint8Array||function(){},l=r(4971);n=l&&l.debuglog?l.debuglog("stream"):function(){};var c,h,p,d=r(7371),f=r(3593),g=r(2738).getHighWaterMark,m=r(5443).q,v=m.ERR_INVALID_ARG_TYPE,y=m.ERR_STREAM_PUSH_AFTER_EOF,_=m.ERR_METHOD_NOT_IMPLEMENTED,E=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(7840)(w,s);var x=f.errorOrDestroy,b=["error","close","destroy","pause","resume"];function S(e,t,n){i=i||r(7029),e=e||{},"boolean"!=typeof n&&(n=t instanceof i),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",n),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(c||(c=r(8506).s),this.decoder=new c(e.encoding),this.encoding=e.encoding)}function w(e){if(i=i||r(7029),!(this instanceof w))return new w(e);var t=this instanceof i;this._readableState=new S(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function T(e,t,r,i,o){n("readableAddChunk",t);var s,l=e._readableState;if(null===t)l.reading=!1,function(e,t){if(n("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?C(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,N(e)))}}(e,l);else if(o||(s=function(e,t){var r,i;return i=t,a.isBuffer(i)||i instanceof u||"string"==typeof t||void 0===t||e.objectMode||(r=new v("chunk",["string","Buffer","Uint8Array"],t)),r}(l,t)),s)x(e,s);else if(l.objectMode||t&&t.length>0)if("string"==typeof t||l.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),i)l.endEmitted?x(e,new E):A(e,l,t,!0);else if(l.ended)x(e,new y);else{if(l.destroyed)return!1;l.reading=!1,l.decoder&&!r?(t=l.decoder.write(t),l.objectMode||0!==t.length?A(e,l,t,!1):R(e,l)):A(e,l,t,!1)}else i||(l.reading=!1,R(e,l));return!l.ended&&(l.length<l.highWaterMark||0===l.length)}function A(e,t,r,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&C(e)),R(e,t)}Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),w.prototype.destroy=f.destroy,w.prototype._undestroy=f.undestroy,w.prototype._destroy=function(e,t){t(e)},w.prototype.push=function(e,t){var r,i=this._readableState;return i.objectMode?r=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=a.from(e,t),t=""),r=!0),T(this,e,t,!1,r)},w.prototype.unshift=function(e){return T(this,e,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(e){c||(c=r(8506).s);var t=new c(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,n="";null!==i;)n+=t.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var I=1073741824;function L(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=I?e=I:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function C(e){var t=e._readableState;n("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(n("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(N,e))}function N(e){var t=e._readableState;n("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,D(e)}function R(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(P,e,t))}function P(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(n("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function O(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function k(e){n("readable nexttick read 0"),e.read(0)}function F(e,t){n("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),D(e),t.flowing&&!t.reading&&e.read(0)}function D(e){var t=e._readableState;for(n("flow",t.flowing);t.flowing&&null!==e.read(););}function M(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function U(e){var t=e._readableState;n("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(B,t,e))}function B(e,t){if(n("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function j(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}w.prototype.read=function(e){n("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return n("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?U(this):C(this),null;if(0===(e=L(e,t))&&t.ended)return 0===t.length&&U(this),null;var i,o=t.needReadable;return n("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&n("length less than watermark",o=!0),t.ended||t.reading?n("reading or ended",o=!1):o&&(n("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=L(r,t))),null===(i=e>0?M(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&U(this)),null!==i&&this.emit("data",i),i},w.prototype._read=function(e){x(this,new _("_read()"))},w.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,n("pipe count=%d opts=%j",i.pipesCount,t);var s=t&&!1===t.end||e===process.stdout||e===process.stderr?f:a;function a(){n("onend"),e.end()}i.endEmitted?process.nextTick(s):r.once("end",s),e.on("unpipe",(function t(o,s){n("onunpipe"),o===r&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,n("cleanup"),e.removeListener("close",p),e.removeListener("finish",d),e.removeListener("drain",u),e.removeListener("error",h),e.removeListener("unpipe",t),r.removeListener("end",a),r.removeListener("end",f),r.removeListener("data",c),l=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}));var u=function(e){return function(){var t=e._readableState;n("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,D(e))}}(r);e.on("drain",u);var l=!1;function c(t){n("ondata");var o=e.write(t);n("dest.write",o),!1===o&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==j(i.pipes,e))&&!l&&(n("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function h(t){n("onerror",t),f(),e.removeListener("error",h),0===o(e,"error")&&x(e,t)}function p(){e.removeListener("finish",d),f()}function d(){n("onfinish"),e.removeListener("close",p),f()}function f(){n("unpipe"),r.unpipe(e)}return r.on("data",c),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events.error?Array.isArray(e._events.error)?e._events.error.unshift(r):e._events.error=[r,e._events.error]:e.on(t,r)}(e,"error",h),e.once("close",p),e.once("finish",d),e.emit("pipe",r),i.flowing||(n("pipe resume"),r.resume()),e},w.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<n;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=j(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},w.prototype.on=function(e,t){var r=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,n("on readable",i.length,i.reading),i.length?C(this):i.reading||process.nextTick(k,this))),r},w.prototype.addListener=w.prototype.on,w.prototype.removeListener=function(e,t){var r=s.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(O,this),r},w.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(O,this),t},w.prototype.resume=function(){var e=this._readableState;return e.flowing||(n("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(F,e,t))}(this,e)),e.paused=!1,this},w.prototype.pause=function(){return n("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(n("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},w.prototype.wrap=function(e){var t=this,r=this._readableState,i=!1;for(var o in e.on("end",(function(){if(n("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(o){n("wrapped data"),r.decoder&&(o=r.decoder.write(o)),r.objectMode&&null==o||(r.objectMode||o&&o.length)&&(t.push(o)||(i=!0,e.pause()))})),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var s=0;s<b.length;s++)e.on(b[s],this.emit.bind(this,b[s]));return this._read=function(t){n("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(w.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=r(2299)),h(this)}),Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(w.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(w.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),w._fromList=M,Object.defineProperty(w.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(w.from=function(e,t){return void 0===p&&(p=r(2200)),p(w,e,t)})},9413:(e,t,r)=>{"use strict";e.exports=c;var i=r(5443).q,n=i.ERR_METHOD_NOT_IMPLEMENTED,o=i.ERR_MULTIPLE_CALLBACK,s=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=i.ERR_TRANSFORM_WITH_LENGTH_0,u=r(7029);function l(e,t){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(null===i)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),i(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);u.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function h(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?p(this,null,null):this._flush((function(t,r){p(e,t,r)}))}function p(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}r(7840)(c,u),c.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},c.prototype._transform=function(e,t,r){r(new n("_transform()"))},c.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},c.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},c.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}},5329:(e,t,r)=>{"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var i=e.entry;for(e.entry=null;i;){var n=i.callback;t.pendingcb--,n(undefined),i=i.next}t.corkedRequestsFree.next=e}(t,e)}}var n;e.exports=w,w.WritableState=S;var o,s={deprecate:r(9757)},a=r(3863),u=r(7871).Buffer,l=r.g.Uint8Array||function(){},c=r(3593),h=r(2738).getHighWaterMark,p=r(5443).q,d=p.ERR_INVALID_ARG_TYPE,f=p.ERR_METHOD_NOT_IMPLEMENTED,g=p.ERR_MULTIPLE_CALLBACK,m=p.ERR_STREAM_CANNOT_PIPE,v=p.ERR_STREAM_DESTROYED,y=p.ERR_STREAM_NULL_VALUES,_=p.ERR_STREAM_WRITE_AFTER_END,E=p.ERR_UNKNOWN_ENCODING,x=c.errorOrDestroy;function b(){}function S(e,t,o){n=n||r(7029),e=e||{},"boolean"!=typeof o&&(o=t instanceof n),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=h(this,e,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if("function"!=typeof n)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,n){--t.pendingcb,r?(process.nextTick(n,i),process.nextTick(N,e,t),e._writableState.errorEmitted=!0,x(e,i)):(n(i),e._writableState.errorEmitted=!0,x(e,i),N(e,t))}(e,r,i,t,n);else{var o=L(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||I(e,r),i?process.nextTick(A,e,r,o,n):A(e,r,o,n)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function w(e){var t=this instanceof(n=n||r(7029));if(!t&&!o.call(w,this))return new w(e);this._writableState=new S(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function T(e,t,r,i,n,o,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new v("write")):r?e._writev(n,t.onwrite):e._write(n,o,t.onwrite),t.sync=!1}function A(e,t,r,i){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),N(e,t)}function I(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var a=0,u=!0;r;)o[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;o.allBuffers=u,T(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,c=r.encoding,h=r.callback;if(T(e,t,!1,t.objectMode?1:l.length,l,c,h),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function L(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(e,t){e._final((function(r){t.pendingcb--,r&&x(e,r),t.prefinished=!0,e.emit("prefinish"),N(e,t)}))}function N(e,t){var r=L(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(C,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}r(7840)(w,a),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(e){return!!o.call(this,e)||this===w&&e&&e._writableState instanceof S}})):o=function(e){return e instanceof this},w.prototype.pipe=function(){x(this,new m)},w.prototype.write=function(e,t,r){var i,n=this._writableState,o=!1,s=!n.objectMode&&(i=e,u.isBuffer(i)||i instanceof l);return s&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"==typeof t&&(r=t,t=null),s?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=b),n.ending?function(e,t){var r=new _;x(e,r),process.nextTick(t,r)}(this,r):(s||function(e,t,r,i){var n;return null===r?n=new y:"string"==typeof r||t.objectMode||(n=new d("chunk",["string","Buffer"],r)),!n||(x(e,n),process.nextTick(i,n),!1)}(this,n,e,r))&&(n.pendingcb++,o=function(e,t,r,i,n,o){if(!r){var s=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,r)),t}(t,i,n);i!==s&&(r=!0,n="buffer",i=s)}var a=t.objectMode?1:i.length;t.length+=a;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else T(e,t,!1,a,i,n,o);return l}(this,n,s,e,t,r)),o},w.prototype.cork=function(){this._writableState.corked++},w.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||I(this,e))},w.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new E(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(w.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),w.prototype._write=function(e,t,r){r(new f("_write()"))},w.prototype._writev=null,w.prototype.end=function(e,t,r){var i=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,r){t.ending=!0,N(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,i,r),this},Object.defineProperty(w.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),w.prototype.destroy=c.destroy,w.prototype._undestroy=c.undestroy,w.prototype._destroy=function(e,t){t(e)}},2299:(e,t,r)=>{"use strict";var i;function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=r(8275),s=Symbol("lastResolve"),a=Symbol("lastReject"),u=Symbol("error"),l=Symbol("ended"),c=Symbol("lastPromise"),h=Symbol("handlePromise"),p=Symbol("stream");function d(e,t){return{value:e,done:t}}function f(e){var t=e[s];if(null!==t){var r=e[p].read();null!==r&&(e[c]=null,e[s]=null,e[a]=null,t(d(r,!1)))}}function g(e){process.nextTick(f,e)}var m=Object.getPrototypeOf((function(){})),v=Object.setPrototypeOf((n(i={get stream(){return this[p]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[l])return Promise.resolve(d(void 0,!0));if(this[p].destroyed)return new Promise((function(t,r){process.nextTick((function(){e[u]?r(e[u]):t(d(void 0,!0))}))}));var r,i=this[c];if(i)r=new Promise(function(e,t){return function(r,i){e.then((function(){t[l]?r(d(void 0,!0)):t[h](r,i)}),i)}}(i,this));else{var n=this[p].read();if(null!==n)return Promise.resolve(d(n,!1));r=new Promise(this[h])}return this[c]=r,r}},Symbol.asyncIterator,(function(){return this})),n(i,"return",(function(){var e=this;return new Promise((function(t,r){e[p].destroy(null,(function(e){e?r(e):t(d(void 0,!0))}))}))})),i),m);e.exports=function(e){var t,r=Object.create(v,(n(t={},p,{value:e,writable:!0}),n(t,s,{value:null,writable:!0}),n(t,a,{value:null,writable:!0}),n(t,u,{value:null,writable:!0}),n(t,l,{value:e._readableState.endEmitted,writable:!0}),n(t,h,{value:function(e,t){var i=r[p].read();i?(r[c]=null,r[s]=null,r[a]=null,e(d(i,!1))):(r[s]=e,r[a]=t)},writable:!0}),t));return r[c]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[c]=null,r[s]=null,r[a]=null,t(e)),void(r[u]=e)}var i=r[s];null!==i&&(r[c]=null,r[s]=null,r[a]=null,i(d(void 0,!0))),r[l]=!0})),e.on("readable",g.bind(null,r)),r}},7371:(e,t,r)=>{"use strict";function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=r(7871).Buffer,a=r(1139).inspect,u=a&&a.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r;return t=e,r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,r,i,n=s.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,r=n,i=a,s.prototype.copy.call(t,r,i),a+=o.data.length,o=o.next;return n}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,i=t.data;for(e-=i.length;t=t.next;){var n=t.data,o=e>n.length?n.length:e;if(o===n.length?i+=n:i+=n.slice(0,e),0==(e-=o)){o===n.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=n.slice(o));break}++r}return this.length-=r,i}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),r=this.head,i=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var n=r.data,o=e>n.length?n.length:e;if(n.copy(t,t.length-e,0,o),0==(e-=o)){o===n.length?(++i,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=n.slice(o));break}++i}return this.length-=i,t}},{key:u,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],r&&o(t.prototype,r),e}()},3593:e=>{"use strict";function t(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,n){var o=this,s=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return s||a?(n?n(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(i,this,e)):process.nextTick(i,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!n&&e?o._writableState?o._writableState.errorEmitted?process.nextTick(r,o):(o._writableState.errorEmitted=!0,process.nextTick(t,o,e)):process.nextTick(t,o,e):n?(process.nextTick(r,o),n(e)):process.nextTick(r,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,i=e._writableState;r&&r.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}}},8275:(e,t,r)=>{"use strict";var i=r(5443).q.ERR_STREAM_PREMATURE_CLOSE;function n(){}e.exports=function e(t,r,o){if("function"==typeof r)return e(t,null,r);r||(r={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];e.apply(this,i)}}}(o||n);var s=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,u=function(){t.writable||c()},l=t._writableState&&t._writableState.finished,c=function(){a=!1,l=!0,s||o.call(t)},h=t._readableState&&t._readableState.endEmitted,p=function(){s=!1,h=!0,a||o.call(t)},d=function(e){o.call(t,e)},f=function(){var e;return s&&!h?(t._readableState&&t._readableState.ended||(e=new i),o.call(t,e)):a&&!l?(t._writableState&&t._writableState.ended||(e=new i),o.call(t,e)):void 0},g=function(){t.req.on("finish",c)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",c),t.on("abort",f),t.req?g():t.on("request",g)):a&&!t._writableState&&(t.on("end",u),t.on("close",u)),t.on("end",p),t.on("finish",c),!1!==r.error&&t.on("error",d),t.on("close",f),function(){t.removeListener("complete",c),t.removeListener("abort",f),t.removeListener("request",g),t.req&&t.req.removeListener("finish",c),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",c),t.removeListener("end",p),t.removeListener("error",d),t.removeListener("close",f)}}},2200:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},7118:(e,t,r)=>{"use strict";var i,n=r(5443).q,o=n.ERR_MISSING_ARGS,s=n.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function u(e,t,n,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;e.on("close",(function(){a=!0})),void 0===i&&(i=r(8275)),i(e,{readable:t,writable:n},(function(e){if(e)return o(e);a=!0,o()}));var u=!1;return function(t){if(!a&&!u)return u=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new s("pipe"))}}function l(e){e()}function c(e,t){return e.pipe(t)}function h(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i,n=h(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var s=t.map((function(e,r){var o=r<t.length-1;return u(e,o,r>0,(function(e){i||(i=e),e&&s.forEach(l),o||(s.forEach(l),n(i))}))}));return t.reduce(c)}},2738:(e,t,r)=>{"use strict";var i=r(5443).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,n){var o=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,n,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new i(n?r:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},3863:(e,t,r)=>{e.exports=r(536).EventEmitter},2719:(e,t,r)=>{(t=e.exports=r(6625)).Stream=t,t.Readable=t,t.Writable=r(5329),t.Duplex=r(7029),t.Transform=r(9413),t.PassThrough=r(9012),t.finished=r(8275),t.pipeline=r(7118)},4813:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BlankNode:()=>D,DataFactory:()=>P,DefaultGraph:()=>U,Lexer:()=>m,Literal:()=>F,NamedNode:()=>k,Parser:()=>K,Quad:()=>H,Store:()=>se,StreamParser:()=>le,StreamWriter:()=>ce,Term:()=>O,Triple:()=>H,Util:()=>i,Variable:()=>M,Writer:()=>re,default:()=>he,termFromId:()=>B,termToId:()=>j});var i={};r.r(i),r.d(i,{inDefaultGraph:()=>b,isBlankNode:()=>y,isDefaultGraph:()=>x,isLiteral:()=>_,isNamedNode:()=>v,isVariable:()=>E,prefix:()=>S,prefixes:()=>w});const n="http://www.w3.org/1999/02/22-rdf-syntax-ns#",o="http://www.w3.org/2001/XMLSchema#",s="http://www.w3.org/2000/10/swap/",a={xsd:{decimal:`${o}decimal`,boolean:`${o}boolean`,double:`${o}double`,integer:`${o}integer`,string:`${o}string`},rdf:{type:`${n}type`,nil:`${n}nil`,first:`${n}first`,rest:`${n}rest`,langString:`${n}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${s}reify#forSome`,forAll:`${s}reify#forAll`},log:{implies:`${s}log#implies`}};var u=r(5293),l=r.n(u);const{xsd:c}=a,h=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,p={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},d=/[\x00-\x20<>\\"\{\}\|\^\`]/,f={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},g=/$0^/;class m{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const e in this)!(e in f)&&this[e]instanceof RegExp&&(this[e]=g)}else this._n3Mode=!1!==e.n3;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let r=this._input,i=r.length;for(;;){let e,s;for(;e=this._newline.exec(r);)this._comments&&(s=this._comment.exec(e[0]))&&n("comment",s[1],"",this._line,e[0].length),r=r.substr(e[0].length,r.length),i=r.length,this._line++;if(!e&&(e=this._whitespace.exec(r))&&(r=r.substr(e[0].length,r.length)),this._endOfFile.test(r))return t&&(this._comments&&(s=this._comment.exec(r))&&n("comment",s[1],"",this._line,r.length),r=null,n("eof","","",this._line,0)),this._input=r;const a=this._line,u=r[0];let l="",h="",p="",f=null,g=0,m=!1;switch(u){case"^":if(r.length<3)break;if("^"!==r[1]){this._n3Mode&&(g=1,l="^");break}if(this._previousMarker="^^",r=r.substr(2),"<"!==r[0]){m=!0;break}case"<":if(f=this._unescapedIri.exec(r))l="IRI",h=f[1];else if(f=this._iri.exec(r)){if(h=this._unescape(f[1]),null===h||d.test(h))return o(this);l="IRI"}else r.length>1&&"<"===r[1]?(l="<<",g=2):this._n3Mode&&r.length>1&&"="===r[1]&&(l="inverse",g=2,h=">");break;case">":r.length>1&&">"===r[1]&&(l=">>",g=2);break;case"_":((f=this._blank.exec(r))||t&&(f=this._blank.exec(`${r} `)))&&(l="blank",p="_",h=f[1]);break;case'"':if(f=this._simpleQuotedString.exec(r))h=f[1];else if(({value:h,matchLength:g}=this._parseLiteral(r)),null===h)return o(this);null===f&&0===g||(l="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(f=this._simpleApostropheString.exec(r))h=f[1];else if(({value:h,matchLength:g}=this._parseLiteral(r)),null===h)return o(this);null===f&&0===g||(l="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(f=this._variable.exec(r))&&(l="var",h=f[0]);break;case"@":"literal"===this._previousMarker&&(f=this._langcode.exec(r))?(l="langcode",h=f[1]):(f=this._keyword.exec(r))&&(l=f[0]);break;case".":if(1===r.length?t:r[1]<"0"||r[1]>"9"){l=".",g=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(f=this._number.exec(r)||t&&(f=this._number.exec(`${r} `)))&&(l="literal",h=f[0],p="string"==typeof f[1]?c.double:"string"==typeof f[2]?c.decimal:c.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(f=this._sparqlKeyword.exec(r))?l=f[0].toUpperCase():m=!0;break;case"f":case"t":(f=this._boolean.exec(r))?(l="literal",h=f[0],p=c.boolean):m=!0;break;case"a":(f=this._shortPredicates.exec(r))?(l="abbreviation",h="a"):m=!0;break;case"=":this._n3Mode&&r.length>1&&(l="abbreviation",">"!==r[1]?(g=1,h="="):(g=2,h=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":this._lineMode||(g=1,l=u);break;default:m=!0}if(m&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(f=this._prefix.exec(r))?((f=this._prefixed.exec(r))||t&&(f=this._prefixed.exec(`${r} `)))&&(l="prefixed",p=f[1]||"",h=this._unescape(f[2])):(l="prefix",h=f[1]||"")),"^^"===this._previousMarker)switch(l){case"prefixed":l="type";break;case"IRI":l="typeIRI";break;default:l=""}if(!l)return t||!/^'''|^"""/.test(r)&&/\n|\r/.test(r)?o(this):this._input=r;const v=g||f[0].length,y=n(l,h,p,a,v);this.previousToken=y,this._previousMarker=l,r=r.substr(v,r.length)}function n(t,n,o,s,a){const u=r?i-r.length:i,l={type:t,value:n,prefix:o,line:s,start:u,end:u+a};return e(null,l),l}function o(t){e(t._syntaxError(/^\S*/.exec(r)[0]))}}_unescape(e){let t=!1;const r=e.replace(h,((e,r,i,n)=>{if("string"==typeof r)return String.fromCharCode(Number.parseInt(r,16));if("string"==typeof i){let e=Number.parseInt(i,16);return e<=65535?String.fromCharCode(Number.parseInt(i,16)):String.fromCharCode(55296+((e-=65536)>>10),56320+(1023&e))}return n in p?p[n]:(t=!0,"")}));return t?null:r}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],r=t.length;let i=Math.max(this._literalClosingPos,r);for(;(i=e.indexOf(t,i))>0;){let t=0;for(;"\\"===e[i-t-1];)t++;if(t%2==0){const t=e.substring(r,i),n=t.split(/\r\n|\r|\n/).length-1,o=i+r;if(1===r&&0!==n||3===r&&this._lineMode)break;return this._line+=n,{value:this._unescape(t),matchLength:o}}i++}this._literalClosingPos=e.length-r+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\ufeff")?e.substr(1):e}tokenize(e,t){if(this._line=1,"string"==typeof e){if(this._input=this._readStartingBom(e),"function"!=typeof t){const e=[];let t;if(this._tokenizeToEnd(((r,i)=>r?t=r:e.push(i)),!0),t)throw t;return e}l()((()=>this._tokenizeToEnd(t,!0)))}else this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",(e=>{null!==this._input&&0!==e.length&&(this._pendingBuffer&&(e=Buffer.concat([this._pendingBuffer,e]),this._pendingBuffer=null),128&e[e.length-1]?this._pendingBuffer=e:(void 0===this._input?this._input=this._readStartingBom("string"==typeof e?e:e.toString()):this._input+=e,this._tokenizeToEnd(t,!1)))})),e.on("end",(()=>{"string"==typeof this._input&&this._tokenizeToEnd(t,!0)})),e.on("error",t)}}function v(e){return!!e&&"NamedNode"===e.termType}function y(e){return!!e&&"BlankNode"===e.termType}function _(e){return!!e&&"Literal"===e.termType}function E(e){return!!e&&"Variable"===e.termType}function x(e){return!!e&&"DefaultGraph"===e.termType}function b(e){return x(e.graph)}function S(e,t){return w({"":e.value||e},t)("")}function w(e,t){const r=Object.create(null);for(const t in e)i(t,e[t]);function i(e,i){if("string"==typeof i){const n=Object.create(null);r[e]=e=>n[e]||(n[e]=t.namedNode(i+e))}else if(!(e in r))throw new Error(`Unknown prefix: ${e}`);return r[e]}return t=t||P,i}const{rdf:T,xsd:A}=a;let I,L=0;const C=/^"(.*".*)(?="[^"]*$)/,N=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,R={namedNode:function(e){return new k(e)},blankNode:function(e){return new D(e||"n3-"+L++)},variable:function(e){return new M(e)},literal:function(e,t){if("string"==typeof t)return new F(`"${e}"@${t.toLowerCase()}`);let r=t?t.value:"";return""===r&&("boolean"==typeof e?r=A.boolean:"number"==typeof e&&(Number.isFinite(e)?r=Number.isInteger(e)?A.integer:A.double:(r=A.double,Number.isNaN(e)||(e=e>0?"INF":"-INF")))),""===r||r===A.string?new F(`"${e}"`):new F(`"${e}"^^${r}`)},defaultGraph:function(){return I},quad:q,triple:q},P=R;class O{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof O?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class k extends O{get termType(){return"NamedNode"}}class F extends O{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&"@"===e[t++]?e.substr(t).toLowerCase():""}get datatype(){return new k(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,r=t<e.length?e[t]:"";return"^"===r?e.substr(t+2):"@"!==r?A.string:T.langString}equals(e){return e instanceof F?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class D extends O{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class M extends O{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class U extends O{constructor(){return super(""),I||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}function B(e,t){if(t=t||R,!e)return t.defaultGraph();switch(e[0]){case"?":return t.variable(e.substr(1));case"_":return t.blankNode(e.substr(2));case'"':if(t===R)return new F(e);if('"'===e[e.length-1])return t.literal(e.substr(1,e.length-2));const r=e.lastIndexOf('"',e.length-1);return t.literal(e.substr(1,r-1),"@"===e[r+1]?e.substr(r+2):t.namedNode(e.substr(r+3)));case"<":const i=N.exec(e);return t.quad(B(V(i[1]),t),B(V(i[2]),t),B(V(i[3]),t),i[4]&&B(V(i[4]),t));default:return t.namedNode(e)}}function j(e){if("string"==typeof e)return e;if(e instanceof O&&"Quad"!==e.termType)return e.id;if(!e)return I.id;switch(e.termType){case"NamedNode":return e.value;case"BlankNode":return`_:${e.value}`;case"Variable":return`?${e.value}`;case"DefaultGraph":return"";case"Literal":return`"${e.value}"${e.language?`@${e.language}`:e.datatype&&e.datatype.value!==A.string?`^^${e.datatype.value}`:""}`;case"Quad":return`<<${G(j(e.subject))} ${G(j(e.predicate))} ${G(j(e.object))}${x(e.graph)?"":` ${j(e.graph)}`}>>`;default:throw new Error(`Unexpected termType: ${e.termType}`)}}I=new U;class H extends O{constructor(e,t,r,i){super(""),this._subject=e,this._predicate=t,this._object=r,this._graph=i||I}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function G(e){return e.replace(C,((e,t)=>`"${t.replace(/"/g,'""')}`))}function V(e){return e.replace(C,((e,t)=>`"${t.replace(/""/g,'"')}`))}function q(e,t,r,i){return new H(e,t,r,i)}let W=0;class K{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&$(this,e.factory);const t="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",r=/turtle/.test(t),i=/trig/.test(t),n=/triple/.test(t),o=/quad/.test(t),s=this._n3Mode=/n3/.test(t),a=n||o;(this._supportsNamedGraphs=!(r||s))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||i||n||s),this._supportsRDFStar=""===t||/star|\*$/.test(t),a&&(this._resolveRelativeIRI=e=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new m({lineMode:a,n3:s}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){W=0}_setBase(e){if(e){const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,t,r,i,n){const o=this._n3Mode;this._contextStack.push({type:e,subject:r,predicate:i,object:n,graph:t,inverse:!!o&&this._inversePredicate,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.id.substr(2)}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,t){const r=this._contextStack.pop();if(!r||r.type!==e)return this._error(`Unexpected ${t.type}`,t);this._subject=r.subject,this._predicate=r.predicate,this._object=r.object,this._graph=r.graph,this._n3Mode&&(this._inversePredicate=r.inverse,this._prefixes._=r.blankPrefix,this._quantified=r.quantified)}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let r;switch(e.type){case"IRI":case"typeIRI":const t=this._resolveIRI(e.value);if(null===t)return this._error("Invalid IRI",e);r=this._namedNode(t);break;case"type":case"prefixed":const i=this._prefixes[e.prefix];if(void 0===i)return this._error(`Undefined prefix "${e.prefix}:"`,e);r=this._namedNode(i+e.value);break;case"blank":r=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":r=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&r.id in this._quantified&&(r=this._quantified[r.id]),r}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${t}`,e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=null===this._predicate;return this._restoreContext("blank",e),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,r=null,i=this._readListItem;const n=this._subject,o=this._contextStack,s=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,r=this._blankNode(),this.RDF_FIRST,this._subject=t=this._blankNode()),i=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,r=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),0!==o.length&&"list"===o[o.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(i=this._readPredicate,this._subject===this.RDF_NIL)return i}else if(i=this._getContextEndReader(),this._object===this.RDF_NIL)return i;r=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,i=this._readListItemDataTypeOrLang):(t=this._literal(e.value,this._namedNode(e.prefix)),i=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(t=this._readEntity(e)))return}if(null===r&&(this._subject=r=this._blankNode()),null===n?null===s.predicate?s.subject=r:s.object=r:this._emit(n,this.RDF_REST,r,this._graph),null!==t){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,r,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(r,this.RDF_FIRST,t,this._graph)}return i}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const r=this._readEntity(e);if(void 0===r)return;t=this._literal(this._literalValue,r),e=null;break;case"langcode":t=this._literal(this._literalValue,e.value),e=null}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const r=this._completeLiteral(e);if(r)return this._object=r.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===r.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(r.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,r=this._graph;const i=this._subject,n=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,n&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(r=this._readEntity(e))){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==i){const e=this._predicate,t=this._object;n?this._emit(t,e,i,r):this._emit(i,e,t,r)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t="IRI"===e.type&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if(void 0!==(t=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,r=t.length&&t[t.length-1];if(r&&"item"===r.type){const t=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,t,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,r;const i=this._blankNode();if(void 0!==(r=this._readEntity(e)))return null===this._predicate?(t=this._subject,this._subject=i):(t=this._object,this._object=i),this._emit(t,r,i,this._graph),this._readPath}_readBackwardPath(e){const t=this._blankNode();let r,i;if(void 0!==(r=this._readEntity(e)))return null===this._predicate?(i=this._subject,this._subject=t):(i=this._object,this._object=t),this._emit(t,r,i,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);const t=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),null===this._subject?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,r,i){this._callback(null,this._quad(e,t,r,i||this.DEFAULTGRAPH))}_error(e,t){const r=new Error(`${e} on line ${t.line}.`);r.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(r),this._callback=z}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let r="",i=-1,n=-1,o=0,s="/";for(;i<t;){switch(s){case":":if(n<0&&"/"===e[++i]&&"/"===e[++i])for(;(n=i+1)<t&&"/"!==e[n];)i=n;break;case"?":case"#":i=t;break;case"/":if("."===e[i+1])switch(s=e[1+ ++i],s){case"/":r+=e.substring(o,i-1),o=i+1;break;case void 0:case"?":case"#":return r+e.substring(o,i)+e.substr(i+1);case".":if(s=e[1+ ++i],void 0===s||"/"===s||"?"===s||"#"===s){if(r+=e.substring(o,i-2),(o=r.lastIndexOf("/"))>=n&&(r=r.substr(0,o)),"/"!==s)return`${r}/${e.substr(i+1)}`;o=i+1}}}s=e[++i]}return r+e.substring(o)}parse(e,t,r){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${W++}_`,this._prefixCallback=r||z,this._inversePredicate=!1,this._quantified=Object.create(null),!t){const t=[];let r;if(this._callback=(e,i)=>{e?r=e:i&&t.push(i)},this._lexer.tokenize(e).every((e=>this._readCallback=this._readCallback(e))),r)throw r;return t}this._callback=t,this._lexer.tokenize(e,((e,t)=>{null!==e?(this._callback(e),this._callback=z):this._readCallback&&(this._readCallback=this._readCallback(t))}))}}function z(){}function $(e,t){const r=t.namedNode;e._namedNode=r,e._blankNode=t.blankNode,e._literal=t.literal,e._variable=t.variable,e._quad=t.quad,e.DEFAULTGRAPH=t.defaultGraph(),e.RDF_FIRST=r(a.rdf.first),e.RDF_REST=r(a.rdf.rest),e.RDF_NIL=r(a.rdf.nil),e.N3_FORALL=r(a.r.forAll),e.N3_FORSOME=r(a.r.forSome),e.ABBREVIATIONS={a:r(a.rdf.type),"=":r(a.owl.sameAs),">":r(a.log.implies)},e.QUANTIFIERS_GRAPH=r("urn:n3:quantifiers")}$(K.prototype,P);const J=P.defaultGraph(),{rdf:Z,xsd:Y}=a,X=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,Q=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,ee={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class te extends O{equals(){return!1}}class re{constructor(e,t){if(this._prefixRegex=/$0^/,e&&"function"!=typeof e.write&&(t=e,e=null),t=t||{},this._lists=t.lists,e)this._outputStream=e,this._endStream=void 0===t.end||!!t.end;else{let e="";this._outputStream={write(t,r,i){e+=t,i&&i()},end:t=>{t&&t(null,e)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(t.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=J,this._prefixIRIs=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes),t.baseIRI&&(this._baseMatcher=new RegExp(`^${ne(t.baseIRI)}${t.baseIRI.endsWith("/")?"":"[#?]"}`),this._baseLength=t.baseIRI.length))}get _inDefaultGraph(){return J.equals(this._graph)}_write(e,t){this._outputStream.write(e,"utf8",t)}_writeQuad(e,t,r,i,n){try{i.equals(this._graph)||(this._write((null===this._subject?"":this._inDefaultGraph?".\n":"\n}\n")+(J.equals(i)?"":`${this._encodeIriOrBlank(i)} {\n`)),this._graph=i,this._subject=null),e.equals(this._subject)?t.equals(this._predicate)?this._write(`, ${this._encodeObject(r)}`,n):this._write(`;\n    ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(r)}`,n):this._write(`${(null===this._subject?"":".\n")+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(r)}`,n)}catch(e){n&&n(e)}}_writeQuadLine(e,t,r,i,n){delete this._prefixMatch,this._write(this.quadToString(e,t,r,i),n)}quadToString(e,t,r,i){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(t)} ${this._encodeObject(r)}${i&&i.value?` ${this._encodeIriOrBlank(i)} .\n`:" .\n"}`}quadsToString(e){return e.map((e=>this.quadToString(e.subject,e.predicate,e.object,e.graph))).join("")}_encodeSubject(e){return"Quad"===e.termType?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if("NamedNode"!==e.termType)return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let t=e.value;this._baseMatcher&&this._baseMatcher.test(t)&&(t=t.substr(this._baseLength)),X.test(t)&&(t=t.replace(Q,ie));const r=this._prefixRegex.exec(t);return r?r[1]?this._prefixIRIs[r[1]]+r[2]:t:`<${t}>`}_encodeLiteral(e){let t=e.value;if(X.test(t)&&(t=t.replace(Q,ie)),e.language)return`"${t}"@${e.language}`;if(this._lineMode){if(e.datatype.value===Y.string)return`"${t}"`}else switch(e.datatype.value){case Y.string:return`"${t}"`;case Y.boolean:if("true"===t||"false"===t)return t;break;case Y.integer:if(/^[+-]?\d+$/.test(t))return t;break;case Y.decimal:if(/^[+-]?\d*\.\d+$/.test(t))return t;break;case Y.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(t))return t}return`"${t}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===Z.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:t,object:r,graph:i}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(t)} ${this._encodeObject(r)}${x(i)?"":` ${this._encodeIriOrBlank(i)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,t,r,i,n){void 0===r?this._writeQuad(e.subject,e.predicate,e.object,e.graph,t):"function"==typeof i?this._writeQuad(e,t,r,J,i):this._writeQuad(e,t,r,i||J,n)}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}addPrefix(e,t,r){const i={};i[e]=t,this.addPrefixes(i,r)}addPrefixes(e,t){if(!this._prefixIRIs)return t&&t();let r=!1;for(let t in e){let i=e[t];"string"!=typeof i&&(i=i.value),r=!0,null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null,this._graph=""),this._prefixIRIs[i]=t+=":",this._write(`@prefix ${t} <${i}>.\n`)}if(r){let e="",t="";for(const r in this._prefixIRIs)e+=e?`|${r}`:r,t+=(t?"|":"")+this._prefixIRIs[r];e=ne(e),this._prefixRegex=new RegExp(`^(?:${t})[^/]*$|^(${e})([a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(r?"\n":"",t)}blank(e,t){let r,i,n=e;switch(void 0===e?n=[]:e.termType?n=[{predicate:e,object:t}]:"length"in e||(n=[e]),i=n.length){case 0:return new te("[]");case 1:if(r=n[0],!(r.object instanceof te))return new te(`[ ${this._encodePredicate(r.predicate)} ${this._encodeObject(r.object)} ]`);default:let t="[";for(let o=0;o<i;o++)r=n[o],r.predicate.equals(e)?t+=`, ${this._encodeObject(r.object)}`:(t+=`${(o?";\n  ":"\n  ")+this._encodePredicate(r.predicate)} ${this._encodeObject(r.object)}`,e=r.predicate);return new te(`${t}\n]`)}}list(e){const t=e&&e.length||0,r=new Array(t);for(let i=0;i<t;i++)r[i]=this._encodeObject(e[i]);return new te(`(${r.join(" ")})`)}end(e){null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null),this._write=this._blockedWrite;let t=e&&((r,i)=>{t=null,e(r,i)});if(this._endStream)try{return this._outputStream.end(t)}catch(e){}t&&t()}}function ie(e){let t=ee[e];return void 0===t&&(1===e.length?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}function ne(e){return e.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}var oe=r(2719);class se{constructor(e,t){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,t||!e||e[0]||(t=e,e=null),t=t||{},this._factory=t.factory||P,e&&this.addQuads(e)}get size(){let e=this._size;if(null!==e)return e;e=0;const t=this._graphs;let r,i;for(const n in t)for(const o in r=t[n].subjects)for(const t in i=r[o])e+=Object.keys(i[t]).length;return this._size=e}_addToIndex(e,t,r,i){const n=e[t]||(e[t]={}),o=n[r]||(n[r]={}),s=i in o;return s||(o[i]=null),!s}_removeFromIndex(e,t,r,i){const n=e[t],o=n[r];delete o[i];for(const e in o)return;delete n[r];for(const e in n)return;delete e[t]}*_findInIndex(e,t,r,i,n,o,s,a){let u,l,c;const h=this._entities,p=B(a,this._factory),d={subject:null,predicate:null,object:null};t&&((u=e,e={})[t]=u[t]);for(const t in e)if(l=e[t]){d[n]=B(h[t],this._factory),r&&((u=l,l={})[r]=u[r]);for(const e in l)if(c=l[e]){d[o]=B(h[e],this._factory);const t=i?i in c?[i]:[]:Object.keys(c);for(let e=0;e<t.length;e++)d[s]=B(h[t[e]],this._factory),yield this._factory.quad(d.subject,d.predicate,d.object,p)}}}_loop(e,t){for(const r in e)t(r)}_loopByKey0(e,t,r){let i,n;if(i=e[t])for(n in i)r(n)}_loopByKey1(e,t,r){let i,n;for(i in e)n=e[i],n[t]&&r(i)}_loopBy2Keys(e,t,r,i){let n,o,s;if((n=e[t])&&(o=n[r]))for(s in o)i(s)}_countInIndex(e,t,r,i){let n,o,s,a=0;t&&((n=e,e={})[t]=n[t]);for(const t in e)if(o=e[t]){r&&((n=o,o={})[r]=n[r]);for(const e in o)(s=o[e])&&(i?i in s&&a++:a+=Object.keys(s).length)}return a}_getGraphs(e){if(!ae(e))return this._graphs;const t={};return t[e]=this._graphs[e],t}_uniqueEntities(e){const t=Object.create(null);return r=>{r in t||(t[r]=!0,e(B(this._entities[r],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,t,r,i){t||(i=e.graph,r=e.object,t=e.predicate,e=e.subject),e=j(e),t=j(t),r=j(r),i=j(i);let n=this._graphs[i];n||(n=this._graphs[i]={subjects:{},predicates:{},objects:{}},Object.freeze(n));const o=this._ids,s=this._entities;e=o[e]||(o[s[++this._id]=e]=this._id),t=o[t]||(o[s[++this._id]=t]=this._id),r=o[r]||(o[s[++this._id]=r]=this._id);const a=this._addToIndex(n.subjects,e,t,r);return this._addToIndex(n.predicates,t,r,e),this._addToIndex(n.objects,r,e,t),this._size=null,a}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}delete(e){return this.removeQuad(e),this}has(e,t,r,i){return e&&e.subject&&({subject:e,predicate:t,object:r,graph:i}=e),!this.readQuads(e,t,r,i).next().done}import(e){return e.on("data",(e=>{this.addQuad(e)})),e}removeQuad(e,t,r,i){t||(i=e.graph,r=e.object,t=e.predicate,e=e.subject),e=j(e),t=j(t),r=j(r),i=j(i);const n=this._ids,o=this._graphs;let s,a,u;if(!((e=n[e])&&(t=n[t])&&(r=n[r])&&(s=o[i])&&(a=s.subjects[e])&&(u=a[t])&&r in u))return!1;for(e in this._removeFromIndex(s.subjects,e,t,r),this._removeFromIndex(s.predicates,t,r,e),this._removeFromIndex(s.objects,r,e,t),null!==this._size&&this._size--,s.subjects)return!0;return delete o[i],!0}removeQuads(e){for(let t=0;t<e.length;t++)this.removeQuad(e[t])}remove(e){return e.on("data",(e=>{this.removeQuad(e)})),e}removeMatches(e,t,r,i){const n=new oe.Readable({objectMode:!0});return n._read=()=>{for(const o of this.readQuads(e,t,r,i))n.push(o);n.push(null)},this.remove(n)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,t,r,i){return[...this.readQuads(e,t,r,i)]}*readQuads(e,t,r,i){e=e&&j(e),t=t&&j(t),r=r&&j(r),i=i&&j(i);const n=this._getGraphs(i),o=this._ids;let s,a,u,l;if(!(ae(e)&&!(a=o[e])||ae(t)&&!(u=o[t])||ae(r)&&!(l=o[r])))for(const e in n)(s=n[e])&&(a?l?yield*this._findInIndex(s.objects,l,a,u,"object","subject","predicate",e):yield*this._findInIndex(s.subjects,a,u,null,"subject","predicate","object",e):u?yield*this._findInIndex(s.predicates,u,l,null,"predicate","object","subject",e):l?yield*this._findInIndex(s.objects,l,null,null,"object","subject","predicate",e):yield*this._findInIndex(s.subjects,null,null,null,"subject","predicate","object",e))}match(e,t,r,i){return new ue(this,e,t,r,i)}countQuads(e,t,r,i){e=e&&j(e),t=t&&j(t),r=r&&j(r),i=i&&j(i);const n=this._getGraphs(i),o=this._ids;let s,a,u,l,c=0;if(ae(e)&&!(a=o[e])||ae(t)&&!(u=o[t])||ae(r)&&!(l=o[r]))return 0;for(const i in n)(s=n[i])&&(c+=e?r?this._countInIndex(s.objects,l,a,u):this._countInIndex(s.subjects,a,u,l):t?this._countInIndex(s.predicates,u,l,a):this._countInIndex(s.objects,l,a,u));return c}forEach(e,t,r,i,n){this.some((t=>(e(t),!1)),t,r,i,n)}every(e,t,r,i,n){let o=!1;const s=!this.some((t=>(o=!0,!e(t))),t,r,i,n);return o&&s}some(e,t,r,i,n){for(const o of this.readQuads(t,r,i,n))if(e(o))return!0;return!1}getSubjects(e,t,r){const i=[];return this.forSubjects((e=>{i.push(e)}),e,t,r),i}forSubjects(e,t,r,i){t=t&&j(t),r=r&&j(r),i=i&&j(i);const n=this._ids,o=this._getGraphs(i);let s,a,u;if(e=this._uniqueEntities(e),!(ae(t)&&!(a=n[t])||ae(r)&&!(u=n[r])))for(i in o)(s=o[i])&&(a?u?this._loopBy2Keys(s.predicates,a,u,e):this._loopByKey1(s.subjects,a,e):u?this._loopByKey0(s.objects,u,e):this._loop(s.subjects,e))}getPredicates(e,t,r){const i=[];return this.forPredicates((e=>{i.push(e)}),e,t,r),i}forPredicates(e,t,r,i){t=t&&j(t),r=r&&j(r),i=i&&j(i);const n=this._ids,o=this._getGraphs(i);let s,a,u;if(e=this._uniqueEntities(e),!(ae(t)&&!(a=n[t])||ae(r)&&!(u=n[r])))for(i in o)(s=o[i])&&(a?u?this._loopBy2Keys(s.objects,u,a,e):this._loopByKey0(s.subjects,a,e):u?this._loopByKey1(s.predicates,u,e):this._loop(s.predicates,e))}getObjects(e,t,r){const i=[];return this.forObjects((e=>{i.push(e)}),e,t,r),i}forObjects(e,t,r,i){t=t&&j(t),r=r&&j(r),i=i&&j(i);const n=this._ids,o=this._getGraphs(i);let s,a,u;if(e=this._uniqueEntities(e),!(ae(t)&&!(a=n[t])||ae(r)&&!(u=n[r])))for(i in o)(s=o[i])&&(a?u?this._loopBy2Keys(s.subjects,a,u,e):this._loopByKey1(s.objects,a,e):u?this._loopByKey0(s.predicates,u,e):this._loop(s.objects,e))}getGraphs(e,t,r){const i=[];return this.forGraphs((e=>{i.push(e)}),e,t,r),i}forGraphs(e,t,r,i){for(const n in this._graphs)this.some((t=>(e(t.graph),!0)),t,r,i,n)}createBlankNode(e){let t,r;if(e)for(t=e=`_:${e}`,r=1;this._ids[t];)t=e+r++;else do{t="_:b"+this._blankNodeIndex++}while(this._ids[t]);return this._ids[t]=++this._id,this._entities[this._id]=t,this._factory.blankNode(t.substr(2))}extractLists({remove:e=!1,ignoreErrors:t=!1}={}){const r={},i=t?()=>!0:(e,t)=>{throw new Error(`${e.value} ${t}`)},n=this.getQuads(null,a.rdf.rest,a.rdf.nil,null),o=e?[...n]:[];return n.forEach((t=>{const n=[];let s,u,l=!1;const c=t.graph;let h=t.subject;for(;h&&!l;){const e=this.getQuads(null,null,h,null),t=this.getQuads(h,null,null,null);let r,p=null,d=null,f=null;for(let n=0;n<t.length&&!l;n++)r=t[n],r.graph.equals(c)?s?l=i(h,"has non-list arcs out"):r.predicate.value===a.rdf.first?p?l=i(h,"has multiple rdf:first arcs"):o.push(p=r):r.predicate.value===a.rdf.rest?d?l=i(h,"has multiple rdf:rest arcs"):o.push(d=r):e.length?l=i(h,"can't be subject and object"):(s=r,u="subject"):l=i(h,"not confined to single graph");for(let t=0;t<e.length&&!l;++t)r=e[t],s?l=i(h,"can't have coreferences"):r.predicate.value===a.rdf.rest?f?l=i(h,"has incoming rdf:rest arcs"):f=r:(s=r,u="object");p?n.unshift(p.object):l=i(h,"has no list head"),h=f&&f.subject}l?e=!1:s&&(r[s[u].value]=n)})),e&&this.removeQuads(o),r}*[Symbol.iterator](){yield*this.readQuads()}}function ae(e){return"string"==typeof e||e instanceof String}class ue extends oe.Readable{constructor(e,t,r,i,n){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:t,predicate:r,object:i,graph:n})}get filtered(){if(!this._filtered){const{n3Store:e,graph:t,object:r,predicate:i,subject:n}=this,o=this._filtered=new se({factory:e._factory});for(const s of e.readQuads(n,i,r,t))o.addQuad(s)}return this._filtered}get size(){return this.filtered.size}_read(){for(const e of this)this.push(e);this.push(null)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,t,r,i){return new ue(this.filtered,e,t,r,i)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}class le extends oe.Transform{constructor(e){let t,r;super({decodeStrings:!0}),this._readableState.objectMode=!0,new K(e).parse({on:(e,i)=>{switch(e){case"data":t=i;break;case"end":r=i}}},((e,t)=>{e&&this.emit("error",e)||t&&this.push(t)}),((e,t)=>{this.emit("prefix",e,t)})),this._transform=(e,r,i)=>{t(e),i()},this._flush=e=>{r(),e()}}import(e){return e.on("data",(e=>{this.write(e)})),e.on("end",(()=>{this.end()})),e.on("error",(e=>{this.emit("error",e)})),this}}class ce extends oe.Transform{constructor(e){super({encoding:"utf8",writableObjectMode:!0});const t=this._writer=new re({write:(e,t,r)=>{this.push(e),r&&r()},end:e=>{this.push(null),e&&e()}},e);this._transform=(e,r,i)=>{t.addQuad(e,i)},this._flush=e=>{t.end(e)}}import(e){return e.on("data",(e=>{this.write(e)})),e.on("end",(()=>{this.end()})),e.on("error",(e=>{this.emit("error",e)})),e.on("prefix",((e,t)=>{this._writer.addPrefix(e,t)})),this}}const he={Lexer:m,Parser:K,Writer:re,Store:se,StreamParser:le,StreamWriter:ce,Util:i,DataFactory:P,Term:O,NamedNode:k,Literal:F,BlankNode:D,Variable:M,DefaultGraph:U,Quad:H,Triple:H,termFromId:B,termToId:j}},470:e=>{var t,r,i=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var a,u=[],l=!1,c=-1;function h(){l&&a&&(l=!1,a.length?u=a.concat(u):c=-1,u.length&&p())}function p(){if(!l){var e=s(h);l=!0;for(var t=u.length;t;){for(a=u,u=[];++c<t;)a&&a[c].run();c=-1,t=u.length}a=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function f(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new d(e,t)),1!==u.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.prependListener=f,i.prependOnceListener=f,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},5293:(e,t,r)=>{let i;e.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:r.g):e=>(i||(i=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)))},1213:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(7723),t),n(r(7670),t),n(r(172),t),n(r(5554),t),n(r(2545),t),n(r(3837),t),n(r(6097),t)},7723:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlankNode=void 0,t.BlankNode=class{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}}},7670:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataFactory=void 0;const i=r(7723),n=r(172),o=r(5554),s=r(2545),a=r(3837),u=r(6097);let l=0;t.DataFactory=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${l++}_`}namedNode(e){return new s.NamedNode(e)}blankNode(e){return new i.BlankNode(e||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new o.Literal(e,t)}variable(e){return new u.Variable(e)}defaultGraph(){return n.DefaultGraph.INSTANCE}quad(e,t,r,i){return new a.Quad(e,t,r,i||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(o.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},172:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultGraph=void 0;class r{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&"DefaultGraph"===e.termType}}t.DefaultGraph=r,r.INSTANCE=new r},5554:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Literal=void 0;const i=r(2545);class n{constructor(e,t){this.termType="Literal",this.value=e,"string"==typeof t?(this.language=t,this.datatype=n.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=n.XSD_STRING)}equals(e){return!!e&&"Literal"===e.termType&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)}}t.Literal=n,n.RDF_LANGUAGE_STRING=new i.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),n.XSD_STRING=new i.NamedNode("http://www.w3.org/2001/XMLSchema#string")},2545:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamedNode=void 0,t.NamedNode=class{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&"NamedNode"===e.termType&&e.value===this.value}}},3837:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Quad=void 0,t.Quad=class{constructor(e,t,r,i){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=r,this.graph=i}equals(e){return!!e&&("Quad"===e.termType||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}}},6097:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Variable=void 0,t.Variable=class{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&"Variable"===e.termType&&e.value===this.value}}},9502:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.termToString=t.stringToTerm=t.stringQuadToQuad=t.quadToStringQuad=t.getLiteralValue=t.getLiteralType=t.getLiteralLanguage=void 0;const i=r(3300);Object.defineProperty(t,"getLiteralLanguage",{enumerable:!0,get:function(){return i.getLiteralLanguage}}),Object.defineProperty(t,"getLiteralType",{enumerable:!0,get:function(){return i.getLiteralType}}),Object.defineProperty(t,"getLiteralValue",{enumerable:!0,get:function(){return i.getLiteralValue}}),Object.defineProperty(t,"quadToStringQuad",{enumerable:!0,get:function(){return i.quadToStringQuad}}),Object.defineProperty(t,"stringQuadToQuad",{enumerable:!0,get:function(){return i.stringQuadToQuad}}),Object.defineProperty(t,"stringToTerm",{enumerable:!0,get:function(){return i.stringToTerm}}),Object.defineProperty(t,"termToString",{enumerable:!0,get:function(){return i.termToString}})},3300:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringQuadToQuad=t.quadToStringQuad=t.stringToTerm=t.getLiteralLanguage=t.getLiteralType=t.getLiteralValue=t.termToString=void 0;const i=new(r(1213).DataFactory);function n(e){if(e)switch(e.termType){case"NamedNode":case"DefaultGraph":return e.value;case"BlankNode":return"_:"+e.value;case"Literal":const t=e;return'"'+t.value+'"'+(t.datatype&&"http://www.w3.org/2001/XMLSchema#string"!==t.datatype.value&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"!==t.datatype.value?"^^"+t.datatype.value:"")+(t.language?"@"+t.language:"");case"Quad":return`<<${n(e.subject)} ${n(e.predicate)} ${n(e.object)}${"DefaultGraph"===e.graph.termType?"":" "+n(e.graph)}>>`;case"Variable":return"?"+e.value}}function o(e){const t=/^"([^]*)"/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]}function s(e){const t=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]||(t[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function a(e){const t=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]?t[1].toLowerCase():""}function u(e,t){if(t=t||i,!e||!e.length)return t.defaultGraph();switch(e[0]){case"_":return t.blankNode(e.substr(2));case"?":if(!t.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return t.variable(e.substr(1));case'"':const r=a(e),i=t.namedNode(s(e));return t.literal(o(e),r||i);default:if(e.startsWith("<<")&&e.endsWith(">>")){const r=e.slice(2,-2),i=[];let n=0,o=0;for(let t=0;t<r.length;t++){const s=r[t];if("<"===s&&n++,">"===s){if(0===n)throw new Error("Found closing tag without opening tag in "+e);n--}" "===s&&0===n&&(i.push(r.slice(o,t)),o=t+1)}if(0!==n)throw new Error("Found opening tag without closing tag in "+e);if(i.push(r.slice(o,r.length)),3!==i.length&&4!==i.length)throw new Error("Nested quad syntax error "+e);return t.quad(u(i[0]),u(i[1]),u(i[2]),i[3]?u(i[3]):void 0)}return t.namedNode(e)}}t.termToString=n,t.getLiteralValue=o,t.getLiteralType=s,t.getLiteralLanguage=a,t.stringToTerm=u,t.quadToStringQuad=function(e){return{subject:n(e.subject),predicate:n(e.predicate),object:n(e.object),graph:n(e.graph)}},t.stringQuadToQuad=function(e,t){return(t=t||i).quad(u(e.subject,t),u(e.predicate,t),u(e.object,t),u(e.graph,t))}},3206:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(1819))},1819:(e,t)=>{"use strict";function r(e){const t=[];let r=0;for(;r<e.length;)switch(e[r]){case"/":if("."===e[r+1])if("."===e[r+2]){if(!n(e[r+3])){t.push([]),r++;break}t.pop(),e[r+3]||t.push([]),r+=3}else{if(!n(e[r+2])){t.push([]),r++;break}e[r+2]||t.push([]),r+=2}else t.push([]),r++;break;case"#":case"?":t.length||t.push([]),t[t.length-1].push(e.substr(r)),r=e.length;break;default:t.length||t.push([]),t[t.length-1].push(e[r]),r++}return"/"+t.map((e=>e.join(""))).join("/")}function i(e,t){let i=t+1;t>=0?"/"===e[t+1]&&"/"===e[t+2]&&(i=t+3):"/"===e[0]&&"/"===e[1]&&(i=2);const n=e.indexOf("/",i);return n<0?e:e.substr(0,n)+r(e.substr(n))}function n(e){return!e||"#"===e||"?"===e||"/"===e}Object.defineProperty(t,"__esModule",{value:!0}),t.resolve=function(e,t){const n=(t=t||"").indexOf("#");if(n>0&&(t=t.substr(0,n)),!e.length){if(t.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${t}' for value '${e}'`);return t}if(e.startsWith("?")){const r=t.indexOf("?");return r>0&&(t=t.substr(0,r)),t+e}if(e.startsWith("#"))return t+e;if(!t.length){const t=e.indexOf(":");if(t<0)throw new Error(`Found invalid relative IRI '${e}' for a missing baseIRI`);return i(e,t)}const o=e.indexOf(":");if(o>=0)return i(e,o);const s=t.indexOf(":");if(s<0)throw new Error(`Found invalid baseIRI '${t}' for value '${e}'`);const a=t.substr(0,s+1);if(0===e.indexOf("//"))return a+i(e,o);let u;if(t.indexOf("//",s)===s+1){if(u=t.indexOf("/",s+3),u<0)return t.length>s+3?t+"/"+i(e,o):a+i(e,o)}else if(u=t.indexOf("/",s+1),u<0)return a+i(e,o);if(0===e.indexOf("/"))return t.substr(0,u)+r(e);let l=t.substr(u);const c=l.lastIndexOf("/");return c>=0&&c<l.length-1&&(l=l.substr(0,c+1),"."===e[0]&&"."!==e[1]&&"/"!==e[1]&&e[2]&&(e=e.substr(1))),e=r(e=l+e),t.substr(0,u)+e},t.removeDotSegments=r,t.removeDotSegmentsOfPath=i},7353:(e,t,r)=>{var i=r(7871),n=i.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=i:(o(i,t),t.Buffer=s),s.prototype=Object.create(n.prototype),o(n,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},2269:(e,t,r)=>{var i=r(2897),n=r(9027),o=[r(9638)];e.exports=i.createStore(n,o)},9638:(e,t,r)=>{e.exports=function(){return r(2892),{}}},2892:()=>{"object"!=typeof JSON&&(JSON={}),function(){"use strict";var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta,rep;function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,(function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function str(e,t){var r,i,n,o,s,a=gap,u=t[e];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(e)),"function"==typeof rep&&(u=rep.call(t,e,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(u)){for(o=u.length,r=0;r<o;r+=1)s[r]=str(r,u)||"null";return n=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,n}if(rep&&"object"==typeof rep)for(o=rep.length,r=0;r<o;r+=1)"string"==typeof rep[r]&&(n=str(i=rep[r],u))&&s.push(quote(i)+(gap?": ":":")+n);else for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(n=str(i,u))&&s.push(quote(i)+(gap?": ":":")+n);return n=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,n}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,r){var i;if(gap="",indent="","number"==typeof r)for(i=0;i<r;i+=1)indent+=" ";else"string"==typeof r&&(indent=r);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var r,i,n=e[t];if(n&&"object"==typeof n)for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(void 0!==(i=walk(n,r))?n[r]=i:delete n[r]);return reviver.call(e,t,n)}if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()},2897:(e,t,r)=>{var i=r(8196),n=i.slice,o=i.pluck,s=i.each,a=i.bind,u=i.create,l=i.isList,c=i.isFunction,h=i.isObject;e.exports={createStore:d};var p={version:"2.0.12",enabled:!1,get:function(e,t){var r=this.storage.read(this._namespacePrefix+e);return this._deserialize(r,t)},set:function(e,t){return void 0===t?this.remove(e):(this.storage.write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this.storage.remove(this._namespacePrefix+e)},each:function(e){var t=this;this.storage.each((function(r,i){e.call(t,t._deserialize(r),(i||"").replace(t._namespaceRegexp,""))}))},clearAll:function(){this.storage.clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},createStore:function(){return d.apply(this,arguments)},addPlugin:function(e){this._addPlugin(e)},namespace:function(e){return d(this.storage,this.plugins,e)}};function d(e,t,r){r||(r=""),e&&!l(e)&&(e=[e]),t&&!l(t)&&(t=[t]);var i=r?"__storejs_"+r+"_":"",d=r?new RegExp("^"+i):null;if(!/^[a-zA-Z0-9_\-]*$/.test(r))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var f={_namespacePrefix:i,_namespaceRegexp:d,_testStorage:function(e){try{var t="__storejs__test__";e.write(t,t);var r=e.read(t)===t;return e.remove(t),r}catch(e){return!1}},_assignPluginFnProp:function(e,t){var r=this[t];this[t]=function(){var t=n(arguments,0),i=this;function o(){if(r)return s(arguments,(function(e,r){t[r]=e})),r.apply(i,t)}var a=[o].concat(t);return e.apply(i,a)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(e,t){if(!e)return t;var r="";try{r=JSON.parse(e)}catch(t){r=e}return void 0!==r?r:t},_addStorage:function(e){this.enabled||this._testStorage(e)&&(this.storage=e,this.enabled=!0)},_addPlugin:function(e){var t=this;if(l(e))s(e,(function(e){t._addPlugin(e)}));else if(!o(this.plugins,(function(t){return e===t}))){if(this.plugins.push(e),!c(e))throw new Error("Plugins must be function values that return objects");var r=e.call(this);if(!h(r))throw new Error("Plugins must return an object of function properties");s(r,(function(r,i){if(!c(r))throw new Error("Bad plugin property: "+i+" from plugin "+e.name+". Plugins should only return functions.");t._assignPluginFnProp(r,i)}))}},addStorage:function(e){!function(){var e="undefined"==typeof console?null:console;e&&(e.warn?e.warn:e.log).apply(e,arguments)}("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(e)}},g=u(f,p,{plugins:[]});return g.raw={},s(g,(function(e,t){c(e)&&(g.raw[t]=a(g,e))})),s(e,(function(e){g._addStorage(e)})),s(t,(function(e){g._addPlugin(e)})),g}},8196:(e,t,r)=>{var i=Object.assign?Object.assign:function(e,t,r,i){for(var n=1;n<arguments.length;n++)u(Object(arguments[n]),(function(t,r){e[r]=t}));return e},n=function(){if(Object.create)return function(e,t,r,n){var o=a(arguments,1);return i.apply(this,[Object.create(e)].concat(o))};{function e(){}return function(t,r,n,o){var s=a(arguments,1);return e.prototype=t,i.apply(this,[new e].concat(s))}}}(),o=String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},s="undefined"!=typeof window?window:r.g;function a(e,t){return Array.prototype.slice.call(e,t||0)}function u(e,t){l(e,(function(e,r){return t(e,r),!1}))}function l(e,t){if(c(e)){for(var r=0;r<e.length;r++)if(t(e[r],r))return e[r]}else for(var i in e)if(e.hasOwnProperty(i)&&t(e[i],i))return e[i]}function c(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}e.exports={assign:i,create:n,trim:o,bind:function(e,t){return function(){return t.apply(e,Array.prototype.slice.call(arguments,0))}},slice:a,each:u,map:function(e,t){var r=c(e)?[]:{};return l(e,(function(e,i){return r[i]=t(e,i),!1})),r},pluck:l,isList:c,isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},isObject:function(e){return e&&"[object Object]"==={}.toString.call(e)},Global:s}},9027:(e,t,r)=>{e.exports=[r(4039),r(8605),r(3367),r(9241),r(9252),r(3589)]},9241:(e,t,r)=>{var i=r(8196),n=i.Global,o=i.trim;e.exports={name:"cookieStorage",read:function(e){if(!e||!l(e))return null;var t="(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(s.cookie.replace(new RegExp(t),"$1"))},write:function(e,t){e&&(s.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")},each:a,remove:u,clearAll:function(){a((function(e,t){u(t)}))}};var s=n.document;function a(e){for(var t=s.cookie.split(/; ?/g),r=t.length-1;r>=0;r--)if(o(t[r])){var i=t[r].split("="),n=unescape(i[0]);e(unescape(i[1]),n)}}function u(e){e&&l(e)&&(s.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function l(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(s.cookie)}},4039:(e,t,r)=>{var i=r(8196).Global;function n(){return i.localStorage}function o(e){return n().getItem(e)}e.exports={name:"localStorage",read:o,write:function(e,t){return n().setItem(e,t)},each:function(e){for(var t=n().length-1;t>=0;t--){var r=n().key(t);e(o(r),r)}},remove:function(e){return n().removeItem(e)},clearAll:function(){return n().clear()}}},3589:e=>{e.exports={name:"memoryStorage",read:function(e){return t[e]},write:function(e,r){t[e]=r},each:function(e){for(var r in t)t.hasOwnProperty(r)&&e(t[r],r)},remove:function(e){delete t[e]},clearAll:function(e){t={}}};var t={}},8605:(e,t,r)=>{var i=r(8196).Global;e.exports={name:"oldFF-globalStorage",read:function(e){return n[e]},write:function(e,t){n[e]=t},each:o,remove:function(e){return n.removeItem(e)},clearAll:function(){o((function(e,t){delete n[e]}))}};var n=i.globalStorage;function o(e){for(var t=n.length-1;t>=0;t--){var r=n.key(t);e(n[r],r)}}},3367:(e,t,r)=>{var i=r(8196).Global;e.exports={name:"oldIE-userDataStorage",write:function(e,t){if(!a){var r=l(e);s((function(e){e.setAttribute(r,t),e.save(n)}))}},read:function(e){if(!a){var t=l(e),r=null;return s((function(e){r=e.getAttribute(t)})),r}},each:function(e){s((function(t){for(var r=t.XMLDocument.documentElement.attributes,i=r.length-1;i>=0;i--){var n=r[i];e(t.getAttribute(n.name),n.name)}}))},remove:function(e){var t=l(e);s((function(e){e.removeAttribute(t),e.save(n)}))},clearAll:function(){s((function(e){var t=e.XMLDocument.documentElement.attributes;e.load(n);for(var r=t.length-1;r>=0;r--)e.removeAttribute(t[r].name);e.save(n)}))}};var n="storejs",o=i.document,s=function(){if(!o||!o.documentElement||!o.documentElement.addBehavior)return null;var e,t,r;try{(t=new ActiveXObject("htmlfile")).open(),t.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></iframe>'),t.close(),e=t.w.frames[0].document,r=e.createElement("div")}catch(t){r=o.createElement("div"),e=o.body}return function(t){var i=[].slice.call(arguments,0);i.unshift(r),e.appendChild(r),r.addBehavior("#default#userData"),r.load(n),t.apply(this,i),e.removeChild(r)}}(),a=(i.navigator?i.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./),u=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function l(e){return e.replace(/^\d/,"___$&").replace(u,"___")}},9252:(e,t,r)=>{var i=r(8196).Global;function n(){return i.sessionStorage}function o(e){return n().getItem(e)}e.exports={name:"sessionStorage",read:o,write:function(e,t){return n().setItem(e,t)},each:function(e){for(var t=n().length-1;t>=0;t--){var r=n().key(t);e(o(r),r)}},remove:function(e){return n().removeItem(e)},clearAll:function(){return n().clear()}}},8506:(e,t,r)=>{"use strict";var i=r(7353).Buffer,n=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===n||!n(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=l,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=c,this.end=h,t=3;break;default:return this.write=p,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function c(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}t.s=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var r=function(e,t,r){var i=t.length-1;if(i<r)return 0;var n=s(t[i]);return n>=0?(n>0&&(e.lastNeed=n-1),n):--i<r||-2===n?0:(n=s(t[i]))>=0?(n>0&&(e.lastNeed=n-2),n):--i<r||-2===n?0:(n=s(t[i]))>=0?(n>0&&(2===n?n=0:e.lastNeed=n-3),n):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},9757:(e,t,r)=>{function i(e){try{if(!r.g.localStorage)return!1}catch(e){return!1}var t=r.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(i("noDeprecation"))return e;var r=!1;return function(){if(!r){if(i("throwDeprecation"))throw new Error(t);i("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}},1390:(e,t,r)=>{"use strict";var i;r.r(t),r.d(t,{NIL:()=>N,parse:()=>m,stringify:()=>c,v1:()=>g,v3:()=>T,v4:()=>A,v5:()=>C,validate:()=>a,version:()=>R});var n=new Uint8Array(16);function o(){if(!i&&!(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(n)}const s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,a=function(e){return"string"==typeof e&&s.test(e)};for(var u=[],l=0;l<256;++l)u.push((l+256).toString(16).substr(1));const c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!a(r))throw TypeError("Stringified UUID is invalid");return r};var h,p,d=0,f=0;const g=function(e,t,r){var i=t&&r||0,n=t||new Array(16),s=(e=e||{}).node||h,a=void 0!==e.clockseq?e.clockseq:p;if(null==s||null==a){var u=e.random||(e.rng||o)();null==s&&(s=h=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==a&&(a=p=16383&(u[6]<<8|u[7]))}var l=void 0!==e.msecs?e.msecs:Date.now(),g=void 0!==e.nsecs?e.nsecs:f+1,m=l-d+(g-f)/1e4;if(m<0&&void 0===e.clockseq&&(a=a+1&16383),(m<0||l>d)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=l,f=g,p=a;var v=(1e4*(268435455&(l+=122192928e5))+g)%4294967296;n[i++]=v>>>24&255,n[i++]=v>>>16&255,n[i++]=v>>>8&255,n[i++]=255&v;var y=l/4294967296*1e4&268435455;n[i++]=y>>>8&255,n[i++]=255&y,n[i++]=y>>>24&15|16,n[i++]=y>>>16&255,n[i++]=a>>>8|128,n[i++]=255&a;for(var _=0;_<6;++_)n[i+_]=s[_];return t||c(n)},m=function(e){if(!a(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function v(e,t,r){function i(e,i,n,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof i&&(i=m(i)),16!==i.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+e.length);if(s.set(i),s.set(e,i.length),(s=r(s))[6]=15&s[6]|t,s[8]=63&s[8]|128,n){o=o||0;for(var a=0;a<16;++a)n[o+a]=s[a];return n}return c(s)}try{i.name=e}catch(e){}return i.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",i.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",i}function y(e){return 14+(e+64>>>9<<4)+1}function _(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function E(e,t,r,i,n,o){return _((s=_(_(t,e),_(i,o)))<<(a=n)|s>>>32-a,r);var s,a}function x(e,t,r,i,n,o,s){return E(t&r|~t&i,e,t,n,o,s)}function b(e,t,r,i,n,o,s){return E(t&i|r&~i,e,t,n,o,s)}function S(e,t,r,i,n,o,s){return E(t^r^i,e,t,n,o,s)}function w(e,t,r,i,n,o,s){return E(r^(t|~i),e,t,n,o,s)}const T=v("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,i="0123456789abcdef",n=0;n<r;n+=8){var o=e[n>>5]>>>n%32&255,s=parseInt(i.charAt(o>>>4&15)+i.charAt(15&o),16);t.push(s)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[y(t)-1]=t;for(var r=1732584193,i=-271733879,n=-1732584194,o=271733878,s=0;s<e.length;s+=16){var a=r,u=i,l=n,c=o;r=x(r,i,n,o,e[s],7,-680876936),o=x(o,r,i,n,e[s+1],12,-389564586),n=x(n,o,r,i,e[s+2],17,606105819),i=x(i,n,o,r,e[s+3],22,-1044525330),r=x(r,i,n,o,e[s+4],7,-176418897),o=x(o,r,i,n,e[s+5],12,1200080426),n=x(n,o,r,i,e[s+6],17,-1473231341),i=x(i,n,o,r,e[s+7],22,-45705983),r=x(r,i,n,o,e[s+8],7,1770035416),o=x(o,r,i,n,e[s+9],12,-1958414417),n=x(n,o,r,i,e[s+10],17,-42063),i=x(i,n,o,r,e[s+11],22,-1990404162),r=x(r,i,n,o,e[s+12],7,1804603682),o=x(o,r,i,n,e[s+13],12,-40341101),n=x(n,o,r,i,e[s+14],17,-1502002290),r=b(r,i=x(i,n,o,r,e[s+15],22,1236535329),n,o,e[s+1],5,-165796510),o=b(o,r,i,n,e[s+6],9,-1069501632),n=b(n,o,r,i,e[s+11],14,643717713),i=b(i,n,o,r,e[s],20,-373897302),r=b(r,i,n,o,e[s+5],5,-701558691),o=b(o,r,i,n,e[s+10],9,38016083),n=b(n,o,r,i,e[s+15],14,-660478335),i=b(i,n,o,r,e[s+4],20,-405537848),r=b(r,i,n,o,e[s+9],5,568446438),o=b(o,r,i,n,e[s+14],9,-1019803690),n=b(n,o,r,i,e[s+3],14,-187363961),i=b(i,n,o,r,e[s+8],20,1163531501),r=b(r,i,n,o,e[s+13],5,-1444681467),o=b(o,r,i,n,e[s+2],9,-51403784),n=b(n,o,r,i,e[s+7],14,1735328473),r=S(r,i=b(i,n,o,r,e[s+12],20,-1926607734),n,o,e[s+5],4,-378558),o=S(o,r,i,n,e[s+8],11,-2022574463),n=S(n,o,r,i,e[s+11],16,1839030562),i=S(i,n,o,r,e[s+14],23,-35309556),r=S(r,i,n,o,e[s+1],4,-1530992060),o=S(o,r,i,n,e[s+4],11,1272893353),n=S(n,o,r,i,e[s+7],16,-155497632),i=S(i,n,o,r,e[s+10],23,-1094730640),r=S(r,i,n,o,e[s+13],4,681279174),o=S(o,r,i,n,e[s],11,-358537222),n=S(n,o,r,i,e[s+3],16,-722521979),i=S(i,n,o,r,e[s+6],23,76029189),r=S(r,i,n,o,e[s+9],4,-640364487),o=S(o,r,i,n,e[s+12],11,-421815835),n=S(n,o,r,i,e[s+15],16,530742520),r=w(r,i=S(i,n,o,r,e[s+2],23,-995338651),n,o,e[s],6,-198630844),o=w(o,r,i,n,e[s+7],10,1126891415),n=w(n,o,r,i,e[s+14],15,-1416354905),i=w(i,n,o,r,e[s+5],21,-57434055),r=w(r,i,n,o,e[s+12],6,1700485571),o=w(o,r,i,n,e[s+3],10,-1894986606),n=w(n,o,r,i,e[s+10],15,-1051523),i=w(i,n,o,r,e[s+1],21,-2054922799),r=w(r,i,n,o,e[s+8],6,1873313359),o=w(o,r,i,n,e[s+15],10,-30611744),n=w(n,o,r,i,e[s+6],15,-1560198380),i=w(i,n,o,r,e[s+13],21,1309151649),r=w(r,i,n,o,e[s+4],6,-145523070),o=w(o,r,i,n,e[s+11],10,-1120210379),n=w(n,o,r,i,e[s+2],15,718787259),i=w(i,n,o,r,e[s+9],21,-343485551),r=_(r,a),i=_(i,u),n=_(n,l),o=_(o,c)}return[r,i,n,o]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(y(t)),i=0;i<t;i+=8)r[i>>5]|=(255&e[i/8])<<i%32;return r}(e),8*e.length))})),A=function(e,t,r){var i=(e=e||{}).random||(e.rng||o)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){r=r||0;for(var n=0;n<16;++n)t[r+n]=i[n];return t}return c(i)};function I(e,t,r,i){switch(e){case 0:return t&r^~t&i;case 1:case 3:return t^r^i;case 2:return t&r^t&i^r&i}}function L(e,t){return e<<t|e>>>32-t}const C=v("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var i=unescape(encodeURIComponent(e));e=[];for(var n=0;n<i.length;++n)e.push(i.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,s=Math.ceil(o/16),a=new Array(s),u=0;u<s;++u){for(var l=new Uint32Array(16),c=0;c<16;++c)l[c]=e[64*u+4*c]<<24|e[64*u+4*c+1]<<16|e[64*u+4*c+2]<<8|e[64*u+4*c+3];a[u]=l}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(var h=0;h<s;++h){for(var p=new Uint32Array(80),d=0;d<16;++d)p[d]=a[h][d];for(var f=16;f<80;++f)p[f]=L(p[f-3]^p[f-8]^p[f-14]^p[f-16],1);for(var g=r[0],m=r[1],v=r[2],y=r[3],_=r[4],E=0;E<80;++E){var x=Math.floor(E/20),b=L(g,5)+I(x,m,v,y)+_+t[x]+p[E]>>>0;_=y,y=v,v=L(m,30)>>>0,m=g,g=b}r[0]=r[0]+g>>>0,r[1]=r[1]+m>>>0,r[2]=r[2]+v>>>0,r[3]=r[3]+y>>>0,r[4]=r[4]+_>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]})),N="00000000-0000-0000-0000-000000000000",R=function(e){if(!a(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},4186:function(e,t,r){var i;e.exports=((i=r(2169)).Wkt.prototype.isRectangle=!1,i.Wkt.prototype.trunc=function(e){var t,r=[];for(t=0;t<e.length;t+=1)i.isArray(e[t])?r.push(this.trunc(e[t])):0!==t&&this.sameCoords(e[0],e[t])||r.push(e[t]);return r},i.Wkt.prototype.construct={point:function(e,t){var r=t||this.components;return r instanceof Array&&(r=r[0]),L.marker(this.coordsToLatLng(r),e)},multipoint:function(e){var t,r=[],i=this.components;for(t=0;t<i.length;t+=1)r.push(this.construct.point.call(this,e,i[t]));return L.featureGroup(r,e)},linestring:function(e,t){var r=t||this.components,i=this.coordsToLatLngs(r,0,this.coordsToLatLng);return L.polyline(i,e)},multilinestring:function(e){var t=this.components,r=this.coordsToLatLngs(t,1,this.coordsToLatLng);return L.multiPolyline?L.multiPolyline(r,e):L.polyline(r,e)},polygon:function(e){var t=this.trunc(this.components),r=this.coordsToLatLngs(t,1,this.coordsToLatLng);return L.polygon(r,e)},multipolygon:function(e){var t=this.trunc(this.components),r=this.coordsToLatLngs(t,2,this.coordsToLatLng);return L.multiPolygon?L.multiPolygon(r,e):L.polygon(r,e)},geometrycollection:function(e){var t,r,i;for(t=this.trunc(this.components),i=[],r=0;r<this.components.length;r+=1)i.push(this.construct[t[r].type].call(this,t[r]));return L.featureGroup(i,e)}},L.Util.extend(i.Wkt.prototype,{coordsToLatLngs:L.GeoJSON.coordsToLatLngs,coordsToLatLng:function(e,t){var r=t?e.x:e.y,i=t?e.y:e.x;return L.latLng(r,i,!0)}}),i.Wkt.prototype.deconstruct=function(e){var t,r,n,o,s,a,u,l;if(r=function(e){var t,n;for(n=[],t=0;t<e.length;t+=1)i.isArray(e[t])?n.push(r(e[t])):n.push({x:e[t].lng,y:e[t].lat});return n},e.constructor===L.Marker||e.constructor===L.marker)return{type:"point",components:[{x:e.getLatLng().lng,y:e.getLatLng().lat}]};if(e.constructor===L.Rectangle||e.constructor===L.rectangle)return{type:"polygon",isRectangle:!0,components:[[{x:(u=e.getBounds()).getSouthWest().lng,y:u.getNorthEast().lat},{x:u.getNorthEast().lng,y:u.getNorthEast().lat},{x:u.getNorthEast().lng,y:u.getSouthWest().lat},{x:u.getSouthWest().lng,y:u.getSouthWest().lat},{x:u.getSouthWest().lng,y:u.getNorthEast().lat}]]};if((e.constructor===L.Polyline||e.constructor===L.polyline)&&(s=[],!(u=e.getLatLngs())[0].equals(u[u.length-1]))){for(o=0;o<u.length;o+=1)s.push({x:u[o].lng,y:u[o].lat});return{type:"linestring",components:s}}if(e.constructor===L.Polygon||e.constructor===L.polygon){for(a=[],s=[],l=e.getLatLngs()[0],o=0;o<l.length;o+=1)s.push({x:l[o].lng,y:l[o].lat});if(s.push({x:l[0].lng,y:l[0].lat}),a.push(s),e._holes&&e._holes.length>0)for(s=r(e._holes),o=0;o<s.length;o++)s[o].push(s[o][0]),a.push(s[o]);return{type:"polygon",components:a}}if(e.constructor===L.MultiPolyline||e.constructor===L.MultiPolygon||e.constructor===L.LayerGroup||e.constructor===L.FeatureGroup){for(t in n=[],u=e._layers)u.hasOwnProperty(t)&&(u[t].getLatLngs||u[t].getLatLng)&&n.push(this.deconstruct(u[t]));return{type:function(){switch(e.constructor){case L.MultiPolyline:return"multilinestring";case L.MultiPolygon:return"multipolygon";case L.FeatureGroup:return function(){var t,r,i,n;for(t in r=!0,i=!0,n=!0,e._layers)e._layers.hasOwnProperty(t)&&(e._layers[t].constructor!==L.Marker&&(n=!1),e._layers[t].constructor!==L.Polyline&&(i=!1),e._layers[t].constructor!==L.Polygon&&(r=!1));return n?"multipoint":i?"multilinestring":r?"multipolygon":"geometrycollection"}();default:return"geometrycollection"}}(),components:function(){var e,t;for(t=[],e=0;e<n.length;e+=1)n[e].components&&t.push(n[e].components);return t}()}}e.constructor===L.Circle||e.constructor===L.circle?console.log("Deconstruction of L.Circle objects is not yet supported"):console.log("The passed object does not have any recognizable properties.")},i)},2169:function(e,t,r){var i;i=function(){return e=function(e,t){return e.substring(0,t.length)===t},t=function(e,t){return e.substring(e.length-t.length)===t},(r=function(e){return e instanceof r?e:this instanceof r?void(this._wrapped=e):new r(e)}).delimiter=" ",r.isArray=function(e){return!(!e||e.constructor!==Array)},r.trim=function(r,i){for(i=i||" ";e(r,i);)r=r.substring(1);for(;t(r,i);)r=r.substring(0,r.length-1);return r},r.Wkt=function(e){this.delimiter=r.delimiter||" ",this.wrapVertices=!0,this.regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+|\+/,numeric:/-*\d+(\.*\d+)?/,comma:/\s*,\s*/,parenComma:/\)\s*,\s*\(/,coord:/-*\d+\.*\d+ -*\d+\.*\d+/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,ogcTypes:/^(multi)?(point|line|polygon|box)?(string)?$/i,crudeJson:/^{.*"(type|coordinates|geometries|features)":.*}$/},this._stripWhitespaceAndParens=function(e){return e.trim().replace(/^\(?(.*?)\)?$/,"$1")},this.components=void 0,e&&"string"==typeof e?this.read(e):e&&void 0!==typeof e&&this.fromObject(e)},r.Wkt.prototype.isCollection=function(){switch(this.type.slice(0,5)){case"multi":case"polyg":return!0;default:return!1}},r.Wkt.prototype.sameCoords=function(e,t){return e.x===t.x&&e.y===t.y},r.Wkt.prototype.fromObject=function(e){var t;return t=e.hasOwnProperty("type")&&e.hasOwnProperty("coordinates")?this.fromJson(e):this.deconstruct.call(this,e),this.components=t.components,this.isRectangle=t.isRectangle||!1,this.type=t.type,this},r.Wkt.prototype.toObject=function(e){var t=this.construct[this.type].call(this,e);return"object"!=typeof t||r.isArray(t)||(t.properties=this.properties),t},r.Wkt.prototype.toString=function(e){return this.write()},r.Wkt.prototype.fromJson=function(e){var t,i,n,o,s,a;if(this.type=e.type.toLowerCase(),this.components=[],e.hasOwnProperty("geometry"))return this.fromJson(e.geometry),this.properties=e.properties,this;if(o=e.coordinates,r.isArray(o[0])){for(t in o)if(o.hasOwnProperty(t))if(r.isArray(o[t][0])){for(i in a=[],o[t])if(o[t].hasOwnProperty(i))if(r.isArray(o[t][i][0])){for(n in s=[],o[t][i])o[t][i].hasOwnProperty(n)&&s.push({x:o[t][i][n][0],y:o[t][i][n][1]});a.push(s)}else a.push({x:o[t][i][0],y:o[t][i][1]});this.components.push(a)}else"multipoint"===this.type?this.components.push([{x:o[t][0],y:o[t][1]}]):this.components.push({x:o[t][0],y:o[t][1]})}else this.components.push({x:o[0],y:o[1]});return this},r.Wkt.prototype.toJson=function(){var e,t,i,n,o,s,a;if(e=this.components,t={coordinates:[],type:function(){var e,t,r;for(e in r=[],t=this.regExes.ogcTypes.exec(this.type).slice(1))t.hasOwnProperty(e)&&void 0!==t[e]&&r.push(t[e].toLowerCase().slice(0,1).toUpperCase()+t[e].toLowerCase().slice(1));return r}.call(this).join("")},"box"===this.type.toLowerCase()){for(i in t.type="Polygon",t.bbox=[],e)e.hasOwnProperty(i)&&(t.bbox=t.bbox.concat([e[i].x,e[i].y]));return t.coordinates=[[[e[0].x,e[0].y],[e[0].x,e[1].y],[e[1].x,e[1].y],[e[1].x,e[0].y],[e[0].x,e[0].y]]],t}for(i in e)if(e.hasOwnProperty(i))if(r.isArray(e[i])){for(n in a=[],e[i])if(e[i].hasOwnProperty(n))if(r.isArray(e[i][n])){for(o in s=[],e[i][n])e[i][n].hasOwnProperty(o)&&s.push([e[i][n][o].x,e[i][n][o].y]);a.push(s)}else e[i].length>1?a.push([e[i][n].x,e[i][n].y]):a=a.concat([e[i][n].x,e[i][n].y]);t.coordinates.push(a)}else e.length>1?t.coordinates.push([e[i].x,e[i].y]):t.coordinates=t.coordinates.concat([e[i].x,e[i].y]);return t},r.Wkt.prototype.merge=function(e){var t=this.type.slice(0,5);if(this.type!==e.type&&this.type.slice(5,this.type.length)!==e.type)throw TypeError("The input geometry types must agree or the calling this.Wkt.Wkt instance must be a multigeometry of the other");switch(t){case"point":this.components=[this.components.concat(e.components)];break;case"multi":this.components=this.components.concat("multi"===e.type.slice(0,5)?e.components:[e.components]);break;default:this.components=[this.components,e.components]}return"multi"!==t&&(this.type="multi"+this.type),this},r.Wkt.prototype.read=function(e){var t;if(t=this.regExes.typeStr.exec(e))this.type=t[1].toLowerCase(),this.base=t[2],this.ingest[this.type]&&(this.components=this.ingest[this.type].apply(this,[this.base]));else{if(!this.regExes.crudeJson.test(e))throw console.log("Invalid WKT string provided to read()"),{name:"WKTError",message:"Invalid WKT string provided to read()"};if("object"!=typeof JSON||"function"!=typeof JSON.parse)throw console.log("JSON.parse() is not available; cannot parse GeoJSON strings"),{name:"JSONError",message:"JSON.parse() is not available; cannot parse GeoJSON strings"};this.fromJson(JSON.parse(e))}return this},r.Wkt.prototype.write=function(e){var t,r,i;for(e=e||this.components,(r=[]).push(this.type.toUpperCase()+"("),t=0;t<e.length;t+=1){if(this.isCollection()&&t>0&&r.push(","),!this.extract[this.type])return null;i=this.extract[this.type].apply(this,[e[t]]),this.isCollection()&&"multipoint"!==this.type?r.push("("+i+")"):(r.push(i),t!==e.length-1&&"multipoint"!==this.type&&r.push(","))}return r.push(")"),r.join("")},r.Wkt.prototype.extract={point:function(e){return String(e.x)+this.delimiter+String(e.y)},multipoint:function(e){var t,r,i=[];for(t=0;t<e.length;t+=1)r=this.extract.point.apply(this,[e[t]]),this.wrapVertices&&(r="("+r+")"),i.push(r);return i.join(",")},linestring:function(e){return this.extract.point.apply(this,[e])},multilinestring:function(e){var t,r=[];if(e.length)for(t=0;t<e.length;t+=1)r.push(this.extract.linestring.apply(this,[e[t]]));else r.push(this.extract.point.apply(this,[e]));return r.join(",")},polygon:function(e){return this.extract.multilinestring.apply(this,[e])},multipolygon:function(e){var t,r=[];for(t=0;t<e.length;t+=1)r.push("("+this.extract.polygon.apply(this,[e[t]])+")");return r.join(",")},box:function(e){return this.extract.linestring.apply(this,[e])},geometrycollection:function(e){console.log("The geometrycollection WKT type is not yet supported.")}},r.Wkt.prototype.ingest={point:function(e){var t=r.trim(e).split(this.regExes.spaces);return[{x:parseFloat(this.regExes.numeric.exec(t[0])[0]),y:parseFloat(this.regExes.numeric.exec(t[1])[0])}]},multipoint:function(e){var t,i,n;for(i=[],n=r.trim(e).split(this.regExes.comma),t=0;t<n.length;t+=1)i.push(this.ingest.point.apply(this,[n[t]]));return i},linestring:function(e){var t,r,i;for(r=this.ingest.multipoint.apply(this,[e]),i=[],t=0;t<r.length;t+=1)i=i.concat(r[t]);return i},multilinestring:function(e){var t,i,n,o;for(i=[],1===(o=r.trim(e).split(this.regExes.doubleParenComma)).length&&(o=r.trim(e).split(this.regExes.parenComma)),t=0;t<o.length;t+=1)n=this._stripWhitespaceAndParens(o[t]),i.push(this.ingest.linestring.apply(this,[n]));return i},polygon:function(e){var t,i,n,o,s,a;for(a=r.trim(e).split(this.regExes.parenComma),n=[],t=0;t<a.length;t+=1){for(s=this._stripWhitespaceAndParens(a[t]).split(this.regExes.comma),o=[],i=0;i<s.length;i+=1){var u=s[i].split(this.regExes.spaces);if(u.length>2&&(u=u.filter((function(e){return""!=e}))),2===u.length){var l=u[0],c=u[1];o.push({x:parseFloat(l),y:parseFloat(c)})}}n.push(o)}return n},box:function(e){var t,r,i;for(r=this.ingest.multipoint.apply(this,[e]),i=[],t=0;t<r.length;t+=1)i=i.concat(r[t]);return i},multipolygon:function(e){var t,i,n,o;for(i=[],o=r.trim(e).split(this.regExes.doubleParenComma),t=0;t<o.length;t+=1)n=this._stripWhitespaceAndParens(o[t]),i.push(this.ingest.polygon.apply(this,[n]));return i},geometrycollection:function(e){console.log("The geometrycollection WKT type is not yet supported.")}},r;var e,t,r}.call(t,r,t,e),void 0===i||(e.exports=i)},8372:(e,t,r)=>{window.console=window.console||{log:function(){}},e.exports={storage:r(4583),svg:r(4641),version:{"yasgui-utils":r(7870).i8},nestedExists:function(e){for(var t=Array.prototype.slice.call(arguments,1),r=0;r<t.length;r++){if(!e||!e.hasOwnProperty(t[r]))return!1;e=e[t[r]]}return!0}}},4583:(e,t,r)=>{var i=r(2269),n={day:function(){return 864e5},month:function(){n.day()},year:function(){n.month()}},o=e.exports={set:function(e,t,r,o){if(i.enabled&&e&&void 0!==t){"string"==typeof r&&(r=n[r]()),t.documentElement&&(t=(new XMLSerializer).serializeToString(t.documentElement));try{i.set(e,{val:t,exp:r,time:(new Date).getTime()})}catch(e){if(e.quotaExceeded=function(e){var t=!1;if(e)if(e.code)switch(e.code){case 22:t=!0;break;case 1014:"NS_ERROR_DOM_QUOTA_REACHED"===e.name&&(t=!0)}else-2147024882===e.number&&(t=!0);return t}(e),!e.quotaExceeded||!o)throw e;o(e)}}},remove:function(e){i.enabled&&e&&i.remove(e)},removeAll:function(e){i.enabled&&(e?"function"==typeof e&&i.each((function(t,r){e(r,t)&&o.remove(r)})):i.clearAll())},get:function(e){if(!i.enabled)return null;if(e){var t=i.get(e);return t?t.exp&&(new Date).getTime()-t.time>t.exp?null:t.val:null}return null}}},4641:e=>{e.exports={draw:function(t,r){if(t){var i=e.exports.getElement(r);i&&(t.append?t.append(i):t.appendChild(i))}},getElement:function(e){if(e&&0==e.indexOf("<svg")){var t=(new DOMParser).parseFromString(e,"text/xml").documentElement,r=document.createElement("div");return r.className="svgImg",r.appendChild(t),r}return!1}}},7706:(e,t,r)=>{"use strict";var i=r(8734);i.deparam=function(e,t){var r={},n={true:!0,false:!1,null:null};return i.each(e.replace(/\+/g," ").split("&"),(function(e,o){var s,a=o.split("="),u=decodeURIComponent(a[0]),l=r,c=0,h=u.split("]["),p=h.length-1;if(/\[/.test(h[0])&&/\]$/.test(h[p])?(h[p]=h[p].replace(/\]$/,""),p=(h=h.shift().split("[").concat(h)).length-1):p=0,2===a.length)if(s=decodeURIComponent(a[1]),t&&(s=s&&!isNaN(s)?+s:"undefined"===s?void 0:void 0!==n[s]?n[s]:s),p)for(;c<=p;c++)l=l[u=""===h[c]?l.length:h[c]]=c<p?l[u]||(h[c+1]&&isNaN(h[c+1])?{}:[]):s;else i.isArray(r[u])?r[u].push(s):void 0!==r[u]?r[u]=[r[u],s]:r[u]=s;else u&&(r[u]=t?void 0:"")})),r}},9852:e=>{e.exports={table:{"*[&&,valueLogical]":{"&&":["[&&,valueLogical]","*[&&,valueLogical]"],AS:[],")":[],",":[],"||":[],";":[]},"*[,,expression]":{",":["[,,expression]","*[,,expression]"],")":[]},"*[,,objectPath]":{",":["[,,objectPath]","*[,,objectPath]"],".":[],";":[],"]":[],"{":[],OPTIONAL:[],MINUS:[],GRAPH:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[],"}":[]},"*[,,object]":{",":["[,,object]","*[,,object]"],".":[],";":[],"]":[],"}":[],GRAPH:[],"{":[],OPTIONAL:[],MINUS:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[]},"*[/,pathEltOrInverse]":{"/":["[/,pathEltOrInverse]","*[/,pathEltOrInverse]"],"|":[],")":[],"(":[],"[":[],VAR1:[],VAR2:[],NIL:[],IRI_REF:[],TRUE:[],FALSE:[],BLANK_NODE_LABEL:[],ANON:[],PNAME_LN:[],PNAME_NS:[],STRING_LITERAL1:[],STRING_LITERAL2:[],STRING_LITERAL_LONG1:[],STRING_LITERAL_LONG2:[],INTEGER:[],DECIMAL:[],DOUBLE:[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[]},"*[;,?[or([verbPath,verbSimple]),objectList]]":{";":["[;,?[or([verbPath,verbSimple]),objectList]]","*[;,?[or([verbPath,verbSimple]),objectList]]"],".":[],"]":[],"{":[],OPTIONAL:[],MINUS:[],GRAPH:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[],"}":[]},"*[;,?[verb,objectList]]":{";":["[;,?[verb,objectList]]","*[;,?[verb,objectList]]"],".":[],"]":[],"}":[],GRAPH:[],"{":[],OPTIONAL:[],MINUS:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[]},"*[UNION,groupGraphPattern]":{UNION:["[UNION,groupGraphPattern]","*[UNION,groupGraphPattern]"],VAR1:[],VAR2:[],NIL:[],"(":[],"[":[],IRI_REF:[],TRUE:[],FALSE:[],BLANK_NODE_LABEL:[],ANON:[],PNAME_LN:[],PNAME_NS:[],STRING_LITERAL1:[],STRING_LITERAL2:[],STRING_LITERAL_LONG1:[],STRING_LITERAL_LONG2:[],INTEGER:[],DECIMAL:[],DOUBLE:[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[],".":[],"{":[],OPTIONAL:[],MINUS:[],GRAPH:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[],"}":[]},"*[graphPatternNotTriples,?.,?triplesBlock]":{"{":["[graphPatternNotTriples,?.,?triplesBlock]","*[graphPatternNotTriples,?.,?triplesBlock]"],OPTIONAL:["[graphPatternNotTriples,?.,?triplesBlock]","*[graphPatternNotTriples,?.,?triplesBlock]"],MINUS:["[graphPatternNotTriples,?.,?triplesBlock]","*[graphPatternNotTriples,?.,?triplesBlock]"],GRAPH:["[graphPatternNotTriples,?.,?triplesBlock]","*[graphPatternNotTriples,?.,?triplesBlock]"],SERVICE:["[graphPatternNotTriples,?.,?triplesBlock]","*[graphPatternNotTriples,?.,?triplesBlock]"],FILTER:["[graphPatternNotTriples,?.,?triplesBlock]","*[graphPatternNotTriples,?.,?triplesBlock]"],BIND:["[graphPatternNotTriples,?.,?triplesBlock]","*[graphPatternNotTriples,?.,?triplesBlock]"],VALUES:["[graphPatternNotTriples,?.,?triplesBlock]","*[graphPatternNotTriples,?.,?triplesBlock]"],"}":[]},"*[quadsNotTriples,?.,?triplesTemplate]":{GRAPH:["[quadsNotTriples,?.,?triplesTemplate]","*[quadsNotTriples,?.,?triplesTemplate]"],"}":[]},"*[|,pathOneInPropertySet]":{"|":["[|,pathOneInPropertySet]","*[|,pathOneInPropertySet]"],")":[]},"*[|,pathSequence]":{"|":["[|,pathSequence]","*[|,pathSequence]"],")":[],"(":[],"[":[],VAR1:[],VAR2:[],NIL:[],IRI_REF:[],TRUE:[],FALSE:[],BLANK_NODE_LABEL:[],ANON:[],PNAME_LN:[],PNAME_NS:[],STRING_LITERAL1:[],STRING_LITERAL2:[],STRING_LITERAL_LONG1:[],STRING_LITERAL_LONG2:[],INTEGER:[],DECIMAL:[],DOUBLE:[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[]},"*[||,conditionalAndExpression]":{"||":["[||,conditionalAndExpression]","*[||,conditionalAndExpression]"],AS:[],")":[],",":[],";":[]},"*dataBlockValue":{UNDEF:["dataBlockValue","*dataBlockValue"],IRI_REF:["dataBlockValue","*dataBlockValue"],TRUE:["dataBlockValue","*dataBlockValue"],FALSE:["dataBlockValue","*dataBlockValue"],PNAME_LN:["dataBlockValue","*dataBlockValue"],PNAME_NS:["dataBlockValue","*dataBlockValue"],STRING_LITERAL1:["dataBlockValue","*dataBlockValue"],STRING_LITERAL2:["dataBlockValue","*dataBlockValue"],STRING_LITERAL_LONG1:["dataBlockValue","*dataBlockValue"],STRING_LITERAL_LONG2:["dataBlockValue","*dataBlockValue"],INTEGER:["dataBlockValue","*dataBlockValue"],DECIMAL:["dataBlockValue","*dataBlockValue"],DOUBLE:["dataBlockValue","*dataBlockValue"],INTEGER_POSITIVE:["dataBlockValue","*dataBlockValue"],DECIMAL_POSITIVE:["dataBlockValue","*dataBlockValue"],DOUBLE_POSITIVE:["dataBlockValue","*dataBlockValue"],INTEGER_NEGATIVE:["dataBlockValue","*dataBlockValue"],DECIMAL_NEGATIVE:["dataBlockValue","*dataBlockValue"],DOUBLE_NEGATIVE:["dataBlockValue","*dataBlockValue"],"}":[],")":[]},"*datasetClause":{FROM:["datasetClause","*datasetClause"],WHERE:[],"{":[]},"*describeDatasetClause":{FROM:["describeDatasetClause","*describeDatasetClause"],ORDER:[],HAVING:[],GROUP:[],LIMIT:[],OFFSET:[],WHERE:[],"{":[],VALUES:[],$:[]},"*graphNode":{"(":["graphNode","*graphNode"],"[":["graphNode","*graphNode"],VAR1:["graphNode","*graphNode"],VAR2:["graphNode","*graphNode"],NIL:["graphNode","*graphNode"],IRI_REF:["graphNode","*graphNode"],TRUE:["graphNode","*graphNode"],FALSE:["graphNode","*graphNode"],BLANK_NODE_LABEL:["graphNode","*graphNode"],ANON:["graphNode","*graphNode"],PNAME_LN:["graphNode","*graphNode"],PNAME_NS:["graphNode","*graphNode"],STRING_LITERAL1:["graphNode","*graphNode"],STRING_LITERAL2:["graphNode","*graphNode"],STRING_LITERAL_LONG1:["graphNode","*graphNode"],STRING_LITERAL_LONG2:["graphNode","*graphNode"],INTEGER:["graphNode","*graphNode"],DECIMAL:["graphNode","*graphNode"],DOUBLE:["graphNode","*graphNode"],INTEGER_POSITIVE:["graphNode","*graphNode"],DECIMAL_POSITIVE:["graphNode","*graphNode"],DOUBLE_POSITIVE:["graphNode","*graphNode"],INTEGER_NEGATIVE:["graphNode","*graphNode"],DECIMAL_NEGATIVE:["graphNode","*graphNode"],DOUBLE_NEGATIVE:["graphNode","*graphNode"],")":[]},"*graphNodePath":{"(":["graphNodePath","*graphNodePath"],"[":["graphNodePath","*graphNodePath"],VAR1:["graphNodePath","*graphNodePath"],VAR2:["graphNodePath","*graphNodePath"],NIL:["graphNodePath","*graphNodePath"],IRI_REF:["graphNodePath","*graphNodePath"],TRUE:["graphNodePath","*graphNodePath"],FALSE:["graphNodePath","*graphNodePath"],BLANK_NODE_LABEL:["graphNodePath","*graphNodePath"],ANON:["graphNodePath","*graphNodePath"],PNAME_LN:["graphNodePath","*graphNodePath"],PNAME_NS:["graphNodePath","*graphNodePath"],STRING_LITERAL1:["graphNodePath","*graphNodePath"],STRING_LITERAL2:["graphNodePath","*graphNodePath"],STRING_LITERAL_LONG1:["graphNodePath","*graphNodePath"],STRING_LITERAL_LONG2:["graphNodePath","*graphNodePath"],INTEGER:["graphNodePath","*graphNodePath"],DECIMAL:["graphNodePath","*graphNodePath"],DOUBLE:["graphNodePath","*graphNodePath"],INTEGER_POSITIVE:["graphNodePath","*graphNodePath"],DECIMAL_POSITIVE:["graphNodePath","*graphNodePath"],DOUBLE_POSITIVE:["graphNodePath","*graphNodePath"],INTEGER_NEGATIVE:["graphNodePath","*graphNodePath"],DECIMAL_NEGATIVE:["graphNodePath","*graphNodePath"],DOUBLE_NEGATIVE:["graphNodePath","*graphNodePath"],")":[]},"*groupCondition":{"(":["groupCondition","*groupCondition"],STR:["groupCondition","*groupCondition"],LANG:["groupCondition","*groupCondition"],LANGMATCHES:["groupCondition","*groupCondition"],DATATYPE:["groupCondition","*groupCondition"],BOUND:["groupCondition","*groupCondition"],IRI:["groupCondition","*groupCondition"],URI:["groupCondition","*groupCondition"],BNODE:["groupCondition","*groupCondition"],RAND:["groupCondition","*groupCondition"],ABS:["groupCondition","*groupCondition"],CEIL:["groupCondition","*groupCondition"],FLOOR:["groupCondition","*groupCondition"],ROUND:["groupCondition","*groupCondition"],CONCAT:["groupCondition","*groupCondition"],STRLEN:["groupCondition","*groupCondition"],UCASE:["groupCondition","*groupCondition"],LCASE:["groupCondition","*groupCondition"],ENCODE_FOR_URI:["groupCondition","*groupCondition"],CONTAINS:["groupCondition","*groupCondition"],STRSTARTS:["groupCondition","*groupCondition"],STRENDS:["groupCondition","*groupCondition"],STRBEFORE:["groupCondition","*groupCondition"],STRAFTER:["groupCondition","*groupCondition"],YEAR:["groupCondition","*groupCondition"],MONTH:["groupCondition","*groupCondition"],DAY:["groupCondition","*groupCondition"],HOURS:["groupCondition","*groupCondition"],MINUTES:["groupCondition","*groupCondition"],SECONDS:["groupCondition","*groupCondition"],TIMEZONE:["groupCondition","*groupCondition"],TZ:["groupCondition","*groupCondition"],NOW:["groupCondition","*groupCondition"],UUID:["groupCondition","*groupCondition"],STRUUID:["groupCondition","*groupCondition"],MD5:["groupCondition","*groupCondition"],SHA1:["groupCondition","*groupCondition"],SHA256:["groupCondition","*groupCondition"],SHA384:["groupCondition","*groupCondition"],SHA512:["groupCondition","*groupCondition"],COALESCE:["groupCondition","*groupCondition"],IF:["groupCondition","*groupCondition"],STRLANG:["groupCondition","*groupCondition"],STRDT:["groupCondition","*groupCondition"],SAMETERM:["groupCondition","*groupCondition"],ISIRI:["groupCondition","*groupCondition"],ISURI:["groupCondition","*groupCondition"],ISBLANK:["groupCondition","*groupCondition"],ISLITERAL:["groupCondition","*groupCondition"],ISNUMERIC:["groupCondition","*groupCondition"],VAR1:["groupCondition","*groupCondition"],VAR2:["groupCondition","*groupCondition"],SUBSTR:["groupCondition","*groupCondition"],REPLACE:["groupCondition","*groupCondition"],REGEX:["groupCondition","*groupCondition"],EXISTS:["groupCondition","*groupCondition"],NOT:["groupCondition","*groupCondition"],IRI_REF:["groupCondition","*groupCondition"],PNAME_LN:["groupCondition","*groupCondition"],PNAME_NS:["groupCondition","*groupCondition"],VALUES:[],LIMIT:[],OFFSET:[],ORDER:[],HAVING:[],$:[],"}":[]},"*havingCondition":{"(":["havingCondition","*havingCondition"],STR:["havingCondition","*havingCondition"],LANG:["havingCondition","*havingCondition"],LANGMATCHES:["havingCondition","*havingCondition"],DATATYPE:["havingCondition","*havingCondition"],BOUND:["havingCondition","*havingCondition"],IRI:["havingCondition","*havingCondition"],URI:["havingCondition","*havingCondition"],BNODE:["havingCondition","*havingCondition"],RAND:["havingCondition","*havingCondition"],ABS:["havingCondition","*havingCondition"],CEIL:["havingCondition","*havingCondition"],FLOOR:["havingCondition","*havingCondition"],ROUND:["havingCondition","*havingCondition"],CONCAT:["havingCondition","*havingCondition"],STRLEN:["havingCondition","*havingCondition"],UCASE:["havingCondition","*havingCondition"],LCASE:["havingCondition","*havingCondition"],ENCODE_FOR_URI:["havingCondition","*havingCondition"],CONTAINS:["havingCondition","*havingCondition"],STRSTARTS:["havingCondition","*havingCondition"],STRENDS:["havingCondition","*havingCondition"],STRBEFORE:["havingCondition","*havingCondition"],STRAFTER:["havingCondition","*havingCondition"],YEAR:["havingCondition","*havingCondition"],MONTH:["havingCondition","*havingCondition"],DAY:["havingCondition","*havingCondition"],HOURS:["havingCondition","*havingCondition"],MINUTES:["havingCondition","*havingCondition"],SECONDS:["havingCondition","*havingCondition"],TIMEZONE:["havingCondition","*havingCondition"],TZ:["havingCondition","*havingCondition"],NOW:["havingCondition","*havingCondition"],UUID:["havingCondition","*havingCondition"],STRUUID:["havingCondition","*havingCondition"],MD5:["havingCondition","*havingCondition"],SHA1:["havingCondition","*havingCondition"],SHA256:["havingCondition","*havingCondition"],SHA384:["havingCondition","*havingCondition"],SHA512:["havingCondition","*havingCondition"],COALESCE:["havingCondition","*havingCondition"],IF:["havingCondition","*havingCondition"],STRLANG:["havingCondition","*havingCondition"],STRDT:["havingCondition","*havingCondition"],SAMETERM:["havingCondition","*havingCondition"],ISIRI:["havingCondition","*havingCondition"],ISURI:["havingCondition","*havingCondition"],ISBLANK:["havingCondition","*havingCondition"],ISLITERAL:["havingCondition","*havingCondition"],ISNUMERIC:["havingCondition","*havingCondition"],SUBSTR:["havingCondition","*havingCondition"],REPLACE:["havingCondition","*havingCondition"],REGEX:["havingCondition","*havingCondition"],EXISTS:["havingCondition","*havingCondition"],NOT:["havingCondition","*havingCondition"],IRI_REF:["havingCondition","*havingCondition"],PNAME_LN:["havingCondition","*havingCondition"],PNAME_NS:["havingCondition","*havingCondition"],VALUES:[],LIMIT:[],OFFSET:[],ORDER:[],$:[],"}":[]},"*or([[(,*dataBlockValue,)],NIL])":{"(":["or([[(,*dataBlockValue,)],NIL])","*or([[(,*dataBlockValue,)],NIL])"],NIL:["or([[(,*dataBlockValue,)],NIL])","*or([[(,*dataBlockValue,)],NIL])"],"}":[]},"*or([[*,unaryExpression],[/,unaryExpression]])":{"*":["or([[*,unaryExpression],[/,unaryExpression]])","*or([[*,unaryExpression],[/,unaryExpression]])"],"/":["or([[*,unaryExpression],[/,unaryExpression]])","*or([[*,unaryExpression],[/,unaryExpression]])"],AS:[],")":[],",":[],"||":[],"&&":[],"=":[],"!=":[],"<":[],">":[],"<=":[],">=":[],IN:[],NOT:[],"+":[],"-":[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[],";":[]},"*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])":{"+":["or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],"-":["or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],INTEGER_POSITIVE:["or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DECIMAL_POSITIVE:["or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DOUBLE_POSITIVE:["or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],INTEGER_NEGATIVE:["or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DECIMAL_NEGATIVE:["or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DOUBLE_NEGATIVE:["or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],AS:[],")":[],",":[],"||":[],"&&":[],"=":[],"!=":[],"<":[],">":[],"<=":[],">=":[],IN:[],NOT:[],";":[]},"*or([baseDecl,prefixDecl])":{BASE:["or([baseDecl,prefixDecl])","*or([baseDecl,prefixDecl])"],PREFIX:["or([baseDecl,prefixDecl])","*or([baseDecl,prefixDecl])"],$:[],CONSTRUCT:[],DESCRIBE:[],ASK:[],INSERT:[],DELETE:[],SELECT:[],LOAD:[],CLEAR:[],DROP:[],ADD:[],MOVE:[],COPY:[],CREATE:[],WITH:[]},"*or([var,[(,expression,AS,var,)]])":{"(":["or([var,[(,expression,AS,var,)]])","*or([var,[(,expression,AS,var,)]])"],VAR1:["or([var,[(,expression,AS,var,)]])","*or([var,[(,expression,AS,var,)]])"],VAR2:["or([var,[(,expression,AS,var,)]])","*or([var,[(,expression,AS,var,)]])"],WHERE:[],"{":[],FROM:[]},"*orderCondition":{ASC:["orderCondition","*orderCondition"],DESC:["orderCondition","*orderCondition"],VAR1:["orderCondition","*orderCondition"],VAR2:["orderCondition","*orderCondition"],"(":["orderCondition","*orderCondition"],STR:["orderCondition","*orderCondition"],LANG:["orderCondition","*orderCondition"],LANGMATCHES:["orderCondition","*orderCondition"],DATATYPE:["orderCondition","*orderCondition"],BOUND:["orderCondition","*orderCondition"],IRI:["orderCondition","*orderCondition"],URI:["orderCondition","*orderCondition"],BNODE:["orderCondition","*orderCondition"],RAND:["orderCondition","*orderCondition"],ABS:["orderCondition","*orderCondition"],CEIL:["orderCondition","*orderCondition"],FLOOR:["orderCondition","*orderCondition"],ROUND:["orderCondition","*orderCondition"],CONCAT:["orderCondition","*orderCondition"],STRLEN:["orderCondition","*orderCondition"],UCASE:["orderCondition","*orderCondition"],LCASE:["orderCondition","*orderCondition"],ENCODE_FOR_URI:["orderCondition","*orderCondition"],CONTAINS:["orderCondition","*orderCondition"],STRSTARTS:["orderCondition","*orderCondition"],STRENDS:["orderCondition","*orderCondition"],STRBEFORE:["orderCondition","*orderCondition"],STRAFTER:["orderCondition","*orderCondition"],YEAR:["orderCondition","*orderCondition"],MONTH:["orderCondition","*orderCondition"],DAY:["orderCondition","*orderCondition"],HOURS:["orderCondition","*orderCondition"],MINUTES:["orderCondition","*orderCondition"],SECONDS:["orderCondition","*orderCondition"],TIMEZONE:["orderCondition","*orderCondition"],TZ:["orderCondition","*orderCondition"],NOW:["orderCondition","*orderCondition"],UUID:["orderCondition","*orderCondition"],STRUUID:["orderCondition","*orderCondition"],MD5:["orderCondition","*orderCondition"],SHA1:["orderCondition","*orderCondition"],SHA256:["orderCondition","*orderCondition"],SHA384:["orderCondition","*orderCondition"],SHA512:["orderCondition","*orderCondition"],COALESCE:["orderCondition","*orderCondition"],IF:["orderCondition","*orderCondition"],STRLANG:["orderCondition","*orderCondition"],STRDT:["orderCondition","*orderCondition"],SAMETERM:["orderCondition","*orderCondition"],ISIRI:["orderCondition","*orderCondition"],ISURI:["orderCondition","*orderCondition"],ISBLANK:["orderCondition","*orderCondition"],ISLITERAL:["orderCondition","*orderCondition"],ISNUMERIC:["orderCondition","*orderCondition"],SUBSTR:["orderCondition","*orderCondition"],REPLACE:["orderCondition","*orderCondition"],REGEX:["orderCondition","*orderCondition"],EXISTS:["orderCondition","*orderCondition"],NOT:["orderCondition","*orderCondition"],IRI_REF:["orderCondition","*orderCondition"],PNAME_LN:["orderCondition","*orderCondition"],PNAME_NS:["orderCondition","*orderCondition"],VALUES:[],LIMIT:[],OFFSET:[],$:[],"}":[]},"*usingClause":{USING:["usingClause","*usingClause"],WHERE:[]},"*var":{VAR1:["var","*var"],VAR2:["var","*var"],")":[]},"*varOrIRIref":{VAR1:["varOrIRIref","*varOrIRIref"],VAR2:["varOrIRIref","*varOrIRIref"],IRI_REF:["varOrIRIref","*varOrIRIref"],PNAME_LN:["varOrIRIref","*varOrIRIref"],PNAME_NS:["varOrIRIref","*varOrIRIref"],ORDER:[],HAVING:[],GROUP:[],LIMIT:[],OFFSET:[],WHERE:[],"{":[],FROM:[],VALUES:[],$:[]},"+graphNode":{"(":["graphNode","*graphNode"],"[":["graphNode","*graphNode"],VAR1:["graphNode","*graphNode"],VAR2:["graphNode","*graphNode"],NIL:["graphNode","*graphNode"],IRI_REF:["graphNode","*graphNode"],TRUE:["graphNode","*graphNode"],FALSE:["graphNode","*graphNode"],BLANK_NODE_LABEL:["graphNode","*graphNode"],ANON:["graphNode","*graphNode"],PNAME_LN:["graphNode","*graphNode"],PNAME_NS:["graphNode","*graphNode"],STRING_LITERAL1:["graphNode","*graphNode"],STRING_LITERAL2:["graphNode","*graphNode"],STRING_LITERAL_LONG1:["graphNode","*graphNode"],STRING_LITERAL_LONG2:["graphNode","*graphNode"],INTEGER:["graphNode","*graphNode"],DECIMAL:["graphNode","*graphNode"],DOUBLE:["graphNode","*graphNode"],INTEGER_POSITIVE:["graphNode","*graphNode"],DECIMAL_POSITIVE:["graphNode","*graphNode"],DOUBLE_POSITIVE:["graphNode","*graphNode"],INTEGER_NEGATIVE:["graphNode","*graphNode"],DECIMAL_NEGATIVE:["graphNode","*graphNode"],DOUBLE_NEGATIVE:["graphNode","*graphNode"]},"+graphNodePath":{"(":["graphNodePath","*graphNodePath"],"[":["graphNodePath","*graphNodePath"],VAR1:["graphNodePath","*graphNodePath"],VAR2:["graphNodePath","*graphNodePath"],NIL:["graphNodePath","*graphNodePath"],IRI_REF:["graphNodePath","*graphNodePath"],TRUE:["graphNodePath","*graphNodePath"],FALSE:["graphNodePath","*graphNodePath"],BLANK_NODE_LABEL:["graphNodePath","*graphNodePath"],ANON:["graphNodePath","*graphNodePath"],PNAME_LN:["graphNodePath","*graphNodePath"],PNAME_NS:["graphNodePath","*graphNodePath"],STRING_LITERAL1:["graphNodePath","*graphNodePath"],STRING_LITERAL2:["graphNodePath","*graphNodePath"],STRING_LITERAL_LONG1:["graphNodePath","*graphNodePath"],STRING_LITERAL_LONG2:["graphNodePath","*graphNodePath"],INTEGER:["graphNodePath","*graphNodePath"],DECIMAL:["graphNodePath","*graphNodePath"],DOUBLE:["graphNodePath","*graphNodePath"],INTEGER_POSITIVE:["graphNodePath","*graphNodePath"],DECIMAL_POSITIVE:["graphNodePath","*graphNodePath"],DOUBLE_POSITIVE:["graphNodePath","*graphNodePath"],INTEGER_NEGATIVE:["graphNodePath","*graphNodePath"],DECIMAL_NEGATIVE:["graphNodePath","*graphNodePath"],DOUBLE_NEGATIVE:["graphNodePath","*graphNodePath"]},"+groupCondition":{"(":["groupCondition","*groupCondition"],STR:["groupCondition","*groupCondition"],LANG:["groupCondition","*groupCondition"],LANGMATCHES:["groupCondition","*groupCondition"],DATATYPE:["groupCondition","*groupCondition"],BOUND:["groupCondition","*groupCondition"],IRI:["groupCondition","*groupCondition"],URI:["groupCondition","*groupCondition"],BNODE:["groupCondition","*groupCondition"],RAND:["groupCondition","*groupCondition"],ABS:["groupCondition","*groupCondition"],CEIL:["groupCondition","*groupCondition"],FLOOR:["groupCondition","*groupCondition"],ROUND:["groupCondition","*groupCondition"],CONCAT:["groupCondition","*groupCondition"],STRLEN:["groupCondition","*groupCondition"],UCASE:["groupCondition","*groupCondition"],LCASE:["groupCondition","*groupCondition"],ENCODE_FOR_URI:["groupCondition","*groupCondition"],CONTAINS:["groupCondition","*groupCondition"],STRSTARTS:["groupCondition","*groupCondition"],STRENDS:["groupCondition","*groupCondition"],STRBEFORE:["groupCondition","*groupCondition"],STRAFTER:["groupCondition","*groupCondition"],YEAR:["groupCondition","*groupCondition"],MONTH:["groupCondition","*groupCondition"],DAY:["groupCondition","*groupCondition"],HOURS:["groupCondition","*groupCondition"],MINUTES:["groupCondition","*groupCondition"],SECONDS:["groupCondition","*groupCondition"],TIMEZONE:["groupCondition","*groupCondition"],TZ:["groupCondition","*groupCondition"],NOW:["groupCondition","*groupCondition"],UUID:["groupCondition","*groupCondition"],STRUUID:["groupCondition","*groupCondition"],MD5:["groupCondition","*groupCondition"],SHA1:["groupCondition","*groupCondition"],SHA256:["groupCondition","*groupCondition"],SHA384:["groupCondition","*groupCondition"],SHA512:["groupCondition","*groupCondition"],COALESCE:["groupCondition","*groupCondition"],IF:["groupCondition","*groupCondition"],STRLANG:["groupCondition","*groupCondition"],STRDT:["groupCondition","*groupCondition"],SAMETERM:["groupCondition","*groupCondition"],ISIRI:["groupCondition","*groupCondition"],ISURI:["groupCondition","*groupCondition"],ISBLANK:["groupCondition","*groupCondition"],ISLITERAL:["groupCondition","*groupCondition"],ISNUMERIC:["groupCondition","*groupCondition"],VAR1:["groupCondition","*groupCondition"],VAR2:["groupCondition","*groupCondition"],SUBSTR:["groupCondition","*groupCondition"],REPLACE:["groupCondition","*groupCondition"],REGEX:["groupCondition","*groupCondition"],EXISTS:["groupCondition","*groupCondition"],NOT:["groupCondition","*groupCondition"],IRI_REF:["groupCondition","*groupCondition"],PNAME_LN:["groupCondition","*groupCondition"],PNAME_NS:["groupCondition","*groupCondition"]},"+havingCondition":{"(":["havingCondition","*havingCondition"],STR:["havingCondition","*havingCondition"],LANG:["havingCondition","*havingCondition"],LANGMATCHES:["havingCondition","*havingCondition"],DATATYPE:["havingCondition","*havingCondition"],BOUND:["havingCondition","*havingCondition"],IRI:["havingCondition","*havingCondition"],URI:["havingCondition","*havingCondition"],BNODE:["havingCondition","*havingCondition"],RAND:["havingCondition","*havingCondition"],ABS:["havingCondition","*havingCondition"],CEIL:["havingCondition","*havingCondition"],FLOOR:["havingCondition","*havingCondition"],ROUND:["havingCondition","*havingCondition"],CONCAT:["havingCondition","*havingCondition"],STRLEN:["havingCondition","*havingCondition"],UCASE:["havingCondition","*havingCondition"],LCASE:["havingCondition","*havingCondition"],ENCODE_FOR_URI:["havingCondition","*havingCondition"],CONTAINS:["havingCondition","*havingCondition"],STRSTARTS:["havingCondition","*havingCondition"],STRENDS:["havingCondition","*havingCondition"],STRBEFORE:["havingCondition","*havingCondition"],STRAFTER:["havingCondition","*havingCondition"],YEAR:["havingCondition","*havingCondition"],MONTH:["havingCondition","*havingCondition"],DAY:["havingCondition","*havingCondition"],HOURS:["havingCondition","*havingCondition"],MINUTES:["havingCondition","*havingCondition"],SECONDS:["havingCondition","*havingCondition"],TIMEZONE:["havingCondition","*havingCondition"],TZ:["havingCondition","*havingCondition"],NOW:["havingCondition","*havingCondition"],UUID:["havingCondition","*havingCondition"],STRUUID:["havingCondition","*havingCondition"],MD5:["havingCondition","*havingCondition"],SHA1:["havingCondition","*havingCondition"],SHA256:["havingCondition","*havingCondition"],SHA384:["havingCondition","*havingCondition"],SHA512:["havingCondition","*havingCondition"],COALESCE:["havingCondition","*havingCondition"],IF:["havingCondition","*havingCondition"],STRLANG:["havingCondition","*havingCondition"],STRDT:["havingCondition","*havingCondition"],SAMETERM:["havingCondition","*havingCondition"],ISIRI:["havingCondition","*havingCondition"],ISURI:["havingCondition","*havingCondition"],ISBLANK:["havingCondition","*havingCondition"],ISLITERAL:["havingCondition","*havingCondition"],ISNUMERIC:["havingCondition","*havingCondition"],SUBSTR:["havingCondition","*havingCondition"],REPLACE:["havingCondition","*havingCondition"],REGEX:["havingCondition","*havingCondition"],EXISTS:["havingCondition","*havingCondition"],NOT:["havingCondition","*havingCondition"],IRI_REF:["havingCondition","*havingCondition"],PNAME_LN:["havingCondition","*havingCondition"],PNAME_NS:["havingCondition","*havingCondition"]},"+or([var,[(,expression,AS,var,)]])":{"(":["or([var,[(,expression,AS,var,)]])","*or([var,[(,expression,AS,var,)]])"],VAR1:["or([var,[(,expression,AS,var,)]])","*or([var,[(,expression,AS,var,)]])"],VAR2:["or([var,[(,expression,AS,var,)]])","*or([var,[(,expression,AS,var,)]])"]},"+orderCondition":{ASC:["orderCondition","*orderCondition"],DESC:["orderCondition","*orderCondition"],VAR1:["orderCondition","*orderCondition"],VAR2:["orderCondition","*orderCondition"],"(":["orderCondition","*orderCondition"],STR:["orderCondition","*orderCondition"],LANG:["orderCondition","*orderCondition"],LANGMATCHES:["orderCondition","*orderCondition"],DATATYPE:["orderCondition","*orderCondition"],BOUND:["orderCondition","*orderCondition"],IRI:["orderCondition","*orderCondition"],URI:["orderCondition","*orderCondition"],BNODE:["orderCondition","*orderCondition"],RAND:["orderCondition","*orderCondition"],ABS:["orderCondition","*orderCondition"],CEIL:["orderCondition","*orderCondition"],FLOOR:["orderCondition","*orderCondition"],ROUND:["orderCondition","*orderCondition"],CONCAT:["orderCondition","*orderCondition"],STRLEN:["orderCondition","*orderCondition"],UCASE:["orderCondition","*orderCondition"],LCASE:["orderCondition","*orderCondition"],ENCODE_FOR_URI:["orderCondition","*orderCondition"],CONTAINS:["orderCondition","*orderCondition"],STRSTARTS:["orderCondition","*orderCondition"],STRENDS:["orderCondition","*orderCondition"],STRBEFORE:["orderCondition","*orderCondition"],STRAFTER:["orderCondition","*orderCondition"],YEAR:["orderCondition","*orderCondition"],MONTH:["orderCondition","*orderCondition"],DAY:["orderCondition","*orderCondition"],HOURS:["orderCondition","*orderCondition"],MINUTES:["orderCondition","*orderCondition"],SECONDS:["orderCondition","*orderCondition"],TIMEZONE:["orderCondition","*orderCondition"],TZ:["orderCondition","*orderCondition"],NOW:["orderCondition","*orderCondition"],UUID:["orderCondition","*orderCondition"],STRUUID:["orderCondition","*orderCondition"],MD5:["orderCondition","*orderCondition"],SHA1:["orderCondition","*orderCondition"],SHA256:["orderCondition","*orderCondition"],SHA384:["orderCondition","*orderCondition"],SHA512:["orderCondition","*orderCondition"],COALESCE:["orderCondition","*orderCondition"],IF:["orderCondition","*orderCondition"],STRLANG:["orderCondition","*orderCondition"],STRDT:["orderCondition","*orderCondition"],SAMETERM:["orderCondition","*orderCondition"],ISIRI:["orderCondition","*orderCondition"],ISURI:["orderCondition","*orderCondition"],ISBLANK:["orderCondition","*orderCondition"],ISLITERAL:["orderCondition","*orderCondition"],ISNUMERIC:["orderCondition","*orderCondition"],SUBSTR:["orderCondition","*orderCondition"],REPLACE:["orderCondition","*orderCondition"],REGEX:["orderCondition","*orderCondition"],EXISTS:["orderCondition","*orderCondition"],NOT:["orderCondition","*orderCondition"],IRI_REF:["orderCondition","*orderCondition"],PNAME_LN:["orderCondition","*orderCondition"],PNAME_NS:["orderCondition","*orderCondition"]},"+varOrIRIref":{VAR1:["varOrIRIref","*varOrIRIref"],VAR2:["varOrIRIref","*varOrIRIref"],IRI_REF:["varOrIRIref","*varOrIRIref"],PNAME_LN:["varOrIRIref","*varOrIRIref"],PNAME_NS:["varOrIRIref","*varOrIRIref"]},"?.":{".":["."],VAR1:[],VAR2:[],NIL:[],"(":[],"[":[],IRI_REF:[],TRUE:[],FALSE:[],BLANK_NODE_LABEL:[],ANON:[],PNAME_LN:[],PNAME_NS:[],STRING_LITERAL1:[],STRING_LITERAL2:[],STRING_LITERAL_LONG1:[],STRING_LITERAL_LONG2:[],INTEGER:[],DECIMAL:[],DOUBLE:[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[],GRAPH:[],"{":[],OPTIONAL:[],MINUS:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[],"}":[]},"?DISTINCT":{DISTINCT:["DISTINCT"],"!":[],"+":[],"-":[],VAR1:[],VAR2:[],"(":[],STR:[],LANG:[],LANGMATCHES:[],DATATYPE:[],BOUND:[],IRI:[],URI:[],BNODE:[],RAND:[],ABS:[],CEIL:[],FLOOR:[],ROUND:[],CONCAT:[],STRLEN:[],UCASE:[],LCASE:[],ENCODE_FOR_URI:[],CONTAINS:[],STRSTARTS:[],STRENDS:[],STRBEFORE:[],STRAFTER:[],YEAR:[],MONTH:[],DAY:[],HOURS:[],MINUTES:[],SECONDS:[],TIMEZONE:[],TZ:[],NOW:[],UUID:[],STRUUID:[],MD5:[],SHA1:[],SHA256:[],SHA384:[],SHA512:[],COALESCE:[],IF:[],STRLANG:[],STRDT:[],SAMETERM:[],ISIRI:[],ISURI:[],ISBLANK:[],ISLITERAL:[],ISNUMERIC:[],TRUE:[],FALSE:[],COUNT:[],SUM:[],MIN:[],MAX:[],AVG:[],SAMPLE:[],GROUP_CONCAT:[],SUBSTR:[],REPLACE:[],REGEX:[],EXISTS:[],NOT:[],IRI_REF:[],STRING_LITERAL1:[],STRING_LITERAL2:[],STRING_LITERAL_LONG1:[],STRING_LITERAL_LONG2:[],INTEGER:[],DECIMAL:[],DOUBLE:[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[],PNAME_LN:[],PNAME_NS:[],"*":[]},"?GRAPH":{GRAPH:["GRAPH"],IRI_REF:[],PNAME_LN:[],PNAME_NS:[]},"?SILENT":{SILENT:["SILENT"],VAR1:[],VAR2:[],IRI_REF:[],PNAME_LN:[],PNAME_NS:[]},"?SILENT_1":{SILENT:["SILENT"],IRI_REF:[],PNAME_LN:[],PNAME_NS:[]},"?SILENT_2":{SILENT:["SILENT"],GRAPH:[],DEFAULT:[],NAMED:[],ALL:[]},"?SILENT_3":{SILENT:["SILENT"],GRAPH:[]},"?SILENT_4":{SILENT:["SILENT"],DEFAULT:[],GRAPH:[],IRI_REF:[],PNAME_LN:[],PNAME_NS:[]},"?WHERE":{WHERE:["WHERE"],"{":[]},"?[,,expression]":{",":["[,,expression]"],")":[]},"?[.,?constructTriples]":{".":["[.,?constructTriples]"],"}":[]},"?[.,?triplesBlock]":{".":["[.,?triplesBlock]"],"{":[],OPTIONAL:[],MINUS:[],GRAPH:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[],"}":[]},"?[.,?triplesTemplate]":{".":["[.,?triplesTemplate]"],"}":[],GRAPH:[]},"?[;,SEPARATOR,=,string]":{";":["[;,SEPARATOR,=,string]"],")":[]},"?[;,update]":{";":["[;,update]"],$:[]},"?[AS,var]":{AS:["[AS,var]"],")":[]},"?[INTO,graphRef]":{INTO:["[INTO,graphRef]"],";":[],$:[]},"?[or([verbPath,verbSimple]),objectList]":{VAR1:["[or([verbPath,verbSimple]),objectList]"],VAR2:["[or([verbPath,verbSimple]),objectList]"],"^":["[or([verbPath,verbSimple]),objectList]"],a:["[or([verbPath,verbSimple]),objectList]"],"!":["[or([verbPath,verbSimple]),objectList]"],"(":["[or([verbPath,verbSimple]),objectList]"],IRI_REF:["[or([verbPath,verbSimple]),objectList]"],PNAME_LN:["[or([verbPath,verbSimple]),objectList]"],PNAME_NS:["[or([verbPath,verbSimple]),objectList]"],";":[],".":[],"]":[],"{":[],OPTIONAL:[],MINUS:[],GRAPH:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[],"}":[]},"?[pathOneInPropertySet,*[|,pathOneInPropertySet]]":{a:["[pathOneInPropertySet,*[|,pathOneInPropertySet]]"],"^":["[pathOneInPropertySet,*[|,pathOneInPropertySet]]"],IRI_REF:["[pathOneInPropertySet,*[|,pathOneInPropertySet]]"],PNAME_LN:["[pathOneInPropertySet,*[|,pathOneInPropertySet]]"],PNAME_NS:["[pathOneInPropertySet,*[|,pathOneInPropertySet]]"],")":[]},"?[update1,?[;,update]]":{INSERT:["[update1,?[;,update]]"],DELETE:["[update1,?[;,update]]"],LOAD:["[update1,?[;,update]]"],CLEAR:["[update1,?[;,update]]"],DROP:["[update1,?[;,update]]"],ADD:["[update1,?[;,update]]"],MOVE:["[update1,?[;,update]]"],COPY:["[update1,?[;,update]]"],CREATE:["[update1,?[;,update]]"],WITH:["[update1,?[;,update]]"],$:[]},"?[verb,objectList]":{a:["[verb,objectList]"],VAR1:["[verb,objectList]"],VAR2:["[verb,objectList]"],IRI_REF:["[verb,objectList]"],PNAME_LN:["[verb,objectList]"],PNAME_NS:["[verb,objectList]"],";":[],".":[],"]":[],"}":[],GRAPH:[],"{":[],OPTIONAL:[],MINUS:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[]},"?argList":{NIL:["argList"],"(":["argList"],AS:[],")":[],",":[],"||":[],"&&":[],"=":[],"!=":[],"<":[],">":[],"<=":[],">=":[],IN:[],NOT:[],"+":[],"-":[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[],"*":[],"/":[],";":[]},"?constructTriples":{VAR1:["constructTriples"],VAR2:["constructTriples"],NIL:["constructTriples"],"(":["constructTriples"],"[":["constructTriples"],IRI_REF:["constructTriples"],TRUE:["constructTriples"],FALSE:["constructTriples"],BLANK_NODE_LABEL:["constructTriples"],ANON:["constructTriples"],PNAME_LN:["constructTriples"],PNAME_NS:["constructTriples"],STRING_LITERAL1:["constructTriples"],STRING_LITERAL2:["constructTriples"],STRING_LITERAL_LONG1:["constructTriples"],STRING_LITERAL_LONG2:["constructTriples"],INTEGER:["constructTriples"],DECIMAL:["constructTriples"],DOUBLE:["constructTriples"],INTEGER_POSITIVE:["constructTriples"],DECIMAL_POSITIVE:["constructTriples"],DOUBLE_POSITIVE:["constructTriples"],INTEGER_NEGATIVE:["constructTriples"],DECIMAL_NEGATIVE:["constructTriples"],DOUBLE_NEGATIVE:["constructTriples"],"}":[]},"?groupClause":{GROUP:["groupClause"],VALUES:[],LIMIT:[],OFFSET:[],ORDER:[],HAVING:[],$:[],"}":[]},"?havingClause":{HAVING:["havingClause"],VALUES:[],LIMIT:[],OFFSET:[],ORDER:[],$:[],"}":[]},"?insertClause":{INSERT:["insertClause"],WHERE:[],USING:[]},"?limitClause":{LIMIT:["limitClause"],VALUES:[],$:[],"}":[]},"?limitOffsetClauses":{LIMIT:["limitOffsetClauses"],OFFSET:["limitOffsetClauses"],VALUES:[],$:[],"}":[]},"?offsetClause":{OFFSET:["offsetClause"],VALUES:[],$:[],"}":[]},"?or([DISTINCT,REDUCED])":{DISTINCT:["or([DISTINCT,REDUCED])"],REDUCED:["or([DISTINCT,REDUCED])"],"*":[],"(":[],VAR1:[],VAR2:[]},"?or([LANGTAG,[^^,iriRef]])":{LANGTAG:["or([LANGTAG,[^^,iriRef]])"],"^^":["or([LANGTAG,[^^,iriRef]])"],UNDEF:[],IRI_REF:[],TRUE:[],FALSE:[],PNAME_LN:[],PNAME_NS:[],STRING_LITERAL1:[],STRING_LITERAL2:[],STRING_LITERAL_LONG1:[],STRING_LITERAL_LONG2:[],INTEGER:[],DECIMAL:[],DOUBLE:[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[],a:[],VAR1:[],VAR2:[],"^":[],"!":[],"(":[],".":[],";":[],",":[],AS:[],")":[],"||":[],"&&":[],"=":[],"!=":[],"<":[],">":[],"<=":[],">=":[],IN:[],NOT:[],"+":[],"-":[],"*":[],"/":[],"}":[],"[":[],NIL:[],BLANK_NODE_LABEL:[],ANON:[],"]":[],GRAPH:[],"{":[],OPTIONAL:[],MINUS:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[]},"?or([[*,unaryExpression],[/,unaryExpression]])":{"*":["or([[*,unaryExpression],[/,unaryExpression]])"],"/":["or([[*,unaryExpression],[/,unaryExpression]])"],"+":[],"-":[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[],AS:[],")":[],",":[],"||":[],"&&":[],"=":[],"!=":[],"<":[],">":[],"<=":[],">=":[],IN:[],NOT:[],";":[]},"?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])":{"=":["or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],"!=":["or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],"<":["or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],">":["or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],"<=":["or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],">=":["or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],IN:["or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],NOT:["or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],AS:[],")":[],",":[],"||":[],"&&":[],";":[]},"?orderClause":{ORDER:["orderClause"],VALUES:[],LIMIT:[],OFFSET:[],$:[],"}":[]},"?pathMod":{"*":["pathMod"],"?":["pathMod"],"+":["pathMod"],"{":["pathMod"],"|":[],"/":[],")":[],"(":[],"[":[],VAR1:[],VAR2:[],NIL:[],IRI_REF:[],TRUE:[],FALSE:[],BLANK_NODE_LABEL:[],ANON:[],PNAME_LN:[],PNAME_NS:[],STRING_LITERAL1:[],STRING_LITERAL2:[],STRING_LITERAL_LONG1:[],STRING_LITERAL_LONG2:[],INTEGER:[],DECIMAL:[],DOUBLE:[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[]},"?triplesBlock":{VAR1:["triplesBlock"],VAR2:["triplesBlock"],NIL:["triplesBlock"],"(":["triplesBlock"],"[":["triplesBlock"],IRI_REF:["triplesBlock"],TRUE:["triplesBlock"],FALSE:["triplesBlock"],BLANK_NODE_LABEL:["triplesBlock"],ANON:["triplesBlock"],PNAME_LN:["triplesBlock"],PNAME_NS:["triplesBlock"],STRING_LITERAL1:["triplesBlock"],STRING_LITERAL2:["triplesBlock"],STRING_LITERAL_LONG1:["triplesBlock"],STRING_LITERAL_LONG2:["triplesBlock"],INTEGER:["triplesBlock"],DECIMAL:["triplesBlock"],DOUBLE:["triplesBlock"],INTEGER_POSITIVE:["triplesBlock"],DECIMAL_POSITIVE:["triplesBlock"],DOUBLE_POSITIVE:["triplesBlock"],INTEGER_NEGATIVE:["triplesBlock"],DECIMAL_NEGATIVE:["triplesBlock"],DOUBLE_NEGATIVE:["triplesBlock"],"{":[],OPTIONAL:[],MINUS:[],GRAPH:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[],"}":[]},"?triplesTemplate":{VAR1:["triplesTemplate"],VAR2:["triplesTemplate"],NIL:["triplesTemplate"],"(":["triplesTemplate"],"[":["triplesTemplate"],IRI_REF:["triplesTemplate"],TRUE:["triplesTemplate"],FALSE:["triplesTemplate"],BLANK_NODE_LABEL:["triplesTemplate"],ANON:["triplesTemplate"],PNAME_LN:["triplesTemplate"],PNAME_NS:["triplesTemplate"],STRING_LITERAL1:["triplesTemplate"],STRING_LITERAL2:["triplesTemplate"],STRING_LITERAL_LONG1:["triplesTemplate"],STRING_LITERAL_LONG2:["triplesTemplate"],INTEGER:["triplesTemplate"],DECIMAL:["triplesTemplate"],DOUBLE:["triplesTemplate"],INTEGER_POSITIVE:["triplesTemplate"],DECIMAL_POSITIVE:["triplesTemplate"],DOUBLE_POSITIVE:["triplesTemplate"],INTEGER_NEGATIVE:["triplesTemplate"],DECIMAL_NEGATIVE:["triplesTemplate"],DOUBLE_NEGATIVE:["triplesTemplate"],"}":[],GRAPH:[]},"?whereClause":{WHERE:["whereClause"],"{":["whereClause"],ORDER:[],HAVING:[],GROUP:[],LIMIT:[],OFFSET:[],VALUES:[],$:[]},"[!=,numericExpression]":{"!=":["!=","numericExpression"]},"[&&,valueLogical]":{"&&":["&&","valueLogical"]},"[(,*dataBlockValue,)]":{"(":["(","*dataBlockValue",")"]},"[(,*var,)]":{"(":["(","*var",")"]},"[(,expression,)]":{"(":["(","expression",")"]},"[(,expression,AS,var,)]":{"(":["(","expression","AS","var",")"]},"[*,unaryExpression]":{"*":["*","unaryExpression"]},"[*datasetClause,WHERE,{,?triplesTemplate,},solutionModifier]":{WHERE:["*datasetClause","WHERE","{","?triplesTemplate","}","solutionModifier"],FROM:["*datasetClause","WHERE","{","?triplesTemplate","}","solutionModifier"]},"[+,multiplicativeExpression]":{"+":["+","multiplicativeExpression"]},"[,,expression]":{",":[",","expression"]},"[,,integer,}]":{",":[",","integer","}"]},"[,,objectPath]":{",":[",","objectPath"]},"[,,object]":{",":[",","object"]},"[,,or([},[integer,}]])]":{",":[",","or([},[integer,}]])"]},"[-,multiplicativeExpression]":{"-":["-","multiplicativeExpression"]},"[.,?constructTriples]":{".":[".","?constructTriples"]},"[.,?triplesBlock]":{".":[".","?triplesBlock"]},"[.,?triplesTemplate]":{".":[".","?triplesTemplate"]},"[/,pathEltOrInverse]":{"/":["/","pathEltOrInverse"]},"[/,unaryExpression]":{"/":["/","unaryExpression"]},"[;,?[or([verbPath,verbSimple]),objectList]]":{";":[";","?[or([verbPath,verbSimple]),objectList]"]},"[;,?[verb,objectList]]":{";":[";","?[verb,objectList]"]},"[;,SEPARATOR,=,string]":{";":[";","SEPARATOR","=","string"]},"[;,update]":{";":[";","update"]},"[<,numericExpression]":{"<":["<","numericExpression"]},"[<=,numericExpression]":{"<=":["<=","numericExpression"]},"[=,numericExpression]":{"=":["=","numericExpression"]},"[>,numericExpression]":{">":[">","numericExpression"]},"[>=,numericExpression]":{">=":[">=","numericExpression"]},"[AS,var]":{AS:["AS","var"]},"[IN,expressionList]":{IN:["IN","expressionList"]},"[INTO,graphRef]":{INTO:["INTO","graphRef"]},"[NAMED,iriRef]":{NAMED:["NAMED","iriRef"]},"[NOT,IN,expressionList]":{NOT:["NOT","IN","expressionList"]},"[UNION,groupGraphPattern]":{UNION:["UNION","groupGraphPattern"]},"[^^,iriRef]":{"^^":["^^","iriRef"]},"[constructTemplate,*datasetClause,whereClause,solutionModifier]":{"{":["constructTemplate","*datasetClause","whereClause","solutionModifier"]},"[deleteClause,?insertClause]":{DELETE:["deleteClause","?insertClause"]},"[graphPatternNotTriples,?.,?triplesBlock]":{"{":["graphPatternNotTriples","?.","?triplesBlock"],OPTIONAL:["graphPatternNotTriples","?.","?triplesBlock"],MINUS:["graphPatternNotTriples","?.","?triplesBlock"],GRAPH:["graphPatternNotTriples","?.","?triplesBlock"],SERVICE:["graphPatternNotTriples","?.","?triplesBlock"],FILTER:["graphPatternNotTriples","?.","?triplesBlock"],BIND:["graphPatternNotTriples","?.","?triplesBlock"],VALUES:["graphPatternNotTriples","?.","?triplesBlock"]},"[integer,or([[,,or([},[integer,}]])],}])]":{INTEGER:["integer","or([[,,or([},[integer,}]])],}])"]},"[integer,}]":{INTEGER:["integer","}"]},"[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]":{INTEGER_POSITIVE:["or([numericLiteralPositive,numericLiteralNegative])","?or([[*,unaryExpression],[/,unaryExpression]])"],DECIMAL_POSITIVE:["or([numericLiteralPositive,numericLiteralNegative])","?or([[*,unaryExpression],[/,unaryExpression]])"],DOUBLE_POSITIVE:["or([numericLiteralPositive,numericLiteralNegative])","?or([[*,unaryExpression],[/,unaryExpression]])"],INTEGER_NEGATIVE:["or([numericLiteralPositive,numericLiteralNegative])","?or([[*,unaryExpression],[/,unaryExpression]])"],DECIMAL_NEGATIVE:["or([numericLiteralPositive,numericLiteralNegative])","?or([[*,unaryExpression],[/,unaryExpression]])"],DOUBLE_NEGATIVE:["or([numericLiteralPositive,numericLiteralNegative])","?or([[*,unaryExpression],[/,unaryExpression]])"]},"[or([verbPath,verbSimple]),objectList]":{VAR1:["or([verbPath,verbSimple])","objectList"],VAR2:["or([verbPath,verbSimple])","objectList"],"^":["or([verbPath,verbSimple])","objectList"],a:["or([verbPath,verbSimple])","objectList"],"!":["or([verbPath,verbSimple])","objectList"],"(":["or([verbPath,verbSimple])","objectList"],IRI_REF:["or([verbPath,verbSimple])","objectList"],PNAME_LN:["or([verbPath,verbSimple])","objectList"],PNAME_NS:["or([verbPath,verbSimple])","objectList"]},"[pathOneInPropertySet,*[|,pathOneInPropertySet]]":{a:["pathOneInPropertySet","*[|,pathOneInPropertySet]"],"^":["pathOneInPropertySet","*[|,pathOneInPropertySet]"],IRI_REF:["pathOneInPropertySet","*[|,pathOneInPropertySet]"],PNAME_LN:["pathOneInPropertySet","*[|,pathOneInPropertySet]"],PNAME_NS:["pathOneInPropertySet","*[|,pathOneInPropertySet]"]},"[quadsNotTriples,?.,?triplesTemplate]":{GRAPH:["quadsNotTriples","?.","?triplesTemplate"]},"[update1,?[;,update]]":{INSERT:["update1","?[;,update]"],DELETE:["update1","?[;,update]"],LOAD:["update1","?[;,update]"],CLEAR:["update1","?[;,update]"],DROP:["update1","?[;,update]"],ADD:["update1","?[;,update]"],MOVE:["update1","?[;,update]"],COPY:["update1","?[;,update]"],CREATE:["update1","?[;,update]"],WITH:["update1","?[;,update]"]},"[verb,objectList]":{a:["verb","objectList"],VAR1:["verb","objectList"],VAR2:["verb","objectList"],IRI_REF:["verb","objectList"],PNAME_LN:["verb","objectList"],PNAME_NS:["verb","objectList"]},"[|,pathOneInPropertySet]":{"|":["|","pathOneInPropertySet"]},"[|,pathSequence]":{"|":["|","pathSequence"]},"[||,conditionalAndExpression]":{"||":["||","conditionalAndExpression"]},add:{ADD:["ADD","?SILENT_4","graphOrDefault","TO","graphOrDefault"]},additiveExpression:{"!":["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],"+":["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],"-":["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],VAR1:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],VAR2:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],"(":["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STR:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],LANG:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],LANGMATCHES:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DATATYPE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],BOUND:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],IRI:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],URI:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],BNODE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],RAND:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],ABS:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],CEIL:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],FLOOR:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],ROUND:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],CONCAT:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRLEN:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],UCASE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],LCASE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],ENCODE_FOR_URI:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],CONTAINS:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRSTARTS:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRENDS:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRBEFORE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRAFTER:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],YEAR:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],MONTH:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DAY:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],HOURS:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],MINUTES:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],SECONDS:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],TIMEZONE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],TZ:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],NOW:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],UUID:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRUUID:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],MD5:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],SHA1:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],SHA256:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],SHA384:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],SHA512:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],COALESCE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],IF:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRLANG:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRDT:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],SAMETERM:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],ISIRI:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],ISURI:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],ISBLANK:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],ISLITERAL:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],ISNUMERIC:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],TRUE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],FALSE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],COUNT:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],SUM:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],MIN:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],MAX:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],AVG:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],SAMPLE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],GROUP_CONCAT:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],SUBSTR:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],REPLACE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],REGEX:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],EXISTS:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],NOT:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],IRI_REF:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRING_LITERAL1:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRING_LITERAL2:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRING_LITERAL_LONG1:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRING_LITERAL_LONG2:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],INTEGER:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DECIMAL:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DOUBLE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],INTEGER_POSITIVE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DECIMAL_POSITIVE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DOUBLE_POSITIVE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],INTEGER_NEGATIVE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DECIMAL_NEGATIVE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DOUBLE_NEGATIVE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],PNAME_LN:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],PNAME_NS:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"]},aggregate:{COUNT:["COUNT","(","?DISTINCT","or([*,expression])",")"],SUM:["SUM","(","?DISTINCT","expression",")"],MIN:["MIN","(","?DISTINCT","expression",")"],MAX:["MAX","(","?DISTINCT","expression",")"],AVG:["AVG","(","?DISTINCT","expression",")"],SAMPLE:["SAMPLE","(","?DISTINCT","expression",")"],GROUP_CONCAT:["GROUP_CONCAT","(","?DISTINCT","expression","?[;,SEPARATOR,=,string]",")"]},allowBnodes:{"}":[]},allowVars:{"}":[]},argList:{NIL:["NIL"],"(":["(","?DISTINCT","expression","*[,,expression]",")"]},askQuery:{ASK:["ASK","*datasetClause","whereClause","solutionModifier"]},baseDecl:{BASE:["BASE","IRI_REF"]},bind:{BIND:["BIND","(","expression","AS","var",")"]},blankNode:{BLANK_NODE_LABEL:["BLANK_NODE_LABEL"],ANON:["ANON"]},blankNodePropertyList:{"[":["[","propertyListNotEmpty","]"]},blankNodePropertyListPath:{"[":["[","propertyListPathNotEmpty","]"]},booleanLiteral:{TRUE:["TRUE"],FALSE:["FALSE"]},brackettedExpression:{"(":["(","expression",")"]},builtInCall:{STR:["STR","(","expression",")"],LANG:["LANG","(","expression",")"],LANGMATCHES:["LANGMATCHES","(","expression",",","expression",")"],DATATYPE:["DATATYPE","(","expression",")"],BOUND:["BOUND","(","var",")"],IRI:["IRI","(","expression",")"],URI:["URI","(","expression",")"],BNODE:["BNODE","or([[(,expression,)],NIL])"],RAND:["RAND","NIL"],ABS:["ABS","(","expression",")"],CEIL:["CEIL","(","expression",")"],FLOOR:["FLOOR","(","expression",")"],ROUND:["ROUND","(","expression",")"],CONCAT:["CONCAT","expressionList"],SUBSTR:["substringExpression"],STRLEN:["STRLEN","(","expression",")"],REPLACE:["strReplaceExpression"],UCASE:["UCASE","(","expression",")"],LCASE:["LCASE","(","expression",")"],ENCODE_FOR_URI:["ENCODE_FOR_URI","(","expression",")"],CONTAINS:["CONTAINS","(","expression",",","expression",")"],STRSTARTS:["STRSTARTS","(","expression",",","expression",")"],STRENDS:["STRENDS","(","expression",",","expression",")"],STRBEFORE:["STRBEFORE","(","expression",",","expression",")"],STRAFTER:["STRAFTER","(","expression",",","expression",")"],YEAR:["YEAR","(","expression",")"],MONTH:["MONTH","(","expression",")"],DAY:["DAY","(","expression",")"],HOURS:["HOURS","(","expression",")"],MINUTES:["MINUTES","(","expression",")"],SECONDS:["SECONDS","(","expression",")"],TIMEZONE:["TIMEZONE","(","expression",")"],TZ:["TZ","(","expression",")"],NOW:["NOW","NIL"],UUID:["UUID","NIL"],STRUUID:["STRUUID","NIL"],MD5:["MD5","(","expression",")"],SHA1:["SHA1","(","expression",")"],SHA256:["SHA256","(","expression",")"],SHA384:["SHA384","(","expression",")"],SHA512:["SHA512","(","expression",")"],COALESCE:["COALESCE","expressionList"],IF:["IF","(","expression",",","expression",",","expression",")"],STRLANG:["STRLANG","(","expression",",","expression",")"],STRDT:["STRDT","(","expression",",","expression",")"],SAMETERM:["SAMETERM","(","expression",",","expression",")"],ISIRI:["ISIRI","(","expression",")"],ISURI:["ISURI","(","expression",")"],ISBLANK:["ISBLANK","(","expression",")"],ISLITERAL:["ISLITERAL","(","expression",")"],ISNUMERIC:["ISNUMERIC","(","expression",")"],REGEX:["regexExpression"],EXISTS:["existsFunc"],NOT:["notExistsFunc"]},clear:{CLEAR:["CLEAR","?SILENT_2","graphRefAll"]},collection:{"(":["(","+graphNode",")"]},collectionPath:{"(":["(","+graphNodePath",")"]},conditionalAndExpression:{"!":["valueLogical","*[&&,valueLogical]"],"+":["valueLogical","*[&&,valueLogical]"],"-":["valueLogical","*[&&,valueLogical]"],VAR1:["valueLogical","*[&&,valueLogical]"],VAR2:["valueLogical","*[&&,valueLogical]"],"(":["valueLogical","*[&&,valueLogical]"],STR:["valueLogical","*[&&,valueLogical]"],LANG:["valueLogical","*[&&,valueLogical]"],LANGMATCHES:["valueLogical","*[&&,valueLogical]"],DATATYPE:["valueLogical","*[&&,valueLogical]"],BOUND:["valueLogical","*[&&,valueLogical]"],IRI:["valueLogical","*[&&,valueLogical]"],URI:["valueLogical","*[&&,valueLogical]"],BNODE:["valueLogical","*[&&,valueLogical]"],RAND:["valueLogical","*[&&,valueLogical]"],ABS:["valueLogical","*[&&,valueLogical]"],CEIL:["valueLogical","*[&&,valueLogical]"],FLOOR:["valueLogical","*[&&,valueLogical]"],ROUND:["valueLogical","*[&&,valueLogical]"],CONCAT:["valueLogical","*[&&,valueLogical]"],STRLEN:["valueLogical","*[&&,valueLogical]"],UCASE:["valueLogical","*[&&,valueLogical]"],LCASE:["valueLogical","*[&&,valueLogical]"],ENCODE_FOR_URI:["valueLogical","*[&&,valueLogical]"],CONTAINS:["valueLogical","*[&&,valueLogical]"],STRSTARTS:["valueLogical","*[&&,valueLogical]"],STRENDS:["valueLogical","*[&&,valueLogical]"],STRBEFORE:["valueLogical","*[&&,valueLogical]"],STRAFTER:["valueLogical","*[&&,valueLogical]"],YEAR:["valueLogical","*[&&,valueLogical]"],MONTH:["valueLogical","*[&&,valueLogical]"],DAY:["valueLogical","*[&&,valueLogical]"],HOURS:["valueLogical","*[&&,valueLogical]"],MINUTES:["valueLogical","*[&&,valueLogical]"],SECONDS:["valueLogical","*[&&,valueLogical]"],TIMEZONE:["valueLogical","*[&&,valueLogical]"],TZ:["valueLogical","*[&&,valueLogical]"],NOW:["valueLogical","*[&&,valueLogical]"],UUID:["valueLogical","*[&&,valueLogical]"],STRUUID:["valueLogical","*[&&,valueLogical]"],MD5:["valueLogical","*[&&,valueLogical]"],SHA1:["valueLogical","*[&&,valueLogical]"],SHA256:["valueLogical","*[&&,valueLogical]"],SHA384:["valueLogical","*[&&,valueLogical]"],SHA512:["valueLogical","*[&&,valueLogical]"],COALESCE:["valueLogical","*[&&,valueLogical]"],IF:["valueLogical","*[&&,valueLogical]"],STRLANG:["valueLogical","*[&&,valueLogical]"],STRDT:["valueLogical","*[&&,valueLogical]"],SAMETERM:["valueLogical","*[&&,valueLogical]"],ISIRI:["valueLogical","*[&&,valueLogical]"],ISURI:["valueLogical","*[&&,valueLogical]"],ISBLANK:["valueLogical","*[&&,valueLogical]"],ISLITERAL:["valueLogical","*[&&,valueLogical]"],ISNUMERIC:["valueLogical","*[&&,valueLogical]"],TRUE:["valueLogical","*[&&,valueLogical]"],FALSE:["valueLogical","*[&&,valueLogical]"],COUNT:["valueLogical","*[&&,valueLogical]"],SUM:["valueLogical","*[&&,valueLogical]"],MIN:["valueLogical","*[&&,valueLogical]"],MAX:["valueLogical","*[&&,valueLogical]"],AVG:["valueLogical","*[&&,valueLogical]"],SAMPLE:["valueLogical","*[&&,valueLogical]"],GROUP_CONCAT:["valueLogical","*[&&,valueLogical]"],SUBSTR:["valueLogical","*[&&,valueLogical]"],REPLACE:["valueLogical","*[&&,valueLogical]"],REGEX:["valueLogical","*[&&,valueLogical]"],EXISTS:["valueLogical","*[&&,valueLogical]"],NOT:["valueLogical","*[&&,valueLogical]"],IRI_REF:["valueLogical","*[&&,valueLogical]"],STRING_LITERAL1:["valueLogical","*[&&,valueLogical]"],STRING_LITERAL2:["valueLogical","*[&&,valueLogical]"],STRING_LITERAL_LONG1:["valueLogical","*[&&,valueLogical]"],STRING_LITERAL_LONG2:["valueLogical","*[&&,valueLogical]"],INTEGER:["valueLogical","*[&&,valueLogical]"],DECIMAL:["valueLogical","*[&&,valueLogical]"],DOUBLE:["valueLogical","*[&&,valueLogical]"],INTEGER_POSITIVE:["valueLogical","*[&&,valueLogical]"],DECIMAL_POSITIVE:["valueLogical","*[&&,valueLogical]"],DOUBLE_POSITIVE:["valueLogical","*[&&,valueLogical]"],INTEGER_NEGATIVE:["valueLogical","*[&&,valueLogical]"],DECIMAL_NEGATIVE:["valueLogical","*[&&,valueLogical]"],DOUBLE_NEGATIVE:["valueLogical","*[&&,valueLogical]"],PNAME_LN:["valueLogical","*[&&,valueLogical]"],PNAME_NS:["valueLogical","*[&&,valueLogical]"]},conditionalOrExpression:{"!":["conditionalAndExpression","*[||,conditionalAndExpression]"],"+":["conditionalAndExpression","*[||,conditionalAndExpression]"],"-":["conditionalAndExpression","*[||,conditionalAndExpression]"],VAR1:["conditionalAndExpression","*[||,conditionalAndExpression]"],VAR2:["conditionalAndExpression","*[||,conditionalAndExpression]"],"(":["conditionalAndExpression","*[||,conditionalAndExpression]"],STR:["conditionalAndExpression","*[||,conditionalAndExpression]"],LANG:["conditionalAndExpression","*[||,conditionalAndExpression]"],LANGMATCHES:["conditionalAndExpression","*[||,conditionalAndExpression]"],DATATYPE:["conditionalAndExpression","*[||,conditionalAndExpression]"],BOUND:["conditionalAndExpression","*[||,conditionalAndExpression]"],IRI:["conditionalAndExpression","*[||,conditionalAndExpression]"],URI:["conditionalAndExpression","*[||,conditionalAndExpression]"],BNODE:["conditionalAndExpression","*[||,conditionalAndExpression]"],RAND:["conditionalAndExpression","*[||,conditionalAndExpression]"],ABS:["conditionalAndExpression","*[||,conditionalAndExpression]"],CEIL:["conditionalAndExpression","*[||,conditionalAndExpression]"],FLOOR:["conditionalAndExpression","*[||,conditionalAndExpression]"],ROUND:["conditionalAndExpression","*[||,conditionalAndExpression]"],CONCAT:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRLEN:["conditionalAndExpression","*[||,conditionalAndExpression]"],UCASE:["conditionalAndExpression","*[||,conditionalAndExpression]"],LCASE:["conditionalAndExpression","*[||,conditionalAndExpression]"],ENCODE_FOR_URI:["conditionalAndExpression","*[||,conditionalAndExpression]"],CONTAINS:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRSTARTS:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRENDS:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRBEFORE:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRAFTER:["conditionalAndExpression","*[||,conditionalAndExpression]"],YEAR:["conditionalAndExpression","*[||,conditionalAndExpression]"],MONTH:["conditionalAndExpression","*[||,conditionalAndExpression]"],DAY:["conditionalAndExpression","*[||,conditionalAndExpression]"],HOURS:["conditionalAndExpression","*[||,conditionalAndExpression]"],MINUTES:["conditionalAndExpression","*[||,conditionalAndExpression]"],SECONDS:["conditionalAndExpression","*[||,conditionalAndExpression]"],TIMEZONE:["conditionalAndExpression","*[||,conditionalAndExpression]"],TZ:["conditionalAndExpression","*[||,conditionalAndExpression]"],NOW:["conditionalAndExpression","*[||,conditionalAndExpression]"],UUID:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRUUID:["conditionalAndExpression","*[||,conditionalAndExpression]"],MD5:["conditionalAndExpression","*[||,conditionalAndExpression]"],SHA1:["conditionalAndExpression","*[||,conditionalAndExpression]"],SHA256:["conditionalAndExpression","*[||,conditionalAndExpression]"],SHA384:["conditionalAndExpression","*[||,conditionalAndExpression]"],SHA512:["conditionalAndExpression","*[||,conditionalAndExpression]"],COALESCE:["conditionalAndExpression","*[||,conditionalAndExpression]"],IF:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRLANG:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRDT:["conditionalAndExpression","*[||,conditionalAndExpression]"],SAMETERM:["conditionalAndExpression","*[||,conditionalAndExpression]"],ISIRI:["conditionalAndExpression","*[||,conditionalAndExpression]"],ISURI:["conditionalAndExpression","*[||,conditionalAndExpression]"],ISBLANK:["conditionalAndExpression","*[||,conditionalAndExpression]"],ISLITERAL:["conditionalAndExpression","*[||,conditionalAndExpression]"],ISNUMERIC:["conditionalAndExpression","*[||,conditionalAndExpression]"],TRUE:["conditionalAndExpression","*[||,conditionalAndExpression]"],FALSE:["conditionalAndExpression","*[||,conditionalAndExpression]"],COUNT:["conditionalAndExpression","*[||,conditionalAndExpression]"],SUM:["conditionalAndExpression","*[||,conditionalAndExpression]"],MIN:["conditionalAndExpression","*[||,conditionalAndExpression]"],MAX:["conditionalAndExpression","*[||,conditionalAndExpression]"],AVG:["conditionalAndExpression","*[||,conditionalAndExpression]"],SAMPLE:["conditionalAndExpression","*[||,conditionalAndExpression]"],GROUP_CONCAT:["conditionalAndExpression","*[||,conditionalAndExpression]"],SUBSTR:["conditionalAndExpression","*[||,conditionalAndExpression]"],REPLACE:["conditionalAndExpression","*[||,conditionalAndExpression]"],REGEX:["conditionalAndExpression","*[||,conditionalAndExpression]"],EXISTS:["conditionalAndExpression","*[||,conditionalAndExpression]"],NOT:["conditionalAndExpression","*[||,conditionalAndExpression]"],IRI_REF:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRING_LITERAL1:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRING_LITERAL2:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRING_LITERAL_LONG1:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRING_LITERAL_LONG2:["conditionalAndExpression","*[||,conditionalAndExpression]"],INTEGER:["conditionalAndExpression","*[||,conditionalAndExpression]"],DECIMAL:["conditionalAndExpression","*[||,conditionalAndExpression]"],DOUBLE:["conditionalAndExpression","*[||,conditionalAndExpression]"],INTEGER_POSITIVE:["conditionalAndExpression","*[||,conditionalAndExpression]"],DECIMAL_POSITIVE:["conditionalAndExpression","*[||,conditionalAndExpression]"],DOUBLE_POSITIVE:["conditionalAndExpression","*[||,conditionalAndExpression]"],INTEGER_NEGATIVE:["conditionalAndExpression","*[||,conditionalAndExpression]"],DECIMAL_NEGATIVE:["conditionalAndExpression","*[||,conditionalAndExpression]"],DOUBLE_NEGATIVE:["conditionalAndExpression","*[||,conditionalAndExpression]"],PNAME_LN:["conditionalAndExpression","*[||,conditionalAndExpression]"],PNAME_NS:["conditionalAndExpression","*[||,conditionalAndExpression]"]},constraint:{"(":["brackettedExpression"],STR:["builtInCall"],LANG:["builtInCall"],LANGMATCHES:["builtInCall"],DATATYPE:["builtInCall"],BOUND:["builtInCall"],IRI:["builtInCall"],URI:["builtInCall"],BNODE:["builtInCall"],RAND:["builtInCall"],ABS:["builtInCall"],CEIL:["builtInCall"],FLOOR:["builtInCall"],ROUND:["builtInCall"],CONCAT:["builtInCall"],STRLEN:["builtInCall"],UCASE:["builtInCall"],LCASE:["builtInCall"],ENCODE_FOR_URI:["builtInCall"],CONTAINS:["builtInCall"],STRSTARTS:["builtInCall"],STRENDS:["builtInCall"],STRBEFORE:["builtInCall"],STRAFTER:["builtInCall"],YEAR:["builtInCall"],MONTH:["builtInCall"],DAY:["builtInCall"],HOURS:["builtInCall"],MINUTES:["builtInCall"],SECONDS:["builtInCall"],TIMEZONE:["builtInCall"],TZ:["builtInCall"],NOW:["builtInCall"],UUID:["builtInCall"],STRUUID:["builtInCall"],MD5:["builtInCall"],SHA1:["builtInCall"],SHA256:["builtInCall"],SHA384:["builtInCall"],SHA512:["builtInCall"],COALESCE:["builtInCall"],IF:["builtInCall"],STRLANG:["builtInCall"],STRDT:["builtInCall"],SAMETERM:["builtInCall"],ISIRI:["builtInCall"],ISURI:["builtInCall"],ISBLANK:["builtInCall"],ISLITERAL:["builtInCall"],ISNUMERIC:["builtInCall"],SUBSTR:["builtInCall"],REPLACE:["builtInCall"],REGEX:["builtInCall"],EXISTS:["builtInCall"],NOT:["builtInCall"],IRI_REF:["functionCall"],PNAME_LN:["functionCall"],PNAME_NS:["functionCall"]},constructQuery:{CONSTRUCT:["CONSTRUCT","or([[constructTemplate,*datasetClause,whereClause,solutionModifier],[*datasetClause,WHERE,{,?triplesTemplate,},solutionModifier]])"]},constructTemplate:{"{":["{","?constructTriples","}"]},constructTriples:{VAR1:["triplesSameSubject","?[.,?constructTriples]"],VAR2:["triplesSameSubject","?[.,?constructTriples]"],NIL:["triplesSameSubject","?[.,?constructTriples]"],"(":["triplesSameSubject","?[.,?constructTriples]"],"[":["triplesSameSubject","?[.,?constructTriples]"],IRI_REF:["triplesSameSubject","?[.,?constructTriples]"],TRUE:["triplesSameSubject","?[.,?constructTriples]"],FALSE:["triplesSameSubject","?[.,?constructTriples]"],BLANK_NODE_LABEL:["triplesSameSubject","?[.,?constructTriples]"],ANON:["triplesSameSubject","?[.,?constructTriples]"],PNAME_LN:["triplesSameSubject","?[.,?constructTriples]"],PNAME_NS:["triplesSameSubject","?[.,?constructTriples]"],STRING_LITERAL1:["triplesSameSubject","?[.,?constructTriples]"],STRING_LITERAL2:["triplesSameSubject","?[.,?constructTriples]"],STRING_LITERAL_LONG1:["triplesSameSubject","?[.,?constructTriples]"],STRING_LITERAL_LONG2:["triplesSameSubject","?[.,?constructTriples]"],INTEGER:["triplesSameSubject","?[.,?constructTriples]"],DECIMAL:["triplesSameSubject","?[.,?constructTriples]"],DOUBLE:["triplesSameSubject","?[.,?constructTriples]"],INTEGER_POSITIVE:["triplesSameSubject","?[.,?constructTriples]"],DECIMAL_POSITIVE:["triplesSameSubject","?[.,?constructTriples]"],DOUBLE_POSITIVE:["triplesSameSubject","?[.,?constructTriples]"],INTEGER_NEGATIVE:["triplesSameSubject","?[.,?constructTriples]"],DECIMAL_NEGATIVE:["triplesSameSubject","?[.,?constructTriples]"],DOUBLE_NEGATIVE:["triplesSameSubject","?[.,?constructTriples]"]},copy:{COPY:["COPY","?SILENT_4","graphOrDefault","TO","graphOrDefault"]},create:{CREATE:["CREATE","?SILENT_3","graphRef"]},dataBlock:{NIL:["or([inlineDataOneVar,inlineDataFull])"],"(":["or([inlineDataOneVar,inlineDataFull])"],VAR1:["or([inlineDataOneVar,inlineDataFull])"],VAR2:["or([inlineDataOneVar,inlineDataFull])"]},dataBlockValue:{IRI_REF:["iriRef"],PNAME_LN:["iriRef"],PNAME_NS:["iriRef"],STRING_LITERAL1:["rdfLiteral"],STRING_LITERAL2:["rdfLiteral"],STRING_LITERAL_LONG1:["rdfLiteral"],STRING_LITERAL_LONG2:["rdfLiteral"],INTEGER:["numericLiteral"],DECIMAL:["numericLiteral"],DOUBLE:["numericLiteral"],INTEGER_POSITIVE:["numericLiteral"],DECIMAL_POSITIVE:["numericLiteral"],DOUBLE_POSITIVE:["numericLiteral"],INTEGER_NEGATIVE:["numericLiteral"],DECIMAL_NEGATIVE:["numericLiteral"],DOUBLE_NEGATIVE:["numericLiteral"],TRUE:["booleanLiteral"],FALSE:["booleanLiteral"],UNDEF:["UNDEF"]},datasetClause:{FROM:["FROM","or([defaultGraphClause,namedGraphClause])"]},defaultGraphClause:{IRI_REF:["sourceSelector"],PNAME_LN:["sourceSelector"],PNAME_NS:["sourceSelector"]},delete1:{DATA:["DATA","quadDataNoBnodes"],WHERE:["WHERE","quadPatternNoBnodes"],"{":["quadPatternNoBnodes","?insertClause","*usingClause","WHERE","groupGraphPattern"]},deleteClause:{DELETE:["DELETE","quadPattern"]},describeDatasetClause:{FROM:["FROM","or([defaultGraphClause,namedGraphClause])"]},describeQuery:{DESCRIBE:["DESCRIBE","or([+varOrIRIref,*])","*describeDatasetClause","?whereClause","solutionModifier"]},disallowBnodes:{"}":[],GRAPH:[],VAR1:[],VAR2:[],NIL:[],"(":[],"[":[],IRI_REF:[],TRUE:[],FALSE:[],BLANK_NODE_LABEL:[],ANON:[],PNAME_LN:[],PNAME_NS:[],STRING_LITERAL1:[],STRING_LITERAL2:[],STRING_LITERAL_LONG1:[],STRING_LITERAL_LONG2:[],INTEGER:[],DECIMAL:[],DOUBLE:[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[]},disallowVars:{"}":[],GRAPH:[],VAR1:[],VAR2:[],NIL:[],"(":[],"[":[],IRI_REF:[],TRUE:[],FALSE:[],BLANK_NODE_LABEL:[],ANON:[],PNAME_LN:[],PNAME_NS:[],STRING_LITERAL1:[],STRING_LITERAL2:[],STRING_LITERAL_LONG1:[],STRING_LITERAL_LONG2:[],INTEGER:[],DECIMAL:[],DOUBLE:[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[]},drop:{DROP:["DROP","?SILENT_2","graphRefAll"]},existsFunc:{EXISTS:["EXISTS","groupGraphPattern"]},expression:{"!":["conditionalOrExpression"],"+":["conditionalOrExpression"],"-":["conditionalOrExpression"],VAR1:["conditionalOrExpression"],VAR2:["conditionalOrExpression"],"(":["conditionalOrExpression"],STR:["conditionalOrExpression"],LANG:["conditionalOrExpression"],LANGMATCHES:["conditionalOrExpression"],DATATYPE:["conditionalOrExpression"],BOUND:["conditionalOrExpression"],IRI:["conditionalOrExpression"],URI:["conditionalOrExpression"],BNODE:["conditionalOrExpression"],RAND:["conditionalOrExpression"],ABS:["conditionalOrExpression"],CEIL:["conditionalOrExpression"],FLOOR:["conditionalOrExpression"],ROUND:["conditionalOrExpression"],CONCAT:["conditionalOrExpression"],STRLEN:["conditionalOrExpression"],UCASE:["conditionalOrExpression"],LCASE:["conditionalOrExpression"],ENCODE_FOR_URI:["conditionalOrExpression"],CONTAINS:["conditionalOrExpression"],STRSTARTS:["conditionalOrExpression"],STRENDS:["conditionalOrExpression"],STRBEFORE:["conditionalOrExpression"],STRAFTER:["conditionalOrExpression"],YEAR:["conditionalOrExpression"],MONTH:["conditionalOrExpression"],DAY:["conditionalOrExpression"],HOURS:["conditionalOrExpression"],MINUTES:["conditionalOrExpression"],SECONDS:["conditionalOrExpression"],TIMEZONE:["conditionalOrExpression"],TZ:["conditionalOrExpression"],NOW:["conditionalOrExpression"],UUID:["conditionalOrExpression"],STRUUID:["conditionalOrExpression"],MD5:["conditionalOrExpression"],SHA1:["conditionalOrExpression"],SHA256:["conditionalOrExpression"],SHA384:["conditionalOrExpression"],SHA512:["conditionalOrExpression"],COALESCE:["conditionalOrExpression"],IF:["conditionalOrExpression"],STRLANG:["conditionalOrExpression"],STRDT:["conditionalOrExpression"],SAMETERM:["conditionalOrExpression"],ISIRI:["conditionalOrExpression"],ISURI:["conditionalOrExpression"],ISBLANK:["conditionalOrExpression"],ISLITERAL:["conditionalOrExpression"],ISNUMERIC:["conditionalOrExpression"],TRUE:["conditionalOrExpression"],FALSE:["conditionalOrExpression"],COUNT:["conditionalOrExpression"],SUM:["conditionalOrExpression"],MIN:["conditionalOrExpression"],MAX:["conditionalOrExpression"],AVG:["conditionalOrExpression"],SAMPLE:["conditionalOrExpression"],GROUP_CONCAT:["conditionalOrExpression"],SUBSTR:["conditionalOrExpression"],REPLACE:["conditionalOrExpression"],REGEX:["conditionalOrExpression"],EXISTS:["conditionalOrExpression"],NOT:["conditionalOrExpression"],IRI_REF:["conditionalOrExpression"],STRING_LITERAL1:["conditionalOrExpression"],STRING_LITERAL2:["conditionalOrExpression"],STRING_LITERAL_LONG1:["conditionalOrExpression"],STRING_LITERAL_LONG2:["conditionalOrExpression"],INTEGER:["conditionalOrExpression"],DECIMAL:["conditionalOrExpression"],DOUBLE:["conditionalOrExpression"],INTEGER_POSITIVE:["conditionalOrExpression"],DECIMAL_POSITIVE:["conditionalOrExpression"],DOUBLE_POSITIVE:["conditionalOrExpression"],INTEGER_NEGATIVE:["conditionalOrExpression"],DECIMAL_NEGATIVE:["conditionalOrExpression"],DOUBLE_NEGATIVE:["conditionalOrExpression"],PNAME_LN:["conditionalOrExpression"],PNAME_NS:["conditionalOrExpression"]},expressionList:{NIL:["NIL"],"(":["(","expression","*[,,expression]",")"]},filter:{FILTER:["FILTER","constraint"]},functionCall:{IRI_REF:["iriRef","argList"],PNAME_LN:["iriRef","argList"],PNAME_NS:["iriRef","argList"]},graphGraphPattern:{GRAPH:["GRAPH","varOrIRIref","groupGraphPattern"]},graphNode:{VAR1:["varOrTerm"],VAR2:["varOrTerm"],NIL:["varOrTerm"],IRI_REF:["varOrTerm"],TRUE:["varOrTerm"],FALSE:["varOrTerm"],BLANK_NODE_LABEL:["varOrTerm"],ANON:["varOrTerm"],PNAME_LN:["varOrTerm"],PNAME_NS:["varOrTerm"],STRING_LITERAL1:["varOrTerm"],STRING_LITERAL2:["varOrTerm"],STRING_LITERAL_LONG1:["varOrTerm"],STRING_LITERAL_LONG2:["varOrTerm"],INTEGER:["varOrTerm"],DECIMAL:["varOrTerm"],DOUBLE:["varOrTerm"],INTEGER_POSITIVE:["varOrTerm"],DECIMAL_POSITIVE:["varOrTerm"],DOUBLE_POSITIVE:["varOrTerm"],INTEGER_NEGATIVE:["varOrTerm"],DECIMAL_NEGATIVE:["varOrTerm"],DOUBLE_NEGATIVE:["varOrTerm"],"(":["triplesNode"],"[":["triplesNode"]},graphNodePath:{VAR1:["varOrTerm"],VAR2:["varOrTerm"],NIL:["varOrTerm"],IRI_REF:["varOrTerm"],TRUE:["varOrTerm"],FALSE:["varOrTerm"],BLANK_NODE_LABEL:["varOrTerm"],ANON:["varOrTerm"],PNAME_LN:["varOrTerm"],PNAME_NS:["varOrTerm"],STRING_LITERAL1:["varOrTerm"],STRING_LITERAL2:["varOrTerm"],STRING_LITERAL_LONG1:["varOrTerm"],STRING_LITERAL_LONG2:["varOrTerm"],INTEGER:["varOrTerm"],DECIMAL:["varOrTerm"],DOUBLE:["varOrTerm"],INTEGER_POSITIVE:["varOrTerm"],DECIMAL_POSITIVE:["varOrTerm"],DOUBLE_POSITIVE:["varOrTerm"],INTEGER_NEGATIVE:["varOrTerm"],DECIMAL_NEGATIVE:["varOrTerm"],DOUBLE_NEGATIVE:["varOrTerm"],"(":["triplesNodePath"],"[":["triplesNodePath"]},graphOrDefault:{DEFAULT:["DEFAULT"],IRI_REF:["?GRAPH","iriRef"],PNAME_LN:["?GRAPH","iriRef"],PNAME_NS:["?GRAPH","iriRef"],GRAPH:["?GRAPH","iriRef"]},graphPatternNotTriples:{"{":["groupOrUnionGraphPattern"],OPTIONAL:["optionalGraphPattern"],MINUS:["minusGraphPattern"],GRAPH:["graphGraphPattern"],SERVICE:["serviceGraphPattern"],FILTER:["filter"],BIND:["bind"],VALUES:["inlineData"]},graphRef:{GRAPH:["GRAPH","iriRef"]},graphRefAll:{GRAPH:["graphRef"],DEFAULT:["DEFAULT"],NAMED:["NAMED"],ALL:["ALL"]},graphTerm:{IRI_REF:["iriRef"],PNAME_LN:["iriRef"],PNAME_NS:["iriRef"],STRING_LITERAL1:["rdfLiteral"],STRING_LITERAL2:["rdfLiteral"],STRING_LITERAL_LONG1:["rdfLiteral"],STRING_LITERAL_LONG2:["rdfLiteral"],INTEGER:["numericLiteral"],DECIMAL:["numericLiteral"],DOUBLE:["numericLiteral"],INTEGER_POSITIVE:["numericLiteral"],DECIMAL_POSITIVE:["numericLiteral"],DOUBLE_POSITIVE:["numericLiteral"],INTEGER_NEGATIVE:["numericLiteral"],DECIMAL_NEGATIVE:["numericLiteral"],DOUBLE_NEGATIVE:["numericLiteral"],TRUE:["booleanLiteral"],FALSE:["booleanLiteral"],BLANK_NODE_LABEL:["blankNode"],ANON:["blankNode"],NIL:["NIL"]},groupClause:{GROUP:["GROUP","BY","+groupCondition"]},groupCondition:{STR:["builtInCall"],LANG:["builtInCall"],LANGMATCHES:["builtInCall"],DATATYPE:["builtInCall"],BOUND:["builtInCall"],IRI:["builtInCall"],URI:["builtInCall"],BNODE:["builtInCall"],RAND:["builtInCall"],ABS:["builtInCall"],CEIL:["builtInCall"],FLOOR:["builtInCall"],ROUND:["builtInCall"],CONCAT:["builtInCall"],STRLEN:["builtInCall"],UCASE:["builtInCall"],LCASE:["builtInCall"],ENCODE_FOR_URI:["builtInCall"],CONTAINS:["builtInCall"],STRSTARTS:["builtInCall"],STRENDS:["builtInCall"],STRBEFORE:["builtInCall"],STRAFTER:["builtInCall"],YEAR:["builtInCall"],MONTH:["builtInCall"],DAY:["builtInCall"],HOURS:["builtInCall"],MINUTES:["builtInCall"],SECONDS:["builtInCall"],TIMEZONE:["builtInCall"],TZ:["builtInCall"],NOW:["builtInCall"],UUID:["builtInCall"],STRUUID:["builtInCall"],MD5:["builtInCall"],SHA1:["builtInCall"],SHA256:["builtInCall"],SHA384:["builtInCall"],SHA512:["builtInCall"],COALESCE:["builtInCall"],IF:["builtInCall"],STRLANG:["builtInCall"],STRDT:["builtInCall"],SAMETERM:["builtInCall"],ISIRI:["builtInCall"],ISURI:["builtInCall"],ISBLANK:["builtInCall"],ISLITERAL:["builtInCall"],ISNUMERIC:["builtInCall"],SUBSTR:["builtInCall"],REPLACE:["builtInCall"],REGEX:["builtInCall"],EXISTS:["builtInCall"],NOT:["builtInCall"],IRI_REF:["functionCall"],PNAME_LN:["functionCall"],PNAME_NS:["functionCall"],"(":["(","expression","?[AS,var]",")"],VAR1:["var"],VAR2:["var"]},groupGraphPattern:{"{":["{","or([subSelect,groupGraphPatternSub])","}"]},groupGraphPatternSub:{"{":["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],OPTIONAL:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],MINUS:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],GRAPH:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],SERVICE:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],FILTER:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],BIND:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],VALUES:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],VAR1:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],VAR2:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],NIL:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],"(":["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],"[":["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],IRI_REF:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],TRUE:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],FALSE:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],BLANK_NODE_LABEL:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],ANON:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],PNAME_LN:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],PNAME_NS:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],STRING_LITERAL1:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],STRING_LITERAL2:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],STRING_LITERAL_LONG1:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],STRING_LITERAL_LONG2:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],INTEGER:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],DECIMAL:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],DOUBLE:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],INTEGER_POSITIVE:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],DECIMAL_POSITIVE:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],DOUBLE_POSITIVE:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],INTEGER_NEGATIVE:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],DECIMAL_NEGATIVE:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],DOUBLE_NEGATIVE:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],"}":["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"]},groupOrUnionGraphPattern:{"{":["groupGraphPattern","*[UNION,groupGraphPattern]"]},havingClause:{HAVING:["HAVING","+havingCondition"]},havingCondition:{"(":["constraint"],STR:["constraint"],LANG:["constraint"],LANGMATCHES:["constraint"],DATATYPE:["constraint"],BOUND:["constraint"],IRI:["constraint"],URI:["constraint"],BNODE:["constraint"],RAND:["constraint"],ABS:["constraint"],CEIL:["constraint"],FLOOR:["constraint"],ROUND:["constraint"],CONCAT:["constraint"],STRLEN:["constraint"],UCASE:["constraint"],LCASE:["constraint"],ENCODE_FOR_URI:["constraint"],CONTAINS:["constraint"],STRSTARTS:["constraint"],STRENDS:["constraint"],STRBEFORE:["constraint"],STRAFTER:["constraint"],YEAR:["constraint"],MONTH:["constraint"],DAY:["constraint"],HOURS:["constraint"],MINUTES:["constraint"],SECONDS:["constraint"],TIMEZONE:["constraint"],TZ:["constraint"],NOW:["constraint"],UUID:["constraint"],STRUUID:["constraint"],MD5:["constraint"],SHA1:["constraint"],SHA256:["constraint"],SHA384:["constraint"],SHA512:["constraint"],COALESCE:["constraint"],IF:["constraint"],STRLANG:["constraint"],STRDT:["constraint"],SAMETERM:["constraint"],ISIRI:["constraint"],ISURI:["constraint"],ISBLANK:["constraint"],ISLITERAL:["constraint"],ISNUMERIC:["constraint"],SUBSTR:["constraint"],REPLACE:["constraint"],REGEX:["constraint"],EXISTS:["constraint"],NOT:["constraint"],IRI_REF:["constraint"],PNAME_LN:["constraint"],PNAME_NS:["constraint"]},inlineData:{VALUES:["VALUES","dataBlock"]},inlineDataFull:{NIL:["or([NIL,[(,*var,)]])","{","*or([[(,*dataBlockValue,)],NIL])","}"],"(":["or([NIL,[(,*var,)]])","{","*or([[(,*dataBlockValue,)],NIL])","}"]},inlineDataOneVar:{VAR1:["var","{","*dataBlockValue","}"],VAR2:["var","{","*dataBlockValue","}"]},insert1:{DATA:["DATA","quadData"],"{":["quadPattern","*usingClause","WHERE","groupGraphPattern"]},insertClause:{INSERT:["INSERT","quadPattern"]},integer:{INTEGER:["INTEGER"]},iriRef:{IRI_REF:["IRI_REF"],PNAME_LN:["prefixedName"],PNAME_NS:["prefixedName"]},iriRefOrFunction:{IRI_REF:["iriRef","?argList"],PNAME_LN:["iriRef","?argList"],PNAME_NS:["iriRef","?argList"]},limitClause:{LIMIT:["LIMIT","INTEGER"]},limitOffsetClauses:{LIMIT:["limitClause","?offsetClause"],OFFSET:["offsetClause","?limitClause"]},load:{LOAD:["LOAD","?SILENT_1","iriRef","?[INTO,graphRef]"]},minusGraphPattern:{MINUS:["MINUS","groupGraphPattern"]},modify:{WITH:["WITH","iriRef","or([[deleteClause,?insertClause],insertClause])","*usingClause","WHERE","groupGraphPattern"]},move:{MOVE:["MOVE","?SILENT_4","graphOrDefault","TO","graphOrDefault"]},multiplicativeExpression:{"!":["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],"+":["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],"-":["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],VAR1:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],VAR2:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],"(":["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STR:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],LANG:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],LANGMATCHES:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],DATATYPE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],BOUND:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],IRI:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],URI:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],BNODE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],RAND:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],ABS:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],CEIL:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],FLOOR:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],ROUND:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],CONCAT:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRLEN:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],UCASE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],LCASE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],ENCODE_FOR_URI:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],CONTAINS:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRSTARTS:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRENDS:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRBEFORE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRAFTER:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],YEAR:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],MONTH:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],DAY:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],HOURS:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],MINUTES:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],SECONDS:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],TIMEZONE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],TZ:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],NOW:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],UUID:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRUUID:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],MD5:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],SHA1:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],SHA256:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],SHA384:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],SHA512:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],COALESCE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],IF:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRLANG:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRDT:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],SAMETERM:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],ISIRI:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],ISURI:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],ISBLANK:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],ISLITERAL:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],ISNUMERIC:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],TRUE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],FALSE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],COUNT:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],SUM:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],MIN:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],MAX:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],AVG:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],SAMPLE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],GROUP_CONCAT:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],SUBSTR:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],REPLACE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],REGEX:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],EXISTS:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],NOT:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],IRI_REF:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRING_LITERAL1:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRING_LITERAL2:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRING_LITERAL_LONG1:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRING_LITERAL_LONG2:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],INTEGER:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],DECIMAL:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],DOUBLE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],INTEGER_POSITIVE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],DECIMAL_POSITIVE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],DOUBLE_POSITIVE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],INTEGER_NEGATIVE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],DECIMAL_NEGATIVE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],DOUBLE_NEGATIVE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],PNAME_LN:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],PNAME_NS:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"]},namedGraphClause:{NAMED:["NAMED","sourceSelector"]},notExistsFunc:{NOT:["NOT","EXISTS","groupGraphPattern"]},numericExpression:{"!":["additiveExpression"],"+":["additiveExpression"],"-":["additiveExpression"],VAR1:["additiveExpression"],VAR2:["additiveExpression"],"(":["additiveExpression"],STR:["additiveExpression"],LANG:["additiveExpression"],LANGMATCHES:["additiveExpression"],DATATYPE:["additiveExpression"],BOUND:["additiveExpression"],IRI:["additiveExpression"],URI:["additiveExpression"],BNODE:["additiveExpression"],RAND:["additiveExpression"],ABS:["additiveExpression"],CEIL:["additiveExpression"],FLOOR:["additiveExpression"],ROUND:["additiveExpression"],CONCAT:["additiveExpression"],STRLEN:["additiveExpression"],UCASE:["additiveExpression"],LCASE:["additiveExpression"],ENCODE_FOR_URI:["additiveExpression"],CONTAINS:["additiveExpression"],STRSTARTS:["additiveExpression"],STRENDS:["additiveExpression"],STRBEFORE:["additiveExpression"],STRAFTER:["additiveExpression"],YEAR:["additiveExpression"],MONTH:["additiveExpression"],DAY:["additiveExpression"],HOURS:["additiveExpression"],MINUTES:["additiveExpression"],SECONDS:["additiveExpression"],TIMEZONE:["additiveExpression"],TZ:["additiveExpression"],NOW:["additiveExpression"],UUID:["additiveExpression"],STRUUID:["additiveExpression"],MD5:["additiveExpression"],SHA1:["additiveExpression"],SHA256:["additiveExpression"],SHA384:["additiveExpression"],SHA512:["additiveExpression"],COALESCE:["additiveExpression"],IF:["additiveExpression"],STRLANG:["additiveExpression"],STRDT:["additiveExpression"],SAMETERM:["additiveExpression"],ISIRI:["additiveExpression"],ISURI:["additiveExpression"],ISBLANK:["additiveExpression"],ISLITERAL:["additiveExpression"],ISNUMERIC:["additiveExpression"],TRUE:["additiveExpression"],FALSE:["additiveExpression"],COUNT:["additiveExpression"],SUM:["additiveExpression"],MIN:["additiveExpression"],MAX:["additiveExpression"],AVG:["additiveExpression"],SAMPLE:["additiveExpression"],GROUP_CONCAT:["additiveExpression"],SUBSTR:["additiveExpression"],REPLACE:["additiveExpression"],REGEX:["additiveExpression"],EXISTS:["additiveExpression"],NOT:["additiveExpression"],IRI_REF:["additiveExpression"],STRING_LITERAL1:["additiveExpression"],STRING_LITERAL2:["additiveExpression"],STRING_LITERAL_LONG1:["additiveExpression"],STRING_LITERAL_LONG2:["additiveExpression"],INTEGER:["additiveExpression"],DECIMAL:["additiveExpression"],DOUBLE:["additiveExpression"],INTEGER_POSITIVE:["additiveExpression"],DECIMAL_POSITIVE:["additiveExpression"],DOUBLE_POSITIVE:["additiveExpression"],INTEGER_NEGATIVE:["additiveExpression"],DECIMAL_NEGATIVE:["additiveExpression"],DOUBLE_NEGATIVE:["additiveExpression"],PNAME_LN:["additiveExpression"],PNAME_NS:["additiveExpression"]},numericLiteral:{INTEGER:["numericLiteralUnsigned"],DECIMAL:["numericLiteralUnsigned"],DOUBLE:["numericLiteralUnsigned"],INTEGER_POSITIVE:["numericLiteralPositive"],DECIMAL_POSITIVE:["numericLiteralPositive"],DOUBLE_POSITIVE:["numericLiteralPositive"],INTEGER_NEGATIVE:["numericLiteralNegative"],DECIMAL_NEGATIVE:["numericLiteralNegative"],DOUBLE_NEGATIVE:["numericLiteralNegative"]},numericLiteralNegative:{INTEGER_NEGATIVE:["INTEGER_NEGATIVE"],DECIMAL_NEGATIVE:["DECIMAL_NEGATIVE"],DOUBLE_NEGATIVE:["DOUBLE_NEGATIVE"]},numericLiteralPositive:{INTEGER_POSITIVE:["INTEGER_POSITIVE"],DECIMAL_POSITIVE:["DECIMAL_POSITIVE"],DOUBLE_POSITIVE:["DOUBLE_POSITIVE"]},numericLiteralUnsigned:{INTEGER:["INTEGER"],DECIMAL:["DECIMAL"],DOUBLE:["DOUBLE"]},object:{"(":["graphNode"],"[":["graphNode"],VAR1:["graphNode"],VAR2:["graphNode"],NIL:["graphNode"],IRI_REF:["graphNode"],TRUE:["graphNode"],FALSE:["graphNode"],BLANK_NODE_LABEL:["graphNode"],ANON:["graphNode"],PNAME_LN:["graphNode"],PNAME_NS:["graphNode"],STRING_LITERAL1:["graphNode"],STRING_LITERAL2:["graphNode"],STRING_LITERAL_LONG1:["graphNode"],STRING_LITERAL_LONG2:["graphNode"],INTEGER:["graphNode"],DECIMAL:["graphNode"],DOUBLE:["graphNode"],INTEGER_POSITIVE:["graphNode"],DECIMAL_POSITIVE:["graphNode"],DOUBLE_POSITIVE:["graphNode"],INTEGER_NEGATIVE:["graphNode"],DECIMAL_NEGATIVE:["graphNode"],DOUBLE_NEGATIVE:["graphNode"]},objectList:{"(":["object","*[,,object]"],"[":["object","*[,,object]"],VAR1:["object","*[,,object]"],VAR2:["object","*[,,object]"],NIL:["object","*[,,object]"],IRI_REF:["object","*[,,object]"],TRUE:["object","*[,,object]"],FALSE:["object","*[,,object]"],BLANK_NODE_LABEL:["object","*[,,object]"],ANON:["object","*[,,object]"],PNAME_LN:["object","*[,,object]"],PNAME_NS:["object","*[,,object]"],STRING_LITERAL1:["object","*[,,object]"],STRING_LITERAL2:["object","*[,,object]"],STRING_LITERAL_LONG1:["object","*[,,object]"],STRING_LITERAL_LONG2:["object","*[,,object]"],INTEGER:["object","*[,,object]"],DECIMAL:["object","*[,,object]"],DOUBLE:["object","*[,,object]"],INTEGER_POSITIVE:["object","*[,,object]"],DECIMAL_POSITIVE:["object","*[,,object]"],DOUBLE_POSITIVE:["object","*[,,object]"],INTEGER_NEGATIVE:["object","*[,,object]"],DECIMAL_NEGATIVE:["object","*[,,object]"],DOUBLE_NEGATIVE:["object","*[,,object]"]},objectListPath:{"(":["objectPath","*[,,objectPath]"],"[":["objectPath","*[,,objectPath]"],VAR1:["objectPath","*[,,objectPath]"],VAR2:["objectPath","*[,,objectPath]"],NIL:["objectPath","*[,,objectPath]"],IRI_REF:["objectPath","*[,,objectPath]"],TRUE:["objectPath","*[,,objectPath]"],FALSE:["objectPath","*[,,objectPath]"],BLANK_NODE_LABEL:["objectPath","*[,,objectPath]"],ANON:["objectPath","*[,,objectPath]"],PNAME_LN:["objectPath","*[,,objectPath]"],PNAME_NS:["objectPath","*[,,objectPath]"],STRING_LITERAL1:["objectPath","*[,,objectPath]"],STRING_LITERAL2:["objectPath","*[,,objectPath]"],STRING_LITERAL_LONG1:["objectPath","*[,,objectPath]"],STRING_LITERAL_LONG2:["objectPath","*[,,objectPath]"],INTEGER:["objectPath","*[,,objectPath]"],DECIMAL:["objectPath","*[,,objectPath]"],DOUBLE:["objectPath","*[,,objectPath]"],INTEGER_POSITIVE:["objectPath","*[,,objectPath]"],DECIMAL_POSITIVE:["objectPath","*[,,objectPath]"],DOUBLE_POSITIVE:["objectPath","*[,,objectPath]"],INTEGER_NEGATIVE:["objectPath","*[,,objectPath]"],DECIMAL_NEGATIVE:["objectPath","*[,,objectPath]"],DOUBLE_NEGATIVE:["objectPath","*[,,objectPath]"]},objectPath:{"(":["graphNodePath"],"[":["graphNodePath"],VAR1:["graphNodePath"],VAR2:["graphNodePath"],NIL:["graphNodePath"],IRI_REF:["graphNodePath"],TRUE:["graphNodePath"],FALSE:["graphNodePath"],BLANK_NODE_LABEL:["graphNodePath"],ANON:["graphNodePath"],PNAME_LN:["graphNodePath"],PNAME_NS:["graphNodePath"],STRING_LITERAL1:["graphNodePath"],STRING_LITERAL2:["graphNodePath"],STRING_LITERAL_LONG1:["graphNodePath"],STRING_LITERAL_LONG2:["graphNodePath"],INTEGER:["graphNodePath"],DECIMAL:["graphNodePath"],DOUBLE:["graphNodePath"],INTEGER_POSITIVE:["graphNodePath"],DECIMAL_POSITIVE:["graphNodePath"],DOUBLE_POSITIVE:["graphNodePath"],INTEGER_NEGATIVE:["graphNodePath"],DECIMAL_NEGATIVE:["graphNodePath"],DOUBLE_NEGATIVE:["graphNodePath"]},offsetClause:{OFFSET:["OFFSET","INTEGER"]},optionalGraphPattern:{OPTIONAL:["OPTIONAL","groupGraphPattern"]},"or([*,expression])":{"*":["*"],"!":["expression"],"+":["expression"],"-":["expression"],VAR1:["expression"],VAR2:["expression"],"(":["expression"],STR:["expression"],LANG:["expression"],LANGMATCHES:["expression"],DATATYPE:["expression"],BOUND:["expression"],IRI:["expression"],URI:["expression"],BNODE:["expression"],RAND:["expression"],ABS:["expression"],CEIL:["expression"],FLOOR:["expression"],ROUND:["expression"],CONCAT:["expression"],STRLEN:["expression"],UCASE:["expression"],LCASE:["expression"],ENCODE_FOR_URI:["expression"],CONTAINS:["expression"],STRSTARTS:["expression"],STRENDS:["expression"],STRBEFORE:["expression"],STRAFTER:["expression"],YEAR:["expression"],MONTH:["expression"],DAY:["expression"],HOURS:["expression"],MINUTES:["expression"],SECONDS:["expression"],TIMEZONE:["expression"],TZ:["expression"],NOW:["expression"],UUID:["expression"],STRUUID:["expression"],MD5:["expression"],SHA1:["expression"],SHA256:["expression"],SHA384:["expression"],SHA512:["expression"],COALESCE:["expression"],IF:["expression"],STRLANG:["expression"],STRDT:["expression"],SAMETERM:["expression"],ISIRI:["expression"],ISURI:["expression"],ISBLANK:["expression"],ISLITERAL:["expression"],ISNUMERIC:["expression"],TRUE:["expression"],FALSE:["expression"],COUNT:["expression"],SUM:["expression"],MIN:["expression"],MAX:["expression"],AVG:["expression"],SAMPLE:["expression"],GROUP_CONCAT:["expression"],SUBSTR:["expression"],REPLACE:["expression"],REGEX:["expression"],EXISTS:["expression"],NOT:["expression"],IRI_REF:["expression"],STRING_LITERAL1:["expression"],STRING_LITERAL2:["expression"],STRING_LITERAL_LONG1:["expression"],STRING_LITERAL_LONG2:["expression"],INTEGER:["expression"],DECIMAL:["expression"],DOUBLE:["expression"],INTEGER_POSITIVE:["expression"],DECIMAL_POSITIVE:["expression"],DOUBLE_POSITIVE:["expression"],INTEGER_NEGATIVE:["expression"],DECIMAL_NEGATIVE:["expression"],DOUBLE_NEGATIVE:["expression"],PNAME_LN:["expression"],PNAME_NS:["expression"]},"or([+or([var,[(,expression,AS,var,)]]),*])":{"(":["+or([var,[(,expression,AS,var,)]])"],VAR1:["+or([var,[(,expression,AS,var,)]])"],VAR2:["+or([var,[(,expression,AS,var,)]])"],"*":["*"]},"or([+varOrIRIref,*])":{VAR1:["+varOrIRIref"],VAR2:["+varOrIRIref"],IRI_REF:["+varOrIRIref"],PNAME_LN:["+varOrIRIref"],PNAME_NS:["+varOrIRIref"],"*":["*"]},"or([ASC,DESC])":{ASC:["ASC"],DESC:["DESC"]},"or([DISTINCT,REDUCED])":{DISTINCT:["DISTINCT"],REDUCED:["REDUCED"]},"or([LANGTAG,[^^,iriRef]])":{LANGTAG:["LANGTAG"],"^^":["[^^,iriRef]"]},"or([NIL,[(,*var,)]])":{NIL:["NIL"],"(":["[(,*var,)]"]},"or([[(,*dataBlockValue,)],NIL])":{"(":["[(,*dataBlockValue,)]"],NIL:["NIL"]},"or([[(,expression,)],NIL])":{"(":["[(,expression,)]"],NIL:["NIL"]},"or([[*,unaryExpression],[/,unaryExpression]])":{"*":["[*,unaryExpression]"],"/":["[/,unaryExpression]"]},"or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])":{"+":["[+,multiplicativeExpression]"],"-":["[-,multiplicativeExpression]"],INTEGER_POSITIVE:["[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]"],DECIMAL_POSITIVE:["[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]"],DOUBLE_POSITIVE:["[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]"],INTEGER_NEGATIVE:["[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]"],DECIMAL_NEGATIVE:["[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]"],DOUBLE_NEGATIVE:["[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]"]},"or([[,,or([},[integer,}]])],}])":{",":["[,,or([},[integer,}]])]"],"}":["}"]},"or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])":{"=":["[=,numericExpression]"],"!=":["[!=,numericExpression]"],"<":["[<,numericExpression]"],">":["[>,numericExpression]"],"<=":["[<=,numericExpression]"],">=":["[>=,numericExpression]"],IN:["[IN,expressionList]"],NOT:["[NOT,IN,expressionList]"]},"or([[constructTemplate,*datasetClause,whereClause,solutionModifier],[*datasetClause,WHERE,{,?triplesTemplate,},solutionModifier]])":{"{":["[constructTemplate,*datasetClause,whereClause,solutionModifier]"],WHERE:["[*datasetClause,WHERE,{,?triplesTemplate,},solutionModifier]"],FROM:["[*datasetClause,WHERE,{,?triplesTemplate,},solutionModifier]"]},"or([[deleteClause,?insertClause],insertClause])":{DELETE:["[deleteClause,?insertClause]"],INSERT:["insertClause"]},"or([[integer,or([[,,or([},[integer,}]])],}])],[,,integer,}]])":{INTEGER:["[integer,or([[,,or([},[integer,}]])],}])]"],",":["[,,integer,}]"]},"or([baseDecl,prefixDecl])":{BASE:["baseDecl"],PREFIX:["prefixDecl"]},"or([defaultGraphClause,namedGraphClause])":{IRI_REF:["defaultGraphClause"],PNAME_LN:["defaultGraphClause"],PNAME_NS:["defaultGraphClause"],NAMED:["namedGraphClause"]},"or([inlineDataOneVar,inlineDataFull])":{VAR1:["inlineDataOneVar"],VAR2:["inlineDataOneVar"],NIL:["inlineDataFull"],"(":["inlineDataFull"]},"or([iriRef,[NAMED,iriRef]])":{IRI_REF:["iriRef"],PNAME_LN:["iriRef"],PNAME_NS:["iriRef"],NAMED:["[NAMED,iriRef]"]},"or([iriRef,a])":{IRI_REF:["iriRef"],PNAME_LN:["iriRef"],PNAME_NS:["iriRef"],a:["a"]},"or([numericLiteralPositive,numericLiteralNegative])":{INTEGER_POSITIVE:["numericLiteralPositive"],DECIMAL_POSITIVE:["numericLiteralPositive"],DOUBLE_POSITIVE:["numericLiteralPositive"],INTEGER_NEGATIVE:["numericLiteralNegative"],DECIMAL_NEGATIVE:["numericLiteralNegative"],DOUBLE_NEGATIVE:["numericLiteralNegative"]},"or([queryAll,updateAll])":{CONSTRUCT:["queryAll"],DESCRIBE:["queryAll"],ASK:["queryAll"],SELECT:["queryAll"],INSERT:["updateAll"],DELETE:["updateAll"],LOAD:["updateAll"],CLEAR:["updateAll"],DROP:["updateAll"],ADD:["updateAll"],MOVE:["updateAll"],COPY:["updateAll"],CREATE:["updateAll"],WITH:["updateAll"],$:["updateAll"]},"or([selectQuery,constructQuery,describeQuery,askQuery])":{SELECT:["selectQuery"],CONSTRUCT:["constructQuery"],DESCRIBE:["describeQuery"],ASK:["askQuery"]},"or([subSelect,groupGraphPatternSub])":{SELECT:["subSelect"],"{":["groupGraphPatternSub"],OPTIONAL:["groupGraphPatternSub"],MINUS:["groupGraphPatternSub"],GRAPH:["groupGraphPatternSub"],SERVICE:["groupGraphPatternSub"],FILTER:["groupGraphPatternSub"],BIND:["groupGraphPatternSub"],VALUES:["groupGraphPatternSub"],VAR1:["groupGraphPatternSub"],VAR2:["groupGraphPatternSub"],NIL:["groupGraphPatternSub"],"(":["groupGraphPatternSub"],"[":["groupGraphPatternSub"],IRI_REF:["groupGraphPatternSub"],TRUE:["groupGraphPatternSub"],FALSE:["groupGraphPatternSub"],BLANK_NODE_LABEL:["groupGraphPatternSub"],ANON:["groupGraphPatternSub"],PNAME_LN:["groupGraphPatternSub"],PNAME_NS:["groupGraphPatternSub"],STRING_LITERAL1:["groupGraphPatternSub"],STRING_LITERAL2:["groupGraphPatternSub"],STRING_LITERAL_LONG1:["groupGraphPatternSub"],STRING_LITERAL_LONG2:["groupGraphPatternSub"],INTEGER:["groupGraphPatternSub"],DECIMAL:["groupGraphPatternSub"],DOUBLE:["groupGraphPatternSub"],INTEGER_POSITIVE:["groupGraphPatternSub"],DECIMAL_POSITIVE:["groupGraphPatternSub"],DOUBLE_POSITIVE:["groupGraphPatternSub"],INTEGER_NEGATIVE:["groupGraphPatternSub"],DECIMAL_NEGATIVE:["groupGraphPatternSub"],DOUBLE_NEGATIVE:["groupGraphPatternSub"],"}":["groupGraphPatternSub"]},"or([var,[(,expression,AS,var,)]])":{VAR1:["var"],VAR2:["var"],"(":["[(,expression,AS,var,)]"]},"or([verbPath,verbSimple])":{"^":["verbPath"],a:["verbPath"],"!":["verbPath"],"(":["verbPath"],IRI_REF:["verbPath"],PNAME_LN:["verbPath"],PNAME_NS:["verbPath"],VAR1:["verbSimple"],VAR2:["verbSimple"]},"or([},[integer,}]])":{"}":["}"],INTEGER:["[integer,}]"]},orderClause:{ORDER:["ORDER","BY","+orderCondition"]},orderCondition:{ASC:["or([ASC,DESC])","brackettedExpression"],DESC:["or([ASC,DESC])","brackettedExpression"],"(":["constraint"],STR:["constraint"],LANG:["constraint"],LANGMATCHES:["constraint"],DATATYPE:["constraint"],BOUND:["constraint"],IRI:["constraint"],URI:["constraint"],BNODE:["constraint"],RAND:["constraint"],ABS:["constraint"],CEIL:["constraint"],FLOOR:["constraint"],ROUND:["constraint"],CONCAT:["constraint"],STRLEN:["constraint"],UCASE:["constraint"],LCASE:["constraint"],ENCODE_FOR_URI:["constraint"],CONTAINS:["constraint"],STRSTARTS:["constraint"],STRENDS:["constraint"],STRBEFORE:["constraint"],STRAFTER:["constraint"],YEAR:["constraint"],MONTH:["constraint"],DAY:["constraint"],HOURS:["constraint"],MINUTES:["constraint"],SECONDS:["constraint"],TIMEZONE:["constraint"],TZ:["constraint"],NOW:["constraint"],UUID:["constraint"],STRUUID:["constraint"],MD5:["constraint"],SHA1:["constraint"],SHA256:["constraint"],SHA384:["constraint"],SHA512:["constraint"],COALESCE:["constraint"],IF:["constraint"],STRLANG:["constraint"],STRDT:["constraint"],SAMETERM:["constraint"],ISIRI:["constraint"],ISURI:["constraint"],ISBLANK:["constraint"],ISLITERAL:["constraint"],ISNUMERIC:["constraint"],SUBSTR:["constraint"],REPLACE:["constraint"],REGEX:["constraint"],EXISTS:["constraint"],NOT:["constraint"],IRI_REF:["constraint"],PNAME_LN:["constraint"],PNAME_NS:["constraint"],VAR1:["var"],VAR2:["var"]},path:{"^":["pathAlternative"],a:["pathAlternative"],"!":["pathAlternative"],"(":["pathAlternative"],IRI_REF:["pathAlternative"],PNAME_LN:["pathAlternative"],PNAME_NS:["pathAlternative"]},pathAlternative:{"^":["pathSequence","*[|,pathSequence]"],a:["pathSequence","*[|,pathSequence]"],"!":["pathSequence","*[|,pathSequence]"],"(":["pathSequence","*[|,pathSequence]"],IRI_REF:["pathSequence","*[|,pathSequence]"],PNAME_LN:["pathSequence","*[|,pathSequence]"],PNAME_NS:["pathSequence","*[|,pathSequence]"]},pathElt:{a:["pathPrimary","?pathMod"],"!":["pathPrimary","?pathMod"],"(":["pathPrimary","?pathMod"],IRI_REF:["pathPrimary","?pathMod"],PNAME_LN:["pathPrimary","?pathMod"],PNAME_NS:["pathPrimary","?pathMod"]},pathEltOrInverse:{a:["pathElt"],"!":["pathElt"],"(":["pathElt"],IRI_REF:["pathElt"],PNAME_LN:["pathElt"],PNAME_NS:["pathElt"],"^":["^","pathElt"]},pathMod:{"*":["*"],"?":["?"],"+":["+"],"{":["{","or([[integer,or([[,,or([},[integer,}]])],}])],[,,integer,}]])"]},pathNegatedPropertySet:{a:["pathOneInPropertySet"],"^":["pathOneInPropertySet"],IRI_REF:["pathOneInPropertySet"],PNAME_LN:["pathOneInPropertySet"],PNAME_NS:["pathOneInPropertySet"],"(":["(","?[pathOneInPropertySet,*[|,pathOneInPropertySet]]",")"]},pathOneInPropertySet:{IRI_REF:["iriRef"],PNAME_LN:["iriRef"],PNAME_NS:["iriRef"],a:["a"],"^":["^","or([iriRef,a])"]},pathPrimary:{IRI_REF:["storeProperty","iriRef"],PNAME_LN:["storeProperty","iriRef"],PNAME_NS:["storeProperty","iriRef"],a:["storeProperty","a"],"!":["!","pathNegatedPropertySet"],"(":["(","path",")"]},pathSequence:{"^":["pathEltOrInverse","*[/,pathEltOrInverse]"],a:["pathEltOrInverse","*[/,pathEltOrInverse]"],"!":["pathEltOrInverse","*[/,pathEltOrInverse]"],"(":["pathEltOrInverse","*[/,pathEltOrInverse]"],IRI_REF:["pathEltOrInverse","*[/,pathEltOrInverse]"],PNAME_LN:["pathEltOrInverse","*[/,pathEltOrInverse]"],PNAME_NS:["pathEltOrInverse","*[/,pathEltOrInverse]"]},prefixDecl:{PREFIX:["PREFIX","PNAME_NS","IRI_REF"]},prefixedName:{PNAME_LN:["PNAME_LN"],PNAME_NS:["PNAME_NS"]},primaryExpression:{"(":["brackettedExpression"],STR:["builtInCall"],LANG:["builtInCall"],LANGMATCHES:["builtInCall"],DATATYPE:["builtInCall"],BOUND:["builtInCall"],IRI:["builtInCall"],URI:["builtInCall"],BNODE:["builtInCall"],RAND:["builtInCall"],ABS:["builtInCall"],CEIL:["builtInCall"],FLOOR:["builtInCall"],ROUND:["builtInCall"],CONCAT:["builtInCall"],STRLEN:["builtInCall"],UCASE:["builtInCall"],LCASE:["builtInCall"],ENCODE_FOR_URI:["builtInCall"],CONTAINS:["builtInCall"],STRSTARTS:["builtInCall"],STRENDS:["builtInCall"],STRBEFORE:["builtInCall"],STRAFTER:["builtInCall"],YEAR:["builtInCall"],MONTH:["builtInCall"],DAY:["builtInCall"],HOURS:["builtInCall"],MINUTES:["builtInCall"],SECONDS:["builtInCall"],TIMEZONE:["builtInCall"],TZ:["builtInCall"],NOW:["builtInCall"],UUID:["builtInCall"],STRUUID:["builtInCall"],MD5:["builtInCall"],SHA1:["builtInCall"],SHA256:["builtInCall"],SHA384:["builtInCall"],SHA512:["builtInCall"],COALESCE:["builtInCall"],IF:["builtInCall"],STRLANG:["builtInCall"],STRDT:["builtInCall"],SAMETERM:["builtInCall"],ISIRI:["builtInCall"],ISURI:["builtInCall"],ISBLANK:["builtInCall"],ISLITERAL:["builtInCall"],ISNUMERIC:["builtInCall"],SUBSTR:["builtInCall"],REPLACE:["builtInCall"],REGEX:["builtInCall"],EXISTS:["builtInCall"],NOT:["builtInCall"],IRI_REF:["iriRefOrFunction"],PNAME_LN:["iriRefOrFunction"],PNAME_NS:["iriRefOrFunction"],STRING_LITERAL1:["rdfLiteral"],STRING_LITERAL2:["rdfLiteral"],STRING_LITERAL_LONG1:["rdfLiteral"],STRING_LITERAL_LONG2:["rdfLiteral"],INTEGER:["numericLiteral"],DECIMAL:["numericLiteral"],DOUBLE:["numericLiteral"],INTEGER_POSITIVE:["numericLiteral"],DECIMAL_POSITIVE:["numericLiteral"],DOUBLE_POSITIVE:["numericLiteral"],INTEGER_NEGATIVE:["numericLiteral"],DECIMAL_NEGATIVE:["numericLiteral"],DOUBLE_NEGATIVE:["numericLiteral"],TRUE:["booleanLiteral"],FALSE:["booleanLiteral"],VAR1:["var"],VAR2:["var"],COUNT:["aggregate"],SUM:["aggregate"],MIN:["aggregate"],MAX:["aggregate"],AVG:["aggregate"],SAMPLE:["aggregate"],GROUP_CONCAT:["aggregate"]},prologue:{BASE:["*or([baseDecl,prefixDecl])"],PREFIX:["*or([baseDecl,prefixDecl])"],$:["*or([baseDecl,prefixDecl])"],CONSTRUCT:["*or([baseDecl,prefixDecl])"],DESCRIBE:["*or([baseDecl,prefixDecl])"],ASK:["*or([baseDecl,prefixDecl])"],INSERT:["*or([baseDecl,prefixDecl])"],DELETE:["*or([baseDecl,prefixDecl])"],SELECT:["*or([baseDecl,prefixDecl])"],LOAD:["*or([baseDecl,prefixDecl])"],CLEAR:["*or([baseDecl,prefixDecl])"],DROP:["*or([baseDecl,prefixDecl])"],ADD:["*or([baseDecl,prefixDecl])"],MOVE:["*or([baseDecl,prefixDecl])"],COPY:["*or([baseDecl,prefixDecl])"],CREATE:["*or([baseDecl,prefixDecl])"],WITH:["*or([baseDecl,prefixDecl])"]},propertyList:{a:["propertyListNotEmpty"],VAR1:["propertyListNotEmpty"],VAR2:["propertyListNotEmpty"],IRI_REF:["propertyListNotEmpty"],PNAME_LN:["propertyListNotEmpty"],PNAME_NS:["propertyListNotEmpty"],".":[],"}":[],GRAPH:[]},propertyListNotEmpty:{a:["verb","objectList","*[;,?[verb,objectList]]"],VAR1:["verb","objectList","*[;,?[verb,objectList]]"],VAR2:["verb","objectList","*[;,?[verb,objectList]]"],IRI_REF:["verb","objectList","*[;,?[verb,objectList]]"],PNAME_LN:["verb","objectList","*[;,?[verb,objectList]]"],PNAME_NS:["verb","objectList","*[;,?[verb,objectList]]"]},propertyListPath:{a:["propertyListNotEmpty"],VAR1:["propertyListNotEmpty"],VAR2:["propertyListNotEmpty"],IRI_REF:["propertyListNotEmpty"],PNAME_LN:["propertyListNotEmpty"],PNAME_NS:["propertyListNotEmpty"],".":[],"{":[],OPTIONAL:[],MINUS:[],GRAPH:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[],"}":[]},propertyListPathNotEmpty:{VAR1:["or([verbPath,verbSimple])","objectListPath","*[;,?[or([verbPath,verbSimple]),objectList]]"],VAR2:["or([verbPath,verbSimple])","objectListPath","*[;,?[or([verbPath,verbSimple]),objectList]]"],"^":["or([verbPath,verbSimple])","objectListPath","*[;,?[or([verbPath,verbSimple]),objectList]]"],a:["or([verbPath,verbSimple])","objectListPath","*[;,?[or([verbPath,verbSimple]),objectList]]"],"!":["or([verbPath,verbSimple])","objectListPath","*[;,?[or([verbPath,verbSimple]),objectList]]"],"(":["or([verbPath,verbSimple])","objectListPath","*[;,?[or([verbPath,verbSimple]),objectList]]"],IRI_REF:["or([verbPath,verbSimple])","objectListPath","*[;,?[or([verbPath,verbSimple]),objectList]]"],PNAME_LN:["or([verbPath,verbSimple])","objectListPath","*[;,?[or([verbPath,verbSimple]),objectList]]"],PNAME_NS:["or([verbPath,verbSimple])","objectListPath","*[;,?[or([verbPath,verbSimple]),objectList]]"]},quadData:{"{":["{","disallowVars","quads","allowVars","}"]},quadDataNoBnodes:{"{":["{","disallowBnodes","disallowVars","quads","allowVars","allowBnodes","}"]},quadPattern:{"{":["{","quads","}"]},quadPatternNoBnodes:{"{":["{","disallowBnodes","quads","allowBnodes","}"]},quads:{GRAPH:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],VAR1:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],VAR2:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],NIL:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],"(":["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],"[":["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],IRI_REF:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],TRUE:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],FALSE:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],BLANK_NODE_LABEL:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],ANON:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],PNAME_LN:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],PNAME_NS:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],STRING_LITERAL1:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],STRING_LITERAL2:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],STRING_LITERAL_LONG1:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],STRING_LITERAL_LONG2:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],INTEGER:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],DECIMAL:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],DOUBLE:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],INTEGER_POSITIVE:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],DECIMAL_POSITIVE:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],DOUBLE_POSITIVE:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],INTEGER_NEGATIVE:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],DECIMAL_NEGATIVE:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],DOUBLE_NEGATIVE:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],"}":["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"]},quadsNotTriples:{GRAPH:["GRAPH","varOrIRIref","{","?triplesTemplate","}"]},queryAll:{CONSTRUCT:["or([selectQuery,constructQuery,describeQuery,askQuery])","valuesClause"],DESCRIBE:["or([selectQuery,constructQuery,describeQuery,askQuery])","valuesClause"],ASK:["or([selectQuery,constructQuery,describeQuery,askQuery])","valuesClause"],SELECT:["or([selectQuery,constructQuery,describeQuery,askQuery])","valuesClause"]},rdfLiteral:{STRING_LITERAL1:["string","?or([LANGTAG,[^^,iriRef]])"],STRING_LITERAL2:["string","?or([LANGTAG,[^^,iriRef]])"],STRING_LITERAL_LONG1:["string","?or([LANGTAG,[^^,iriRef]])"],STRING_LITERAL_LONG2:["string","?or([LANGTAG,[^^,iriRef]])"]},regexExpression:{REGEX:["REGEX","(","expression",",","expression","?[,,expression]",")"]},relationalExpression:{"!":["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],"+":["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],"-":["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],VAR1:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],VAR2:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],"(":["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STR:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],LANG:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],LANGMATCHES:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],DATATYPE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],BOUND:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],IRI:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],URI:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],BNODE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],RAND:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],ABS:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],CEIL:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],FLOOR:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],ROUND:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],CONCAT:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRLEN:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],UCASE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],LCASE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],ENCODE_FOR_URI:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],CONTAINS:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRSTARTS:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRENDS:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRBEFORE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRAFTER:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],YEAR:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],MONTH:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],DAY:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],HOURS:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],MINUTES:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],SECONDS:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],TIMEZONE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],TZ:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],NOW:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],UUID:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRUUID:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],MD5:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],SHA1:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],SHA256:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],SHA384:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],SHA512:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],COALESCE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],IF:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRLANG:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRDT:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],SAMETERM:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],ISIRI:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],ISURI:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],ISBLANK:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],ISLITERAL:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],ISNUMERIC:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],TRUE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],FALSE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],COUNT:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],SUM:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],MIN:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],MAX:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],AVG:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],SAMPLE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],GROUP_CONCAT:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],SUBSTR:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],REPLACE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],REGEX:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],EXISTS:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],NOT:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],IRI_REF:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRING_LITERAL1:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRING_LITERAL2:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRING_LITERAL_LONG1:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRING_LITERAL_LONG2:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],INTEGER:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],DECIMAL:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],DOUBLE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],INTEGER_POSITIVE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],DECIMAL_POSITIVE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],DOUBLE_POSITIVE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],INTEGER_NEGATIVE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],DECIMAL_NEGATIVE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],DOUBLE_NEGATIVE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],PNAME_LN:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],PNAME_NS:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"]},selectClause:{SELECT:["SELECT","?or([DISTINCT,REDUCED])","or([+or([var,[(,expression,AS,var,)]]),*])"]},selectQuery:{SELECT:["selectClause","*datasetClause","whereClause","solutionModifier"]},serviceGraphPattern:{SERVICE:["SERVICE","?SILENT","varOrIRIref","groupGraphPattern"]},solutionModifier:{LIMIT:["?groupClause","?havingClause","?orderClause","?limitOffsetClauses"],OFFSET:["?groupClause","?havingClause","?orderClause","?limitOffsetClauses"],ORDER:["?groupClause","?havingClause","?orderClause","?limitOffsetClauses"],HAVING:["?groupClause","?havingClause","?orderClause","?limitOffsetClauses"],GROUP:["?groupClause","?havingClause","?orderClause","?limitOffsetClauses"],VALUES:["?groupClause","?havingClause","?orderClause","?limitOffsetClauses"],$:["?groupClause","?havingClause","?orderClause","?limitOffsetClauses"],"}":["?groupClause","?havingClause","?orderClause","?limitOffsetClauses"]},sourceSelector:{IRI_REF:["iriRef"],PNAME_LN:["iriRef"],PNAME_NS:["iriRef"]},sparql11:{$:["prologue","or([queryAll,updateAll])","$"],CONSTRUCT:["prologue","or([queryAll,updateAll])","$"],DESCRIBE:["prologue","or([queryAll,updateAll])","$"],ASK:["prologue","or([queryAll,updateAll])","$"],INSERT:["prologue","or([queryAll,updateAll])","$"],DELETE:["prologue","or([queryAll,updateAll])","$"],SELECT:["prologue","or([queryAll,updateAll])","$"],LOAD:["prologue","or([queryAll,updateAll])","$"],CLEAR:["prologue","or([queryAll,updateAll])","$"],DROP:["prologue","or([queryAll,updateAll])","$"],ADD:["prologue","or([queryAll,updateAll])","$"],MOVE:["prologue","or([queryAll,updateAll])","$"],COPY:["prologue","or([queryAll,updateAll])","$"],CREATE:["prologue","or([queryAll,updateAll])","$"],WITH:["prologue","or([queryAll,updateAll])","$"],BASE:["prologue","or([queryAll,updateAll])","$"],PREFIX:["prologue","or([queryAll,updateAll])","$"]},storeProperty:{VAR1:[],VAR2:[],IRI_REF:[],PNAME_LN:[],PNAME_NS:[],a:[]},strReplaceExpression:{REPLACE:["REPLACE","(","expression",",","expression",",","expression","?[,,expression]",")"]},string:{STRING_LITERAL1:["STRING_LITERAL1"],STRING_LITERAL2:["STRING_LITERAL2"],STRING_LITERAL_LONG1:["STRING_LITERAL_LONG1"],STRING_LITERAL_LONG2:["STRING_LITERAL_LONG2"]},subSelect:{SELECT:["selectClause","whereClause","solutionModifier","valuesClause"]},substringExpression:{SUBSTR:["SUBSTR","(","expression",",","expression","?[,,expression]",")"]},triplesBlock:{VAR1:["triplesSameSubjectPath","?[.,?triplesBlock]"],VAR2:["triplesSameSubjectPath","?[.,?triplesBlock]"],NIL:["triplesSameSubjectPath","?[.,?triplesBlock]"],"(":["triplesSameSubjectPath","?[.,?triplesBlock]"],"[":["triplesSameSubjectPath","?[.,?triplesBlock]"],IRI_REF:["triplesSameSubjectPath","?[.,?triplesBlock]"],TRUE:["triplesSameSubjectPath","?[.,?triplesBlock]"],FALSE:["triplesSameSubjectPath","?[.,?triplesBlock]"],BLANK_NODE_LABEL:["triplesSameSubjectPath","?[.,?triplesBlock]"],ANON:["triplesSameSubjectPath","?[.,?triplesBlock]"],PNAME_LN:["triplesSameSubjectPath","?[.,?triplesBlock]"],PNAME_NS:["triplesSameSubjectPath","?[.,?triplesBlock]"],STRING_LITERAL1:["triplesSameSubjectPath","?[.,?triplesBlock]"],STRING_LITERAL2:["triplesSameSubjectPath","?[.,?triplesBlock]"],STRING_LITERAL_LONG1:["triplesSameSubjectPath","?[.,?triplesBlock]"],STRING_LITERAL_LONG2:["triplesSameSubjectPath","?[.,?triplesBlock]"],INTEGER:["triplesSameSubjectPath","?[.,?triplesBlock]"],DECIMAL:["triplesSameSubjectPath","?[.,?triplesBlock]"],DOUBLE:["triplesSameSubjectPath","?[.,?triplesBlock]"],INTEGER_POSITIVE:["triplesSameSubjectPath","?[.,?triplesBlock]"],DECIMAL_POSITIVE:["triplesSameSubjectPath","?[.,?triplesBlock]"],DOUBLE_POSITIVE:["triplesSameSubjectPath","?[.,?triplesBlock]"],INTEGER_NEGATIVE:["triplesSameSubjectPath","?[.,?triplesBlock]"],DECIMAL_NEGATIVE:["triplesSameSubjectPath","?[.,?triplesBlock]"],DOUBLE_NEGATIVE:["triplesSameSubjectPath","?[.,?triplesBlock]"]},triplesNode:{"(":["collection"],"[":["blankNodePropertyList"]},triplesNodePath:{"(":["collectionPath"],"[":["blankNodePropertyListPath"]},triplesSameSubject:{VAR1:["varOrTerm","propertyListNotEmpty"],VAR2:["varOrTerm","propertyListNotEmpty"],NIL:["varOrTerm","propertyListNotEmpty"],IRI_REF:["varOrTerm","propertyListNotEmpty"],TRUE:["varOrTerm","propertyListNotEmpty"],FALSE:["varOrTerm","propertyListNotEmpty"],BLANK_NODE_LABEL:["varOrTerm","propertyListNotEmpty"],ANON:["varOrTerm","propertyListNotEmpty"],PNAME_LN:["varOrTerm","propertyListNotEmpty"],PNAME_NS:["varOrTerm","propertyListNotEmpty"],STRING_LITERAL1:["varOrTerm","propertyListNotEmpty"],STRING_LITERAL2:["varOrTerm","propertyListNotEmpty"],STRING_LITERAL_LONG1:["varOrTerm","propertyListNotEmpty"],STRING_LITERAL_LONG2:["varOrTerm","propertyListNotEmpty"],INTEGER:["varOrTerm","propertyListNotEmpty"],DECIMAL:["varOrTerm","propertyListNotEmpty"],DOUBLE:["varOrTerm","propertyListNotEmpty"],INTEGER_POSITIVE:["varOrTerm","propertyListNotEmpty"],DECIMAL_POSITIVE:["varOrTerm","propertyListNotEmpty"],DOUBLE_POSITIVE:["varOrTerm","propertyListNotEmpty"],INTEGER_NEGATIVE:["varOrTerm","propertyListNotEmpty"],DECIMAL_NEGATIVE:["varOrTerm","propertyListNotEmpty"],DOUBLE_NEGATIVE:["varOrTerm","propertyListNotEmpty"],"(":["triplesNode","propertyList"],"[":["triplesNode","propertyList"]},triplesSameSubjectPath:{VAR1:["varOrTerm","propertyListPathNotEmpty"],VAR2:["varOrTerm","propertyListPathNotEmpty"],NIL:["varOrTerm","propertyListPathNotEmpty"],IRI_REF:["varOrTerm","propertyListPathNotEmpty"],TRUE:["varOrTerm","propertyListPathNotEmpty"],FALSE:["varOrTerm","propertyListPathNotEmpty"],BLANK_NODE_LABEL:["varOrTerm","propertyListPathNotEmpty"],ANON:["varOrTerm","propertyListPathNotEmpty"],PNAME_LN:["varOrTerm","propertyListPathNotEmpty"],PNAME_NS:["varOrTerm","propertyListPathNotEmpty"],STRING_LITERAL1:["varOrTerm","propertyListPathNotEmpty"],STRING_LITERAL2:["varOrTerm","propertyListPathNotEmpty"],STRING_LITERAL_LONG1:["varOrTerm","propertyListPathNotEmpty"],STRING_LITERAL_LONG2:["varOrTerm","propertyListPathNotEmpty"],INTEGER:["varOrTerm","propertyListPathNotEmpty"],DECIMAL:["varOrTerm","propertyListPathNotEmpty"],DOUBLE:["varOrTerm","propertyListPathNotEmpty"],INTEGER_POSITIVE:["varOrTerm","propertyListPathNotEmpty"],DECIMAL_POSITIVE:["varOrTerm","propertyListPathNotEmpty"],DOUBLE_POSITIVE:["varOrTerm","propertyListPathNotEmpty"],INTEGER_NEGATIVE:["varOrTerm","propertyListPathNotEmpty"],DECIMAL_NEGATIVE:["varOrTerm","propertyListPathNotEmpty"],DOUBLE_NEGATIVE:["varOrTerm","propertyListPathNotEmpty"],"(":["triplesNodePath","propertyListPath"],"[":["triplesNodePath","propertyListPath"]},triplesTemplate:{VAR1:["triplesSameSubject","?[.,?triplesTemplate]"],VAR2:["triplesSameSubject","?[.,?triplesTemplate]"],NIL:["triplesSameSubject","?[.,?triplesTemplate]"],"(":["triplesSameSubject","?[.,?triplesTemplate]"],"[":["triplesSameSubject","?[.,?triplesTemplate]"],IRI_REF:["triplesSameSubject","?[.,?triplesTemplate]"],TRUE:["triplesSameSubject","?[.,?triplesTemplate]"],FALSE:["triplesSameSubject","?[.,?triplesTemplate]"],BLANK_NODE_LABEL:["triplesSameSubject","?[.,?triplesTemplate]"],ANON:["triplesSameSubject","?[.,?triplesTemplate]"],PNAME_LN:["triplesSameSubject","?[.,?triplesTemplate]"],PNAME_NS:["triplesSameSubject","?[.,?triplesTemplate]"],STRING_LITERAL1:["triplesSameSubject","?[.,?triplesTemplate]"],STRING_LITERAL2:["triplesSameSubject","?[.,?triplesTemplate]"],STRING_LITERAL_LONG1:["triplesSameSubject","?[.,?triplesTemplate]"],STRING_LITERAL_LONG2:["triplesSameSubject","?[.,?triplesTemplate]"],INTEGER:["triplesSameSubject","?[.,?triplesTemplate]"],DECIMAL:["triplesSameSubject","?[.,?triplesTemplate]"],DOUBLE:["triplesSameSubject","?[.,?triplesTemplate]"],INTEGER_POSITIVE:["triplesSameSubject","?[.,?triplesTemplate]"],DECIMAL_POSITIVE:["triplesSameSubject","?[.,?triplesTemplate]"],DOUBLE_POSITIVE:["triplesSameSubject","?[.,?triplesTemplate]"],INTEGER_NEGATIVE:["triplesSameSubject","?[.,?triplesTemplate]"],DECIMAL_NEGATIVE:["triplesSameSubject","?[.,?triplesTemplate]"],DOUBLE_NEGATIVE:["triplesSameSubject","?[.,?triplesTemplate]"]},unaryExpression:{"!":["!","primaryExpression"],"+":["+","primaryExpression"],"-":["-","primaryExpression"],VAR1:["primaryExpression"],VAR2:["primaryExpression"],"(":["primaryExpression"],STR:["primaryExpression"],LANG:["primaryExpression"],LANGMATCHES:["primaryExpression"],DATATYPE:["primaryExpression"],BOUND:["primaryExpression"],IRI:["primaryExpression"],URI:["primaryExpression"],BNODE:["primaryExpression"],RAND:["primaryExpression"],ABS:["primaryExpression"],CEIL:["primaryExpression"],FLOOR:["primaryExpression"],ROUND:["primaryExpression"],CONCAT:["primaryExpression"],STRLEN:["primaryExpression"],UCASE:["primaryExpression"],LCASE:["primaryExpression"],ENCODE_FOR_URI:["primaryExpression"],CONTAINS:["primaryExpression"],STRSTARTS:["primaryExpression"],STRENDS:["primaryExpression"],STRBEFORE:["primaryExpression"],STRAFTER:["primaryExpression"],YEAR:["primaryExpression"],MONTH:["primaryExpression"],DAY:["primaryExpression"],HOURS:["primaryExpression"],MINUTES:["primaryExpression"],SECONDS:["primaryExpression"],TIMEZONE:["primaryExpression"],TZ:["primaryExpression"],NOW:["primaryExpression"],UUID:["primaryExpression"],STRUUID:["primaryExpression"],MD5:["primaryExpression"],SHA1:["primaryExpression"],SHA256:["primaryExpression"],SHA384:["primaryExpression"],SHA512:["primaryExpression"],COALESCE:["primaryExpression"],IF:["primaryExpression"],STRLANG:["primaryExpression"],STRDT:["primaryExpression"],SAMETERM:["primaryExpression"],ISIRI:["primaryExpression"],ISURI:["primaryExpression"],ISBLANK:["primaryExpression"],ISLITERAL:["primaryExpression"],ISNUMERIC:["primaryExpression"],TRUE:["primaryExpression"],FALSE:["primaryExpression"],COUNT:["primaryExpression"],SUM:["primaryExpression"],MIN:["primaryExpression"],MAX:["primaryExpression"],AVG:["primaryExpression"],SAMPLE:["primaryExpression"],GROUP_CONCAT:["primaryExpression"],SUBSTR:["primaryExpression"],REPLACE:["primaryExpression"],REGEX:["primaryExpression"],EXISTS:["primaryExpression"],NOT:["primaryExpression"],IRI_REF:["primaryExpression"],STRING_LITERAL1:["primaryExpression"],STRING_LITERAL2:["primaryExpression"],STRING_LITERAL_LONG1:["primaryExpression"],STRING_LITERAL_LONG2:["primaryExpression"],INTEGER:["primaryExpression"],DECIMAL:["primaryExpression"],DOUBLE:["primaryExpression"],INTEGER_POSITIVE:["primaryExpression"],DECIMAL_POSITIVE:["primaryExpression"],DOUBLE_POSITIVE:["primaryExpression"],INTEGER_NEGATIVE:["primaryExpression"],DECIMAL_NEGATIVE:["primaryExpression"],DOUBLE_NEGATIVE:["primaryExpression"],PNAME_LN:["primaryExpression"],PNAME_NS:["primaryExpression"]},update:{INSERT:["prologue","?[update1,?[;,update]]"],DELETE:["prologue","?[update1,?[;,update]]"],LOAD:["prologue","?[update1,?[;,update]]"],CLEAR:["prologue","?[update1,?[;,update]]"],DROP:["prologue","?[update1,?[;,update]]"],ADD:["prologue","?[update1,?[;,update]]"],MOVE:["prologue","?[update1,?[;,update]]"],COPY:["prologue","?[update1,?[;,update]]"],CREATE:["prologue","?[update1,?[;,update]]"],WITH:["prologue","?[update1,?[;,update]]"],BASE:["prologue","?[update1,?[;,update]]"],PREFIX:["prologue","?[update1,?[;,update]]"],$:["prologue","?[update1,?[;,update]]"]},update1:{LOAD:["load"],CLEAR:["clear"],DROP:["drop"],ADD:["add"],MOVE:["move"],COPY:["copy"],CREATE:["create"],INSERT:["INSERT","insert1"],DELETE:["DELETE","delete1"],WITH:["modify"]},updateAll:{INSERT:["?[update1,?[;,update]]"],DELETE:["?[update1,?[;,update]]"],LOAD:["?[update1,?[;,update]]"],CLEAR:["?[update1,?[;,update]]"],DROP:["?[update1,?[;,update]]"],ADD:["?[update1,?[;,update]]"],MOVE:["?[update1,?[;,update]]"],COPY:["?[update1,?[;,update]]"],CREATE:["?[update1,?[;,update]]"],WITH:["?[update1,?[;,update]]"],$:["?[update1,?[;,update]]"]},usingClause:{USING:["USING","or([iriRef,[NAMED,iriRef]])"]},valueLogical:{"!":["relationalExpression"],"+":["relationalExpression"],"-":["relationalExpression"],VAR1:["relationalExpression"],VAR2:["relationalExpression"],"(":["relationalExpression"],STR:["relationalExpression"],LANG:["relationalExpression"],LANGMATCHES:["relationalExpression"],DATATYPE:["relationalExpression"],BOUND:["relationalExpression"],IRI:["relationalExpression"],URI:["relationalExpression"],BNODE:["relationalExpression"],RAND:["relationalExpression"],ABS:["relationalExpression"],CEIL:["relationalExpression"],FLOOR:["relationalExpression"],ROUND:["relationalExpression"],CONCAT:["relationalExpression"],STRLEN:["relationalExpression"],UCASE:["relationalExpression"],LCASE:["relationalExpression"],ENCODE_FOR_URI:["relationalExpression"],CONTAINS:["relationalExpression"],STRSTARTS:["relationalExpression"],STRENDS:["relationalExpression"],STRBEFORE:["relationalExpression"],STRAFTER:["relationalExpression"],YEAR:["relationalExpression"],MONTH:["relationalExpression"],DAY:["relationalExpression"],HOURS:["relationalExpression"],MINUTES:["relationalExpression"],SECONDS:["relationalExpression"],TIMEZONE:["relationalExpression"],TZ:["relationalExpression"],NOW:["relationalExpression"],UUID:["relationalExpression"],STRUUID:["relationalExpression"],MD5:["relationalExpression"],SHA1:["relationalExpression"],SHA256:["relationalExpression"],SHA384:["relationalExpression"],SHA512:["relationalExpression"],COALESCE:["relationalExpression"],IF:["relationalExpression"],STRLANG:["relationalExpression"],STRDT:["relationalExpression"],SAMETERM:["relationalExpression"],ISIRI:["relationalExpression"],ISURI:["relationalExpression"],ISBLANK:["relationalExpression"],ISLITERAL:["relationalExpression"],ISNUMERIC:["relationalExpression"],TRUE:["relationalExpression"],FALSE:["relationalExpression"],COUNT:["relationalExpression"],SUM:["relationalExpression"],MIN:["relationalExpression"],MAX:["relationalExpression"],AVG:["relationalExpression"],SAMPLE:["relationalExpression"],GROUP_CONCAT:["relationalExpression"],SUBSTR:["relationalExpression"],REPLACE:["relationalExpression"],REGEX:["relationalExpression"],EXISTS:["relationalExpression"],NOT:["relationalExpression"],IRI_REF:["relationalExpression"],STRING_LITERAL1:["relationalExpression"],STRING_LITERAL2:["relationalExpression"],STRING_LITERAL_LONG1:["relationalExpression"],STRING_LITERAL_LONG2:["relationalExpression"],INTEGER:["relationalExpression"],DECIMAL:["relationalExpression"],DOUBLE:["relationalExpression"],INTEGER_POSITIVE:["relationalExpression"],DECIMAL_POSITIVE:["relationalExpression"],DOUBLE_POSITIVE:["relationalExpression"],INTEGER_NEGATIVE:["relationalExpression"],DECIMAL_NEGATIVE:["relationalExpression"],DOUBLE_NEGATIVE:["relationalExpression"],PNAME_LN:["relationalExpression"],PNAME_NS:["relationalExpression"]},valuesClause:{VALUES:["VALUES","dataBlock"],$:[],"}":[]},var:{VAR1:["VAR1"],VAR2:["VAR2"]},varOrIRIref:{VAR1:["var"],VAR2:["var"],IRI_REF:["iriRef"],PNAME_LN:["iriRef"],PNAME_NS:["iriRef"]},varOrTerm:{VAR1:["var"],VAR2:["var"],NIL:["graphTerm"],IRI_REF:["graphTerm"],TRUE:["graphTerm"],FALSE:["graphTerm"],BLANK_NODE_LABEL:["graphTerm"],ANON:["graphTerm"],PNAME_LN:["graphTerm"],PNAME_NS:["graphTerm"],STRING_LITERAL1:["graphTerm"],STRING_LITERAL2:["graphTerm"],STRING_LITERAL_LONG1:["graphTerm"],STRING_LITERAL_LONG2:["graphTerm"],INTEGER:["graphTerm"],DECIMAL:["graphTerm"],DOUBLE:["graphTerm"],INTEGER_POSITIVE:["graphTerm"],DECIMAL_POSITIVE:["graphTerm"],DOUBLE_POSITIVE:["graphTerm"],INTEGER_NEGATIVE:["graphTerm"],DECIMAL_NEGATIVE:["graphTerm"],DOUBLE_NEGATIVE:["graphTerm"]},verb:{VAR1:["storeProperty","varOrIRIref"],VAR2:["storeProperty","varOrIRIref"],IRI_REF:["storeProperty","varOrIRIref"],PNAME_LN:["storeProperty","varOrIRIref"],PNAME_NS:["storeProperty","varOrIRIref"],a:["storeProperty","a"]},verbPath:{"^":["path"],a:["path"],"!":["path"],"(":["path"],IRI_REF:["path"],PNAME_LN:["path"],PNAME_NS:["path"]},verbSimple:{VAR1:["var"],VAR2:["var"]},whereClause:{"{":["?WHERE","groupGraphPattern"],WHERE:["?WHERE","groupGraphPattern"]}},keywords:/^(GROUP_CONCAT|DATATYPE|BASE|PREFIX|SELECT|CONSTRUCT|DESCRIBE|ASK|FROM|NAMED|ORDER|BY|LIMIT|ASC|DESC|OFFSET|DISTINCT|REDUCED|WHERE|GRAPH|OPTIONAL|UNION|FILTER|GROUP|HAVING|AS|VALUES|LOAD|CLEAR|DROP|CREATE|MOVE|COPY|SILENT|INSERT|DELETE|DATA|WITH|TO|USING|NAMED|MINUS|BIND|LANGMATCHES|LANG|BOUND|SAMETERM|ISIRI|ISURI|ISBLANK|ISLITERAL|REGEX|TRUE|FALSE|UNDEF|ADD|DEFAULT|ALL|SERVICE|INTO|IN|NOT|IRI|URI|BNODE|RAND|ABS|CEIL|FLOOR|ROUND|CONCAT|STRLEN|UCASE|LCASE|ENCODE_FOR_URI|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|NOW|UUID|STRUUID|MD5|SHA1|SHA256|SHA384|SHA512|COALESCE|IF|STRLANG|STRDT|ISNUMERIC|SUBSTR|REPLACE|EXISTS|COUNT|SUM|MIN|MAX|AVG|SAMPLE|SEPARATOR|STR)/i,punct:/^(\*|a|\.|\{|\}|,|\(|\)|;|\[|\]|\|\||&&|=|!=|!|<=|>=|<|>|\+|-|\/|\^\^|\?|\||\^)/,startSymbol:"sparql11",acceptEmpty:!0}},1556:(e,t,r)=>{"use strict";var i=r(7866);i.defineMode("sparql11",(function(e,t){e.indentUnit;var i=r(9852),n=i.table,o="[0-9A-Fa-f]",s="\\\\[tbnrf\\\\\"']",a=o+"{4}",u="(\\\\u"+a+"|\\\\U00(10|0"+o+")"+a+")",l={SINGLE:{CAT:"STRING_LITERAL_LONG1",QUOTES:"'''",CONTENTS:"(('|'')?([^'\\\\]|"+s+"|"+u+"))*"},DOUBLE:{CAT:"STRING_LITERAL_LONG2",QUOTES:'"""',CONTENTS:'(("|"")?([^"\\\\]|'+s+"|"+u+"))*"}};for(var c in l)l[c].COMPLETE=l[c].QUOTES+l[c].CONTENTS+l[c].QUOTES;var h={};for(var c in l)h[c]={complete:{name:"STRING_LITERAL_LONG_"+c,regex:new RegExp("^"+l[c].COMPLETE),style:"string"},contents:{name:"STRING_LITERAL_LONG_"+c,regex:new RegExp("^"+l[c].CONTENTS),style:"string"},closing:{name:"STRING_LITERAL_LONG_"+c,regex:new RegExp("^"+l[c].CONTENTS+l[c].QUOTES),style:"string"},quotes:{name:"STRING_LITERAL_LONG_QUOTES_"+c,regex:new RegExp("^"+l[c].QUOTES),style:"string"}};var p=[{name:"WS",regex:new RegExp("^[\\x20\\x09\\x0D\\x0A]+"),style:"ws"},{name:"COMMENT",regex:new RegExp("^#([^\\n\\r]*[\\n\\r]|[^\\n\\r]*$)"),style:"comment"},{name:"IRI_REF",regex:new RegExp('^<[^<>"`|{}^\\\0- ]*>'),style:"variable-3"},{name:"VAR1",regex:new RegExp("^\\?([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|[0-9])([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|[0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040])*"),style:"atom"},{name:"VAR2",regex:new RegExp("^\\$([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|[0-9])([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|[0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040])*"),style:"atom"},{name:"LANGTAG",regex:new RegExp("^@[a-zA-Z]+(-[a-zA-Z0-9]+)*"),style:"meta"},{name:"DOUBLE",regex:new RegExp("^(([0-9]+\\.[0-9]*[eE][\\+-]?[0-9]+)|(\\.[0-9]+[eE][\\+-]?[0-9]+)|([0-9]+[eE][\\+-]?[0-9]+))"),style:"number"},{name:"DECIMAL",regex:new RegExp("^(([0-9]+\\.[0-9]*)|(\\.[0-9]+))"),style:"number"},{name:"INTEGER",regex:new RegExp("^[0-9]+"),style:"number"},{name:"DOUBLE_POSITIVE",regex:new RegExp("^\\+(([0-9]+\\.[0-9]*[eE][\\+-]?[0-9]+)|(\\.[0-9]+[eE][\\+-]?[0-9]+)|([0-9]+[eE][\\+-]?[0-9]+))"),style:"number"},{name:"DECIMAL_POSITIVE",regex:new RegExp("^\\+(([0-9]+\\.[0-9]*)|(\\.[0-9]+))"),style:"number"},{name:"INTEGER_POSITIVE",regex:new RegExp("^\\+[0-9]+"),style:"number"},{name:"DOUBLE_NEGATIVE",regex:new RegExp("^-(([0-9]+\\.[0-9]*[eE][\\+-]?[0-9]+)|(\\.[0-9]+[eE][\\+-]?[0-9]+)|([0-9]+[eE][\\+-]?[0-9]+))"),style:"number"},{name:"DECIMAL_NEGATIVE",regex:new RegExp("^-(([0-9]+\\.[0-9]*)|(\\.[0-9]+))"),style:"number"},{name:"INTEGER_NEGATIVE",regex:new RegExp("^-[0-9]+"),style:"number"},{name:"STRING_LITERAL1",regex:new RegExp("^'(([^\\x27\\x5C\\x0A\\x0D])|\\\\[tbnrf\\\\\"']|(\\\\u[0-9A-Fa-f]{4}|\\\\U00(10|0[0-9A-Fa-f])[0-9A-Fa-f]{4}))*'"),style:"string"},{name:"STRING_LITERAL2",regex:new RegExp('^"(([^\\x22\\x5C\\x0A\\x0D])|\\\\[tbnrf\\\\"\']|(\\\\u[0-9A-Fa-f]{4}|\\\\U00(10|0[0-9A-Fa-f])[0-9A-Fa-f]{4}))*"'),style:"string"},{name:"NIL",regex:new RegExp("^\\(([\\x20\\x09\\x0D\\x0A]|(#([^\\n\\r]*[\\n\\r]|[^\\n\\r]*$)))*\\)"),style:"punc"},{name:"ANON",regex:new RegExp("^\\[([\\x20\\x09\\x0D\\x0A]|(#([^\\n\\r]*[\\n\\r]|[^\\n\\r]*$)))*\\]"),style:"punc"},{name:"PNAME_LN",regex:new RegExp("^(([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD])(((([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|-|[0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]))|\\.)*(([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|-|[0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040])))?)?:([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|:|[0-9]|((%[0-9A-Fa-f][0-9A-Fa-f])|(\\\\[_~\\.\\-!\\$&'\\(\\)\\*\\+,;=/\\?#@%])))((([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|-|[0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040])|\\.|:|((%[0-9A-Fa-f][0-9A-Fa-f])|(\\\\[_~\\.\\-!\\$&'\\(\\)\\*\\+,;=/\\?#@%])))*(([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|-|[0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040])|:|((%[0-9A-Fa-f][0-9A-Fa-f])|(\\\\[_~\\.\\-!\\$&'\\(\\)\\*\\+,;=/\\?#@%]))))?"),style:"string-2"},{name:"PNAME_NS",regex:new RegExp("^(([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD])(((([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|-|[0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]))|\\.)*(([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|-|[0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040])))?)?:"),style:"string-2"},{name:"BLANK_NODE_LABEL",regex:new RegExp("^_:([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|[0-9])((([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|-|[0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040])|\\.)*([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|-|[0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]))?"),style:"string-2"}];function d(e){var t=[],r=n[e];if(null!=r)for(var i in r)t.push(i.toString());else t.push(e);return t}function f(e,t){function r(){var r=e.column();t.errorStartPos=r,t.errorEndPos=r+a.text.length}function o(e){switch(t.inPrefixDecl="prefixDecl"===e,e){case"disallowVars":t.allowVars=!1;break;case"allowVars":t.allowVars=!0;break;case"disallowBnodes":t.allowBnodes=!1;break;case"allowBnodes":t.allowBnodes=!0;break;case"storeProperty":t.storeProperty=!0}}function s(e){return(t.allowVars||"var"!=e)&&(t.allowBnodes||"blankNode"!=e&&"blankNodePropertyList"!=e&&"blankNodePropertyListPath"!=e)}0==e.pos&&(t.possibleCurrent=t.possibleNext);var a=function(){var r=null;if(t.inLiteral){var n=!1;if((r=e.match(h[t.inLiteral].contents.regex,!0,!1))&&0==r[0].length&&(r=e.match(h[t.inLiteral].closing.regex,!0,!1),n=!0),r&&r[0].length>0){var o={quotePos:n?"end":"content",cat:l[t.inLiteral].CAT,style:h[t.inLiteral].complete.style,text:r[0],start:e.start};return n&&(t.inLiteral=!1),o}}for(var s in h){var a;if(r=e.match(h[s].quotes.regex,!0,!1))return t.inLiteral?(t.inLiteral=!1,a="end"):(t.inLiteral=s,a="start"),{cat:l[s].CAT,style:h[s].quotes.style,text:r[0],quotePos:a,start:e.start}}for(var u=0;u<p.length;++u)if(r=e.match(p[u].regex,!0,!1))return{cat:p[u].name,style:p[u].style,text:r[0],start:e.start};return(r=e.match(i.keywords,!0,!1))?{cat:e.current().toUpperCase(),style:"keyword",text:r[0],start:e.start}:(r=e.match(i.punct,!0,!1))?{cat:e.current(),style:"punc",text:r[0],start:e.start}:{cat:"<invalid_token>",style:"error",text:(r=e.match(/^.[A-Za-z0-9]*/,!0,!1))[0],start:e.start}}();if("<invalid_token>"==a.cat)return 1==t.OK&&(t.OK=!1,r()),t.complete=!1,a.style;if("WS"==a.cat||"COMMENT"==a.cat||a.quotePos&&"end"!=a.quotePos)return t.possibleCurrent=t.possibleNext,a.style;var u,c,f=!1,g=a.cat;if(!a.quotePos||"end"==a.quotePos)for(;t.stack.length>0&&g&&t.OK&&!f;)if("var"===(u=t.stack.pop())&&a.text&&(t.variables[a.text]=a.text),n[u]){var m=n[u][g];if(null!=m&&s(u)){for(var v=m.length-1;v>=0;--v)t.stack.push(m[v]);o(u)}else t.OK=!1,t.complete=!1,r(),t.stack.push(u)}else if(u==g){t.inPrefixDecl&&("PNAME_NS"===u&&a.text.length>0?t.currentPnameNs=a.text.slice(0,-1):void 0!==t.currentPnameNs&&a.text.length>2&&(t.prefixes[t.currentPnameNs]=a.text.slice(1,-1),t.currentPnameNs=void 0)),f=!0,c=u,null==t.queryType&&("SELECT"!=c&&"CONSTRUCT"!=c&&"ASK"!=c&&"DESCRIBE"!=c&&"INSERT"!=c&&"DELETE"!=c&&"LOAD"!=c&&"CLEAR"!=c&&"CREATE"!=c&&"DROP"!=c&&"COPY"!=c&&"MOVE"!=c&&"ADD"!=c||(t.queryType=c));for(var y=!0,_=t.stack.length;_>0;--_){var E=n[t.stack[_-1]];E&&E.$||(y=!1)}if(t.complete=y,t.storeProperty&&"punc"!=g.cat&&(t.lastProperty=a.text,t.storeProperty=!1),!t.inPrefixDecl&&("PNAME_NS"===g||"PNAME_LN"===g)){var x=a.text.indexOf(":");if(x>=0){var b=a.text.slice(0,x);!t.prefixes[b]&&["bif","xsd","sql"].indexOf(b)<0&&(t.OK=!1,r(),t.errorMsg="Prefix '"+b+"' is not defined")}}}else t.OK=!1,t.complete=!1,r();return!f&&t.OK&&(t.OK=!1,t.complete=!1,r()),t.possibleCurrent.indexOf("a")>=0&&(t.lastPredicateOffset=a.start),t.possibleCurrent=t.possibleNext,t.possibleNext=d(t.stack[t.stack.length-1]),a.style}var g={"*[,, object]":3,"*[(,),object]":3,"*[(,),objectPath]":3,"*[/,pathEltOrInverse]":2,object:2,objectPath:2,objectList:2,objectListPath:2,storeProperty:2,pathMod:2,"?pathMod":2,propertyListNotEmpty:1,propertyList:1,propertyListPath:1,propertyListPathNotEmpty:1,"?[verb,objectList]":1},m={"}":1,"]":1,")":1,"{":-1,"(":-1,"[":-1};return{token:f,startState:function(t){return{tokenize:f,OK:!0,complete:i.acceptEmpty,errorStartPos:null,errorEndPos:null,queryType:null,possibleCurrent:d(i.startSymbol),possibleNext:d(i.startSymbol),allowVars:!0,allowBnodes:!0,storeProperty:!1,lastProperty:"",inLiteral:!1,stack:[i.startSymbol],lastPredicateOffset:e.indentUnit,prefixes:{},variables:{}}},indent:function(t,r){if(t.inLiteral)return 0;if(t.stack.length&&"?[or([verbPath,verbSimple]),objectList]"==t.stack[t.stack.length-1])return t.lastPredicateOffset;var i=0,n=t.stack.length-1;if(/^[\}\]\)]/.test(r)){for(var o=r.substr(0,1);n>=0;--n)if(t.stack[n]==o){--n;break}}else(s=g[t.stack[n]])&&(i+=s,--n);for(;n>=0;--n){var s;(s=m[t.stack[n]])&&(i+=s)}return i*e.indentUnit},electricChars:"}])"}})),i.defineMIME("application/x-sparql-query","sparql11")},4998:e=>{var t=e.exports=function(){this.words=0,this.prefixes=0,this.children=[]};t.prototype={insert:function(e,r){if(0!=e.length){var i,n=this;void 0===r&&(r=0),r!==e.length?(n.prefixes++,i=e[r],void 0===n.children[i]&&(n.children[i]=new t),n.children[i].insert(e,r+1)):n.words++}},remove:function(e,t){if(0!=e.length){var r,i=this;void 0===t&&(t=0),void 0!==i&&(t!==e.length?(i.prefixes--,r=e[t],i.children[r].remove(e,t+1)):i.words--)}},update:function(e,t){0!=e.length&&0!=t.length&&(this.remove(e),this.insert(t))},countWord:function(e,t){if(0==e.length)return 0;var r,i,n=0;return void 0===t&&(t=0),t===e.length?this.words:(r=e[t],void 0!==(i=this.children[r])&&(n=i.countWord(e,t+1)),n)},countPrefix:function(e,t){if(0==e.length)return 0;var r,i=0;if(void 0===t&&(t=0),t===e.length)return this.prefixes;var n=e[t];return void 0!==(r=this.children[n])&&(i=r.countPrefix(e,t+1)),i},find:function(e){return 0!=e.length&&this.countWord(e)>0},getAllWords:function(e){var t,r,i=this,n=[];if(void 0===e&&(e=""),void 0===i)return[];for(t in i.words>0&&n.push(e),i.children)i.children.hasOwnProperty(t)&&(r=i.children[t],n=n.concat(r.getAllWords(e+t)));return n},autoComplete:function(e,t){var r,i;return 0==e.length?void 0===t?this.getAllWords(e):[]:(void 0===t&&(t=0),r=e[t],void 0===(i=this.children[r])?[]:t===e.length-1?i.getAllWords(e):i.autoComplete(e,t+1))}}},7014:(e,t,r)=>{"use strict";var i=r(8734),n=r(4209),o=r(8372),s=r(4998);r(9045),e.exports=function(e,t){var r={},u={},l={};t.on("cursorActivity",(function(e,t){c(!0)})),t.on("change",(function(){var e=[];for(var n in r)r[n].is(":visible")&&e.push(r[n]);if(e.length>0){var o=i(t.getWrapperElement()).find(".CodeMirror-vscrollbar"),s=0;o.is(":visible")&&(s=o.outerWidth()),e.forEach((function(e){e.css("right",s)}))}}));var c=function(r){if(!t.somethingSelected()){var n=function(i){if(r&&(!i.autoShow||!i.bulk&&i.async))return!1;var n={closeCharacters:/(?=a)b/,completeSingle:!1};return!i.bulk&&i.async&&(n.async=!0),e.showHint(t,(function(e,t){return h(i,t)}),n),!0};for(var o in u)if(-1!=i.inArray(o,t.options.autocompleters)){var s=u[o];if(s.isValidCompletionPosition)if(s.isValidCompletionPosition()){if((!s.callbacks||!s.callbacks.validPosition||!1!==s.callbacks.validPosition(t,s))&&n(s))break}else s.callbacks&&s.callbacks.invalidPosition&&s.callbacks.invalidPosition(t,s)}}},h=function(e,r){var i=t.getCompleteToken();if(e.preProcessToken&&(i=e.preProcessToken(i)),i){if(e.bulk||!e.async)return function(t){var r=t.autocompletionString||t.string,i=[];if(l[e.name])i=l[e.name].autoComplete(r);else if("function"==typeof e.get&&0==e.async)i=e.get(r);else if("object"==typeof e.get)for(var n=r.length,o=0;o<e.get.length;o++){var s=e.get[o];s.slice(0,n)==r&&i.push(s)}return p(i,e,t)}(i);e.get(i,(function(t){r(p(t,e,i))}))}},p=function(r,i,n){for(var o=[],s=0;s<r.length;s++){var u=r[s];i.postProcessToken&&(u=i.postProcessToken(n,u)),o.push({text:u,displayText:u,hint:a})}var l=t.getCursor(),c={completionToken:n.string,list:o,from:{line:l.line,ch:n.start},to:{line:l.line,ch:n.end}};if(i.callbacks)for(var h in i.callbacks)i.callbacks[h]&&e.on(c,h,i.callbacks[h]);return c};return{init:function(e,r){var i=u[e]=new r(t,e);if(i.name=e,i.bulk){var a=function(e){e&&e instanceof Array&&e.length>0&&function(e,r){l[e.name]=new s;for(var i=0;i<r.length;i++)l[e.name].insert(r[i]);var a=n.getPersistencyId(t,e.persistent);a&&o.storage.set(a,r,"month",t.options.onQuotaExceeded)}(i,e)};if(i.get instanceof Array)a(i.get);else{var c=null,h=n.getPersistencyId(t,i.persistent);h&&(c=o.storage.get(h)),c&&c.length>0?a(c):i.get instanceof Function&&(i.async?i.get(null,a):a(i.get()))}}},completers:u,notifications:{getEl:function(e){return i(r[e.name])},show:function(e,t){t.autoshow||(r[t.name]||(r[t.name]=i("<div class='completionNotification'></div>")),r[t.name].show().text("Press CTRL - <spacebar> to autocomplete").appendTo(i(e.getWrapperElement())))},hide:function(e,t){r[t.name]&&r[t.name].hide()}},autoComplete:c,getTrie:function(e){return"string"==typeof e?l[e]:l[e.name]}}};var a=function(e,t,r){r.text!=e.getTokenAt(e.getCursor()).string&&e.replaceRange(r.text,t.from,t.to)}},5409:(e,t,r)=>{"use strict";r(8734),e.exports=function(t,i){return{isValidCompletionPosition:function(){return e.exports.isValidCompletionPosition(t)},get:function(e,i){return r(1265).fetchFromLov(t,this,e,i)},preProcessToken:function(r){return e.exports.preProcessToken(t,r)},postProcessToken:function(r,i){return e.exports.postProcessToken(t,r,i)},async:!0,bulk:!1,autoShow:!1,persistent:i,callbacks:{validPosition:t.autocompleters.notifications.show,invalidPosition:t.autocompleters.notifications.hide}}},e.exports.isValidCompletionPosition=function(e){var t=e.getCompleteToken();if(0==t.string.indexOf("?"))return!1;var r=e.getCursor(),i=e.getPreviousNonWsToken(r.line,t);return"a"==i.string||"rdf:type"==i.string||"rdfs:domain"==i.string||"rdfs:range"==i.string},e.exports.preProcessToken=function(e,t){return r(1265).preprocessResourceTokenForCompletion(e,t)},e.exports.postProcessToken=function(e,t,i){return r(1265).postprocessResourceTokenForCompletion(e,t,i)}},6610:(e,t,r)=>{"use strict";var i=r(8734),n={"string-2":"prefixed",atom:"var"};e.exports=function(t,r){return t.on("change",(function(){e.exports.appendPrefixIfNeeded(t,r)})),{isValidCompletionPosition:function(){return e.exports.isValidCompletionPosition(t)},get:function(t,r){i.get(e.exports.fetchFrom,(function(e){var t=[];for(var i in e)if("bif"!=i){var n=i+": <"+e[i]+">";t.push(n)}t.sort(),r(t)}))},preProcessToken:function(r){return e.exports.preprocessPrefixTokenForCompletion(t,r)},async:!0,bulk:!0,autoShow:!0,persistent:r,callbacks:{pick:function(){t.collapsePrefixes(!1)}}}},e.exports.isValidCompletionPosition=function(e){var t=e.getCursor(),r=e.getTokenAt(t);if(e.getLine(t.line).length>t.ch)return!1;if("ws"!=r.type&&(r=e.getCompleteToken()),0==!r.string.indexOf("a")&&-1==i.inArray("PNAME_NS",r.state.possibleCurrent))return!1;var n=e.getPreviousNonWsToken(t.line,r);return!(!n||"PREFIX"!=n.string.toUpperCase())},e.exports.preprocessPrefixTokenForCompletion=function(e,t){var r=e.getPreviousNonWsToken(e.getCursor().line,t);return r&&r.string&&":"==r.string.slice(-1)&&(t={start:r.start,end:t.end,string:r.string+" "+t.string,state:t.state}),t},e.exports.appendPrefixIfNeeded=function(e,t){if(e.autocompleters.getTrie(t)&&e.options.autocompleters&&-1!=e.options.autocompleters.indexOf(t)){var r=e.getCursor(),i=e.getTokenAt(r);if("prefixed"==n[i.type]){var o=i.string.indexOf(":");if(-1!==o){var s=e.getPreviousNonWsToken(r.line,i).string.toUpperCase(),a=e.getTokenAt({line:r.line,ch:i.start});if("PREFIX"!=s&&("ws"==a.type||null==a.type)){var u=i.string.substring(0,o+1);if(null==e.getPrefixesFromQuery()[u.slice(0,-1)]){var l=e.autocompleters.getTrie(t).autoComplete(u);l.length>0&&e.addPrefixes(l[0])}}}}}},e.exports.fetchFrom=(0===window.location.protocol.indexOf("http")?"//":"http://")+"prefix.cc/popular/all.file.json"},5399:(e,t,r)=>{"use strict";var i=r(8734);e.exports=function(t,i){return{isValidCompletionPosition:function(){return e.exports.isValidCompletionPosition(t)},get:function(e,i){return r(1265).fetchFromLov(t,this,e,i)},preProcessToken:function(r){return e.exports.preProcessToken(t,r)},postProcessToken:function(r,i){return e.exports.postProcessToken(t,r,i)},async:!0,bulk:!1,autoShow:!1,persistent:i,callbacks:{validPosition:t.autocompleters.notifications.show,invalidPosition:t.autocompleters.notifications.hide}}},e.exports.isValidCompletionPosition=function(e){var t=e.getCompleteToken();if(0==t.string.length)return!1;if(0==t.string.indexOf("?"))return!1;if(i.inArray("a",t.state.possibleCurrent)>=0)return!0;var r=e.getCursor();return"rdfs:subPropertyOf"==e.getPreviousNonWsToken(r.line,t).string},e.exports.preProcessToken=function(e,t){return r(1265).preprocessResourceTokenForCompletion(e,t)},e.exports.postProcessToken=function(e,t,i){return r(1265).postprocessResourceTokenForCompletion(e,t,i)}},1265:(e,t,r)=>{"use strict";var i=r(8734),n=(r(1265),r(8372)),o=0===window.location.protocol.indexOf("http")?"https://":"http://";e.exports={fetchFromLov:function(e,t,s,a){if(!s||!s.string||0==s.string.trim().length)return e.autocompleters.notifications.getEl(t).empty().append("Nothing to autocomplete yet!"),!1;var u={q:s.autocompletionString,page:1};"classes"==t.name?u.type="class":u.type="property";var l=[],c="",h=function(){c=o+"lov.linkeddata.es/dataset/lov/api/v2/autocomplete/terms?"+i.param(u)};h();var p=function(){i.get(c,(function(r){for(var n=0;n<r.results.length;n++)i.isArray(r.results[n].uri)&&r.results[n].uri.length>0?l.push(r.results[n].uri[0]):l.push(r.results[n].uri);l.length<r.total_results&&l.length<50?(u.page++,h(),p()):(l.length>0?e.autocompleters.notifications.hide(e,t):e.autocompleters.notifications.getEl(t).text("0 matches found..."),a(l))})).fail((function(r,i,n){e.autocompleters.notifications.getEl(t).empty().append("Failed fetching suggestions..")}))};e.autocompleters.notifications.getEl(t).empty().append(i("<span>Fetchting autocompletions &nbsp;</span>")).append(i(n.svg.getElement(r(4865).loader)).addClass("notificationLoader")),p()},preprocessResourceTokenForCompletion:function(e,t){var r=e.getPrefixesFromQuery();if(0==!t.string.indexOf("<")&&(t.tokenPrefix=t.string.substring(0,t.string.indexOf(":")+1),null!=r[t.tokenPrefix.slice(0,-1)]&&(t.tokenPrefixUri=r[t.tokenPrefix.slice(0,-1)])),t.autocompletionString=t.string.trim(),0==!t.string.indexOf("<")&&t.string.indexOf(":")>-1)for(var i in r)if(t.tokenPrefix===i+":"){t.autocompletionString=r[i],t.autocompletionString+=t.string.substring(i.length+1);break}return 0==t.autocompletionString.indexOf("<")&&(t.autocompletionString=t.autocompletionString.substring(1)),-1!==t.autocompletionString.indexOf(">",t.length-1)&&(t.autocompletionString=t.autocompletionString.substring(0,t.autocompletionString.length-1)),t},postprocessResourceTokenForCompletion:function(e,t,r){return t.tokenPrefix&&t.autocompletionString&&t.tokenPrefixUri?t.tokenPrefix+r.substring(t.tokenPrefixUri.length):"<"+r+">"}}},9138:(e,t,r)=>{"use strict";var i=r(8734);e.exports=function(e){return{isValidCompletionPosition:function(){var t=e.getTokenAt(e.getCursor());return!("ws"==t.type||!(t=e.getCompleteToken(t))||"?"!==t.string[0]&&"$"!==t.string[0])},get:function(t){if(0==t.trim().length)return[];var r={};i(e.getWrapperElement()).find(".cm-atom").each((function(){var e=this.innerHTML;if("?"===e[0]||"$"===e[0]){var n=i(this).next();if(n.attr("class")&&n.attr("class").indexOf("cm-atom")>=0&&(e+=n.text()),e.length<=1)return;if(0!==e.indexOf(t))return;if(e==t)return;r[e]=!0}}));var n=[];for(var o in r)n.push(o);return n.sort(),n},async:!1,bulk:!1,autoShow:!0}}},9243:(e,t,r)=>{var i=r(7004),n=r(8734),o=function(e){return"'"+e+"'"};e.exports={createCurlString:function(e,t){var r=i.getAjaxConfig(e,t),s=r.url;0!==r.url.indexOf("http")&&(s=window.location.protocol+"//"+window.location.host,0===r.url.indexOf("/")?s+=r.url:s+=window.location.pathname+r.url);var a=["curl",s,"-X",e.options.sparql.requestMethod];for(var u in"POST"==e.options.sparql.requestMethod&&a.push("--data "+o(n.param(r.data))),r.headers)a.push("-H "+o(u+": "+r.headers[u]));return a.join(" ")}}},3268:(e,t,r)=>{var i=r(8734),n=r(9045);n.defaults=i.extend(!0,{},n.defaults,{mode:"sparql11",value:"PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nSELECT * WHERE {\n  ?sub ?pred ?obj .\n} \nLIMIT 10",highlightSelectionMatches:{showToken:/\w/},tabMode:"indent",lineNumbers:!0,lineWrapping:!0,backdrop:!1,foldGutter:{rangeFinder:new n.fold.combine(n.fold.brace,n.fold.prefix)},collapsePrefixesOnLoad:!1,gutters:["gutterErrorBar","CodeMirror-linenumbers","CodeMirror-foldgutter"],matchBrackets:!0,fixedGutter:!0,syntaxErrorCheck:!0,onQuotaExceeded:function(e){console.warn("Could not store in localstorage. Skipping..",e)},extraKeys:{"Ctrl-Space":n.autoComplete,"Cmd-Space":n.autoComplete,"Ctrl-D":n.deleteLine,"Ctrl-K":n.deleteLine,"Shift-Ctrl-K":n.deleteLine,"Cmd-D":n.deleteLine,"Cmd-K":n.deleteLine,"Ctrl-/":n.commentLines,"Cmd-/":n.commentLines,"Ctrl-Alt-Down":n.copyLineDown,"Ctrl-Alt-Up":n.copyLineUp,"Cmd-Alt-Down":n.copyLineDown,"Cmd-Alt-Up":n.copyLineUp,"Shift-Ctrl-F":n.doAutoFormat,"Shift-Cmd-F":n.doAutoFormat,"Ctrl-]":n.indentMore,"Cmd-]":n.indentMore,"Ctrl-[":n.indentLess,"Cmd-[":n.indentLess,"Ctrl-S":n.storeQuery,"Cmd-S":n.storeQuery,"Ctrl-Enter":n.executeQuery,"Cmd-Enter":n.executeQuery,F11:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},Esc:function(e){e.getOption("fullScreen")&&e.setOption("fullScreen",!1)}},cursorHeight:.9,createShareLink:n.createShareLink,createShortLink:null,consumeShareLink:n.consumeShareLink,persistent:function(e){return"yasqe_"+i(e.getWrapperElement()).closest("[id]").attr("id")+"_queryVal"},sparql:{queryName:function(e){return e.getQueryMode()},showQueryButton:!1,endpoint:"http://dbpedia.org/sparql",requestMethod:"POST",acceptHeaderGraph:"text/turtle,*/*;q=0.9",acceptHeaderSelect:"application/sparql-results+json,*/*;q=0.9",acceptHeaderUpdate:"text/plain,*/*;q=0.9",namedGraphs:[],defaultGraphs:[],args:[],headers:{},getQueryForAjax:null,callbacks:{beforeSend:null,complete:null,error:null,success:null},handlers:{}}})},4865:e=>{"use strict";e.exports={query:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 80"><path d="M64.622 2.41H14.995c-6.627 0-12 5.374-12 12V64.31c0 6.627 5.373 12 12 12h49.627c6.627 0 12-5.373 12-12V14.41c0-6.627-5.373-12-12-12zM24.125 63.907V15.093L61 39.168 24.125 63.906z"/></svg>',queryInvalid:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 73.627 73.897"><path d="M61.627 0H12C5.373 0 0 5.373 0 12v49.897c0 6.627 5.373 12 12 12h49.627c6.627 0 12-5.373 12-12V12c0-6.628-5.373-12-12-12zM21.13 61.495V12.682l36.875 24.075L21.13 61.495z"/><path d="M66.13 65.904H49.77c-1.647 0-2.89-.58-3.5-1.636-.608-1.056-.49-2.422.334-3.848l8.18-14.167c.822-1.427 1.947-2.212 3.165-2.212s2.342.786 3.165 2.213l8.18 14.167c.824 1.426.942 2.792.333 3.848-.61 1.055-1.852 1.636-3.5 1.636zm-6.51-4.986c0-.85-.69-1.54-1.54-1.54-.85 0-1.54.69-1.54 1.54 0 .85.69 1.54 1.54 1.54.85 0 1.54-.69 1.54-1.54zm.04-9.266c0-.873-.708-1.58-1.58-1.58-.874 0-1.582.707-1.582 1.58l.374 5.61h.005c.054.62.568 1.108 1.202 1.108.586 0 1.075-.415 1.188-.968.01-.045.01-.093.014-.14h.01l.368-5.61z" fill="#a80"/></svg>',download:'<svg xmlns="http://www.w3.org/2000/svg" baseProfile="tiny" viewBox="0 0 100 100"><path fill-rule="evenodd" d="M88 84v-2c0-2.96-.86-4-4-4H16c-2.96 0-4 .98-4 4v2c0 3.102 1.04 4 4 4h68c3.02 0 4-.96 4-4zM58 12H42c-5 0-6 .94-6 6v22H16l34 34 34-34H64V18c0-5.06-1.06-6-6-6z"/></svg>',share:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M36.764 50c0 .308-.07.598-.088.905l32.247 16.12c2.76-2.34 6.293-3.798 10.195-3.798C87.89 63.227 95 70.337 95 79.11 95 87.89 87.89 95 79.118 95c-8.78 0-15.882-7.11-15.882-15.89 0-.317.07-.6.088-.906l-32.247-16.12c-2.77 2.33-6.293 3.79-10.195 3.79C12.11 65.873 5 58.77 5 50c0-8.78 7.11-15.89 15.882-15.89 3.902 0 7.427 1.467 10.195 3.796l32.247-16.12c-.018-.307-.088-.597-.088-.913C63.236 12.11 70.338 5 79.118 5 87.89 5 95 12.11 95 20.873c0 8.78-7.11 15.89-15.882 15.89-3.91 0-7.436-1.467-10.195-3.805L36.676 49.086c.017.308.088.598.088.914z"/></svg>',warning:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 66.399998 66.399998"><g fill="red"><path d="M33.2 0C14.9 0 0 14.9 0 33.2c0 18.3 14.9 33.2 33.2 33.2 18.3 0 33.2-14.9 33.2-33.2C66.4 14.9 51.5 0 33.2 0zm0 59.4C18.7 59.4 7 47.6 7 33.2 7 18.7 18.8 7 33.2 7c14.4 0 26.2 11.8 26.2 26.2 0 14.4-11.8 26.2-26.2 26.2z"/><path d="M33.1 45.6c-1.4 0-2.5.5-3.5 1.5-.9 1-1.4 2.2-1.4 3.6 0 1.6.5 2.8 1.5 3.8 1 .9 2.1 1.3 3.4 1.3 1.3 0 2.4-.5 3.4-1.4 1-.9 1.5-2.2 1.5-3.7 0-1.4-.5-2.6-1.4-3.6-.9-1-2.1-1.5-3.5-1.5zM33.3 12.4c-1.5 0-2.8.5-3.7 1.6-.9 1-1.4 2.4-1.4 4.2 0 1.1.1 2.9.2 5.6l.8 13.1c.2 1.8.4 3.2.9 4.1.5 1.2 1.5 1.8 2.9 1.8 1.3 0 2.3-.7 2.9-1.9.5-1 .7-2.3.9-4l1.1-13.4c.1-1.3.2-2.5.2-3.8 0-2.2-.3-3.9-.8-5.1-.5-1-1.6-2.2-4-2.2z"/></g></svg>',fullscreen:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="5 -10 100 100"><path d="M5-10v38.89L21.667 12.22 38.334 28.89l5.555-5.556L27.22 6.667 43.89-10H5zM105-10v38.89L88.333 12.22 71.667 28.89l-5.556-5.556L82.778 6.667 66.11-10H105zM5 90V51.11l16.667 16.667L38.334 51.11l5.555 5.557L27.22 73.333 43.89 90H5zM105 90V51.11L88.333 67.778 71.667 51.11l-5.556 5.557 16.667 16.666L66.11 90H105z" fill="#010101"/></svg>',smallscreen:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="5 -10 100 100"><path d="M43.89 28.89V-10L27.22 6.667 10.555-10 5-4.445l16.667 16.667L5 28.89h38.89zM66.11 28.89V-10L82.78 6.667 99.444-10 105-4.445 88.334 12.222 105 28.89H66.11zM43.89 51.11V90L27.22 73.334 10.555 90 5 84.444l16.667-16.666L5 51.11h38.89zM66.11 51.11V90L82.78 73.334 99.444 90 105 84.444 88.334 67.778 105 51.11H66.11z" fill="#010101"/></svg>'}},9045:(e,t,r)=>{"use strict";window.console=window.console||{log:function(){}};var i=r(8734),n=r(7866),o=r(4209),s=r(8372),a=r(4865);r(7706),r(4007),r(9023),r(3141),r(3828),r(7216),r(6861),r(4750),r(6076),r(9278),r(2784),r(1556);var u=e.exports=function(e,t){var r=i("<div>",{class:"yasqe"}).appendTo(i(e));t=l(t);var o=c(n(r[0],t));return d(o),o},l=function(e){return i.extend(!0,{},u.defaults,e)},c=function(e){e.autocompleters=r(7014)(u,e),e.options.autocompleters&&e.options.autocompleters.forEach((function(t){u.Autocompleters[t]&&e.autocompleters.init(t,u.Autocompleters[t])})),e.emit=function(t,r){u.signal(e,t,r)},e.lastQueryDuration=null,e.getCompleteToken=function(t,i){return r(5595).getCompleteToken(e,t,i)},e.getPreviousNonWsToken=function(t,i){return r(5595).getPreviousNonWsToken(e,t,i)},e.getNextNonWsToken=function(t,i){return r(5595).getNextNonWsToken(e,t,i)},e.collapsePrefixes=function(t){void 0===t&&(t=!0),e.foldCode(r(7216).findFirstPrefixLine(e),u.fold.prefix,t?"fold":"unfold")};var t=null,n=null;return e.setBackdrop=function(r){(e.options.backdrop||0===e.options.backdrop||"0"===e.options.backdrop)&&(null===n&&1==(n=+e.options.backdrop)&&(n=400),t||(t=i("<div>",{class:"backdrop"}).click((function(){i(this).hide()})).insertAfter(i(e.getWrapperElement()))),r?t.show(n):t.hide(n))},e.query=function(t){u.executeQuery(e,t)},e.getUrlArguments=function(t){return u.getUrlArguments(e,t)},e.getPrefixesFromQuery=function(){return r(7982).getPrefixesFromQuery(e)},e.addPrefixes=function(t){return r(7982).addPrefixes(e,t)},e.removePrefixes=function(t){return r(7982).removePrefixes(e,t)},e.getVariablesFromQuery=function(){return i.map(e.getTokenAt({line:e.lastLine(),ch:e.getLine(e.lastLine()).length},!0).state.variables,(function(e,t){return t}))},e.getQueryWithValues=function(t){if(!t)return e.getValue();var r;if("string"==typeof t)r=t;else{Array.isArray(t)||(t=[t]);var i=t.reduce((function(e,t){for(var r in t)e[r]=r;return e}),{}),n=[];for(var o in i)n.push(o);if(!n.length)return e.getValue();r="VALUES ("+n.join(" ")+") {\n",t.forEach((function(e){r+="( ",n.forEach((function(t){r+=e[t]||"UNDEF"})),r+=" )\n"})),r+="}\n"}if(!r)return e.getValue();var s="",a=!1,l=!1;return u.runMode(e.getValue(),"sparql11",(function(e,t,i,n,o){"keyword"===t&&"select"===e.toLowerCase()&&(l=!0),s+=e,l&&!a&&"punc"===t&&"{"===e&&(a=!0,s+="\n"+r)})),s},e.getValueWithoutComments=function(){var t="";return u.runMode(e.getValue(),"sparql11",(function(e,r){"comment"!=r&&(t+=e)})),t},e.getQueryType=function(){return e.queryType},e.getQueryMode=function(){var t=e.getQueryType();return"INSERT"==t||"DELETE"==t||"LOAD"==t||"CLEAR"==t||"CREATE"==t||"DROP"==t||"COPY"==t||"MOVE"==t||"ADD"==t?"update":"query"},e.setCheckSyntaxErrors=function(t){e.options.syntaxErrorCheck=t,m(e)},e.enableCompleter=function(t){h(e.options,t),u.Autocompleters[t]&&e.autocompleters.init(t,u.Autocompleters[t])},e.disableCompleter=function(t){p(e.options,t)},e},h=function(e,t){e.autocompleters||(e.autocompleters=[]),e.autocompleters.push(t)},p=function(e,t){if("object"==typeof e.autocompleters){var r=i.inArray(t,e.autocompleters);r>=0&&(e.autocompleters.splice(r,1),p(e,t))}},d=function(e){var t=o.getPersistencyId(e,e.options.persistent);if(t){var r=s.storage.get(t);r&&e.setValue(r)}u.drawButtons(e),e.on("blur",(function(e,t){u.storeQuery(e)})),e.on("change",(function(e,t){m(e),u.updateQueryButton(e),u.positionButtons(e)})),e.on("changes",(function(){m(e),u.updateQueryButton(e),u.positionButtons(e)})),e.on("cursorActivity",(function(e,t){g(e)})),e.prevQueryValid=!1,m(e),u.positionButtons(e),i(e.getWrapperElement()).on("mouseenter",".cm-atom",(function(){var t=i(this).text();i(e.getWrapperElement()).find(".cm-atom").filter((function(){return i(this).text()===t})).addClass("matchingVar")})).on("mouseleave",".cm-atom",(function(){i(e.getWrapperElement()).find(".matchingVar").removeClass("matchingVar")})),e.options.consumeShareLink&&(e.options.consumeShareLink(e,f()),window.addEventListener("hashchange",(function(){e.options.consumeShareLink(e,f())}))),e.options.collapsePrefixesOnLoad&&e.collapsePrefixes(!0)},f=function(){var e=null;return window.location.hash.length>1&&(e=i.deparam(location.href.split("#")[1])),e&&"query"in e||!(window.location.search.length>1)||(e=i.deparam(window.location.search.substring(1))),e},g=function(e){e.cursor=i(".CodeMirror-cursor"),e.buttons&&e.buttons.is(":visible")&&e.cursor.length>0&&(o.elementsOverlap(e.cursor,e.buttons)?e.buttons.find("svg").attr("opacity","0.2"):e.buttons.find("svg").attr("opacity","1.0"))},m=function(e,t){e.queryValid=!0,e.clearGutter("gutterErrorBar");for(var n=null,o=0;o<e.lineCount();++o){var u=!1;e.prevQueryValid||(u=!0);var l=e.getTokenAt({line:o,ch:e.getLine(o).length},u);if(n=l.state,e.queryType=n.queryType,0==n.OK){if(!e.options.syntaxErrorCheck)return void i(e.getWrapperElement()).find(".sp-error").css("color","black");var c=s.svg.getElement(a.warning);n.errorMsg?r(9117)(e,c,(function(){return i("<div/>").text(l.state.errorMsg).html()})):n.possibleCurrent&&n.possibleCurrent.length>0&&r(9117)(e,c,(function(){var e=[];return n.possibleCurrent.forEach((function(t){e.push("<strong style='text-decoration:underline'>"+i("<div/>").text(t).html()+"</strong>")})),"This line is invalid. Expected: "+e.join(", ")})),c.style.marginTop="2px",c.style.marginLeft="2px",c.className="parseErrorIcon",e.setGutterMarker(o,"gutterErrorBar",c),e.queryValid=!1;break}}if(e.prevQueryValid=e.queryValid,t&&null!=n&&null!=n.stack){var h=n.stack,p=n.stack.length;(p>1||1==p&&"solutionModifier"!=h[0]&&"?limitOffsetClauses"!=h[0]&&"?offsetClause"!=h[0])&&(e.queryValid=!1)}};i.extend(u,n),u.Autocompleters={},u.registerAutocompleter=function(e,t){u.Autocompleters[e]=t,h(u.defaults,e)},u.autoComplete=function(e){e.autocompleters.autoComplete(!1)},u.registerAutocompleter("prefixes",r(6610)),u.registerAutocompleter("properties",r(5399)),u.registerAutocompleter("classes",r(5409)),u.registerAutocompleter("variables",r(9138)),u.positionButtons=function(e){var t=i(e.getWrapperElement()).find(".CodeMirror-vscrollbar"),r=0;t.is(":visible")&&(r=t.outerWidth()),e.buttons.is(":visible")&&e.buttons.css("right",r+4)},u.createShareLink=function(e){var t={};return window.location.hash.length>1&&(t=i.deparam(window.location.hash.substring(1))),t.query=e.getValue(),t},u.getAsCurl=function(e,t){return r(9243).createCurlString(e,t)},u.consumeShareLink=function(e,t){t&&t.query&&e.setValue(t.query)},u.drawButtons=function(e){if(e.buttons=i("<div class='yasqe_buttons'></div>").appendTo(i(e.getWrapperElement())),e.options.createShareLink){var t=i(s.svg.getElement(a.share));t.click((function(r){r.stopPropagation();var n=i("<div class='yasqe_sharePopup'></div>").appendTo(e.buttons);i("html").click((function(){n&&n.remove()})),n.click((function(e){e.stopPropagation()}));var o=i("<input>").val(location.protocol+"//"+location.host+location.pathname+location.search+"#"+i.param(e.options.createShareLink(e)));o.focus((function(){var e=i(this);e.select(),e.mouseup((function(){return e.unbind("mouseup"),!1}))})),n.empty().append(i("<div>",{class:"inputWrapper"}).append(o)),e.options.createShortLink&&(n.addClass("enableShort"),i("<button>Shorten</button>").addClass("yasqe_btn yasqe_btn-sm yasqe_btn-primary").click((function(){i(this).parent().find("button").attr("disabled","disabled"),e.options.createShortLink(o.val(),(function(e,t){e?(o.remove(),n.find(".inputWrapper").append(i("<span>",{class:"shortlinkErr"}).text(e))):o.val(t).focus()}))})).appendTo(n)),i("<button>CURL</button>").addClass("yasqe_btn yasqe_btn-sm yasqe_btn-primary").click((function(){i(this).parent().find("button").attr("disabled","disabled"),o.val(u.getAsCurl(e)).focus()})).appendTo(n);var s=t.position();n.css("top",s.top+t.outerHeight()+parseInt(n.css("padding-top"))+"px").css("left",s.left+t.outerWidth()-n.outerWidth()+"px"),o.focus()})).addClass("yasqe_share").attr("title","Share your query").appendTo(e.buttons)}var r=i("<div>",{class:"fullscreenToggleBtns"}).append(i(s.svg.getElement(a.fullscreen)).addClass("yasqe_fullscreenBtn").attr("title","Set editor full screen").click((function(){e.setOption("fullScreen",!0),e.emit("fullscreen-enter")}))).append(i(s.svg.getElement(a.smallscreen)).addClass("yasqe_smallscreenBtn").attr("title","Set editor to normal size").click((function(){e.setOption("fullScreen",!1),e.emit("fullscreen-leave")})));e.buttons.append(r),e.options.sparql.showQueryButton&&(i("<div>",{class:"yasqe_queryButton"}).click((function(){i(this).hasClass("query_busy")?(e.xhr&&e.xhr.abort(),u.updateQueryButton(e)):e.query()})).appendTo(e.buttons),u.updateQueryButton(e))};var v={busy:"loader",valid:"query",error:"queryInvalid"};u.updateQueryButton=function(e,t){var r=i(e.getWrapperElement()).find(".yasqe_queryButton");0!=r.length&&(t||(t="valid",!1===e.queryValid&&(t="error")),t!=e.queryStatus&&(r.empty().removeClass((function(e,t){return t.split(" ").filter((function(e){return 0==e.indexOf("query_")})).join(" ")})),"busy"==t?(r.append(i("<div>",{class:"loader"})),e.queryStatus=t):"valid"!=t&&"error"!=t||(r.addClass("query_"+t),s.svg.draw(r,a[v[t]]),e.queryStatus=t)))},u.fromTextArea=function(e,t){t=l(t),i("<div>",{class:"yasqe"}).insertBefore(i(e)).append(i(e));var r=c(n.fromTextArea(e,t));return d(r),r},u.storeQuery=function(e){var t=o.getPersistencyId(e,e.options.persistent);t&&s.storage.set(t,e.getValue(),"month",e.options.onQuotaExceeded)},u.commentLines=function(e){for(var t=e.getCursor(!0).line,r=e.getCursor(!1).line,i=Math.min(t,r),n=Math.max(t,r),o=!0,s=i;s<=n;s++){var a=e.getLine(s);if(0==a.length||"#"!=a.substring(0,1)){o=!1;break}}for(s=i;s<=n;s++)o?e.replaceRange("",{line:s,ch:0},{line:s,ch:1}):e.replaceRange("#",{line:s,ch:0})},u.copyLineUp=function(e){var t=e.getCursor(),r=e.lineCount();e.replaceRange("\n",{line:r-1,ch:e.getLine(r-1).length});for(var i=r;i>t.line;i--){var n=e.getLine(i-1);e.replaceRange(n,{line:i,ch:0},{line:i,ch:e.getLine(i).length})}},u.copyLineDown=function(e){u.copyLineUp(e);var t=e.getCursor();t.line++,e.setCursor(t)},u.doAutoFormat=function(e){e.somethingSelected()||e.execCommand("selectAll");var t={line:e.getCursor(!1).line,ch:e.getSelection().length};y(e,e.getCursor(!0),t)};var y=function(e,t,r){var i=e.indexFromPos(t),n=e.indexFromPos(r),o=_(e.getValue(),i,n);e.operation((function(){e.replaceRange(o,t,r);for(var n=e.posFromIndex(i).line,s=e.posFromIndex(i+o.length).line,a=n;a<=s;a++)e.indentLine(a,"smart")}))},_=function(e,t,r){e=e.substring(t,r);var o=[["keyword","ws","prefixed","ws","uri"],["keyword","ws","uri"]],s=["{",".",";"],a=["}"],u="",l="",c=[];return n.runMode(e,"sparql11",(function(e,t){c.push(t);var r=function(e,t){for(var r=0;r<o.length;r++)if(c.valueOf().toString()==o[r].valueOf().toString())return 1;for(r=0;r<s.length;r++)if(e==s[r])return 1;for(r=0;r<a.length;r++)if(""!=i.trim(l)&&e==a[r])return-1;return 0}(e);0!=r?(1==r?(u+=e+"\n",l=""):(u+="\n"+e,l=e),c=[]):(l+=e,u+=e),1==c.length&&"sp-ws"==c[0]&&(c=[])})),i.trim(u.replace(/\n\s*\n/g,"\n"))};r(7004),r(3268),u.$=i,u.version={CodeMirror:n.version,YASQE:r(2018).i8,jquery:i.fn.jquery,"yasgui-utils":s.version}},7216:(e,t,r)=>{var i=r(7866),n=r(5595),o="PREFIX ";function s(e,t,r,n){r||(r=0),n||(n=e.getLine(t)),n=n.toUpperCase();for(var s=r,a=0;;){var u=n.indexOf(o,s);if(-1!=u){if(1==a&&u<r)break;var l=e.getTokenTypeAt(i.Pos(t,u+1));if(!/^(comment|string)/.test(l))return u+1;if((s=u-1)===a)break}else{if(1==a)break;a=1,s=n.length}}}e.exports={findFirstPrefixLine:function(e){for(var t=e.lastLine(),r=0;r<=t;++r)if(s(e,r)>=0)return r}},i.registerHelper("fold","prefix",(function(e,t){var r=t.line,a=e.getLine(r),u=function(t,r){var o=e.getTokenAt(i.Pos(t,r+1));if(!o||"keyword"!=o.type)return-1;var s=n.getNextNonWsToken(e,t,o.end+1);if(!s||"string-2"!=s.type)return-1;var a=n.getNextNonWsToken(e,t,s.end+1);return a&&"variable-3"==a.type?a.end:-1};if(!function(){for(var t=!1,i=r-1;i>=0;i--)if(e.getLine(i).toUpperCase().indexOf(o)>=0){t=!0;break}return t}()){var l=s(e,r,t.ch,a);if(null!=l){for(var c,h=!1,p=e.lastLine(),d=u(r,l),f=r,g=r;g<=p&&!h;++g)for(var m=e.getLine(g),v=g==r?l+1:0;;){!h&&m.indexOf("{")>=0&&(h=!0);var y=m.toUpperCase().indexOf(o,v);if(!(y>=0))break;(c=u(g,y))>0&&(f=g,v=d=c),v++}return{from:i.Pos(r,l+o.length),to:i.Pos(f,d)}}}}))},7982:e=>{"use strict";var t=function(e,t){e.replaceRange("PREFIX "+t+"\n",{line:0,ch:0}),e.collapsePrefixes(!1)};e.exports={addPrefixes:function(e,r){var i=e.getPrefixesFromQuery();if("string"==typeof r)t(e,r);else for(var n in r)n in i||t(e,n+": <"+r[n]+">");e.collapsePrefixes(!1)},getPrefixesFromQuery:function(e){return e.getTokenAt({line:e.lastLine(),ch:e.getLine(e.lastLine()).length},!0).state.prefixes},removePrefixes:function(e,t){for(var r in t)e.setValue(e.getValue().replace(new RegExp("PREFIX\\s*"+r+":\\s*"+("<"+t[r]+">").replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"\\s*","ig"),""));e.collapsePrefixes(!1)}}},7004:(e,t,r)=>{"use strict";var i=r(8734),n=r(4209),o=r(9045);o.getAjaxConfig=function(e,t){var n="function"==typeof t?t:null,a="object"==typeof t?t:{};if(e.options.sparql&&(a=i.extend({},e.options.sparql,a)),a.handlers&&i.extend(!0,a.callbacks,a.handlers),a.endpoint&&0!=a.endpoint.length){var u=e.getQueryMode(),l={url:"function"==typeof a.endpoint?a.endpoint(e):a.endpoint,type:"update"==u?"POST":"function"==typeof a.requestMethod?a.requestMethod(e):a.requestMethod,headers:{Accept:s(e,a)}};a.xhrFields&&(l.xhrFields=a.xhrFields);var c=!1;if(a.callbacks)for(var h in a.callbacks)a.callbacks[h]&&(c=!0,l[h]=a.callbacks[h]);if("GET"===l.type){var p=!0;i.each(e.getUrlArguments(a),(function(e,t){l.url+=(p?"?":"&")+t.name+"="+encodeURIComponent(t.value),p=!1}))}else l.data=e.getUrlArguments(a);if(c||n){n&&(l.complete=n),a.headers&&!i.isEmptyObject(a.headers)&&i.extend(l.headers,a.headers);var d=new Date,f=[function(){r(9045).signal(e,"queryFinish",arguments)},function(){e.lastQueryDuration=new Date-d,o.updateQueryButton(e),e.setBackdrop(!1)}];return l.complete&&f.push(l.complete),l.complete=f,l}}},o.executeQuery=function(e,t){o.signal(e,"query",e,t),o.updateQueryButton(e,"busy"),e.setBackdrop(!0),e.xhr=i.ajax(o.getAjaxConfig(e,t))},o.getUrlArguments=function(e,t){var r=e.getQueryMode(),o=[{name:n.getString(e,e.options.sparql.queryName),value:t.getQueryForAjax?t.getQueryForAjax(e):e.getValue()}];if(t.namedGraphs&&t.namedGraphs.length>0)for(var s="query"==r?"named-graph-uri":"using-named-graph-uri ",a=0;a<t.namedGraphs.length;a++)o.push({name:s,value:t.namedGraphs[a]});if(t.defaultGraphs&&t.defaultGraphs.length>0)for(s="query"==r?"default-graph-uri":"using-graph-uri ",a=0;a<t.defaultGraphs.length;a++)o.push({name:s,value:t.defaultGraphs[a]});return t.args&&t.args.length>0&&i.merge(o,t.args),o};var s=function(e,t){var r=null;if(!t.acceptHeader||t.acceptHeaderGraph||t.acceptHeaderSelect||t.acceptHeaderUpdate)if("update"==e.getQueryMode())r="function"==typeof t.acceptHeader?t.acceptHeaderUpdate(e):t.acceptHeaderUpdate;else{var i=e.getQueryType();r="DESCRIBE"==i||"CONSTRUCT"==i?"function"==typeof t.acceptHeaderGraph?t.acceptHeaderGraph(e):t.acceptHeaderGraph:"function"==typeof t.acceptHeaderSelect?t.acceptHeaderSelect(e):t.acceptHeaderSelect}else r="function"==typeof t.acceptHeader?t.acceptHeader(e):t.acceptHeader;return r};e.exports={getAjaxConfig:o.getAjaxConfig}},5595:e=>{"use strict";var t=function(e,r,i){i||(i=e.getCursor()),r||(r=e.getTokenAt(i));var n=e.getTokenAt({line:i.line,ch:r.start});return null!=n.type&&"ws"!=n.type&&null!=r.type&&"ws"!=r.type?(r.start=n.start,r.string=n.string+r.string,t(e,r,{line:i.line,ch:n.start})):null!=r.type&&"ws"==r.type?(r.start=r.start+1,r.string=r.string.substring(1),r):r},r=function(e,t,i){var n=e.getTokenAt({line:t,ch:i.start});return null!=n&&"ws"==n.type&&(n=r(e,t,n)),n},i=function(e,t,r){null==r&&(r=1);var n=e.getTokenAt({line:t,ch:r});return null==n||null==n||n.end<r?null:"ws"==n.type?i(e,t,n.end+1):n};e.exports={getPreviousNonWsToken:r,getCompleteToken:t,getNextNonWsToken:i}},9117:(e,t,r)=>{"use strict";var i=r(8734);r(4209),e.exports=function(e,t,r){var n;(t=i(t)).hover((function(){"function"==typeof r&&(r=r()),n=i("<div>").addClass("yasqe_tooltip").html(r).appendTo(t),o()}),(function(){i(".yasqe_tooltip").remove()}));var o=function(){i(e.getWrapperElement()).offset().top>=n.offset().top&&(n.css("bottom","auto"),n.css("top","26px"))}}},4209:(e,t,r)=>{"use strict";var i=r(8734),n=function(){function e(e){var t,r,n;return t=i(e).offset(),r=i(e).width(),n=i(e).height(),[[t.left,t.left+r],[t.top,t.top+n]]}function t(e,t){var r,i;return r=e[0]<t[0]?e:t,i=e[0]<t[0]?t:e,r[1]>i[0]||r[0]===i[0]}return function(r,i){var n=e(r),o=e(i);return t(n[0],o[0])&&t(n[1],o[1])}}();e.exports={keyExists:function(e,t){var r=!1;try{void 0!==e[t]&&(r=!0)}catch(e){}return r},getPersistencyId:function(e,t){var r=null;return t&&(r="string"==typeof t?t:t(e)),r},elementsOverlap:n,getString:function(e,t){return"function"==typeof t?t(e):t}}},1139:()=>{},4971:()=>{},7870:e=>{"use strict";e.exports={i8:"1.6.7"}},2018:e=>{"use strict";e.exports={i8:"2.11.22"}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var t=__webpack_require__.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e+"../"})(),__webpack_require__(2830),__webpack_require__(1711),__webpack_require__(7544),__webpack_require__(5386),__webpack_require__(2202),__webpack_require__(6068),__webpack_require__(8133),__webpack_require__(9286),__webpack_require__(2362),__webpack_require__(7478),__webpack_require__(7058),__webpack_require__(4235),__webpack_require__(3126),__webpack_require__(6241),__webpack_require__(8298);var __webpack_exports__=__webpack_require__(1948),__webpack_export_target__=window;for(var i in __webpack_exports__)__webpack_export_target__[i]=__webpack_exports__[i];__webpack_exports__.__esModule&&Object.defineProperty(__webpack_export_target__,"__esModule",{value:!0})})();